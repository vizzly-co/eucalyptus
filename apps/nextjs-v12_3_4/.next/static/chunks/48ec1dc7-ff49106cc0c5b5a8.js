"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[203],{63561:function(e,t,n){var i=n(21876).Buffer;function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var o=n(67294),a=r(o),l=r(n(41609)),s=n(96486),u=r(s),d=n(64592),c=n(67429),p=r(n(71522)),f=n(76559),m=n(70917),h=n(35944),v=r(n(28670)),g=n(18872),b=r(n(8417)),x=n(73935),y=r(n(74221)),w=n(63153),C=n(63801);n(13179);var j=n(36829),S=r(n(30381));n(40474);var F=n(48288),k=n(99168),T=n(55914),_=n(3310),I=n(34119),A=n(48943),D=n(4267),O=n(44308),E=r(n(5021)),L=n(81444),P=n(61027),R=n(58788),N=r(n(73391)),M=n(81472),z=n(25465),q=n(78511),B=n(99936),V=r(n(95142)),W=n(42725),H=r(n(94301)),Y=r(n(33082)),G=r(n(20640)),U=r(n(61120)),K=n(93162),X=r(n(91819)),Q=n(51781),J=r(n(23493));function Z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Z=function(){return!!e})()}function $(){$=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(d){u=function(e,t,n){return e[t]=n}}function c(t,n,i,o){var a,l,s,u,d=Object.create((n&&n.prototype instanceof g?n:g).prototype);return r(d,"_invoke",{value:(a=t,l=i,s=new I(o||[]),u=f,function(t,n){if(u===m)throw Error("Generator is already running");if(u===h){if("throw"===t)throw n;return{value:e,done:!0}}for(s.method=t,s.arg=n;;){var i=s.delegate;if(i){var r=k(i,s);if(r){if(r===v)continue;return r}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(u===f)throw u=h,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);u=m;var o=p(a,l,s);if("normal"===o.type){if(u=s.done?h:"suspendedYield",o.arg===v)continue;return{value:o.arg,done:s.done}}"throw"===o.type&&(u=h,s.method="throw",s.arg=o.arg)}})}),d}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(i){return{type:"throw",arg:i}}}t.wrap=c;var f="suspendedStart",m="executing",h="completed",v={};function g(){}function b(){}function x(){}var y={};u(y,a,function(){return this});var w=Object.getPrototypeOf,C=w&&w(w(A([])));C&&C!==n&&i.call(C,a)&&(y=C);var j=x.prototype=g.prototype=Object.create(y);function S(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function F(e,t){var n;r(this,"_invoke",{value:function(r,o){function a(){return new t(function(n,a){!function n(r,o,a,l){var s=p(e[r],e,o);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==typeof d&&i.call(d,"__await")?t.resolve(d.__await).then(function(e){n("next",e,a,l)},function(e){n("throw",e,a,l)}):t.resolve(d).then(function(e){u.value=e,a(u)},function(e){return n("throw",e,a,l)})}l(s.arg)}(r,o,n,a)})}return n=n?n.then(a,a):a()}})}function k(t,n){var i=n.method,r=t.iterator[i];if(r===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+i+"' method")),v;var o=p(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw TypeError(typeof t+" is not iterable")}return b.prototype=x,r(j,"constructor",{value:x,configurable:!0}),r(x,"constructor",{value:b,configurable:!0}),b.displayName=u(x,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,u(e,s,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},S(F.prototype),u(F.prototype,l,function(){return this}),t.AsyncIterator=F,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var a=new F(c(e,n,i,r),o);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},S(j),u(j,s,"Generator"),u(j,a,function(){return this}),u(j,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=A,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(i,r){return l.type="throw",l.arg=t,n.next=i,r&&(n.method="next",n.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],l=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;_(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:A(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),v}},t}function ee(e,t,n,i,r,o,a){try{var l=e[o](a),s=l.value}catch(u){return void n(u)}l.done?t(s):Promise.resolve(s).then(i,r)}function et(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var o=e.apply(t,n);function a(e){ee(o,i,r,a,l,"next",e)}function l(e){ee(o,i,r,a,l,"throw",e)}a(void 0)})}}function en(){return(en=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function ei(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,eo(e,t)}function er(e){return(er=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eo(e,t){return(eo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ea(e){var t="function"==typeof Map?new Map:void 0;return(ea=function(e){if(null===e||!function(e){try{return -1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(Z())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,t);var r=new(e.bind.apply(e,i));return n&&eo(r,n.prototype),r}(e,arguments,er(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),eo(n,e)})(e)}function el(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)t.indexOf(n=o[i])>=0||(r[n]=e[n]);return r}function es(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function ed(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return eu(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eu(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ec=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={error:void 0,tryCount:0},n}ei(t,e),t.getDerivedStateFromError=function(e){return{hasError:!0}};var n=t.prototype;return n.componentDidCatch=function(e,t){var n,i;console.log("Attempt "+this.state.tryCount,e,t),(null==(n=this.props)?void 0:n.onError)&&(null==(i=this.props)||i.onError(e,t)),this.setState({error:e,tryCount:this.state.tryCount+1})},n.render=function(){var e=this;return this.state.tryCount>1?this.props.renderOnError(function(){return e.setState({tryCount:0})},this.state.error):this.props.children},t}(a.Component),ep=d.QueryEngineConfig.Constants.supportedOperatorsConstants,ef=function(e,t){return[].concat(Object.keys(t.supportedOperators)).filter(function(t){return eh[t].validDataTypes.includes(e.dataType)})},em=function(e,t){return"countDistinct"==e?t("count_distinct","Count distinct"):s.capitalize(e)},eh=ep,ev=function(e){return e.map(function(e){return e.map(function(e){return"is_one_of"!=e.op&&"is_not_one_of"!=e.op||s.isArray(e.value)?e:en({},e,{value:[e.value]})})})},eg=function(e,t){return e.map(function(e){var n=en({},e,{aggregate:void 0,function:e.function||e.aggregate});return delete n.aggregate,t&&n.field==t.field&&"none"==n.function&&(n.function=t.truncate),n})},eb=function(e){return e.map(function(e){var t=en({},e,{aggregate:void 0,function:e.function||e.aggregate});return delete t.aggregate,t})},ex=function(e){return"auto"===e||0===e||2===e?e:"auto"},ey=function(e){if(!e)return{};var t={};return e.measure&&Object.entries(e.measure).forEach(function(e){t&&(t[e[0]]=eb(e[1]))}),{measure:s.isEmpty(t)?void 0:t,group:e.group}},ew=d.QueryEngineConfig.Constants.supportedAggregatesConstants;function eC(e,t,n){if(void 0===t&&(t=!0),1==e.length)return t?"'"+e[0]+"'":""+e[0];var i=[].concat(e),r=i.pop();return i.map(function(e){return t?"'"+e+"'":""+e}).join(", ")+" "+(n?n("list_of_values_and","and"):"and")+" "+(t?"'"+r+"'":""+r)}var ej,eS,eF,ek=function(e){for(var t=0,n=0;n<e.length;n++)t+=e.charCodeAt(n);return t},eT=["debug","info","warning","error","properties"],e_="error",eI=function(e,t){return e_=e,t&&t(e_),{logDebug:eO,logError:eR,logInfo:eE,logWarning:eP,logProperties:eL}},eA=function(e){return eT.findIndex(function(e){return e_==e})<=eT.findIndex(function(t){return e==t})},eD=function(e){return e instanceof Error?e:s.isObject(e)||s.isArray(e)?JSON.stringify(e):e},eO=function(){for(var e,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];eA("debug")&&(e=console).info.apply(e,["[VIZZLY DEBUG]"].concat(n.map(eD)))},eE=function(){for(var e,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];eA("info")&&(e=console).info.apply(e,["[VIZZLY INFO]"].concat(n.map(eD)))},eL=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];eA("properties")&&console.info("[VIZZLY Dashboard Properties]",t)},eP=function(){for(var e,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];eA("warning")&&(e=console).warn.apply(e,["[VIZZLY WARNING]"].concat(n.map(eD)))},eR=function(){for(var e,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];eA("error")&&(e=console).error.apply(e,["[VIZZLY ERROR]"].concat(n.map(eD)))},eN=function(e){var t;return(t=function e(t,n,i){var r=s.replace(t,n,i);return r.indexOf(n)>=0?e(r,n,i):r}(e,"_"," ")).charAt(0).toUpperCase()+t.slice(1)},eM=function(e,t,n){return void 0===n&&(n="No value"),null===e||s.isNumber(e)&&isNaN(e)?n:e instanceof Date?t(e):!0===e?"True":!1===e?"False":s.isNumber(e)&&e%1!=0?e.toFixed(2):Array.isArray(e)?e.join(", "):""+e},ez=function(e,t){return void 0===t&&(t="No value"),null===e?t:e instanceof Date?e.toISOString():e},eq=function(e,t){return eB(e,t)[0]},eB=function(e,t){var n,i=null!=(n=e.supportedAggregateOptions)?n:[],r=i.filter(function(n){return Object.keys(t).includes(n)&&t[n].validDataTypes.includes(e.dataType)});return 0===r.length?r=Object.keys(t).filter(function(n){return t[n].validDataTypes.includes(e.dataType)}):r.sort(function(e,t){return i.indexOf(e)-i.indexOf(t)}),r},eV=function(e){return null!=e&&e.function&&"none"!=(null==e?void 0:e.function)?e.field+"_"+e.function:null==e?void 0:e.field},eW=function(e,t){var n=e.split("_"),i=n.pop();return[void 0].concat(Object.keys(t.supportedAggregates||{}),Object.keys(t.supportedTimeTruncFunctions||{}),Object.keys(t.supportedTransformationFunctions||{})).includes(i)?{field:n.join("_"),function:null!=i?i:""}:{field:e,function:"none"}},eH=function(e,t){var n=eW(e,t);return{fieldId:n.field,function:n.function}},eY=function(e,t){var n=new Set(t.map(function(e){return e.field}));return e.filter(function(e){return!n.has(e.id)})},eG=function(e){return e.map(function(e){return"string"==typeof e?{field:e,function:"none"}:e})},eU=function(e){return"string[]"==e.dataType},eK=function(e,t,n){var i=e.supportedAggregates,r=Object.keys(i).filter(function(e){return i[e].validDataTypes.includes(t)});null==n||n.forEach(function(e){i.hasOwnProperty(e)||eP("Unsupported aggregate option: "+e+" on "+t)});var o=n&&n.length>0?n.filter(function(e){return r.includes(e)}):r;return n&&n.length>0&&0===o.length&&(o=r),o},eX=function(e,t,n,i,r){var o;if(n?o=n.field:t&&t.length>0&&t[0].field&&(o=t[0].field),i&&o){var a=i({dataSetId:e,fieldId:o});if(a)return a}return r?r("no_value","No value"):void 0},eQ=d.QueryEngineConfig.Constants.timeDimensionsConstants,eJ=function(e){return null!=e&&e.truncate&&"none"!=(null==e?void 0:e.truncate)?e.field+"_"+e.truncate:null==e?void 0:e.field},eZ=function(e,t){var n=e.split("_"),i=n.pop();return i&&!e$(t,i)?null:{field:n.join("_"),truncate:null!=i?i:""}},e$=function(e,t){return[].concat(Object.keys(e),["none"]).includes(t)},e0=function(){return c.v4().replace(/-/g,"")},e1=function(e,t){return t.length>0&&t[0].length>0?{type:"function",function:e.aggregate,value:{type:"switchField",value:{cases:[{returns:{type:"field",function:"none",value:e.fieldId},filter:t},{returns:{type:"null"},filter:[[{value:1,op:"=",field:{type:"number",value:1}}]]}]}}}:{type:"field",function:e.aggregate,value:e.fieldId}},e2=function(e){return"leftFieldId"in e&&"operator"in e&&"rightFieldId"in e},e5=function(e){return"roundToDecimalPlaces"in e},e7=function(e){return"leftFieldId"in e&&"leftFunction"in e&&"operator"in e&&"rightFieldId"in e&&"rightFunction"in e},e4=function(e){return"denominatorFieldId"in e||"numeratorFieldId"in e},e3=function(e){return"rules"in e},e6=function(e){return"rule"in e},e8=function(e){return"dateCalculationFunction"in e},e9=function(e){if(e4(e))return"percentage";if(e2(e)||e7(e))return"math";if(e3(e))return"rules";if(e5(e))return"roundedNumber";if(e8(e))return"dateCalculation";if(e6(e))return"conditional";throw"Unrecognised custom field type for custom field; "+JSON.stringify(e)},te=function(e){return e4(e)||e2(e)||e7(e)||e3(e)||e5(e)||e8(e)||e6(e)},tt=function(e,t,n,i,r,o){var a,l,s,u,d,c,p,f,m,h,v,g,b,x,y,w,C,j,S,F,k,T,_,I,A,D,O,E,L,P,R,N,M,z,q,B,V,W,H;if(e4(t))return a=t,l=n,s=i,d=u=o,p=[],f=[],(c=a).numeratorFilter&&tc(c.numeratorFilter)?c.numeratorFilter.forEach(function(e){p=[].concat(p,tu(null!=d?d:[],e))}):p=null!=d?d:[],c.denominatorFilter&&tc(c.denominatorFilter)?c.denominatorFilter.forEach(function(e){f=[].concat(f,tu(null!=d?d:[],e))}):f=null!=d?d:[],x=(b={combinedNominatorFilters:p,combinedDenominatorFilters:f}).combinedNominatorFilters,y=b.combinedDenominatorFilters,w={fieldId:null!=(m=a.numeratorFieldId)?m:a.denominatorFieldId,aggregate:null!=(h=a.numeratorAggregate)?h:a.denominatorAggregate},C={fieldId:null!=(v=a.denominatorFieldId)?v:a.numeratorFieldId,aggregate:null!=(g=a.denominatorAggregate)?g:a.numeratorFieldId},j={type:"subquery",value:{measure:[{type:"field",value:a.denominatorFieldId,function:a.denominatorAggregate}],filter:td(y||[],l,s)}},S=e1(C,tc(a.denominatorFilter)?td(y,l,s):[]),{type:"maths",left:e1(w,tc(a.numeratorFilter)?td(x,l,s):[]),op:"/",right:"withinGrouping"===a.denominatorScope?S:j};if(e3(t))return F=e,k=t,T=n,_=i,O={type:"switchField",value:{cases:(I=k.rules,A=T,D=_,I.map(function(e){return{returns:{type:"string",value:e.name},filter:td(e.rule,A,D)}}))}},"none"==F.function?O:{type:"function",function:F.function,value:O};if(e7(t))return E=t,{type:"maths",left:(L=function(e,t,n){return n?{type:"maths",left:{type:"field",value:e,function:t},right:{type:"field",value:n.fieldId,function:n.function},op:n.operator}:{type:"field",value:e,function:t}})(E.leftFieldId,E.leftFunction,E.leftNested),right:L(E.rightFieldId,E.rightFunction,E.rightNested),op:E.operator};if(e2(t))return P=e,R=t,"none"!=P.function?{type:"function",function:P.function,value:{type:"maths",left:{type:"field",value:R.leftFieldId,function:"none"},right:{type:"field",value:R.rightFieldId,function:"none"},op:R.operator}}:{type:"maths",left:{type:"field",value:R.leftFieldId,function:"none"},right:{type:"field",value:R.rightFieldId,function:"none"},op:R.operator};if(e5(t))return N=e,z={type:"field",function:"round_to_"+(M=t).roundToDecimalPlaces+"_dp",value:M.fieldId},"none"==N.function?z:{type:"function",function:N.function,value:z};if(e6(t))return q=t,B=n,V=i,{type:"function",function:q.function,value:{type:"switchField",value:{cases:[{returns:{type:"field",function:"none",value:q.fieldId},filter:td(q.rule,B,V)},{returns:{type:"null"},filter:[[{value:1,op:"=",field:{type:"number",value:1}}]]}]}}};if(e8(t))return W=e,H=t,"none"!=W.function?{type:"function",function:W.function,value:{type:"date_maths",op:H.dateCalculationFunction,left:{type:"field",function:"none",value:H.leftFieldId},right:{type:"field",function:"none",value:H.rightFieldId}}}:{type:"date_maths",op:H.dateCalculationFunction,left:{type:"field",function:"none",value:H.leftFieldId},right:{type:"field",function:"none",value:H.rightFieldId}};throw"Unsupported custom field type; "+JSON.stringify(t)},tn=function(e){if("leftAggregate"in e||"rightAggregate"in e){var t=en({},e,{rightFunction:e.rightFunction||e.rightAggregate,leftFunction:e.leftFunction||e.leftAggregate,leftNested:e.leftNested?en({},e.leftNested,{aggregate:void 0,function:e.leftNested.function||e.leftNested.aggregate}):void 0,rightNested:e.rightNested?en({},e.rightNested,{aggregate:void 0,function:e.rightNested.function||e.rightNested.aggregate}):void 0});return delete t.leftAggregate,delete t.rightAggregate,t.rightNested&&delete t.rightNested.aggregate,t.leftNested&&delete t.leftNested.aggregate,t}if("numeratorFieldId"in e&&!("version"in e)){var n,i,r=[].concat((null==(n=e.numeratorFilter)?void 0:n[0])||[],(null==(i=e.denominatorFilter)?void 0:i[0])||[]);return en({},e,{version:2,denominatorScope:e.denominatorScope||"all",denominatorFilter:(null==e?void 0:e.denominatorFilter)||[],numeratorFilter:r.length>0?[r]:[]})}return e},ti=function(e){return{minutes:{description:e?e("duration_option.minutes","Minutes"):"Minutes",formatter:function(e,t){e.setMinutes(e.getMinutes()+t)}},hours:{description:e?e("duration_option.minutes","Hours"):"Hours",formatter:function(e,t){e.setHours(e.getHours()+t)}},days:{description:e?e("duration_option.minutes","Days"):"Days",formatter:function(e,t){e.setDate(e.getDate()+t)}},weeks:{description:e?e("duration_option.minutes","Weeks"):"Weeks",formatter:function(e,t){e.setDate(e.getDate()+7*t)}},months:{description:e?e("duration_option.minutes","Months"):"Months",formatter:function(e,t){e.setMonth(e.getMonth()+t)}},years:{description:e?e("duration_option.minutes","Years"):"Years",formatter:function(e,t){e.setFullYear(e.getFullYear()+t)}}}},tr=function(e){return{future:{description:e?e("timeframe_option.minutes","Future"):"Future"},past:{description:e?e("timeframe_option.past","Past"):"Past"}}},to=p.object({unit:(ej=p.string()).valid.apply(ej,Object.keys(ti())).required(),value:p.number().integer().required(),timeFrame:(eS=p.string()).valid.apply(eS,Object.keys(tr())).required()});function ta(e){return!to.validate(e).error}var tl,ts=function(e,t){var n=t?new Date(t):new Date;if(!e.value||null===e.unit)throw Error("Unrecognized value: "+e.value);var i="future"===e.timeFrame?e.value:-e.value;return ti()[e.unit].formatter(n,i),n},tu=function(e,t){return e&&!s.isEmpty(e)||(e=[[]]),[].concat(e).map(function(e){return[].concat(e,t)})},td=function(e,t,n){return e.map(function(i){return[].concat(i).flatMap(function(i){if(i.function&&!e$(t.supportedTimeTruncFunctions,i.function))throw"Query engine does not support the query function "+i.function+".";var r,o,a=iP(n,i.field),l={type:"field",value:i.field,function:null!=(r=i.function)?r:"none"};if(te(a)&&(l=tt({field:a.id,function:null!=(o=i.function)?o:"none"},a,t,n,0,e)),"array_contains"==i.op&&Array.isArray(i.value))return[].concat(i.value).map(function(e){return{field:l,op:i.op,value:e}});var s=i.value;return ta(i.value)&&(s=ts(i.value)),[{field:l,op:i.op,value:s}]})})},tc=function(e){return e&&s.isArray(e)&&s.isArray(e[0])},tp=function(e,t){return[[].concat(e,[t]),e.length]},tf=function(e,t,n,i,r,o,a,l,s){var u=[],d=[],c=[],p=[],f=[];if(o){if(!e$(s.supportedTimeTruncFunctions,o.truncate))throw"Query engine does not support the time trunc function "+o.truncate+".";var m,h=tp(d,{type:"field",value:o.field,function:o.truncate});d=h[0],m=h[1],u=[].concat(u,[{functionId:o.truncate,field:iP(e,o.field)}]),c=[].concat(c,[{index:m}])}return r.forEach(function(t){var n,i=tp(d,{type:"field",value:null==t?void 0:t.field,function:t.function});d=i[0],n=i[1],u=[].concat(u,[{functionId:t.function,field:iP(e,t.field)}]),c=[].concat(c,[{index:n}])}),t.forEach(function(t){var n;if(n=t.function,![].concat(Object.keys(s.supportedAggregates),["none"]).includes(n))throw"Query engine does not support the query function "+t.function+".";d=tp(d,{type:"field",value:t.field,function:t.function})[0],u=[].concat(u,[{functionId:t.function,field:iP(e,t.field)}])}),n.forEach(function(e){var t=d.findIndex(function(t){return"field"==t.type&&t.value==e.field&&t.function==e.function});t>=0&&(p=[].concat(p,[{index:t,direction:e.direction}]))}),i.forEach(function(t){var n=td([t],s,e);f=[].concat(f,[n[0]])}),d=d.map(function(t){if("field"==t.type&&"string"==typeof t.value){var n=iP(e,t.value);if(te(n))return tt({function:t.function,field:t.value},n,s,e,tJ({group:c}),i)}return t}),{query:{type:"query",dataSetId:e.id,measure:d,group:c,filter:f,order:p,limit:a,offset:l},measureDescription:u}},tm=function(){return p.array().items(p.object({key:p.string().required()})).min(0)},th=function(e,t){var n=function(e,t){return p.object({field:e.required(),function:t.required().description("Which if any, aggregate function should be applied to the field?")})};return null!=t&&t.restrictFields?p.alternatives.apply(p,t.restrictFields.filter(function(e){return e.canBeMeasure}).map(function(t){var i,r=Object.keys(e).filter(function(n){return e[n].validDataTypes.includes(t.dataType)});return n(p.string().valid(t.id).description(t.publicName+", "+(t.description||"")+"."),(i=p.string()).valid.apply(i,r.concat(["none"])))})):n(p.string().description("The ID of the field from the data set to reference."),p.valid.apply(p,Object.keys(e).concat(["none"])))},tv=function(e){var t;return p.object({field:p.string().required().description("The ID of the field from the data set to reference."),direction:p.string().valid("asc","desc").required().description("In which direction should the results be ordered?"),function:(t=p.string()).valid.apply(t,Object.keys(e.supportedAggregates).concat(Object.keys(e.supportedTimeTruncFunctions),["none"])).description("Which if any, function should be applied to the field?")})},tg=function(e){return p.object({field:p.string().required().description("The ID of the field from the data set to reference."),truncate:p.valid.apply(p,Object.keys(e).concat(["none"])),bucketFill:p.boolean()})},tb=function(e,t){var n=function(t,n){return p.object({field:t.required(),pivot:p.string().valid("x","y").optional(),function:n?p.valid.apply(p,Object.keys(e).concat(["none"])).required():p.valid("none").required()})};return null!=t&&t.restrictFields?p.array().items(p.alternatives.apply(p,t.restrictFields.filter(function(e){return e.canBeDimension}).map(function(e){return n(p.string().valid(e.id).description(e.publicName+", "+(e.description||"")+"."),"date_time"===e.dataType)}))).description("Fields to group the data by"):p.array().items(n(p.string().description("The ID of the field from the data set to reference."),!0)).description("Fields to group the data by")},tx=function(e){var t,n;return p.object({field:p.string().required().description("The ID of the field from the data set to reference."),op:(t=p.string()).valid.apply(t,Object.keys(e.supportedOperators)).required(),value:p.alternatives(p.string().allow(null),p.number(),p.boolean(),p.array().items(p.string(),p.number()),to).required(),function:(n=p.string()).valid.apply(n,Object.keys(e.supportedAggregates).concat(Object.keys(e.supportedTimeTruncFunctions),["none"])).description("Which function should be applied to the field?")})},ty=function(e){return p.array().items(p.array().items(tx(e)))},tw=function(){return p.number().description("Limit the number of results returned after the query has been ran.")},tC=function(e){var t,n=null!=e&&e.restrictDataSetIds?(t=p.string()).valid.apply(t,e.restrictDataSetIds):p.string();return{viewId:p.string().allow("").optional().description("__vizzly_hide_from_docs"),displayTitle:p.string().allow("").description("A title that explains what is being displayed."),displaySubject:p.string().allow("").description("A chance to add a more detailed description of what is being shown."),dataSetId:n.description("The ID of the data set that is being used by the view."),protectedByOrganisation:p.boolean().optional().description("Has the view been created by your organisation, and therefore cannot be modified by your users?")}},tj=p.valid("auto",2,0).description("Determine how many axis labels should be shown on the axis"),tS=function(e,t){return{measure:p.array().items(th(e.supportedAggregates,t)).required().description("A list of metrics that are to be shown. For example the `count` of a specific field in your data set."),dimension:tb(e.supportedTimeTruncFunctions,t).required(),order:p.array().items(tv(e)),limit:tw(),offset:p.number().min(0).description("Paginate results by using this property with limit.")}},tF=function(e,t){return en({},tS(e,t),{filter:p.array().items(p.array().items(tx(e))),timeDimension:p.alternatives(tg(e.supportedTimeTruncFunctions),p.valid(null)).required(),drilldown:p.alternatives(tb(e.supportedTimeTruncFunctions,t).required(),p.string()),xAxisPrefix:p.string().allow("").description("Add a prefix to the X Axis"),yAxisPrefix:p.string().allow("").description("Add a prefix to the Y Axis"),xAxisPostfix:p.string().allow("").description("Add a postfix to the X Axis"),yAxisPostfix:p.string().allow("").description("Add a postfix to the Y Axis"),yAxisFormat:p.alternatives(p.string(),p.valid(null)).description("ID of the formatting function to apply to the Y Axis values"),xAxisFormat:p.alternatives(p.string(),p.valid(null)).description("ID of the formatting function to apply to the X Axis values"),approxYAxisLabelCount:tj,approxXAxisLabelCount:tj})},tk=p.string().valid("natural","straight","step","stepBefore","stepAfter"),tT=function(e){var t;return p.array().items(p.object({function:(t=p.string()).valid.apply(t,Object.keys(e.supportedAggregates).concat(Object.keys(e.supportedTimeTruncFunctions),["none"])),field:p.string().required().description("The ID of the field from the data set to reference.")}))},t_=function(e){var t;return p.array().items(p.object({function:(t=p.string()).valid.apply(t,Object.keys(e.supportedAggregates).concat(Object.keys(e.supportedTimeTruncFunctions),["none"])),truncate:p.string(),field:p.string().required().description("The ID of the field from the data set to reference."),bucketFill:p.boolean().optional(),pivot:p.string().valid("x","y").optional()}))},tI=function(e,t){var n,i,r,o;return p.object({measure:p.object().pattern(p.string(),p.array().items(th(e.supportedAggregates,t)).min(1)).unknown(!0),group:p.object().pattern(p.string(),p.alternatives().try(p.array().items(tg(e.supportedTimeTruncFunctions)).min(1),tb(e.supportedTimeTruncFunctions,t))).unknown(!0)})},tA=function(){return p.object({color:p.string().required(),value:p.number().required(),strokeWidth:p.number().required(),strokeStyle:p.string().valid("dashed","solid").required(),label:p.boolean().optional()})},tD=function(){return p.array().items(tA())},tO=function(){return p.object({func:p.string().valid("mean","sum","current").allow(null).optional()})},tE=function(){return p.object({x:p.string().allow(""),y:p.string().allow("")})},tL=p.object().pattern(p.string(),p.object({width:p.number().min(0),height:p.number().min(0)})),tP=function(e,t){if("dateFilter"==e)return t("date_filter","Date filter");if("dateAndTimeFilter"==e)return t("date_time_filter","Date Time filter");if("singleSelectFilter"==e)return t("single_select_filter","Single select filter");if("multiSelectFilter"==e)return t("multi_select_filter","Multi select filter");if("numericFilter"==e)return t("numeric_filter","Number comparison filter");throw"Unrecognised additional filter type "+e},tR=function(e){return en({},e,{managedByConfiguration:!1})},tN=function(e){return"fields"in e?function(e){if("globalSelectFilter"==e.type)return{type:"singleSelectFilter",title:e.title,value:null,requiresValue:!1,managedByConfiguration:!1,appliesToFields:e.fields.map(function(e){return{fieldId:e.field,dataSetId:e.dataSetId}})};if("globalDateTimeFilter"==e.type)return{type:"dateFilter",value:null,requiresValue:!1,managedByConfiguration:!1,title:e.title,appliesToFields:e.fields.map(function(e){return{fieldId:e.field,dataSetId:e.dataSetId}})};throw"Unrecognised global filter. "+JSON.stringify(e)}(e):en({},e,{type:tW(e.type)})},tM=function(e,t,n){return t.appliesToFields.flatMap(function(i){var r,o,a;if(i.dataSetId!=e.id||null==t.value)return[];if("string[]"==iP(e,i.fieldId).dataType)return[{field:i.fieldId,op:"array_contains",value:t.value}];if(("dateFilter"==t.type||"dateAndTimeFilter"==t.type)&&"relativeRange"==(null==(r=t.value)?void 0:r.type))return[];if(("dateFilter"==t.type||"dateAndTimeFilter"==t.type)&&"fixedRange"==(null==(o=t.value)?void 0:o.type))return[{field:i.fieldId,op:tY(tH.Greater,t),value:t.value.after},{field:i.fieldId,op:tY(tH.Less,t),value:t.value.before}];if(("dateFilter"==t.type||"dateAndTimeFilter"==t.type)&&"relative"==(null==(a=t.value)?void 0:a.type)){var l=n[t.value.value].range,s=l.before,u=l.after,d=[];return s&&(d=[].concat(d,[{field:i.fieldId,op:tY(tH.Less,t),value:s}])),u&&(d=[].concat(d,[{field:i.fieldId,op:tY(tH.Greater,t),value:u}])),d}if("singleSelectFilter"==t.type)return[{field:i.fieldId,op:"=",value:t.value}];if("multiSelectFilter"==t.type&&t.value.length>0)return[{field:i.fieldId,op:"is_one_of",value:t.value}];if("dateFilter"==t.type&&!t.value||"dateAndTimeFilter"==t.type&&!t.value||"multiSelectFilter"==t.type&&0===t.value.length)return[];if("numericFilter"==t.type)return t.value?[{field:i.fieldId,op:t.value.op,value:t.value.value}]:[];throw"Cannot convert filter type "+t.type+" to query attributes filter. "+JSON.stringify(t)})},tz=function(e,t){if("relativeRange"!==(null==(n=e.value)?void 0:n.type)||0===e.value.filters.length)return[];var n,i=[];return(function(e,t){if(!t)throw Error("appliesToFields is required");return e.map(function(e){var n=e.map(function(e){return{op:e.op,value:en({},e.value)}}),i=[];return t.forEach(function(e){n.forEach(function(t){i.push(en({},t,{field:e.fieldId}))})}),i})})(e.value.filters,e.appliesToFields)[0].forEach(function(e){i.push({field:e.field,op:e.op,value:ts(e.value,t)})}),i},tq=function(e,t,n){var i=[];return(e.globalFilters||[]).forEach(function(e){var r=[];"dateAndTimeFilter"!==e.type&&"dateFilter"!==e.type||(r=tz(e)),i=[].concat(i,r,tM(t,e,n))}),Object.values(e.localFilters||{}).flat().forEach(function(e){var r=[];"dateAndTimeFilter"!==e.type&&"dateFilter"!==e.type||(r=tz(e)),i=[].concat(i,r,tM(t,e,n))}),i},tB=function(e,t,n){if(e.title)return e.title;var i=n?n("untitled","Untitled"):"Untitled";return t.forEach(function(t){try{var n=e.appliesToFields[0],r=iP(t,n.fieldId);t.id==n.dataSetId&&n.fieldId==r.id&&(i=r.publicName)}catch(o){}}),i},tV=function(e,t){return[].concat(e).find(function(e){var n,i,r=e.type==t.type,o=(null==(n=e.appliesToFields)?void 0:n.length)==(null==(i=t.appliesToFields)?void 0:i.length),a=s.every(t.appliesToFields,function(t){return s.some(e.appliesToFields,function(e){return e.fieldId==t.fieldId&&e.dataSetId==t.dataSetId})});return r&&o&&a})},tW=function(e){return"dateTimeFilter"===e?"dateFilter":e},tH=((tl={})[tl.Greater=0]="Greater",tl[tl.Less=1]="Less",tl);function tY(e,t){switch(e){case tH.Greater:return t.inclusiveDate?">=":">";case tH.Less:return t.inclusiveDate?"<=":"<";default:throw Error("Unknown date operation")}}var tG=function(e){return"optionsPulledFrom"in e&&e.optionsPulledFrom&&0!==e.optionsPulledFrom.length?en({},e,{appliesToFields:[].concat(e.optionsPulledFrom)}):e},tU=p.object({fieldId:p.string().required(),dataSetId:p.string().required()}),tK=function(e){var t;return{title:p.string().allow(""),managedByConfiguration:p.boolean().optional(),requiresValue:p.boolean().optional(),optionsFilters:p.object().pattern(p.string(),p.array().items(tx(e)).optional()).optional(),appliesToFields:p.array().items(tU).required(),optionsPulledFrom:p.array().items(tU).optional(),hidden:p.boolean(),options:p.array().items(p.object({value:p.allow(p.number(),p.string()),label:p.string()})).optional()}},tX=function(e,t,n){return p.object(en({},tK(e),{type:p.valid(n).required(),inclusiveDate:p.boolean().optional(),value:p.alternatives(p.valid.apply(p,t?[]:[null]),p.object({type:p.valid("fixedRange"),before:p.alternatives(p.date()).required(),after:p.alternatives(p.date()).required()}),p.object({type:p.valid("relative"),value:p.string()}),p.object({type:p.valid("relativeRange"),filters:p.array()}))}))},tQ=function(e,t){var n,i,r,o,a,l;return p.alternatives().conditional(".type",{is:"singleSelectFilter",then:p.object(en({},tK(e),{type:p.valid("singleSelectFilter").required(),value:p.alternatives(p.string(),p.number(),p.boolean(),p.valid.apply(p,t?[]:[null]))}))}).conditional(".type",{is:"dateFilter",then:tX(e,t,"dateFilter")}).conditional(".type",{is:"dateAndTimeFilter",then:tX(e,t,"dateAndTimeFilter")}).conditional(".type",{is:"multiSelectFilter",then:p.object(en({},tK(e),{type:p.valid("multiSelectFilter").required(),value:p.alternatives(p.array().items(p.string(),p.number()).single(),p.valid.apply(p,t?[]:[null]))}))}).conditional(".type",{is:"numericFilter",then:p.object(en({},tK(e),{type:p.valid("numericFilter").required(),value:p.alternatives(p.object({op:p.allow("=","<",">","<=",">="),value:p.number().allow(null,0)}),p.valid.apply(p,t?[]:[null]))}))})},tJ=function(e){return e.group.length>0},tZ=function(e,t,n){return{query:{type:"preparedQuery",preparedQueryType:"uniqueArrayValues",dataSetId:e,fieldId:t.id,filter:n||[]},resultFields:[{id:t.id,publicName:t.publicName,dataType:t.dataType}]}},t$=function(e,t,n){return{dataSetId:e.id,measure:[{field:t,function:"count"}],order:[],filter:n?[n]:[],dimension:[{field:t,function:"none"}],timeDimension:null,limit:5e3,offset:0}},t0=function(e,t){return e.supportedFeatures.includes(t)},t1=function(e,t,n){var i={};return e.forEach(function(e){var r=t.filter(function(t){return t.appliesToFields.find(function(t){return t.dataSetId===e.id})}).map(function(t){return tM(e,t,n)});i[e.id]=r}),i};function t2(e,t){return t&&e.map(function(e){var n=t[e.dataSetId].flat();0!==n.length&&e.filter.push(n)}),e}var t5=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="ValidationError",n}return ei(t,e),t}(ea(Error)),t7=function(e){function t(t,n){var i;return(i=e.call(this,"\n    An expected field is missing from a dataSet.\n\n    Missing '"+n+"'. Got;\n    "+JSON.stringify(t)+"\n  ")||this).missingFieldId=void 0,i.name="FieldNotFoundInDataSet",i.missingFieldId=n,i}return ei(t,e),t.prototype.getMissingFieldId=function(){return this.missingFieldId},t}(t5),t4=function(e){return"none"!=e.function};function t3(e,t){for(var n={},i=0,r=Object.entries(e);i<r.length;i++){var o=r[i];n[o[0]]=o[1].filter(function(e){return(null==e?void 0:e.field)!==t})}return n}var t6=function(e,t){return en({},e,{order:s.remove(e.order,function(e){return s.some(t,function(t){return t.function==e.function&&t.field==e.field})})})},t8=function(e,t,n){var i,r,o,a=en({},e);if("measure"in a&&s.remove(a.measure,function(e){return e.field==t}),"barMeasure"in a&&s.remove(a.barMeasure,function(e){return e.field==t}),"lineMeasure"in a&&s.remove(a.lineMeasure,function(e){return e.field==t}),"xMeasure"in a&&(null==(i=a.yMeasure)?void 0:i.field)==t&&(a.xMeasure=null),"yMeasure"in a&&(null==(r=a.yMeasure)?void 0:r.field)==t&&(a.yMeasure=null),"order"in a&&s.remove(a.order,function(e){return e.field==t}),"dimension"in a&&s.remove(a.dimension,function(e){return e.field==t}),"barDimension"in a&&s.remove(a.barDimension,function(e){return e.field==t}),"lineDimension"in a&&s.remove(a.lineDimension,function(e){return e.field==t}),"filter"in a&&a.filter.forEach(function(e){s.remove(e,function(e){return e.field==t})}),"parameters"in a&&a.parameters&&n){var l=function(e,t,n){if("measure"in e&&e.measure){var i,r,o=Object.keys(i=e.measure).map(function(e){var t=eW(e,n);return null!=t&&t.function?t:null}).find(function(e){return null!==e});if(null!=o&&o.function&&o.field===t){var a=eV(o);delete e.measure[a]}e.measure=t3(e.measure,t)}if("group"in e&&e.group){var l,s,u=Object.keys(l=e.group).map(function(e){var t=eZ(e,n.supportedTimeTruncFunctions);return null!=t&&t.truncate?t:null}).find(function(e){return null!==e});if(null!=u&&u.truncate&&u.field===t){var d=eJ(u);delete e.group[d]}else e.group.hasOwnProperty(t)&&delete e.group[t];e.group=t3(e.group,t)}return e}(a.parameters,t,n);a.parameters=l}return"timeDimension"in a&&(null==(o=a.timeDimension)?void 0:o.field)==t&&(a.timeDimension=null),a},t9=function(e){var t=[].concat(e.measure);return e.dimension.forEach(function(e){t.push({field:e.field,function:e.function})}),e.timeDimension&&t.push({field:e.timeDimension.field,function:e.timeDimension.truncate}),t6(e,t)},ne=function(e,t,n){var i=function e(t,n){return s.mergeWith({},t,n,function(t,n){return s.isArray(n)?n:s.isObject(t)&&s.isObject(n)?e(t,n):n})}(e,t),r=n.validate(i),o=r.error;if(o)throw o;return r.value},nt=function(e){return p.object({filters:p.array().items(p.array().items(tx(e)).required().max(1)).required().max(1),ruleValue:p.string().allow("").required(),ruleValueEnd:p.string().allow(""),ruleType:p.valid("backgroundColor","fontColor","lineColor","areaColor").required()}).description("A rule used to conditionally format a view.")},nn=p.object({field:p.string().required().description("ID of the field in the data set to add a prefix too."),prefix:p.string().required().description("The prefix to be applied.")}),ni=function(e){return p.array().items(nt(e)).description("Apply formatting based on a set of defined rules.")},nr=function(e){var t;return p.object(en({},tC(e.attributesSchemaOptions),tF(e.queryEngineConfig,e.attributesSchemaOptions),{stacked:p.valid(!0,!1,"100%"),legend:p.valid(!0,!1),type:p.valid("barChart","horizontalBarChart").required(),conditionalFormattingRules:ni(e.queryEngineConfig),protectedFields:p.object({dimension:t_(e.queryEngineConfig),measure:tT(e.queryEngineConfig)}).unknown(!0),parameters:tI(e.queryEngineConfig,e.attributesSchemaOptions),goalLines:tD(),axisTitles:tE(),headline:tO(),tags:tm(),drilldownOptions:p.array().items(p.object({field:p.string().required(),function:(t=p.string()).valid.apply(t,Object.keys(e.queryEngineConfig.supportedAggregates).concat(Object.keys(e.queryEngineConfig.supportedTimeTruncFunctions),["none"]))}))}))},no=function(e){function t(t){var n;return(n=e.call(this,"Corrupt view. "+t.message+".\n\n    "+JSON.stringify(t)+"\n  ")||this).name="CorruptedView",n}return ei(t,e),t}(t5),na=function(e){function t(t,n){var i;return(i=e.call(this,"\n    An expected data set is missing from the dashboard.\n\n    Missing '"+n+"'. Got;\n    "+JSON.stringify([].concat(t).map(function(e){return e.id}))+"\n  ")||this).name="DataSetNotFound",i}return ei(t,e),t}(t5),nl=function(e){var t=[];return"measure"in e&&e.measure&&(t=[].concat(t,[].concat(e.measure))),"xMeasure"in e&&e.xMeasure&&(t=[].concat(t,[e.xMeasure])),"yMeasure"in e&&e.yMeasure&&(t=[].concat(t,[e.yMeasure])),t},ns=function(e){var t=[];return"dimension"in e&&e.dimension&&(t=[].concat(t,e.dimension)),"lineDimension"in e&&e.lineDimension&&(t=[].concat(t,e.lineDimension)),"barDimension"in e&&e.barDimension&&(t=[].concat(t,e.barDimension)),t},nu=function(e){var t=[];return nl(e).forEach(function(e){t=[].concat(t,[e.field])}),ns(e).forEach(function(e){t=[].concat(t,[e.field])}),"order"in e&&e.order&&(t=[].concat(t,[].concat(e.order).map(function(e){return e.field}))),"timeDimension"in e&&e.timeDimension&&(t=[].concat(t,[e.timeDimension.field])),t},nd={allowUnknown:!0,stripUnknown:!0},nc=function(e,t,n){var i=iA(e.type,{queryEngineConfig:n}).schema.validate(e,nd).error;if(i)return[new no(i)];var r=iE(t,e.dataSetId);if(!r)return[new na(t,e.dataSetId)];var o=nu(e);try{o.forEach(function(e){iP(r,e)})}catch(a){if(a instanceof t7)return[a];throw a}return[]},np=function(e){return"barChart"===e.type?"The Column Chart needs to have a grouping or a time to display correctly.":"lineChart"===e.type?"The Line Chart needs to have a grouping or a time to display correctly.":"areaChart"===e.type?"The Area Chart needs to have a grouping or a time to display correctly.":"horizontalBarChart"===e.type?"The Horizontal Bar Chart needs to have a grouping or a time to display correctly.":"comboChart"===e.type?"The Combo Chart needs to have a grouping (Bar and Line), or have time set to display correctly.":"scatterChart"===e.type?"The Scatter Chart needs to have a grouping to display correctly.":"pieChart"===e.type?"The Pie Chart needs to have a grouping to display correctly.":null},nf=function(e){var t;return"comboChart"===e.type?!!e.timeDimension||!!(e.barDimension.length>0&&e.lineDimension.length>0):"barChart"!==e.type&&"lineChart"!==e.type&&"areaChart"!==e.type&&"horizontalBarChart"!==e.type&&"scatterChart"!==e.type&&"pieChart"!==e.type||!!e.timeDimension||null==e||!e.dimension||0!==(null==e||null==(t=e.dimension)?void 0:t.length)},nm=function(e){return!!nf(e)||np(e)},nh=["parentDimension"],nv=function(e){return e||"view_"+c.v4()};function ng(e){return el(e,nh)}var nb=function(e,t,n){var i=s.cloneDeep(iD(t.fields,{onlyFieldTypes:["boolean","string"]})),r=s.cloneDeep(iD(t.fields,{onlyFieldTypes:["date_time"]})),o=s.cloneDeep(iD(t.fields,{onlyFieldTypes:["number"]})),a=null;return r[0]&&(a={field:r[0].id,truncate:"none"}),n(e,{protectedByOrganisation:!0,dimension:i.map(function(e){return{field:e.id,function:"none"}}),measure:[].concat(o).map(function(e){return{function:"none",field:e.id}}),order:[],timeDimension:a})},nx=function(e,t){var n=null,i=s.cloneDeep(e);return i.forEach(function(e){var i=iP(t,e.field);"date_time"==i.dataType&&(n={field:i.id,truncate:e.function})}),i=i.filter(function(e){return"date_time"!=iP(t,e.field).dataType}),{timeDimension:n,dimension:i}},ny=function(e){var t=[].concat(e.dimension);return"timeDimension"in e&&e.timeDimension&&(t=[{field:e.timeDimension.field,function:e.timeDimension.truncate}].concat(t)),t},nw=function(e){if(e){var t=s.cloneDeep(e);return t.measure=eb(e.measure||[]),t}},nC=function(e,t){var n=[];return s.isEmpty(t)||void 0===t?[]:(null==t||t.map(function(t){if(null!=t&&t.ruleType&&null!=t&&t.ruleValue){var i=[],r="field"in t&&"string"==typeof t.field&&"operator"in t&&"string"==typeof t.operator&&"value"in t;if(null!=t&&t.filters){var o=t.filters.map(function(t){return t.map(function(t){return nj(t,e)})});i.push.apply(i,o)}else r&&i.push([nj({field:t.field,op:t.operator,value:t.value},e)]);n.push({filters:i,ruleValueEnd:null==t?void 0:t.ruleValueEnd,ruleValue:t.ruleValue,ruleType:t.ruleType})}}),n)},nj=function(e,t){var n,i=eW(e.field,t),r="none"!==i.function?i.function:null!=(n=e.function)?n:"none";return{field:i.field,op:e.op,value:e.value,function:r}},nS={title:"Column chart",description:"Uses bars to compare different sets of data.",namespace:"bar_chart",data_panel:{data_set:{type:"dataSet",title:"Data set",description:"What data do you want to use in this bar chart?"},views:{type:"views",title:"View",description:""},field_y_axis:{type:"fieldCollector",title:"Metric - Y Axis",description:"What do you want each bar to measure?",callToAction:"Add metric"},drilldown:{type:"drilldown",title:"Drilldown",description:"After clicking on a segment of this bar chart, what information do you want to see next?"},field_x_axis:{type:"fieldCollector",title:"Grouping - X Axis",description:"What do you want each bar to represent? An example might be a `product category` field to represent each category as a bar.",callToAction:"Add grouping"},sort:{type:"sort",title:"Sort",description:"Select the order of categories or time on the x Axis."},filter:{type:"filter",title:"Filters",description:"Only include the information you want to use in this bar chart."},custom_metrics:{type:"customMetrics",title:"Custom metrics",description:"Build your own metrics, such as a percentage."},limit:{type:"limit",title:"Limit",description:"Set the maximum number of records to show on this bar chart."}},format_panel:{heading:{type:"heading",title:"Heading",description:"",subSectionDefinition:{title:{type:"title",title:"Title",description:"",namespace:"title"},subject:{title:"Subject",type:"subject",description:"",namespace:"subject"}}},chart_styles:{type:"chartStyles",title:"Chart Settings",description:"",subSectionDefinition:{stacked:{type:"stacked",title:"Layout",description:"",namespace:"stacked"},legend:{type:"legend",title:"Show Legend",description:"",namespace:"legend"}}},axis_labels:{type:"axisLabels",title:"Axis Preferences",description:"",subSectionDefinition:{x:{title:"X Axis",description:"",namespace:"x"},"x.prefix":{title:"Prefix",description:"",namespace:"x.prefix"},"x.postfix":{title:"Postfix",description:"",namespace:"x.postfix"},"x.format":{title:"Format",description:"",namespace:"x.format"},"x.count":{title:"Label count",description:"",namespace:"x.count"},"x.axis_title":{title:"Title",description:"",namespace:"x.axis_title"},y:{title:"Y Axis",description:"",namespace:"y"},"y.prefix":{title:"Prefix",description:"",namespace:"y.prefix"},"y.postfix":{title:"Postfix",description:"",namespace:"y.postfix"},"y.format":{title:"Format",description:"",namespace:"y.format"},"y.count":{title:"Label count",description:"",namespace:"y.count"},"y.axis_title":{title:"Title",description:"",namespace:"y.axis_title"}}},headline:{type:"headline",title:"Headline",description:""},goal_line:{type:"goalLine",title:"Goal Lines",description:""},conditional_formatting:{type:"conditionalFormatting",title:"Conditional Formatting",description:""}}};function nF(e,t){var n;return t in e.format_panel?en({},e.format_panel[t],{namespace:t}):en({},e.data_panel[t],{namespace:t})}function nk(e,t){var n;return null==(n=e.format_panel.axis_labels)?void 0:n.subSectionDefinition[t]}function nT(e){return en({},nF(e,"heading"),{subSection:[e.format_panel.heading.subSectionDefinition.title,e.format_panel.heading.subSectionDefinition.subject]})}function n_(e){return en({},nF(e,"axis_labels"),{y:en({},nk(e,"y"),{prefix:nk(e,"y.prefix"),postfix:nk(e,"y.postfix"),format:nk(e,"y.format"),count:nk(e,"y.count"),axisTitle:nk(e,"y.axis_title")}),x:en({},nk(e,"x"),{prefix:nk(e,"x.prefix"),postfix:nk(e,"x.postfix"),format:nk(e,"x.format"),count:nk(e,"x.count"),axisTitle:nk(e,"x.axis_title")})})}function nI(e,t,n){var i,r,o,a,l;return en({},nF(e,"chart_styles"),t?{subSection:[null==(r=e.format_panel.chart_styles)?void 0:r.subSectionDefinition.curve,null==(o=e.format_panel.chart_styles)?void 0:o.subSectionDefinition.legend]}:n?{subSection:[null==(a=e.format_panel.chart_styles)?void 0:a.subSectionDefinition.stacked,null==(l=e.format_panel.chart_styles)?void 0:l.subSectionDefinition.legend]}:{subSection:[null==(i=e.format_panel.chart_styles)?void 0:i.subSectionDefinition.legend]})}function nA(e,t){var n;return en({},null==(n=e.format_panel.stats_labels)?void 0:n.subSectionDefinition[t],{namespace:t})}var nD,nO=function(e,t){if("current"===(null==e?void 0:e.func)&&t)return e},nE=function(e){var t;return{title:nS.title,description:nS.description,servicesClass:"BarChart",namespace:nS.namespace,dump:function(e){return e},load:function(t){var n;return en({},t,{measure:eb(t.measure),order:eg(t.order,t.timeDimension),filter:ev(t.filter),protectedFields:nw(t.protectedFields),viewId:nv(t.viewId),dimension:eG(t.dimension),approxXAxisLabelCount:ex(t.approxXAxisLabelCount),approxYAxisLabelCount:ex(t.approxYAxisLabelCount),parameters:ey(t.parameters),conditionalFormattingRules:nC(e.queryEngineConfig,t.conditionalFormattingRules),headline:nO(t.headline,t.timeDimension),tags:null!=(n=t.tags)?n:[],drilldownOptions:t.drilldownOptions})},setAttributes:function(t,n){var i=ne(t,n,nr(e));return t9(i)},validate:function(t,n){return nc(t,n,e.queryEngineConfig)},init:function(e,t){return en({type:"barChart",measure:[],dimension:[],timeDimension:null,displayTitle:"",displaySubject:"",viewId:nv(null==t?void 0:t.viewId),filter:[],order:[],stacked:void 0,dataSetId:e,limit:5e3,conditionalFormattingRules:[],protectedByOrganisation:void 0,protectedFields:void 0,xAxisPostfix:"",xAxisPrefix:"",yAxisPostfix:"",yAxisPrefix:"",yAxisFormat:null,xAxisFormat:null,drilldown:[],legend:!0,approxXAxisLabelCount:"auto",approxYAxisLabelCount:"auto",parameters:{},goalLines:void 0,axisTitles:void 0,headline:void 0,tags:[],drilldownOptions:void 0},t)},createFeedback:nm,schema:nr(e),removeField:function(t,n){return t8(t,n,e.queryEngineConfig)},isRunnable:function(e){return e.measure.length>0},autoGenerate:function(t){var n=iV(t,e.queryEngineConfig,"barChart");return this.init(t.id,{measure:[n.measure[0]],dimension:n.dimension})},dataPanelConfig:function(){return[nF(nS,"data_set"),nF(nS,"views"),en({},nF(nS,"field_y_axis"),{fieldFilterOptions:{forComponent:"barChart",onlyMeasures:!0},preSetPartialAttributes:function(e){return{measure:e}},getValues:function(e){return e.measure},testId:"metric-input"}),en({},nF(nS,"field_x_axis"),{fieldFilterOptions:{forComponent:"barChart",onlyDimensions:!0},preventDuplicates:!0,preSetPartialAttributes:function(e,t){return nx(e,t)},getValues:function(e){return ny(e)},maxAllowed:2,testId:"add-dimension"}),nF(nS,"sort"),nF(nS,"filter"),en({},nF(nS,"drilldown"),{options:{property:"drilldownOptions"}}),nF(nS,"custom_metrics"),nF(nS,"limit")]},formatPanelConfig:function(){return[nT(nS),nI(nS,!1,!0),n_(nS),en({},nF(nS,"conditional_formatting"),{ruleType:"backgroundColor"}),nF(nS,"goal_line"),nF(nS,"headline")]},supportedCustomFields:{percentages:!0,dateCalculations:!0,simpleMaths:!0,rules:!0,aggregateMaths:!0,roundedNumbers:!0,conditional:!0},supportedFeatures:{parameters:!0,colorGradient:!1},setDataAttributesFromPreAggregatedDataSet:function(e,t){return nb(e,t,this.setAttributes)}}},nL=function(e){return p.object(en({},tC(e.attributesSchemaOptions),tF(e.queryEngineConfig,e.attributesSchemaOptions),{stacked:p.valid(!0,!1,"100%"),legend:p.valid(!0,!1),type:p.valid("lineChart").required(),parameters:tI(e.queryEngineConfig,e.attributesSchemaOptions),lineCurve:tk,conditionalFormattingRules:ni(e.queryEngineConfig),goalLines:tD(),axisTitles:tE(),headline:tO(),tags:tm()}))},nP={title:"Line chart",description:"Ideal for illustrating changes and trends over time with line graphs.",namespace:"line_chart",data_panel:{data_set:{type:"dataSet",title:"Data set",description:"What data do you want to use in this line chart?"},views:{type:"views",title:"View",description:""},field_y_axis:{type:"fieldCollector",title:"Metric - Y Axis",description:"What do you want each line to measure?",callToAction:"Add metric"},drilldown:{type:"drilldown",title:"Drilldown",description:"After clicking on a segment of this line chart, what information do you want to see next?"},field_x_axis:{type:"fieldCollector",title:"Grouping - X Axis",description:"What do you want each line to represent? An example might be a `product category` field to represent each category as a line.",callToAction:"Add grouping"},sort:{type:"sort",title:"Sort",description:"Select the order of categories or time on the x Axis."},filter:{type:"filter",title:"Filters",description:"Only include the information you want to use in this line chart."},custom_metrics:{type:"customMetrics",title:"Custom metrics",description:"Build your own metrics, such as a percentage."},limit:{type:"limit",title:"Limit",description:"Set the maximum number of records to show on this line chart."}},format_panel:{heading:{type:"heading",title:"Heading",description:"",subSectionDefinition:{title:{type:"title",title:"Title",description:"",namespace:"title"},subject:{title:"Subject",type:"subject",description:"",namespace:"subject"}}},chart_styles:{type:"chartStyles",title:"Chart Settings",description:"",subSectionDefinition:{curve:{type:"curve",title:"Line Curve",description:"",namespace:"curve"},legend:{type:"legend",title:"Show Legend",description:"",namespace:"legend"}}},axis_labels:{type:"axisLabels",title:"Axis Preferences",description:"",subSectionDefinition:{x:{title:"X Axis",description:"",namespace:"x"},"x.prefix":{title:"Prefix",description:"",namespace:"x.prefix"},"x.postfix":{title:"Postfix",description:"",namespace:"x.postfix"},"x.format":{title:"Format",description:"",namespace:"x.format"},"x.count":{title:"Label count",description:"",namespace:"x.count"},"x.axis_title":{title:"Title",description:"",namespace:"x.axis_title"},y:{title:"Y Axis",description:"",namespace:"y"},"y.prefix":{title:"Prefix",description:"",namespace:"y.prefix"},"y.postfix":{title:"Postfix",description:"",namespace:"y.postfix"},"y.format":{title:"Format",description:"",namespace:"y.format"},"y.count":{title:"Label count",description:"",namespace:"y.count"},"y.axis_title":{title:"Title",description:"",namespace:"y.axis_title"}}},conditional_formatting:{type:"conditionalFormatting",title:"Conditional Formatting",description:""},headline:{type:"headline",title:"Headline",description:""},goal_line:{type:"goalLine",title:"Goal Lines",description:""}}},nR=function(e){var t;return{title:"Line chart",description:"Ideal for illustrating changes and trends over time with line graphs.",servicesClass:"LineChart",namespace:"line_chart",dump:function(e){return e},load:function(t){var n;return{type:t.type,measure:eb(t.measure),order:eg(t.order,t.timeDimension),dimension:eG(t.dimension),timeDimension:t.timeDimension,displayTitle:t.displayTitle,displaySubject:t.displaySubject,protectedByOrganisation:t.protectedByOrganisation,viewId:nv(t.viewId),filter:ev(t.filter),dataSetId:t.dataSetId,limit:t.limit,xAxisPostfix:t.xAxisPostfix,xAxisPrefix:t.xAxisPrefix,yAxisPostfix:t.yAxisPostfix,yAxisPrefix:t.yAxisPrefix,yAxisFormat:t.yAxisFormat,xAxisFormat:t.xAxisFormat,lineCurve:t.lineCurve,conditionalFormattingRules:nC(e.queryEngineConfig,t.conditionalFormattingRules),drilldown:t.drilldown,legend:t.legend,goalLines:t.goalLines,headline:nO(t.headline,t.timeDimension),parameters:ey(t.parameters),approxXAxisLabelCount:ex(t.approxXAxisLabelCount),approxYAxisLabelCount:ex(t.approxYAxisLabelCount),axisTitles:t.axisTitles,tags:null!=(n=t.tags)?n:[]}},setAttributes:function(t,n){var i=ne(t,n,nL(e));return t9(i)},validate:function(t,n){return nc(t,n,e.queryEngineConfig)},init:function(e,t){return en({type:"lineChart",measure:[],dimension:[],timeDimension:null,displayTitle:"",displaySubject:"",protectedByOrganisation:void 0,viewId:nv(null==t?void 0:t.viewId),filter:[],order:[],dataSetId:e,limit:5e3,xAxisPostfix:"",xAxisPrefix:"",yAxisPostfix:"",yAxisPrefix:"",yAxisFormat:null,xAxisFormat:null,lineCurve:"natural",conditionalFormattingRules:[],drilldown:[],legend:!0,goalLines:void 0,approxXAxisLabelCount:"auto",approxYAxisLabelCount:"auto",parameters:{},axisTitles:void 0,headline:void 0,tags:[]},t)},createFeedback:nm,schema:nL(e),removeField:function(t,n){return t8(t,n,e.queryEngineConfig)},isRunnable:function(e){return e.measure.length>0},autoGenerate:function(t){var n=iV(t,e.queryEngineConfig,"lineChart");return this.init(t.id,{measure:[n.measure[0]],dimension:n.dimension})},dataPanelConfig:function(){return[nF(nP,"data_set"),nF(nP,"views"),en({},nF(nP,"field_y_axis"),{fieldFilterOptions:{forComponent:"lineChart"},preSetPartialAttributes:function(e){return{measure:e}},getValues:function(e){return e.measure},testId:"metric-input"}),en({},nF(nP,"field_x_axis"),{fieldFilterOptions:{forComponent:"lineChart",onlyDimensions:!0},preventDuplicates:!0,preSetPartialAttributes:function(e,t){return nx(e,t)},getValues:function(e){return ny(e)},maxAllowed:2,testId:"add-dimension"}),nF(nP,"sort"),nF(nP,"filter"),nF(nP,"custom_metrics"),nF(nP,"limit")]},formatPanelConfig:function(){return[nT(nP),nI(nP,!0,!1),n_(nP),en({},nF(nP,"conditional_formatting"),{ruleType:"lineColor"}),nF(nP,"goal_line"),nF(nP,"headline")]},supportedCustomFields:{percentages:!0,dateCalculations:!0,simpleMaths:!0,rules:!0,aggregateMaths:!0,roundedNumbers:!0,conditional:!0},supportedFeatures:{parameters:!0,colorGradient:!1},setDataAttributesFromPreAggregatedDataSet:function(e,t){return nb(e,t,this.setAttributes)}}},nN=function(e){return p.object(en({},tC(e.attributesSchemaOptions),{measure:p.array().items(th(e.queryEngineConfig.supportedAggregates,e.attributesSchemaOptions)),dimension:tb(e.queryEngineConfig.supportedTimeTruncFunctions,e.attributesSchemaOptions),filter:ty(e.queryEngineConfig),timeDimension:p.valid(null),order:p.array().items(tv(e.queryEngineConfig)),type:p.valid("pieChart").required(),legend:p.valid(!0,!1),limit:tw(),labelsAsPercentage:p.boolean(),conditionalFormattingRules:ni(e.queryEngineConfig),labelFormat:p.alternatives(p.string(),p.valid(null)),parameters:tI(e.queryEngineConfig,e.attributesSchemaOptions),tags:tm()}))},nM={title:"Pie chart",description:"Represents data in a circular pie-like format, useful for showing proportions.",namespace:"pie_chart",data_panel:{data_set:{type:"dataSet",title:"Data set",description:"What data do you want to use in this pie chart?"},views:{type:"views",title:"View",description:""},field_metrics:{type:"fieldCollector",title:"Metric",description:"What do you want each segment to measure?",callToAction:"Add metric"},field_grouping:{type:"fieldCollector",title:"Grouping",description:"How do you want to split each section of the pie chart?",callToAction:"Add comparison"},sort:{type:"sort",title:"Sort",description:"Choose the order of segments in the pie chart"},filter:{type:"filter",title:"Filters",description:"Only include the information you want in this pie chart."},custom_metrics:{type:"customMetrics",title:"Custom metrics",description:"Build your own metrics, such as a percentage."},limit:{type:"limit",title:"Limit",description:"Limit the number of segments shown on this pie chart."}},format_panel:{heading:{type:"heading",title:"Heading",description:"",subSectionDefinition:{title:{type:"title",title:"Title",description:"",namespace:"title"},subject:{title:"Subject",type:"subject",description:"",namespace:"subject"}}},chart_styles:{type:"chartStyles",title:"Chart Settings",description:"",subSectionDefinition:{number_format:{type:"numberFormat",title:"Format",description:"",namespace:"number_format"},legend:{type:"legend",title:"Show Legend",description:"",namespace:"legend"}}},conditional_formatting:{type:"conditionalFormatting",title:"Conditional Formatting",description:""}}},nz=function(e){return{title:nM.title,description:nM.description,servicesClass:"PieChart",namespace:nM.namespace,dump:function(e){return e},load:function(t){var n;return{type:t.type,measure:eb(t.measure),order:eg(t.order,t.timeDimension),dimension:eG(t.dimension),viewId:nv(t.viewId),timeDimension:t.timeDimension,displayTitle:t.displayTitle,displaySubject:t.displaySubject,protectedByOrganisation:t.protectedByOrganisation,filter:ev(t.filter),dataSetId:t.dataSetId,limit:t.limit,conditionalFormattingRules:nC(e.queryEngineConfig,t.conditionalFormattingRules),labelsAsPercentage:t.labelsAsPercentage,legend:t.legend,labelFormat:t.labelFormat,parameters:ey(t.parameters),tags:null!=(n=t.tags)?n:[]}},setAttributes:function(t,n){return ne(t,n,nN(e))},validate:function(t,n){return nc(t,n,e.queryEngineConfig)},init:function(e,t){return en({type:"pieChart",measure:[],dimension:[],timeDimension:null,displayTitle:"",displaySubject:"",protectedByOrganisation:void 0,viewId:nv(null==t?void 0:t.viewId),filter:[],order:[],dataSetId:e,limit:5e3,conditionalFormattingRules:[],labelsAsPercentage:!1,legend:!0,labelFormat:null,parameters:{},tags:[]},t)},createFeedback:nm,schema:nN(e),removeField:function(t,n){return t8(t,n,e.queryEngineConfig)},isRunnable:function(e){return e.measure.length>0},autoGenerate:function(t){var n=iV(t,e.queryEngineConfig,"pieChart");return this.init(t.id,{measure:[n.measure[0]],dimension:n.dimension})},dataPanelConfig:function(){return[nF(nM,"data_set"),nF(nM,"views"),en({},nF(nM,"field_metrics"),{fieldFilterOptions:{forComponent:"pieChart"},maxAllowed:1,preSetPartialAttributes:function(e){return{measure:e}},getValues:function(e){return e.measure},testId:"metric-input"}),en({},nF(nM,"field_grouping"),{fieldFilterOptions:{onlyFieldTypes:["boolean","number","string"],onlyDimensions:!0,removePercentage:!0,removeSimpleMaths:!0,removeAggregateMaths:!0},maxAllowed:1,preSetPartialAttributes:function(e){return{dimension:e}},getValues:function(e){return e.dimension},testId:"add-dimension"}),nF(nM,"sort"),nF(nM,"filter"),nF(nM,"custom_metrics"),nF(nM,"limit")]},formatPanelConfig:function(){var e,t;return[nT(nM),en({},nF(nM,"conditional_formatting"),{ruleType:"backgroundColor"}),en({},nF(nM,"chart_styles"),{subSection:[null==(e=nM.format_panel.chart_styles)?void 0:e.subSectionDefinition.legend,null==(t=nM.format_panel.chart_styles)?void 0:t.subSectionDefinition.number_format]})]},supportedCustomFields:{percentages:!0,dateCalculations:!0,simpleMaths:!0,rules:!0,aggregateMaths:!0,roundedNumbers:!0,conditional:!0},supportedFeatures:{parameters:!0,colorGradient:!1}}},nq=function(e){return p.object(en({},tC(e.attributesSchemaOptions),{xMeasure:th(e.queryEngineConfig.supportedAggregates,e.attributesSchemaOptions).allow(null),yMeasure:th(e.queryEngineConfig.supportedAggregates,e.attributesSchemaOptions).allow(null),dimension:tb(e.queryEngineConfig.supportedTimeTruncFunctions,e.attributesSchemaOptions),order:p.array().items(tv(e.queryEngineConfig)),limit:tw(),legend:p.valid(!0,!1),offset:p.number().min(0),filter:ty(e.queryEngineConfig),type:p.valid("scatterChart").required(),timeDimension:p.valid(null),xAxisPrefix:p.string().allow(""),yAxisPrefix:p.string().allow(""),xAxisPostfix:p.string().allow(""),yAxisPostfix:p.string().allow(""),yAxisFormat:p.alternatives(p.string(),p.valid(null)),xAxisFormat:p.alternatives(p.string(),p.valid(null)),approxYAxisLabelCount:tj,approxXAxisLabelCount:tj,goalLines:tD(),axisTitles:tE(),tags:tm()}))},nB={title:"Scatter chart",description:"Displays data points on a Cartesian plane, perfect for showing correlations.",namespace:"scatter_chart",data_panel:{data_set:{type:"dataSet",title:"Data set",description:"What data do you want to use in this scatter chart?"},views:{type:"views",title:"View",description:""},labelled_metrics:{type:"labelledMetrics",title:"Metric - Y Axis",description:"",subSectionDefinition:{xAxis:{type:"metrics",title:"X axis",namespace:"metrics.xAxis"},yAxis:{type:"metrics",title:"Y axis",namespace:"metrics.yAxis"}}},field_grouping:{type:"fieldCollector",title:"Grouping",description:"What do you want each dot to represent?",callToAction:"Add comparison"},filter:{type:"filter",title:"Filters",description:"Only include the information you want in this scatter chart."},custom_metrics:{type:"customMetrics",title:"Custom metrics",description:"Build your own metrics, such as a percentage."},limit:{type:"limit",title:"Limit",description:"Limit the number of data points shown on this scatter chart."}},format_panel:{heading:{type:"heading",title:"Heading",description:"",subSectionDefinition:{title:{type:"title",title:"Title",description:"",namespace:"title"},subject:{title:"Subject",type:"subject",description:"",namespace:"subject"}}},chart_styles:{type:"chartStyles",title:"Chart Settings",description:"",subSectionDefinition:{legend:{type:"legend",title:"Show Legend",description:"",namespace:"legend"}}},axis_labels:{type:"axisLabels",title:"Axis Preferences",description:"",subSectionDefinition:{x:{title:"X Axis",description:"",namespace:"x"},"x.prefix":{title:"Prefix",description:"",namespace:"x.prefix"},"x.postfix":{title:"Postfix",description:"",namespace:"x.postfix"},"x.format":{title:"Format",description:"",namespace:"x.format"},"x.count":{title:"Label count",description:"",namespace:"x.count"},"x.axis_title":{title:"Title",description:"",namespace:"x.axis_title"},y:{title:"Y Axis",description:"",namespace:"y"},"y.prefix":{title:"Prefix",description:"",namespace:"y.prefix"},"y.postfix":{title:"Postfix",description:"",namespace:"y.postfix"},"y.format":{title:"Format",description:"",namespace:"y.format"},"y.count":{title:"Label count",description:"",namespace:"y.count"},"y.axis_title":{title:"Title",description:"",namespace:"y.axis_title"}}},goal_line:{type:"goalLine",title:"Goal Lines",description:""}}},nV=function(e){var t;return{title:nB.title,description:nB.description,servicesClass:"ScatterChart",namespace:nB.namespace,dump:function(e){return e},load:function(e){var t;return{type:e.type,xMeasure:eb(e.xMeasure?[e.xMeasure]:[])[0]||null,yMeasure:eb(e.yMeasure?[e.yMeasure]:[])[0]||null,dimension:eG(e.dimension),viewId:nv(e.viewId),timeDimension:e.timeDimension,displayTitle:e.displayTitle,displaySubject:e.displaySubject,protectedByOrganisation:e.protectedByOrganisation,filter:ev(e.filter),order:eg(e.order,e.timeDimension),dataSetId:e.dataSetId,limit:e.limit,legend:e.legend,xAxisFormat:e.xAxisFormat,yAxisFormat:e.yAxisFormat,yAxisPostfix:e.yAxisPostfix,yAxisPrefix:e.yAxisPrefix,xAxisPostfix:e.xAxisPostfix,xAxisPrefix:e.xAxisPrefix,approxXAxisLabelCount:ex(e.approxXAxisLabelCount),approxYAxisLabelCount:ex(e.approxYAxisLabelCount),goalLines:e.goalLines,axisTitles:e.axisTitles,tags:null!=(t=e.tags)?t:[]}},setAttributes:function(t,n){var i=ne(t,n,nq(e)),r=[];return i.xMeasure&&r.push(i.xMeasure),i.yMeasure&&r.push(i.yMeasure),i.dimension.forEach(function(e){r.push({field:e.field,function:e.function})}),t6(i,r)},validate:function(t,n){return nc(t,n,e.queryEngineConfig)},init:function(e,t){return en({type:"scatterChart",xMeasure:null,yMeasure:null,dimension:[],timeDimension:null,displayTitle:"",displaySubject:"",protectedByOrganisation:void 0,viewId:nv(null==t?void 0:t.viewId),filter:[],order:[],dataSetId:e,limit:5e3,legend:!0,xAxisPostfix:"",xAxisPrefix:"",yAxisPostfix:"",yAxisPrefix:"",yAxisFormat:null,xAxisFormat:null,approxXAxisLabelCount:"auto",approxYAxisLabelCount:"auto",goalLines:void 0,axisTitles:void 0,tags:[]},t)},createFeedback:nm,schema:nq(e),removeField:function(t,n){return t8(t,n,e.queryEngineConfig)},isRunnable:function(e){return!!e.xMeasure&&!!e.yMeasure&&e.dimension.length>0},autoGenerate:function(t){var n=iV(t,e.queryEngineConfig,"scatterChart"),i=n.measure;return this.init(t.id,{xMeasure:i[0],yMeasure:i[1],dimension:n.dimension})},dataPanelConfig:function(){var e,t;return[nF(nB,"data_set"),nF(nB,"views"),en({},nF(nB,"labelled_metrics"),{subSection:[en({},null==(e=nB.data_panel.labelled_metrics)?void 0:e.subSectionDefinition.xAxis,{propKey:"xMeasure",allowsMultiple:!1}),en({},null==(t=nB.data_panel.labelled_metrics)?void 0:t.subSectionDefinition.yAxis,{propKey:"yMeasure",allowsMultiple:!1})]}),en({},nF(nB,"field_grouping"),{fieldFilterOptions:{onlyDimensions:!0,onlyFieldTypes:["boolean","number","string"],removePercentage:!0,removeSimpleMaths:!0,removeAggregateMaths:!0},maxAllowed:1,preSetPartialAttributes:function(e){return{dimension:e}},getValues:function(e){return e.dimension},testId:"add-dimension"}),nF(nB,"filter"),nF(nB,"custom_metrics"),nF(nB,"limit")]},formatPanelConfig:function(){var e;return[nT(nB),en({},nF(nB,"chart_styles"),{subSection:[null==(e=nB.format_panel.chart_styles)?void 0:e.subSectionDefinition.legend]}),n_(nB),nF(nB,"goal_line")]},supportedCustomFields:{percentages:!0,dateCalculations:!0,simpleMaths:!0,rules:!0,aggregateMaths:!0,roundedNumbers:!0,conditional:!0},supportedFeatures:{parameters:!1,colorGradient:!1}}},nW=function(e){return p.object(en({},tC(e.attributesSchemaOptions),{stacked:p.valid(!0,!1,"100%"),legend:p.valid(!0,!1),barMeasure:p.array().items(th(e.queryEngineConfig.supportedAggregates,e.attributesSchemaOptions)),lineMeasure:p.array().items(th(e.queryEngineConfig.supportedAggregates,e.attributesSchemaOptions)),barDimension:tb(e.queryEngineConfig.supportedTimeTruncFunctions,e.attributesSchemaOptions),lineDimension:tb(e.queryEngineConfig.supportedTimeTruncFunctions,e.attributesSchemaOptions),order:p.array().items(tv(e.queryEngineConfig)),timeDimension:p.alternatives(tg(e.queryEngineConfig.supportedTimeTruncFunctions),p.valid(null)),limit:tw(),offset:p.number().min(0),filter:ty(e.queryEngineConfig),type:p.valid("comboChart").required(),xAxisPrefix:p.string().allow(""),yAxisPrefix:p.string().allow(""),xAxisPostfix:p.string().allow(""),yAxisPostfix:p.string().allow(""),yAxisFormat:p.alternatives(p.string(),p.valid(null)),xAxisFormat:p.alternatives(p.string(),p.valid(null)),approxYAxisLabelCount:tj,approxXAxisLabelCount:tj,goalLines:tD(),conditionalFormattingRules:p.object({bar:p.array().items(nt(e.queryEngineConfig)),line:p.array().items(nt(e.queryEngineConfig))}),axisTitles:tE(),tags:tm()}))},nH={title:"Combo chart",description:"A versatile component that combines different chart types.",namespace:"combo_chart",data_panel:{data_set:{type:"dataSet",title:"Data set",description:"What data do you want to use in this combo chart?"},views:{type:"views",title:"View",description:""},labelled_metrics:{type:"labelledMetrics",title:"Metric - Y Axis",description:"What do you want each line and bar to measure?",subSectionDefinition:{line:{type:"metrics",title:"Line",namespace:"metrics.line"},bar:{type:"metrics",title:"Bar",namespace:"metrics.bar"}}},combo_chart_dimension:{type:"comboChartDimension",title:"Grouping - X Axis",description:""},sort:{type:"sort",title:"Sort",description:"Select the order of categories or time on the x Axis."},filter:{type:"filter",title:"Filters",description:"Only include the information you want to use in this combo chart."},custom_metrics:{type:"customMetrics",title:"Custom metrics",description:"Build your own metrics, such as a percentage."},limit:{type:"limit",title:"Limit",description:"Set the maximum number of records to show on this bar chart."}},format_panel:{heading:{type:"heading",title:"Heading",description:"",subSectionDefinition:{title:{type:"title",title:"Title",description:"",namespace:"title"},subject:{title:"Subject",type:"subject",description:"",namespace:"subject"}}},chart_styles:{type:"chartStyles",title:"Chart Settings",description:"",subSectionDefinition:{stacked:{type:"stacked",title:"Layout",description:"",namespace:"stacked"},legend:{type:"legend",title:"Show Legend",description:"",namespace:"legend"}}},axis_labels:{type:"axisLabels",title:"Axis Preferences",description:"",subSectionDefinition:{x:{title:"X Axis",description:"",namespace:"x"},"x.prefix":{title:"Prefix",description:"",namespace:"x.prefix"},"x.postfix":{title:"Postfix",description:"",namespace:"x.postfix"},"x.format":{title:"Format",description:"",namespace:"x.format"},"x.count":{title:"Label count",description:"",namespace:"x.count"},"x.axis_title":{title:"Title",description:"",namespace:"x.axis_title"},y:{title:"Y Axis",description:"",namespace:"y"},"y.prefix":{title:"Prefix",description:"",namespace:"y.prefix"},"y.postfix":{title:"Postfix",description:"",namespace:"y.postfix"},"y.format":{title:"Format",description:"",namespace:"y.format"},"y.count":{title:"Label count",description:"",namespace:"y.count"},"y.axis_title":{title:"Title",description:"",namespace:"y.axis_title"}}},goal_line:{type:"goalLine",title:"Goal Lines",description:""},conditional_formatting:{type:"conditionalFormatting",title:"Conditional Formatting",description:"",subSectionDefinition:{bar:{title:"Bar",namespace:"bar"},line:{title:"Line",namespace:"line"}}}}},nY=function(e){var t;return{title:nH.title,description:nH.description,servicesClass:"ComboChart",namespace:nH.namespace,dump:function(e){return e},load:function(t){var n,i,r,o;return n=e.queryEngineConfig,en({},t,{lineMeasure:eb(t.lineMeasure),barMeasure:eb(t.barMeasure),order:eg(t.order,t.timeDimension||null),filter:ev(t.filter),lineDimension:eG(t.lineDimension||t.dimension||[]),barDimension:eG(t.barDimension||t.dimension||[]),viewId:nv(t.viewId),approxXAxisLabelCount:ex(t.approxXAxisLabelCount),approxYAxisLabelCount:ex(t.approxYAxisLabelCount),conditionalFormattingRules:{bar:nC(n,null==(i=t.conditionalFormattingRules)?void 0:i.bar),line:nC(n,null==(r=t.conditionalFormattingRules)?void 0:r.line)},tags:null!=(o=t.tags)?o:[]})},setAttributes:function(t,n){var i=ne(t,n,nW(e)),r=[].concat(i.lineMeasure,i.barMeasure);return[].concat(i.lineDimension,i.barDimension).forEach(function(e){r.push({field:e.field,function:e.function})}),i.timeDimension&&r.push({field:i.timeDimension.field,function:i.timeDimension.truncate}),t6(i,r)},validate:function(t,n){return nc(t,n,e.queryEngineConfig)},init:function(e,t){return en({type:"comboChart",barMeasure:[],lineMeasure:[],lineDimension:[],barDimension:[],timeDimension:null,displayTitle:"",displaySubject:"",viewId:nv(null==t?void 0:t.viewId),filter:[],order:[],dataSetId:e,limit:5e3,xAxisPostfix:"",protectedByOrganisation:void 0,xAxisPrefix:"",yAxisPostfix:"",yAxisPrefix:"",yAxisFormat:null,xAxisFormat:null,legend:!0,approxXAxisLabelCount:"auto",approxYAxisLabelCount:"auto",goalLines:void 0,conditionalFormattingRules:void 0,axisTitles:void 0,tags:[]},t)},createFeedback:nm,schema:nW(e),removeField:function(t,n){return t8(t,n,e.queryEngineConfig)},isRunnable:function(e){return e.lineMeasure.length>0||e.barMeasure.length>0},autoGenerate:function(t){var n=iV(t,e.queryEngineConfig,"comboChart"),i=n.measure,r=n.dimension;return this.init(t.id,{barMeasure:[i[0]],lineMeasure:[i[1]||i[0]],barDimension:r,lineDimension:r})},dataPanelConfig:function(){var e,t;return[nF(nH,"data_set"),nF(nH,"views"),en({},nF(nH,"labelled_metrics"),{subSection:[en({},null==(e=nH.data_panel.labelled_metrics)?void 0:e.subSectionDefinition.line,{propKey:"lineMeasure",allowsMultiple:!0}),en({},null==(t=nH.data_panel.labelled_metrics)?void 0:t.subSectionDefinition.bar,{propKey:"barMeasure",allowsMultiple:!0})]}),nF(nH,"combo_chart_dimension"),nF(nH,"sort"),nF(nH,"filter"),nF(nH,"custom_metrics"),nF(nH,"limit")]},formatPanelConfig:function(){var e,t,n,i,r,o;return[nT(nH),nI(nH,!1,!0),n_(nH),en({},nF(nH,"conditional_formatting"),{ruleType:"backgroundColor",subSection:[{title:null!=(e=null==(t=nH.format_panel.conditional_formatting)||null==(t=t.subSectionDefinition)?void 0:t.bar.title)?e:"",namespace:null==(n=nH.format_panel.conditional_formatting)||null==(n=n.subSectionDefinition)?void 0:n.bar.namespace,propKey:"bar"},{title:null!=(i=null==(r=nH.format_panel.conditional_formatting)||null==(r=r.subSectionDefinition)?void 0:r.line.title)?i:"",namespace:null==(o=nH.format_panel.conditional_formatting)||null==(o=o.subSectionDefinition)?void 0:o.line.namespace,propKey:"line"}]}),nF(nH,"goal_line")]},supportedCustomFields:{percentages:!0,dateCalculations:!0,simpleMaths:!0,rules:!0,aggregateMaths:!0,roundedNumbers:!0,conditional:!0},supportedFeatures:{parameters:!1,colorGradient:!1}}},nG=function(e){return p.object(en({},tC(e.attributesSchemaOptions),{type:p.valid("dataTable").required(),measure:p.array().items(th(e.queryEngineConfig.supportedAggregates,e.attributesSchemaOptions)).required(),dimension:tb(e.queryEngineConfig.supportedTimeTruncFunctions,e.attributesSchemaOptions).required(),order:p.array().items(tv(e.queryEngineConfig)),timeDimension:p.alternatives(tg(e.queryEngineConfig.supportedTimeTruncFunctions),p.valid(null)),limit:tw().required(),offset:p.number().min(0),filter:ty(e.queryEngineConfig),prefixes:p.array().items(nn),exportNames:p.object(),numberFormat:p.object(),conditionalFormattingRules:ni(e.queryEngineConfig),dateTimeFormat:p.string(),protectedFields:p.object({dimension:t_(e.queryEngineConfig),measure:tT(e.queryEngineConfig)}).unknown(!0),sizing:tL,tags:tm(),tableDrilldown:p.array().items(p.object({subsetDimension:p.string().required().description("The ID of the field in the data set to drill down by.")})).description("Drilldown configuration for a pivot table.")}))},nU={title:"Pivot table",description:"Transforms data into a table with dynamic rows and columns.",namespace:"pivot_table",data_panel:{data_set:{type:"dataSet",title:"Data set",description:"What data do you want to use in this data table?"},views:{type:"views",title:"View",description:""},field_columns:{type:"fieldCollector",title:"Group columns",callToAction:"Add group column",description:""},field_rows:{type:"fieldCollector",title:"Group rows",description:"Which field do you want to group each row by? An example might be an employee ID or geographical location",callToAction:"Add group row"},drilldown:{type:"drilldown",title:"Drilldown",description:"Drilldowns in a pivot table reveals underlying data contributing to summarized figures upon clicking."},field_metrics:{type:"fieldCollector",title:"Metrics",description:"Select the columns to show in the data table",callToAction:"Add metric"},sort:{type:"sort",title:"Sort",description:"Select the order of categories or time on the x Axis."},filter:{type:"filter",title:"Filters",description:"Only include the information you want to use in this data table."},custom_metrics:{type:"customMetrics",title:"Custom metrics",description:"Build your own metrics, such as a percentage."},pagination:{type:"pagination",title:"Pagination",description:"Define the size for each page in the table"}},format_panel:{heading:{type:"heading",title:"Heading",description:"",subSectionDefinition:{title:{type:"title",title:"Title",description:"",namespace:"title"},subject:{title:"Subject",type:"subject",description:"",namespace:"subject"}}},format:{type:"format",title:"Format",description:"",subSectionDefinition:{time:{type:"time",title:"Time",description:"",namespace:"time"}}},prefixes:{type:"prefixes",title:"Prefixes",description:""},conditional_formatting:{type:"conditionalFormatting",title:"Conditional Formatting",description:""}}},nK=[3,5,10,20,50,100,200],nX=function(e,t){return e.filter(function(e){return e.pivot==t})},nQ=function(e){var t;return{title:nU.title,description:nU.description,servicesClass:"PivotTable",namespace:nU.namespace,dump:function(e){return e},load:function(t){var n,i,r;return{type:t.type,measure:eb(t.measure),order:eg(t.order,t.timeDimension||null),displayTitle:t.displayTitle,dimension:ny({timeDimension:t.timeDimension,dimension:eG(t.dimension)}).map(function(e){return en({},e,{pivot:e.pivot?e.pivot:"x"})}),displaySubject:t.displaySubject,protectedByOrganisation:t.protectedByOrganisation,protectedFields:nw(t.protectedFields),viewId:nv(t.viewId),filter:ev(t.filter),dataSetId:t.dataSetId,limit:t.limit,offset:t.offset,conditionalFormattingRules:nC(e.queryEngineConfig,t.conditionalFormattingRules),dateTimeFormat:t.dateTimeFormat,prefixes:t.prefixes,exportNames:t.exportNames,numberFormat:t.numberFormat,sizing:t.sizing,tableDrilldown:(i=t.tableDrilldown)&&i.length>0?i.map(ng):i||[],tags:null!=(n=t.tags)?n:[]}},setAttributes:function(t,n){var i=ne(t,n,nG(e));return t9(i)},validate:function(t,n){return nc(t,n,e.queryEngineConfig)},init:function(e,t){return en({type:"dataTable",measure:[],displayTitle:"",dimension:[],protectedByOrganisation:void 0,displaySubject:"",viewId:nv(null==t?void 0:t.viewId),filter:[],order:[],dataSetId:e,limit:50,offset:0,conditionalFormattingRules:[],protectedFields:void 0,prefixes:[],dateTimeFormat:"DD MMMM YYYY, hh:mm",exportNames:{},numberFormat:{},sizing:{},tableDrilldown:[],tags:[]},t)},schema:nG(e),removeField:function(t,n){return t8(t,n,e.queryEngineConfig)},isRunnable:function(e){return e.measure.length>0},autoGenerate:function(t){var n=iV(t,e.queryEngineConfig,"dataTable"),i=n.dimension;return this.init(t.id,{measure:n.measure.slice(0,5),dimension:i})},dataPanelConfig:function(){return[nF(nU,"data_set"),nF(nU,"views"),en({},nF(nU,"field_columns"),{fieldFilterOptions:{onlyFieldTypes:["boolean","number","string","date_time"],onlyDimensions:!0,removePercentage:!0,removeSimpleMaths:!0,removeAggregateMaths:!0},preventDuplicates:!0,preSetPartialAttributes:function(e,t,n){return{dimension:[].concat(e.map(function(e){return en({},e,{pivot:"y"})}),nX(n.dimension,"x"))}},getValues:function(e){return nX(e.dimension,"y")},testId:"add-pivot-dimension"}),en({},nF(nU,"field_rows"),{fieldFilterOptions:{onlyFieldTypes:["boolean","number","string","date_time"],onlyDimensions:!0,removePercentage:!0,removeSimpleMaths:!0,removeAggregateMaths:!0},preventDuplicates:!0,preSetPartialAttributes:function(e,t,n){return{dimension:[].concat(e.map(function(e){return en({},e,{pivot:"x"})}),nX(n.dimension,"y"))}},getValues:function(e){return nX(e.dimension,"x")},testId:"add-dimension"}),en({},nF(nU,"drilldown"),{options:{maxOptions:1,property:"tableDrilldown"}}),en({},nF(nU,"field_metrics"),{fieldFilterOptions:{forComponent:"dataTable"},preSetPartialAttributes:function(e){return{measure:e}},getValues:function(e){return e.measure},testId:"metric-input"}),nF(nU,"sort"),en({},nF(nU,"pagination"),{options:nK}),nF(nU,"filter"),nF(nU,"custom_metrics")]},formatPanelConfig:function(){var e;return[nT(nU),en({},nF(nU,"format"),{subSection:[null==(e=nU.format_panel.format)?void 0:e.subSectionDefinition.time]}),nF(nU,"prefixes"),en({},nF(nU,"conditional_formatting"),{ruleType:"backgroundColor"})]},supportedCustomFields:{percentages:!0,dateCalculations:!0,simpleMaths:!0,rules:!0,aggregateMaths:!0,roundedNumbers:!0,conditional:!0},supportedFeatures:{parameters:!1,colorGradient:!0}}},nJ=p.object({field:p.string().required(),function:p.valid("none").required()}),nZ=function(e){return p.object(en({},tC(e.attributesSchemaOptions),{type:p.valid("basicTable").required(),measure:p.array().items(nJ).required(),dimension:p.array().max(0),order:p.array().items(tv(e.queryEngineConfig)),timeDimension:p.valid(null),limit:tw().required(),offset:p.number().min(0),filter:ty(e.queryEngineConfig),prefixes:p.array().items(nn),exportNames:p.object(),numberFormat:p.object(),conditionalFormattingRules:ni(e.queryEngineConfig),dateTimeFormat:p.string(),protectedFields:p.object({measure:tT(e.queryEngineConfig)}).unknown(!0),sizing:tL,tags:tm()}))},n$=function(e){return function(t,n){var i=ne(t,n,nZ(e));return t6(i,[].concat(i.measure))}},n0={title:"Basic table",description:"Displays data in a simple, straightforward table format.",namespace:"basic_table",data_panel:{data_set:{type:"dataSet",title:"Data set",description:"What data do you want to use in this basic table?"},views:{type:"views",title:"View",description:""},fields:{type:"fields",title:"Columns",description:"Select which values you want to see in this table"},sort:{type:"sort",title:"Sort",description:"Select the order of categories or time on the x Axis."},filter:{type:"filter",title:"Filters",description:"Only include the information you want to use in this basic table."},custom_metrics:{type:"customMetrics",title:"Custom metrics",description:"Build your own metrics, such as a percentage."},pagination:{type:"pagination",title:"Pagination",description:"Define the size for each page in the table"}},format_panel:{heading:{type:"heading",title:"Heading",description:"",subSectionDefinition:{title:{type:"title",title:"Title",description:"",namespace:"title"},subject:{type:"subject",title:"Subject",description:"",namespace:"subject"}}},format:{type:"format",title:"Format",description:"",subSectionDefinition:{time:{type:"time",title:"Time",description:"",namespace:"time"}}},prefixes:{type:"prefixes",title:"Prefixes",description:""},conditional_formatting:{type:"conditionalFormatting",title:"Conditional Formatting",description:""}}},n1=function(e){return{title:n0.title,description:n0.description,servicesClass:"BasicTable",namespace:n0.namespace,dump:function(e){return{type:e.type,measure:e.measure,displayTitle:e.displayTitle,dimension:e.dimension,timeDimension:e.timeDimension,displaySubject:e.displaySubject,protectedFields:e.protectedFields,filter:e.filter,order:e.order,dataSetId:e.dataSetId,viewId:null==e?void 0:e.viewId,limit:e.limit,offset:e.offset,conditionalFormattingRules:e.conditionalFormattingRules,protectedByOrganisation:e.protectedByOrganisation,dateTimeFormat:e.dateTimeFormat,prefixes:e.prefixes,exportNames:e.exportNames,numberFormat:e.numberFormat,sizing:e.sizing,tags:e.tags}},load:function(t){var n;return en({},t,{measure:eb(t.measure),order:eg(t.order,t.timeDimension),filter:ev(t.filter),dimension:eG(t.dimension),viewId:nv(t.viewId),protectedFields:nw(t.protectedFields),conditionalFormattingRules:nC(e.queryEngineConfig,t.conditionalFormattingRules),tags:null!=(n=t.tags)?n:[]})},setAttributes:n$(e),validate:function(t,n){return nc(t,n,e.queryEngineConfig)},init:function(t,n){var i={type:"basicTable",measure:[],displayTitle:"",dimension:[],timeDimension:null,displaySubject:"",filter:[],order:[],tags:[],dataSetId:t,viewId:nv(null==n?void 0:n.viewId),protectedFields:void 0,limit:50,offset:0,conditionalFormattingRules:[],prefixes:[],dateTimeFormat:"DD MMMM YYYY, hh:mm",exportNames:{},numberFormat:{},sizing:{}};return n$(e)(i,n||{})},schema:nZ(e),removeField:function(t,n){return t8(t,n,e.queryEngineConfig)},setFields:function(t,n){var i=[].concat(n).map(function(e){return{field:e,function:"none"}});return n$(e)(t,{measure:i})},setDateTimeFormat:function(e,t){return this.setAttributes(e,{dateTimeFormat:t})},isRunnable:function(e){return e.measure.length>0},autoGenerate:function(e){var t=[].concat(iD(e.fields,{forComponent:"basicTable",onlyMeasures:!0,removeAggregateMaths:!0,removePercentage:!0})).map(function(e){return{field:e.id,function:"none"}});return this.init(e.id,{measure:t.slice(0,5)})},dataPanelConfig:function(){return[nF(n0,"data_set"),nF(n0,"views"),nF(n0,"fields"),nF(n0,"sort"),en({},nF(n0,"pagination"),{options:nK}),nF(n0,"filter"),nF(n0,"custom_metrics")]},formatPanelConfig:function(){var e;return[nT(n0),en({},nF(n0,"format"),{subSection:[null==(e=n0.format_panel.format)?void 0:e.subSectionDefinition.time]}),nF(n0,"prefixes"),en({},nF(n0,"conditional_formatting"),{ruleType:"backgroundColor"})]},supportedCustomFields:{percentages:!1,simpleMaths:!0,rules:!0,aggregateMaths:!1,roundedNumbers:!0,dateCalculations:!1,conditional:!0},supportedFeatures:{parameters:!1,colorGradient:!0}}},n2={title:"Horizontal bar chart",description:"Similar to a BarChart but with horizontal bars.",namespace:"horizontal_bar_chart",data_panel:{data_set:{type:"dataSet",title:"Data set",description:"What data do you want to use in this bar chart?"},views:{type:"views",title:"View",description:""},field_y_axis:{type:"fieldCollector",title:"Metric - Y Axis",description:"What do you want each bar to measure?",callToAction:"Add metric"},drilldown:{type:"drilldown",title:"Drilldown",description:"After clicking on a segment of this bar chart, what information do you want to see next?"},field_x_axis:{type:"fieldCollector",title:"Grouping - X Axis",description:"What do you want each bar to represent? An example might be a `product category` field to represent each category as a bar.",callToAction:"Add grouping"},sort:{type:"sort",title:"Sort",description:"Select the order of categories or time on the x Axis."},filter:{type:"filter",title:"Filters",description:"Only include the information you want to use in this bar chart."},custom_metrics:{type:"customMetrics",title:"Custom metrics",description:"Build your own metrics, such as a percentage."},limit:{type:"limit",title:"Limit",description:"Set the maximum number of records to show on this bar chart."}},format_panel:{heading:{type:"heading",title:"Heading",description:"",subSectionDefinition:{title:{type:"title",title:"Title",description:"",namespace:"title"},subject:{title:"Subject",type:"subject",description:"",namespace:"subject"}}},chart_styles:{type:"chartStyles",title:"Chart Settings",description:"",subSectionDefinition:{stacked:{type:"stacked",title:"Layout",description:"",namespace:"stacked"},legend:{type:"legend",title:"Show Legend",description:"",namespace:"legend"}}},axis_labels:{type:"axisLabels",title:"Axis Preferences",description:"",subSectionDefinition:{x:{title:"X Axis",description:"",namespace:"x"},"x.prefix":{title:"Prefix",description:"",namespace:"x.prefix"},"x.postfix":{title:"Postfix",description:"",namespace:"x.postfix"},"x.format":{title:"Format",description:"",namespace:"x.format"},"x.count":{title:"Label count",description:"",namespace:"x.count"},"x.axis_title":{title:"Title",description:"",namespace:"x.axis_title"},y:{title:"Y Axis",description:"",namespace:"y"},"y.prefix":{title:"Prefix",description:"",namespace:"y.prefix"},"y.postfix":{title:"Postfix",description:"",namespace:"y.postfix"},"y.format":{title:"Format",description:"",namespace:"y.format"},"y.count":{title:"Label count",description:"",namespace:"y.count"},"y.axis_title":{title:"Title",description:"",namespace:"y.axis_title"}}},headline:{type:"headline",title:"Headline",description:""},conditional_formatting:{type:"conditionalFormatting",title:"Conditional Formatting",description:""}}},n5=function(e){var t;return{title:n2.title,description:n2.description,servicesClass:"HorizontalBarChart",namespace:n2.namespace,dump:function(e){return e},load:function(e){var t;return en({},e,{measure:eb(e.measure),order:eg(e.order,e.timeDimension),dimension:eG(e.dimension),viewId:nv(e.viewId),filter:ev(e.filter),approxXAxisLabelCount:ex(e.approxXAxisLabelCount),approxYAxisLabelCount:ex(e.approxYAxisLabelCount),protectedFields:nw(e.protectedFields),tags:null!=(t=e.tags)?t:[]})},setAttributes:function(t,n){var i=ne(t,n,nr(e));return t9(i)},validate:function(t,n){return nc(t,n,e.queryEngineConfig)},init:function(e,t){return en({type:"horizontalBarChart",measure:[],dimension:[],timeDimension:null,displayTitle:"",displaySubject:"",viewId:nv(null==t?void 0:t.viewId),filter:[],order:[],dataSetId:e,limit:5e3,conditionalFormattingRules:[],protectedByOrganisation:void 0,protectedFields:void 0,xAxisPostfix:"",xAxisPrefix:"",yAxisPostfix:"",yAxisPrefix:"",yAxisFormat:null,xAxisFormat:null,legend:!0,drilldown:[],approxXAxisLabelCount:"auto",approxYAxisLabelCount:"auto",axisTitles:void 0,tags:[],drilldownOptions:void 0},t)},createFeedback:nm,schema:nr(e),removeField:function(t,n){return t8(t,n,e.queryEngineConfig)},isRunnable:function(e){return e.measure.length>0},autoGenerate:function(t){var n=iV(t,e.queryEngineConfig,"horizontalBarChart");return this.init(t.id,{measure:[n.measure[0]],dimension:n.dimension})},dataPanelConfig:function(){return[nF(n2,"data_set"),nF(n2,"views"),en({},nF(n2,"field_y_axis"),{fieldFilterOptions:{forComponent:"horizontalBarChart"},preSetPartialAttributes:function(e){return{measure:e}},getValues:function(e){return e.measure},testId:"metric-input"}),en({},nF(n2,"field_x_axis"),{fieldFilterOptions:{forComponent:"horizontalBarChart",onlyDimensions:!0},preventDuplicates:!0,preSetPartialAttributes:function(e,t){return nx(e,t)},getValues:function(e){return ny(e)},maxAllowed:2,testId:"add-dimension"}),nF(n2,"sort"),nF(n2,"filter"),en({},nF(n2,"drilldown"),{options:{property:"drilldownOptions"}}),nF(n2,"custom_metrics"),nF(n2,"limit")]},formatPanelConfig:function(){return[nT(n2),nI(n2,!1,!0),n_(n2),en({},nF(n2,"conditional_formatting"),{ruleType:"backgroundColor"}),nF(n2,"headline")]},supportedCustomFields:{percentages:!0,dateCalculations:!0,simpleMaths:!0,rules:!0,aggregateMaths:!0,roundedNumbers:!0,conditional:!0},supportedFeatures:{parameters:!0,colorGradient:!1},setDataAttributesFromPreAggregatedDataSet:function(e,t){return nb(e,t,this.setAttributes)}}},n7=function(e){return p.object(en({},tC(e.attributesSchemaOptions),tF(e.queryEngineConfig,e.attributesSchemaOptions),{stacked:p.valid(!0,!1,"100%"),legend:p.valid(!0,!1),type:p.valid("areaChart").required(),lineCurve:tk,conditionalFormattingRules:ni(e.queryEngineConfig),parameters:tI(e.queryEngineConfig,e.attributesSchemaOptions),goalLines:tD(),axisTitles:tE(),headline:tO(),tags:tm()}))},n4={title:"Area chart",description:"Displays data as areas on a chart, useful for showing trends over time.",namespace:"area_chart",data_panel:{data_set:{type:"dataSet",title:"Data set",description:"What data do you want to use in this area chart?"},views:{type:"views",title:"View",description:""},field_y_axis:{type:"fieldCollector",title:"Metric - Y Axis",description:"What do you want each area to measure?",callToAction:"Add metric"},field_x_axis:{type:"fieldCollector",title:"Grouping - X Axis",description:"What do you want each area to represent? An example might be an employee ID to represent each employee.",callToAction:"Add grouping"},sort:{type:"sort",title:"Sort",description:"Select the order of categories or time on the x Axis."},filter:{type:"filter",title:"Filters",description:"Only include the information you want to use in this area chart."},custom_metrics:{type:"customMetrics",title:"Custom metrics",description:"Build your own metrics, such as a percentage."},limit:{type:"limit",title:"Limit",description:"Set the maximum number of records to show on this area chart."}},format_panel:{heading:{type:"heading",title:"Heading",description:"",subSectionDefinition:{title:{type:"title",title:"Title",description:"",namespace:"title"},subject:{title:"Subject",type:"subject",description:"",namespace:"subject"}}},chart_styles:{type:"chartStyles",title:"Chart Settings",description:"",subSectionDefinition:{stacked:{type:"stacked",title:"Layout",description:"",namespace:"stacked"},legend:{type:"legend",title:"Show Legend",description:"",namespace:"legend"},curve:{type:"curve",title:"Line Curve",description:"",namespace:"curve"}}},axis_labels:{type:"axisLabels",title:"Axis Preferences",description:"",subSectionDefinition:{x:{title:"X Axis",description:"",namespace:"x"},"x.prefix":{title:"Prefix",description:"",namespace:"x.prefix"},"x.postfix":{title:"Postfix",description:"",namespace:"x.postfix"},"x.format":{title:"Format",description:"",namespace:"x.format"},"x.count":{title:"Label count",description:"",namespace:"x.count"},"x.axis_title":{title:"Title",description:"",namespace:"x.axis_title"},y:{title:"Y Axis",description:"",namespace:"y"},"y.prefix":{title:"Prefix",description:"",namespace:"y.prefix"},"y.postfix":{title:"Postfix",description:"",namespace:"y.postfix"},"y.format":{title:"Format",description:"",namespace:"y.format"},"y.count":{title:"Label count",description:"",namespace:"y.count"},"y.axis_title":{title:"Title",description:"",namespace:"y.axis_title"}}},conditional_formatting:{type:"conditionalFormatting",title:"Conditional Formatting",description:""},headline:{type:"headline",title:"Headline",description:""},goal_line:{type:"goalLine",title:"Goal Lines",description:""}}},n3=function(e){var t;return{title:n4.title,description:n4.description,servicesClass:"AreaChart",namespace:n4.namespace,dump:function(e){return e},load:function(t){var n;return{type:t.type,measure:eb(t.measure),displayTitle:t.displayTitle,dimension:eG(t.dimension),timeDimension:t.timeDimension,displaySubject:t.displaySubject,viewId:nv(t.viewId),filter:ev(t.filter),order:eg(t.order,t.timeDimension),dataSetId:t.dataSetId,limit:t.limit,offset:t.offset,xAxisPostfix:t.xAxisPostfix,xAxisPrefix:t.xAxisPrefix,yAxisPostfix:t.yAxisPostfix,yAxisPrefix:t.yAxisPrefix,lineCurve:t.lineCurve,conditionalFormattingRules:nC(e.queryEngineConfig,t.conditionalFormattingRules),protectedByOrganisation:t.protectedByOrganisation,stacked:t.stacked,drilldown:t.drilldown,legend:t.legend,yAxisFormat:t.yAxisFormat,xAxisFormat:t.xAxisFormat,goalLines:t.goalLines,parameters:ey(t.parameters),approxXAxisLabelCount:ex(t.approxXAxisLabelCount),approxYAxisLabelCount:ex(t.approxYAxisLabelCount),headline:nO(t.headline,t.timeDimension),tags:null!=(n=t.tags)?n:[]}},setAttributes:function(t,n){var i=ne(t,n,n7(e));return t9(i)},validate:function(t,n){return nc(t,n,e.queryEngineConfig)},init:function(e,t){return en({type:"areaChart",measure:[],displayTitle:"",dimension:[],timeDimension:null,displaySubject:"",viewId:nv(null==t?void 0:t.viewId),filter:[],order:[],dataSetId:e,limit:5e3,offset:0,xAxisPostfix:"",xAxisPrefix:"",yAxisPostfix:"",yAxisPrefix:"",yAxisFormat:null,xAxisFormat:null,lineCurve:"natural",conditionalFormattingRules:[],drilldown:[],legend:!0,approxXAxisLabelCount:"auto",approxYAxisLabelCount:"auto",parameters:{},goalLines:void 0,axisTitles:void 0,headline:void 0,tags:[]},t)},createFeedback:nm,schema:n7(e),removeField:function(t,n){return t8(t,n,e.queryEngineConfig)},isRunnable:function(e){return e.measure.length>0},autoGenerate:function(t){var n=iV(t,e.queryEngineConfig,"areaChart");return this.init(t.id,{measure:[n.measure[0]],dimension:n.dimension})},dataPanelConfig:function(){return[nF(n4,"data_set"),nF(n4,"views"),en({},nF(n4,"field_y_axis"),{fieldFilterOptions:{forComponent:"areaChart"},preSetPartialAttributes:function(e){return{measure:e}},getValues:function(e){return e.measure},testId:"metric-input"}),en({},nF(n4,"field_x_axis"),{fieldFilterOptions:{forComponent:"areaChart",onlyDimensions:!0},preventDuplicates:!0,preSetPartialAttributes:function(e,t){return nx(e,t)},getValues:function(e){return ny(e)},maxAllowed:2,testId:"add-dimension"}),nF(n4,"sort"),nF(n4,"filter"),nF(n4,"custom_metrics"),nF(n4,"limit")]},formatPanelConfig:function(){var e,t,n;return[nT(n4),en({},nF(n4,"chart_styles"),{subSection:[null==(e=n4.format_panel.chart_styles)?void 0:e.subSectionDefinition.stacked,null==(t=n4.format_panel.chart_styles)?void 0:t.subSectionDefinition.legend,null==(n=n4.format_panel.chart_styles)?void 0:n.subSectionDefinition.curve]}),n_(n4),en({},nF(n4,"conditional_formatting"),{ruleType:"areaColor"}),nF(n4,"goal_line"),nF(n4,"headline")]},supportedCustomFields:{percentages:!0,dateCalculations:!0,simpleMaths:!0,rules:!0,aggregateMaths:!0,roundedNumbers:!0,conditional:!0},supportedFeatures:{parameters:!0,colorGradient:!1}}},n6=function(e){return p.object(en({},tC(e.attributesSchemaOptions),{fontSize:p.string().allow(""),formatter:p.object(),measure:p.array().items(th(e.queryEngineConfig.supportedAggregates,e.attributesSchemaOptions)),filter:ty(e.queryEngineConfig),prefixes:p.object(),postfixes:p.object(),type:p.valid("singleStat").required(),limit:tw(),conditionalFormattingRules:ni(e.queryEngineConfig),deltaTimeDimension:p.alternatives(tg(e.queryEngineConfig.supportedTimeTruncFunctions),p.valid(null)),parameters:tI(e.queryEngineConfig,e.attributesSchemaOptions),tags:tm()}))},n8=function(e){if("singleMeasure"in e){var t={},n={},i=[],r={};return e.singleMeasure&&(i=[e.singleMeasure],t[eV(e.singleMeasure)]=e.prefix,n[eV(e.singleMeasure)]=e.postfix,r[eV(e.singleMeasure)]=e.formatter),{type:"singleStat",prefixes:t,postfixes:n,measure:i,formatter:r,fontSize:e.fontSize,displayTitle:e.displayTitle,displaySubject:e.displaySubject,tags:e.tags,filter:ev(e.filter),dataSetId:e.dataSetId,limit:e.limit,conditionalFormattingRules:e.conditionalFormattingRules,deltaTimeDimension:e.deltaTimeDimension,parameters:ey(e.parameters)}}return en({},e,{filter:ev(e.filter)})},n9={title:"Single stat",description:"Shows a single statistical value, ideal for key data point representation.",namespace:"single_stat",data_panel:{data_set:{type:"dataSet",title:"Data set",description:"What data do you want to use in this single stat?"},views:{type:"views",title:"View",description:""},field_metrics:{type:"fieldCollector",title:"Metrics",description:"What do you want to show?",callToAction:"Add metric"},filter:{type:"filter",title:"Filters",description:"Only include the information you want in this scatter chart."},custom_metrics:{type:"customMetrics",title:"Custom metrics",description:"Build your own metrics, such as a percentage."},comparison:{type:"comparison",title:"Comparison",description:""}},format_panel:{heading:{type:"heading",title:"Heading",description:"",subSectionDefinition:{title:{type:"title",title:"Title",description:"",namespace:"title"},subject:{title:"Subject",type:"subject",description:"",namespace:"subject"}}},stats_labels:{type:"statsLabels",title:"Labels",description:"",subSectionDefinition:{prefix:{title:"Prefix",description:"",namespace:"prefix"},postfix:{title:"Postfix",description:"",namespace:"postfix"},format:{title:"Format",description:"",namespace:"format"},count:{title:"Label count",description:"",namespace:"count"}}},conditional_formatting:{type:"conditionalFormatting",title:"Conditional Formatting",description:""},format:{type:"format",title:"Format",description:"",subSectionDefinition:{font_size:{title:"Font Size",type:"fontSize",description:"",namespace:"font_size"}}}}},ie=function(e){return{title:n9.title,description:n9.description,servicesClass:"SingleStat",namespace:n9.namespace,dump:function(e){return e},load:function(e){var t,n=n8(e);return{type:"singleStat",prefixes:n.prefixes,postfixes:n.postfixes,formatter:n.formatter,fontSize:n.fontSize,measure:eb(n.measure),displayTitle:n.displayTitle,displaySubject:n.displaySubject,protectedByOrganisation:e.protectedByOrganisation,viewId:nv(e.viewId),filter:n.filter,dataSetId:n.dataSetId,limit:n.limit,conditionalFormattingRules:n.conditionalFormattingRules,deltaTimeDimension:n.deltaTimeDimension,parameters:ey(n.parameters),tags:null!=(t=n.tags)?t:[]}},setAttributes:function(t,n){return ne(t,n,n6(e))},validate:function(t,n){return nc(t,n,e.queryEngineConfig)},init:function(e,t){return en({type:"singleStat",measure:[],displayTitle:"",postfixes:{},prefixes:{},formatter:{},fontSize:"2rem",protectedByOrganisation:void 0,displaySubject:"",viewId:nv(null==t?void 0:t.viewId),filter:[],dataSetId:e,limit:5e3,conditionalFormattingRules:[],deltaTimeDimension:null,parameters:{},tags:[]},t)},schema:n6(e),removeField:function(t,n){return t8(t,n,e.queryEngineConfig)},isRunnable:function(e){return e.measure.length>0},autoGenerate:function(t){var n=iV(t,e.queryEngineConfig,"singleStat");return this.init(t.id,{measure:[n.measure[0]]})},dataPanelConfig:function(){return[nF(n9,"data_set"),nF(n9,"views"),en({},nF(n9,"field_metrics"),{fieldFilterOptions:{forComponent:"singleStat"},preSetPartialAttributes:function(e){return{measure:e}},getValues:function(e){return e.measure},testId:"metric-input"}),nF(n9,"filter"),nF(n9,"custom_metrics"),nF(n9,"comparison")]},formatPanelConfig:function(){var e;return[nT(n9),en({},nF(n9,"stats_labels"),{prefix:nA(n9,"prefix"),postfix:nA(n9,"postfix"),format:nA(n9,"format"),count:nA(n9,"count")}),en({},nF(n9,"format"),{subSection:[null==(e=n9.format_panel.format)?void 0:e.subSectionDefinition.font_size]}),en({},nF(n9,"conditional_formatting"),{ruleType:"fontColor"})]},supportedCustomFields:{percentages:!0,dateCalculations:!0,simpleMaths:!0,aggregateMaths:!0,rules:!0,roundedNumbers:!0,conditional:!0},supportedFeatures:{parameters:!0,colorGradient:!1},setDataAttributesFromPreAggregatedDataSet:function(e,t){var n=s.cloneDeep(iD(t.fields,{onlyFieldTypes:["number"]}));return en({},e,{type:"singleStat",protectedByOrganisation:!0,measure:[].concat(n).map(function(e){return{function:"none",field:e.id}})})}}},it=function(e){return p.object(en({},tC(e.attributesSchemaOptions),{type:p.valid("custom").required(),customViewId:p.string().required(),tags:tm()}))},ii={title:"Progress",description:"Used to show progress towards goals, completion of tasks, or as indicators of performance metrics.",namespace:"progress",data_panel:{data_set:{type:"dataSet",title:"Data set",description:"What data do you want to use in this progress?"},views:{type:"views",title:"View",description:""}},format_panel:{heading:{type:"heading",title:"Heading",description:"",subSectionDefinition:{title:{type:"title",title:"Title",description:"",namespace:"title"},subject:{title:"Subject",type:"subject",description:"",namespace:"subject"}}}}},ir=function(e){return{title:ii.title,description:ii.description,namespace:ii.namespace,servicesClass:"Custom",dump:function(e){return e},load:function(e){var t;return{type:"custom",viewId:nv(e.viewId),customViewId:e.customViewId,displayTitle:e.displayTitle,displaySubject:e.displaySubject,dataSetId:e.dataSetId,tags:null!=(t=e.tags)?t:[],protectedByOrganisation:e.protectedByOrganisation}},setAttributes:function(t,n){return ne(t,n,it(e))},validate:function(t,n){return nc(t,n,e.queryEngineConfig)},init:function(e,t){return{type:"custom",viewId:nv(null==t?void 0:t.viewId),customViewId:(null==t?void 0:t.customViewId)||"",dataSetId:e,displaySubject:"",displayTitle:"",tags:[],protectedByOrganisation:void 0}},schema:it(e),removeField:function(e,t){return e},isRunnable:function(){return!0},autoGenerate:function(e){return this.init(e.id)},dataPanelConfig:function(){return[nF(ii,"data_set"),nF(ii,"views")]},formatPanelConfig:function(){return[nT(ii)]},supportedCustomFields:{percentages:!1,simpleMaths:!1,rules:!1,aggregateMaths:!1,roundedNumbers:!1,dateCalculations:!1,conditional:!1},supportedFeatures:{colorGradient:!1,parameters:!1}}},io=function(e){return p.object(en({},tC(e.attributesSchemaOptions),{type:p.valid("mercatorMap").required(),measure:p.array().items(th(e.queryEngineConfig.supportedAggregates,e.attributesSchemaOptions)),filter:ty(e.queryEngineConfig),limit:tw(),dimension:tb({},e.attributesSchemaOptions),labelFormat:p.alternatives(p.string(),p.valid(null)),noDataColor:p.string().required(),backgroundColor:p.string().required(),maxValueColor:p.string().required(),minValueColor:p.string().required(),position:p.object({scale:p.number(),centerX:p.number(),centerY:p.number()}),tags:tm()}))},ia={title:"Country map",description:"A map component based on the Mercator projection, suitable for geographical data visualization.",namespace:"mercator_map",data_panel:{data_set:{type:"dataSet",title:"Data set",description:"What data do you want to use for this map?"},views:{type:"views",title:"View",description:""},field_metrics:{type:"fieldCollector",title:"Metric",description:"What do you want to show?",callToAction:"Add metric"},field_country:{type:"fieldCollector",title:"Country",description:"Which field contains the country code required to group results on?",callToAction:"Set country"},filter:{type:"filter",title:"Filters",description:"Only include the information you want to use on this map."},custom_metrics:{type:"customMetrics",title:"Custom metrics",description:"Build your own metrics, such as a percentage."},limit:{type:"limit",title:"Limit",description:"Set the maximum number of records to show on this map."}},format_panel:{heading:{type:"heading",title:"Heading",description:"",subSectionDefinition:{title:{type:"title",title:"Title",description:"",namespace:"title"},subject:{title:"Subject",type:"subject",description:"",namespace:"subject"}}},chart_styles:{type:"chartStyles",title:"Map Settings",description:"",subSectionDefinition:{number_format:{type:"numberFormat",title:"Value format",description:"",namespace:"number_format"}}},map_colors:{type:"mapColors",title:"Map colors",description:""}}},il=function(e){var t;return{title:ia.title,description:ia.description,servicesClass:"MercatorMap",namespace:ia.namespace,dump:function(e){return e},load:function(e){var t;return{dataSetId:e.dataSetId,displaySubject:e.displaySubject,displayTitle:e.displayTitle,protectedByOrganisation:e.protectedByOrganisation,viewId:nv(e.viewId),type:"mercatorMap",dimension:e.dimension,limit:e.limit,measure:eb(e.measure),labelFormat:e.labelFormat,position:e.position,filter:ev(e.filter),noDataColor:e.noDataColor||"#ffffff",backgroundColor:e.backgroundColor||"#EFF5F6",maxValueColor:e.maxValueColor||"#000000",minValueColor:e.minValueColor||"#e0e0e0",tags:null!=(t=e.tags)?t:[]}},setAttributes:function(t,n){return ne(t,n,io(e))},validate:function(){return[]},init:function(e,t){return en({type:"mercatorMap",dataSetId:e,dimension:[],measure:[],displaySubject:"",displayTitle:"",limit:5e3,filter:[],viewId:nv(null==t?void 0:t.viewId),labelFormat:null,noDataColor:"#ffffff",backgroundColor:"#EFF5F6",maxValueColor:"#000000",minValueColor:"#e0e0e0",tags:[]},t)},schema:io(e),removeField:function(e,t){return e},isRunnable:function(e){return!!(e.dimension&&e.dimension[0]&&e.measure&&e.measure[0])},autoGenerate:function(e){return this.init(e.id)},dataPanelConfig:function(){return[nF(ia,"data_set"),nF(ia,"views"),en({},nF(ia,"field_metrics"),{type:"fieldCollector",fieldFilterOptions:{forComponent:"mercatorMap"},maxAllowed:1,preSetPartialAttributes:function(e){return{measure:e}},getValues:function(e){return e.measure},testId:"metric-input"}),en({},nF(ia,"field_country"),{fieldFilterOptions:{onlyDimensions:!0,onlyFieldTypes:["string"],removeRuleGrouping:!1,removeSimpleMaths:!0,removePercentage:!0,removeAggregateMaths:!0},maxAllowed:1,preSetPartialAttributes:function(e){return{dimension:e}},getValues:function(e){return e.dimension},testId:"add-dimension"}),nF(ia,"filter"),nF(ia,"custom_metrics"),nF(ia,"limit")]},formatPanelConfig:function(){var e;return[nT(ia),en({},nF(ia,"chart_styles"),{subSection:[null==(e=ia.format_panel.chart_styles)?void 0:e.subSectionDefinition.number_format]}),nF(ia,"map_colors")]},supportedCustomFields:{percentages:!0,dateCalculations:!0,simpleMaths:!0,rules:!0,aggregateMaths:!0,roundedNumbers:!0,conditional:!0},supportedFeatures:{parameters:!1,colorGradient:!1}}},is=["barChart","horizontalBarChart","areaChart","lineChart","scatterChart","pieChart","singleStat","dataTable","basicTable","comboChart","mercatorMap","custom","progress"],iu=((nD={}).Linear="linear",nD.Circular="circular",nD),id=function(e){return p.object(en({},tC(e.attributesSchemaOptions),{measure:p.array().items(th(e.queryEngineConfig.supportedAggregates,e.attributesSchemaOptions)),filter:ty(e.queryEngineConfig),type:p.valid("progress").required(),limit:tw(),conditionalFormattingRules:ni(e.queryEngineConfig),parameters:tI(e.queryEngineConfig,e.attributesSchemaOptions),goals:p.array().items(p.object({field:p.string().required().description("ID of the field in the data set to which the goal applies too"),value:p.number().required().description("Value of which the goal is set")})).description("Set the target value that progression is shown towards."),progressType:p.array().items(p.object({field:p.string().required().description("ID of the field to set the progress type of"),value:p.valid(iu.Linear,iu.Circular).required()})).description("Set the display type of the progress view"),formatter:p.object().pattern(p.string(),p.string()),prefixes:p.object().pattern(p.string(),p.string()),postfixes:p.object().pattern(p.string(),p.string()),tags:tm()}))},ic={title:"Progress",description:"Used to show progress towards goals, completion of tasks, or as indicators of performance metrics.",namespace:"progress",data_panel:{data_set:{type:"dataSet",title:"Data set",description:"What data do you want to use in this progress?"},views:{type:"views",title:"View",description:""},progress_goals:{type:"progressGoals",title:"Metric",description:"What do you want to show in each progress bar?"},filter:{type:"filter",title:"Filters",description:"Only include the information you want in this progress chart."},custom_metrics:{type:"customMetrics",title:"Custom metrics",description:"Build your own metrics, such as a percentage."}},format_panel:{heading:{type:"heading",title:"Heading",description:"",subSectionDefinition:{title:{type:"title",title:"Title",description:"",namespace:"title"},subject:{title:"Subject",type:"subject",description:"",namespace:"subject"}}},stats_labels:{type:"statsLabels",title:"Labels",description:"",subSectionDefinition:{prefix:{title:"Prefix",description:"",namespace:"prefix"},postfix:{title:"Postfix",description:"",namespace:"postfix"},format:{title:"Format",description:"",namespace:"format"},count:{title:"Label count",description:"",namespace:"count"}}},progress_type:{type:"progressType",title:"Type",description:""}}},ip=function(e){return{title:ic.title,description:ic.description,dump:function(e){return e},namespace:ic.namespace,servicesClass:"Progress",load:function(e){var t,n=n8(e);return{type:"progress",measure:eb(n.measure),displayTitle:n.displayTitle,displaySubject:n.displaySubject,protectedByOrganisation:n.protectedByOrganisation,viewId:nv(n.viewId),filter:n.filter,dataSetId:n.dataSetId,limit:n.limit,conditionalFormattingRules:n.conditionalFormattingRules,parameters:n.parameters,prefixes:n.prefixes,postfixes:n.postfixes,formatter:n.formatter,goals:n.goals,progressType:n.progressType,tags:null!=(t=n.tags)?t:[]}},setAttributes:function(t,n){return ne(t,n,id(e))},validate:function(t,n){return nc(t,n,e.queryEngineConfig)},init:function(e,t){return en({type:"progress",measure:[],displayTitle:"",protectedByOrganisation:void 0,displaySubject:"",viewId:nv(null==t?void 0:t.viewId),filter:[],dataSetId:e,limit:5e3,conditionalFormattingRules:[],parameters:{},formatter:{},progressType:[],goals:[],postfixes:{},prefixes:{},tags:[]},t)},schema:id(e),removeField:function(t,n){return t8(t,n,e.queryEngineConfig)},isRunnable:function(e){return e.measure.length>0},autoGenerate:function(e){return this.init(e.id)},dataPanelConfig:function(){return[nF(ic,"data_set"),nF(ic,"views"),nF(ic,"progress_goals"),nF(ic,"filter"),nF(ic,"custom_metrics")]},formatPanelConfig:function(){return[nT(ic),nF(ic,"progress_type"),en({},nF(ic,"stats_labels"),{prefix:nA(ic,"prefix"),postfix:nA(ic,"postfix"),format:nA(ic,"format"),count:nA(ic,"count")})]},supportedCustomFields:{percentages:!0,dateCalculations:!0,simpleMaths:!0,aggregateMaths:!0,rules:!0,roundedNumbers:!0,conditional:!0},supportedFeatures:{parameters:!1,colorGradient:!1}}},im=["title","description","data_panel","format_panel"],ih=["title","description","callToAction"],iv=p.alternatives().try(p.string(),p.object({sentence:p.string().custom(function(e,t){for(var n,i=/\{\{(\w+)\}\}/g;null!==(n=i.exec(e));){var r=n[1];if(!t.state.ancestors[0][r+"_singular"]||!t.state.ancestors[0][r+"_plural"])return t.error("any.invalid",{message:'"textOverride": "'+r+'" found in sentence but corresponding "'+r+'_singular" and "'+r+'_plural" fields are missing'})}return e})}).pattern(/.+_(singular|plural)$/,p.string())).messages({"any.custom":"{{#message}}"}),ig=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ib=/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi,ix=/on[a-z]+\s*=\s*["'][^"']*["']/gi,iy=/javascript:[^\s"']+/gi,iw=RegExp("^(?:"+/<(b|strong)>(?:(?!<\/(b|strong)>).)*<\/(b|strong)>/.source+"|"+/<(i|em)>(?:(?!<\/(i|em)>).)*<\/(i|em)>/.source+"|[^*_<>])*$","m"),iC=function(e){if(ig.test(e)||ib.test(e)||ix.test(e)||iy.test(e))throw Error("Invalid content: potentially malicious elements detected.");return iw.test(e)},ij=function(e,t,n,i){return iS(e,t,n,void 0,i)},iS=function(e,t,n,i,r){if(r)return"[key: "+e+"]";var o,a,l,s,u,d,c,p,f,m,h=i?(l=i[e],(s=iv.validate(l)).error&&s.error.details.forEach(function(e){var t;eR(null==(t=e.context)?void 0:t.message)}),!function(){if("string"==typeof l)return iC(l);if("object"==typeof l)return iC(l.sentence);if(void 0===l)return!0;throw Error("Invalid translation type")}()?void 0:l):void 0;return d=u="object"==typeof h&&null!==h?h.sentence:"string"==typeof h?h:t,u=n?d.replace(/\[\[([^\]]+)\]\]/g,function(e,t){for(var i,r=ed(t.split("|"));!(i=r()).done;){var o=n[i.value];if("string"==typeof o&&""!==o)return o;if("number"==typeof o)return o.toString()}return""}):d,n&&(p=u,Object.entries(n).forEach(function(e){var t=e[0],n=e[1];if(n&&"object"==typeof n&&"count"in n){var i=1===n.count?h&&h[t+"_singular"]||n.singular:h&&h[t+"_plural"]||n.plural;p=p.replace(RegExp("{{"+t+"}}","g"),i)}}),u=p),function(e,t){if(!t)return e;for(var n=0,i=Object.entries(t);n<i.length;n++){var r=i[n],o=r[1];if("string"==typeof o||"number"==typeof o){var a=RegExp("\\[\\["+r[0]+"\\]\\]","g");e=e.replace(a,String(o))}}return e}(u,n)},iF=function(e,t){var n=null!=t?t:iS,i=e,r=e.namespace;return im.forEach(function(t){if("title"===t||"description"===t){var o,a=n(r+"."+t,e[t]);i=en({},i,((o={})[t]=a,o))}if("data_panel"===t){var l=r+"."+t,s=[];e.dataPanelConfig().forEach(function(e){e.subSection&&(e.subSection=iT(e,n,l)),i_(e).forEach(function(t){var i=n(l+"."+t.key,t.defaultValue);e[t.property]=i}),s.push(e)}),i=en({},i,{dataPanelConfig:function(){return s}})}if("format_panel"===t){var u=r+"."+t,d=[];e.formatPanelConfig().forEach(function(e){e.subSection&&(e.subSection=iT(e,n,u)),function(e,t,n){var i;function r(n,i){n&&i_(n).forEach(function(r){var o=e(t+"."+i+"."+r.key,r.defaultValue);n[r.property]=o})}function o(e,t,n){t.forEach(function(t){var i=e[t];i&&r(i,n)})}n.x&&(o(n.x,ik,"axis_labels"),r(n.x,"axis_labels")),n.y&&(o(n.y,ik,"axis_labels"),r(n.y,"axis_labels")),"prefix"in n&&o(n,ik,"stats_labels")}(n,u,e),i_(e).forEach(function(t){var i=n(u+"."+t.key,t.defaultValue);e[t.property]=i}),d.push(e)}),i=en({},i,{formatPanelConfig:function(){return d}})}}),i},ik=["count","axisTitle","format","postfix","prefix"];function iT(e,t,n){var i;return null==(i=e.subSection)?void 0:i.map(function(i){return i_(i).forEach(function(r){var o=t(n+"."+e.namespace+"."+r.key,r.defaultValue);i[r.property]=o}),i})}function i_(e){var t=e.namespace||e.type;if(!t)return[];var n=[];return ih.forEach(function(i){if(e[i]){var r=i;"callToAction"===i&&(r="call_to_action"),n.push({key:t+"."+r,defaultValue:e[i],property:i})}}),n}var iI={queryEngineConfig:{supportedFeatures:[],supportedAggregates:{},supportedTimeTruncFunctions:{},supportedOperators:{},supportedTransformationFunctions:{}}};function iA(e,t){if("custom"==e)return iF(ir(t||iI),null==t?void 0:t.textOverride);if("barChart"==e)return iF(nE(t||iI),null==t?void 0:t.textOverride);if("areaChart"==e)return iF(n3(t||iI),null==t?void 0:t.textOverride);if("lineChart"==e)return iF(nR(t||iI),null==t?void 0:t.textOverride);if("pieChart"==e)return iF(nz(t||iI),null==t?void 0:t.textOverride);if("scatterChart"==e)return iF(nV(t||iI),null==t?void 0:t.textOverride);if("comboChart"==e)return iF(nY(t||iI),null==t?void 0:t.textOverride);if("dataTable"==e)return iF(nQ(t||iI),null==t?void 0:t.textOverride);if("basicTable"==e)return iF(n1(t||iI),null==t?void 0:t.textOverride);if("singleStat"==e)return iF(ie(t||iI),null==t?void 0:t.textOverride);if("progress"==e)return iF(ip(t||iI),null==t?void 0:t.textOverride);if("mercatorMap"==e)return iF(il(t||iI),null==t?void 0:t.textOverride);if("horizontalBarChart"==e)return iF(n5(t||iI),null==t?void 0:t.textOverride);throw"Cannot get interface for "+e+". Please implement it."}function iD(e,t){var n,i,r,o=[].concat(e);return null!=t&&t.onlyFieldTypes&&!s.isEmpty(t.onlyFieldTypes)&&(o=[].concat(o).filter(function(e){var n;return null==t||null==(n=t.onlyFieldTypes)?void 0:n.includes(e.dataType)})),null!=t&&t.forComponent&&(n=o,r=iA(i=t.forComponent),o=[].concat(n).filter(function(e){var t=!0;return e4(e)&&!r.supportedCustomFields.percentages&&(t=!1),e2(e)&&!r.supportedCustomFields.simpleMaths&&(t=!1),e3(e)&&!r.supportedCustomFields.rules&&(t=!1),e5(e)&&!r.supportedCustomFields.roundedNumbers&&(t=!1),e6(e)&&!r.supportedCustomFields.conditional&&(t=!1),e8(e)&&!r.supportedCustomFields.dateCalculations&&(t=!1),t})),null!=t&&t.removePercentage&&(o=o.filter(function(e){return!e4(e)})),null!=t&&t.removeRuleGrouping&&(o=o.filter(function(e){return!e3(e)})),null!=t&&t.removeSimpleMaths&&(o=o.filter(function(e){return!e2(e)})),null!=t&&t.removeAggregateMaths&&(o=o.filter(function(e){return!e7(e)})),null!=t&&t.removeDateCalculations&&(o=o.filter(function(e){return!e8(e)})),null!=t&&t.removeConditional&&(o=o.filter(function(e){return!e6(e)})),null!=t&&t.onlyDimensions&&(o=o.filter(function(e){return e.canBeDimension})),null!=t&&t.onlyMeasures&&(o=o.filter(function(e){return e.canBeMeasure})),o}var iO,iE=function(e,t){return e.find(function(e){return e.id==t})||null},iL=function(e,t){return e.find(function(e){return e.name==t})||null},iP=function(e,t){var n=[].concat(e.fields).find(function(e){return e.id==t});if(n)return n;throw new t7(e,t)},iR=function(e,t){var n=[].concat(e.fields).find(function(e){return e.publicName==t});if(n)return n;throw"Failed to find field by name in data set. Looking for "+t},iN=function(e,t){var n=s.findIndex(e,function(e){return e.id==t});return[e[n]||null,n]},iM=function(e,t){return en({},e,{fields:[].concat(e.fields).map(function(e){var n,i,r;return r=eN(e.id),{id:e.id,dataType:e.dataType,publicName:e.publicName||r,dashboardRequiredFilterGroups:e.dashboardRequiredFilterGroups||[],description:e.description||void 0,canBeDimension:void 0===e.canBeDimension||e.canBeDimension,canBeMeasure:void 0===e.canBeMeasure||e.canBeMeasure,allowedOperators:void 0===e.allowedOperators?ef(e,t):e.allowedOperators,allowedGranularities:void 0===e.allowedGranularities?Object.keys(t.supportedTimeTruncFunctions):e.allowedGranularities,supportedAggregateOptions:eK(t,e.dataType,e.supportedAggregateOptions)}})})},iz=function(e,t){var n=[].concat(e.fields).filter(te);return t&&(n=iD(n,{forComponent:t})),n},iq=function(e){return en({},e,{fields:[].concat(e.fields).filter(function(e){return!te(e)})})},iB=function(e,t){return[].concat(e).map(function(e){return e.id==t.id?t:e})},iV=function(e,t,n){var i,r,o,a=[].concat(iD(e.fields,{onlyFieldTypes:["boolean","number","string"],onlyDimensions:!0,removePercentage:!0,removeSimpleMaths:!0,removeAggregateMaths:!0}))[0],l=[].concat([].concat(iD(e.fields,{onlyFieldTypes:["number","string","boolean"],onlyMeasures:!0,forComponent:n}))).map(function(e){var n=eq(e,t.supportedAggregates);return{field:e.id,function:n}});return{dataSetId:e.id,measure:l,order:[],timeDimension:null,filter:[],dimension:a?[{field:a.id,function:"none",pivot:"horizontalBarChart"===n?void 0:"x"}]:[]}},iW=function(e,t,n){var i=[].concat(iD(e.fields,{removeAggregateMaths:!0,removePercentage:!0})).map(function(e){return{field:e.id,function:"none"}});return{dataSetId:e.id,measure:i,timeDimension:null,order:[],filter:n,dimension:[],limit:t,offset:0}},iH=function(e){if(!e.preAggregated)throw"buildViewOnlyQuery function should only be used for single-view datasets";return{dataSetId:e.id,preparedQueryType:"preAggregated",type:"preparedQuery",filter:{}}},iY=function(e,t,n,i,r){var o,a,l;return void 0===r&&(r={}),{id:n,publicName:i,dataType:t,canBeDimension:null!=(o=r.canBeDimension)?o:"number"!=t,canBeMeasure:null==(a=r.canBeMeasure)||a,allowedOperators:null!=(l=r.allowedOperators)?l:ef({dataType:t},e)}},iG=function(e,t,n,i){return void 0===i&&(i={}),iY(e,"string",t,n,i)},iU=function(e,t,n,i){return void 0===i&&(i={}),iY(e,"number",t,n,i)},iK=function(e,t,n,i){return void 0===i&&(i={}),iY(e,"boolean",t,n,i)},iX=function(e,t,n,i){var r,o,a,l;return{id:t,publicName:n,dataType:"date_time",allowedGranularities:null!=(r=i.allowedGranularities)?r:Object.keys(e.supportedTimeTruncFunctions),allowedOperators:null!=(o=i.allowedOperators)?o:ef({dataType:"date_time"},e),canBeDimension:null==(a=i.canBeDimension)||a,canBeMeasure:null!=(l=i.canBeMeasure)&&l}},iQ=(delete(iO={boxSizing:"border-box",borderWidth:"0",borderStyle:"solid",borderColor:"#e5e7eb","--tw-border-spacing-x":"0","--tw-border-spacing-y":"0","--tw-translate-x":"0","--tw-translate-y":"0","--tw-rotate":"0","--tw-skew-x":"0","--tw-skew-y":"0","--tw-scale-x":"1","--tw-scale-y":"1","--tw-pan-x":"var(--tw-empty,/*!*/ /*!*/)","--tw-pan-y":"var(--tw-empty,/*!*/ /*!*/)","--tw-pinch-zoom":"var(--tw-empty,/*!*/ /*!*/)","--tw-scroll-snap-strictness":"proximity","--tw-ordinal":"var(--tw-empty,/*!*/ /*!*/)","--tw-slashed-zero":"var(--tw-empty,/*!*/ /*!*/)","--tw-numeric-figure":"var(--tw-empty,/*!*/ /*!*/)","--tw-numeric-spacing":"var(--tw-empty,/*!*/ /*!*/)","--tw-numeric-fraction":"var(--tw-empty,/*!*/ /*!*/)","--tw-ring-offset-shadow":"0 0 #0000","--tw-ring-shadow":"0 0 #0000","--tw-shadow":"0 0 #0000","--tw-shadow-colored":"0 0 #0000","--tw-ring-inset":"var(--tw-empty,/*!*/ /*!*/)","--tw-ring-offset-width":"0px","--tw-ring-offset-color":"#fff","--tw-ring-color":"rgb(59 130 246 / 0.5)","--tw-blur":"var(--tw-empty,/*!*/ /*!*/)","--tw-brightness":"var(--tw-empty,/*!*/ /*!*/)","--tw-contrast":"var(--tw-empty,/*!*/ /*!*/)","--tw-grayscale":"var(--tw-empty,/*!*/ /*!*/)","--tw-hue-rotate":"var(--tw-empty,/*!*/ /*!*/)","--tw-invert":"var(--tw-empty,/*!*/ /*!*/)","--tw-saturate":"var(--tw-empty,/*!*/ /*!*/)","--tw-sepia":"var(--tw-empty,/*!*/ /*!*/)","--tw-drop-shadow":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-blur":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-brightness":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-contrast":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-grayscale":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-hue-rotate":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-invert":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-opacity":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-saturate":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-sepia":"var(--tw-empty,/*!*/ /*!*/)"}).borderColor,delete iO.borderWidth,delete iO.borderStyle,iO),iJ=["vizzly-studio","vizzly-toolbar","vizzly-modals","vizzly-popover"].map(function(e){return"\n    ."+e+" hr {"+i$({height:"0",color:"inherit",borderTopWidth:"1px"})+"}\n    ."+e+" svg {"+i$({display:"block",verticalAlign:"middle"})+"}\n  "}).join(""),iZ=function(){return h.jsx(m.Global,{styles:m.css(".v_contentEnter{transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-timing-function:cubic-bezier(0, 0, 0.2, 1);transition-duration:300ms;;}.v_contentEnterFrom{--tw-translate-y:0.25rem;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-scale-x:.95;--tw-scale-y:.95;opacity:0;;}.v_contentEnterTo{--tw-translate-y:0px;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-scale-x:1;--tw-scale-y:1;opacity:1;;}.v_contentLeave{transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 1, 1);transition-duration:200ms;;}.v_contentLeaveFrom{--tw-translate-y:0px;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-scale-x:1;--tw-scale-y:1;opacity:1;;}.v_contentLeaveTo{--tw-translate-y:0.25rem;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-scale-x:.95;--tw-scale-y:.95;opacity:0;;}.v_overlayEnter{transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-timing-function:cubic-bezier(0, 0, 0.2, 1);transition-duration:300ms;;}.v_overlayEnterFrom{opacity:0;;}.v_overlayEnterTo{opacity:1;;}.v_overlayLeave{transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 1, 1);transition-duration:300ms;;}.v_overlayLeaveFrom{opacity:1;;}.v_overlayLeaveTo{opacity:0;;}*,::after,::before{",i$(iQ),";}",iJ,";","")})};function i$(e){for(var t="",n=0,i=Object.entries(e);n<i.length;n++){var r=i[n],o=r[1];t+=r[0].replace(/([A-Z])/g,"-$1").toLowerCase()+": "+o+";\n"}return t}var i0=function(e){function t(){return e.apply(this,arguments)||this}return ei(t,e),t}(ea(Error)),i1=function(){function e(){this.subscribers={}}var t=e.prototype;return t.get=function(e,t){var n=this;return this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push(t),function(){n.subscribers[e]=n.subscribers[e].filter(function(e){return e!==t})}},t.set=function(e,t){this.subscribers[e]&&this.subscribers[e].forEach(function(e){return e(t)})},t.reload=function(e){this.subscribers[e]&&this.subscribers[e].forEach(function(e){return e({reload:!0})})},t.save=function(e){this.subscribers[e]&&this.subscribers[e].forEach(function(e){return e({save:!0})})},t.resizing=function(e,t,n){this.subscribers[e]&&this.subscribers[e].forEach(function(e){return e({resizing:n||t})})},t.drilldown=function(e,t){this.subscribers[e]&&this.subscribers[e].forEach(function(e){return e({drilldown:t})})},e}(),i2=(new i1,new i1),i5=n(8981);if("undefined"!=typeof window&&"undefined"!=typeof localStorage){var i7=localStorage.getItem("__VIZZLY__LOG_LEVEL_STORED");i7&&eI(i7),window.VizzlyDev={version:(null==i5?void 0:i5.version)||"dev",setLogLevel:function(e){if(eT.includes(e))return eI(e,function(e){localStorage.setItem("__VIZZLY__LOG_LEVEL_STORED",e)}),window.location.reload(),"Log level set to "+e+".";console.warn("Invalid log level. Please set one of",eT)},clearRuntimeDeveloperTools:function(){localStorage.removeItem("__VIZZLY_RUNTIME_DEVELOPER_TOOLS"),window.location.reload()},setRuntimeDeveloperTools:function(e){localStorage.setItem("__VIZZLY_RUNTIME_DEVELOPER_TOOLS",JSON.stringify(e)),window.location.reload()},getRuntimeDeveloperTools:function(){return JSON.parse(localStorage.getItem("__VIZZLY_RUNTIME_DEVELOPER_TOOLS")||"{}")}}}var i4={year:"numeric",month:"short",day:"numeric"},i3={year:"numeric",month:"short"},i6={weekday:"long",year:"numeric",month:"long",day:"numeric"},i8=function(e,t,n){if(!e)return"";var i=e.toLocaleDateString("en-GB",n);return t&&t!=Intl.DateTimeFormat().resolvedOptions().timeZone?i+" ("+t+")":i},i9=function(e,t){var n={hour:"2-digit",minute:"2-digit"};return t&&(n.seconds="2-digit"),e.toLocaleTimeString("en-GB",n)},re=function(e,t){var n,i=e.getFullYear(),r=e.getMonth()+1,o=e.getDate();return o<10&&(o="0"+o),r<10&&(r="0"+r),"quarter"==t?"Q"+rn(e)+", "+e.getFullYear().toString():"week"==t?"Week "+ri(e)+", "+e.getFullYear().toString():"DD-MM-YYYY"==t?o+"-"+r+"-"+i:"DD/MM/YYYY"==t?o+"/"+r+"/"+i:"MM-DD-YYYY"==t?r+"-"+o+"-"+i:"MM/DD/YYYY"==t?r+"/"+o+"/"+i:"DD MMMM YYYY, hh:mm"==t?function(e){if(!e)return null;var t=en({},i4,{hour:"2-digit",minute:"2-digit"});return e.toLocaleTimeString("en-GB",t)}(e):"dddd DD MMMM YYYY, hh:mm"==t?function(e){if(!e)return null;var t=en({},i6,{hour:"2-digit",minute:"2-digit"});return e.toLocaleTimeString("en-GB",t)}(e):"hh:mm"==t?i9(e):"hh:mm:ss"==t?i9(e,!0):"DD MMMM YYYY"==t?i8(e,void 0,i4):"MMMM YYYY"==t?i8(e,null,i3):"YYYY-MM-DD[T]HH:mm:ss"==t?e.getFullYear()+"-"+r+"-"+o+"T"+i9(e):"YYYY"==t?e.getFullYear().toString():null},rt=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},rn=function(e){return Math.floor((e.getMonth()+3)/3)},ri=function(e){var t=new Date(e),n=new Date(e.getFullYear(),0,1);return Math.ceil(Math.floor((t.getTime()-n.getTime())/864e5)/7)},rr=function(e,t){return e/t*100},ro=function(e,t){return(Math.round(100*e)/100).toFixed(t)},ra=function(e,t){return new Intl.NumberFormat(void 0,{style:"currency",currency:t,currencyDisplay:"symbol"}).format(e)},rl=function(e){return Array(e).fill(void 0)},rs=function(e,t){var n=s.cloneDeep(e);return n.splice(t,1),n},ru=function(e,t,n,i){return JSON.stringify({dimensionKeys:e,dimensionValues:t,fieldId:n,function:i})},rd=function(e){if(!e)return!1;try{return rc(e),!0}catch(t){return!1}},rc=function(e){var t=JSON.parse(e);return{dimensionKeys:t.dimensionKeys,dimensionValues:t.dimensionValues,fieldId:t.fieldId,function:t.function}},rp=function(e){var t=rc(e);return eV({function:t.function,field:t.fieldId})},rf=function(e){return[].concat(e.content).map(function(t){return s.reduce(t,function(t,n,i){return t[e.fields[i].id]=n,t},{})})},rm=function(e,t,n,i,r){if(void 0===i&&(i=!1),!e)return[];var o=[].concat(rf(e)).map(function(e){var i=[].concat(n.x).map(function(t){return ez(e[t],r)}),o={},a=[].concat(n.y).map(function(t){return e[t]});t.forEach(function(t){var i=eV(t);o[ru(n.y,a,t.field,t.function)]=e[i]});var l={};return[].concat(n.x).forEach(function(t){l[t]=e[t]}),en({},l,{x:i.join(", ")},o,{xValues:i})}),a=[],l={};o.forEach(function(e){var t=l[e.x];l[e.x]||a.push(e.x),l[e.x]=s.merge({},t,e)});var u=a.map(function(e){return l[e]});return i?rw(u):u},rh=function(e,t,n){if(!n)return[];var i=rf(n),r={};return i.forEach(function(n){var i=[].concat(e.y).map(function(e){return n[e]});t.forEach(function(t){r[ru(e.y,i,t.field,t.function)]=!0})}),Object.keys(r)},rv=function(e,t){return s.findIndex(e.fields,function(e){return e.id==t})},rg=function(e,t){return e.fields[rv(e,t)]},rb=function(e){return void 0===e},rx=function(e){return null===e},ry=function(e){return!!rb(e)||!!rx(e)||s.isEmpty(e.content)},rw=function(e){var t=["x","xValues"];return e.map(function(e){var n=en({},e),i=s.sumBy(Object.entries(n),function(e){var n=e[1];return t.includes(e[0])?0:s.isNumber(n)?n:0});return n=s.mapValues(n,function(e,r){return t.includes(r)?e:s.isNumber(e)?rr(n[r],i):e})})},rC=function(e,t){return v.scale(e).colors(t)},rj=function(e,t){var n;return(null!=t?t:0)<=(null!=(n=null==e?void 0:e.length)?n:0)?e:rk(rC(e,t))},rS={colors:["#feae4a","#5fbaff","#e15e9d"],detail:"minimal",fontFamily:"Inter, sans-serif",rowLimit:6,fontSize:"0.65rem"},rF=function(e){var t=1e4*Math.sin(e++);return t-Math.floor(t)},rk=function(e,t){void 0===t&&(t=5);for(var n,i,r=e.length;r;)i=Math.floor(rF(t)*r--),n=e[r],e[r]=e[i],e[i]=n,++t;return e},rT=["contains_substring","does_not_contain_substring","ends_with","starts_with","<","<=",">",">="],r_=function(e,t){return function(e,t){if(null==t&&rT.includes(e.op))return!1;switch(e.op){case"starts_with":return(""+t).startsWith(e.value);case"ends_with":return(""+t).endsWith(e.value);case"is_one_of":return e.value.includes(t);case"is_not_one_of":return!e.value.includes(t);case"contains_substring":return(""+t).includes(e.value);case"does_not_contain_substring":return!(""+t).includes(e.value);case"<":return t<e.value;case">":return t>e.value;case"=":return t==e.value;case"!=":return t!=e.value;case">=":return t>=e.value;case"<=":return t<=e.value}throw"Unsupported comparison op."}(e,t)},rI=function(e){var t=e("number_format_option.noValueReplacement","No value"),n=e("number_format_option.formattingError","Formatting error");return{_vizzly_compact:{formatter:function(e,i){return void 0===i&&(i=t),null==e?i:Number.isNaN(e)?n:Intl.NumberFormat(void 0,{notation:"compact"}).format(e)},description:e("number_format_option.compact","Compact")},_vizzly_to_2_dp:{formatter:function(e,i){return void 0===i&&(i=t),null==e?i:Number.isNaN(e)?n:ro(e,2)},description:e("number_format_option.to_2_dp","2 decimal places")},_vizzly_to_gbp:{formatter:function(e,i){return void 0===i&&(i=t),null==e?i:Number.isNaN(e)?n:ra(e,"GBP")},description:e("number_format_option.currency_gbp","Currency \xa3")},_vizzly_to_usd:{formatter:function(e,i){return void 0===i&&(i=t),null==e?i:Number.isNaN(e)?n:ra(e,"USD")},description:e("number_format_option.currency_usd","Currency $")},_vizzly_to_eur:{formatter:function(e,i){return void 0===i&&(i=t),null==e?i:Number.isNaN(e)?n:ra(e,"EUR")},description:e("number_format_option.currency_eur","Currency €")},_vizzly_to_percentage:{formatter:function(e,i){var r,o;return void 0===i&&(i=t),null==e?i:Number.isNaN(e)?n:(o=(100*e).toFixed(2)).endsWith(".00")?parseInt(o)+"%":o+"%"},description:e("number_format_option.percentage","Percentage")},_vizzly_separated:{formatter:function(e,i){return void 0===i&&(i=t),null==e?i:Number.isNaN(e)?n:e.toLocaleString()},description:e("number_format_option.separated","Separated")},_vizzly_number:{formatter:function(e,i){return void 0===i&&(i=t),null==e?i:Number.isNaN(e)?n:""+e},description:e("number_format_option.number","Number")},_vizzly_hours_and_minutes_from_minutes:{formatter:function(e,i){return void 0===i&&(i=t),null==e?i:Number.isNaN(e)?n:Math.floor(e/60)+" H : "+ro(e%60,0)+" M"},description:e("number_format_option.minutes_to_hours_minutes","Minutes to hours & minutes")}}},rA=function(e,t,n){return void 0===n&&(n=[]),[].concat(n,[e,"NONE"===(null==t?void 0:t.toUpperCase())?null:t]).filter(function(e){return null!=e}).join(" • ")},rD=function(e,t){return s.zipObject(null!=e?e:[],null!=t?t:[])},rO=function(e,t,n){if(!t)return e;if(s.isFunction(t)){if(null!=n&&n.filter)return t({value:e,filter:n.filter});if(null!=n&&n.fieldId)return t({value:e,fieldId:n.fieldId})}return t&&!s.isFunction(t)&&t[e]?t[e]:void 0},rE=function(e,t,n){var i=s.merge({},t,e);return s.merge({},n,i)},rL=function(e,t){return JSON.stringify(e)==JSON.stringify(t)},rP=function(e,t,n){var i=rc(n);return[].concat(t).flatMap(function(t){var n,r,o,a,l,s,u=eV({field:null==(n=t.filters)?void 0:n[0][0].field,function:null!=(r=null==(o=t.filters)?void 0:o[0][0].function)?r:"none"}),d=e.some(function(e){return e.field===u})&&("string"==typeof(null==(a=t.filters)?void 0:a[0][0].value)||"boolean"==typeof(null==(l=t.filters)?void 0:l[0][0].value)||"number"==typeof(null==(s=t.filters)?void 0:s[0][0].value));return d||eV({field:i.fieldId,function:i.function})==u?[{rule:t,isRuleOnDimension:d}]:[]})},rR=function(e,t,n,i,r){return rP(e,t,n).map(function(e){var t,n,o,a,l,s,u,d=eV({field:null==(t=e.rule.filters)?void 0:t[0][0].field,function:null!=(n=null==(o=e.rule.filters)?void 0:o[0][0].function)?n:"none"}),c=eH(d,{supportedAggregates:i,supportedTimeTruncFunctions:void 0,supportedTransformationFunctions:void 0}),p=c.function,f=iP(r,c.fieldId),m="When "+f.publicName+" "+(p&&"none"!=p?"("+p+")":"")+" "+(null==(a=e.rule.filters)?void 0:a[0][0].op)+" "+(null==(l=e.rule.filters)?void 0:l[0][0].value);return{isRuleOnDimension:e.isRuleOnDimension,color:e.rule.ruleValue,explanation:m,value:null==(s=e.rule.filters)?void 0:s[0][0].value,operator:null==(u=e.rule.filters)?void 0:u[0][0].op,conditionIsMet:function(t){var n,i;return r_({value:null==(n=e.rule.filters)?void 0:n[0][0].value,op:null==(i=e.rule.filters)?void 0:i[0][0].op},rV(f,t))}}})},rN=function(e,t,n,i,r){if(n){var o=rP(e,t,i),a=rc(i),l=o.find(function(e){var t,o,l,u=e.rule,d=e.isRuleOnDimension;if(!s.isEmpty(u.filters)&&0!==u.filters.length){var c=eV({field:null==(t=u.filters)?void 0:t[0][0].field,function:null!=(o=null==(l=u.filters)?void 0:l[0][0].function)?o:"none"}),p=d?iP(r,c):void 0,f=d?[].concat(a.dimensionValues,null!=n[c]?[n[c]]:[]):[n[i]];return s.some(f,function(e){var t,n;return null==e?null:r_({op:null==(t=u.filters)?void 0:t[0][0].op,value:null==(n=u.filters)?void 0:n[0][0].value},p?rV(p,e):e)})}});if(l){var u=l.rule,d=u.ruleValue;return{value:d=function(e,t,n){if(e.boundaries&&2===e.boundaries.length&&e.ruleValueEnd){var i=e.boundaries[0],r="number"==typeof i?i:Number(i),o=e.boundaries[1],a="number"==typeof o?o:Number(o);t=v.scale([e.ruleValue,e.ruleValueEnd]).domain([r,a])(n).hex()}return t}(u,d,n[i]),type:l.rule.ruleType}}}},rM=function(e,t,n,i){return function(r,o){var a;if(r=null!=(a=rO(r,i,{fieldId:o}))?a:r,e){var l,s=new Date(r);if(isNaN(s.getTime()))return"";var u,d=n.dateTimeFormatOptions[null==t||null==(l=t[null==e?void 0:e.truncate])?void 0:l.dateFormat],c=n.dateTimeFormatOptions[(null==n?void 0:n.format)||""];return u=null!=c&&c.formatter?c.formatter(new Date(r)):null!=d&&d.formatter?d.formatter(new Date(r)):re(new Date(r),"DD MMMM YYYY, hh:mm")||new Date(r).toISOString(),""+(n.prefix||"")+u+(n.postfix||"")}return r=rB(r,n.numberFormatOptions,n.format),""+(n.prefix||"")+r+(n.postfix||"")}},rz=function(e,t){return function(n){var i,r,o,a,l;return"number"==typeof n&&(n=rB(n,en({},o=null==t?void 0:t.numberFormatOptions,((a={}).default={description:"Default",formatter:rI(e)._vizzly_compact.formatter},a)),null!=(i=null==t?void 0:t.format)?i:"default")),""+((null==t?void 0:t.prefix)||"")+n+((null==t?void 0:t.postfix)||"")}},rq=function(e,t,n,i,r){return function(o){if(e){var a=rc(o),l=eV({function:a.function,field:a.fieldId}),s=rg(e,l),u=em(a.function,t);if(s){var d=rA(null==s?void 0:s.publicName,u,a.dimensionValues),c=r({fieldId:a.fieldId,func:a.function,type:null!=n?n:"barChart",defaultLabel:d,viewId:null!=i?i:"",values:rD(a.dimensionKeys,a.dimensionValues)});return null!=c?c:d}}}},rB=function(e,t,n){var i,r=null==t||null==(i=t[null!=n?n:""])?void 0:i.formatter;return r?r(e):e};function rV(e,t){var n;return"boolean"===e.dataType&&"string"==typeof t?"boolean"===(n=e.dataType)&&("true"===t||"TRUE"===t||"True"===t)||("boolean"!==n||"false"!==t&&"FALSE"!==t&&"False"!==t)&&t:t}var rW={transitionDuration:"250ms",transitionProperty:"all",transitionTimingFunction:"cubic-bezier(0.4,0,0.2,1)"},rH=function(e){return function(t){t=t||{};var n={variants:e.variants,compoundVariants:e.compoundVariants},i=en({},s.omit(e,["variants","compoundVariants"].concat(Object.keys(t))));return Object.keys(t).forEach(function(e){var r=t?t[e]:null;r&&(i=en({},i,n.variants&&n.variants[e]&&n.variants[e][r]||{}))}),(n.compoundVariants||[]).forEach(function(e){var n=en({},e.css);s.every(Object.keys(s.omit(e,["css"])),function(n){var i;return e[n]==(null==(i=t)?void 0:i[n])})&&(i=en({},i,n))}),i}},rY=function(e){var t=function(t){var n=rH(e)(t);return g.css(n,"","")};return t.toString=t,t};function rG(e){return function(e,t){for(var n=e.startsWith("#")?e.slice(1):e,i="",r=0;r<3;r++){var o=parseInt(n.substr(2*r,2),16);i+=("0"+Math.min(255,Math.floor(o+(255-o)*t/100)).toString(16)).slice(-2)}return"#"+i}("#374151",e)}var rU=function(e){for(var t,n={},i=ed(e);!(t=i()).done;){var r=t.value;n[r.toString()]=100-r}return n}([5,8,20,80,90]),rK={base:rJ("55, 65, 81",0)};for(var rX in rU)rK[rX]=rJ("55, 65, 81",rU[rX]);var rQ={font:{header:16,standard:13,bold:400,sanSerif:"Inter, sans-serif",color:"rgb(55, 65, 81)"},size:{borderRadius:"0.5rem"},colors:{brand:rK,blue:"rgb(48, 116, 217)",contrast:"rgb(249, 247, 250)",success:"#43BA73"}};function rJ(e,t){var n=e.match(/\d+/g).map(Number),i=n[0],r=n[1],o=n[2],a=t/100;return"rgb("+(i=Math.min(Math.round(i+(255-i)*a),255))+", "+(r=Math.min(Math.round(r+(255-r)*a),255))+", "+(o=Math.min(Math.round(o+(255-o)*a),255))+")"}var rZ={backgroundColor:"transparent",backgroundImage:"none",WebkitAppearance:"button",border:"none",cursor:"pointer",padding:0},r$=rY(rZ),r0=rY(en({},rZ,{color:rG(10),borderRadius:8,padding:4,"&:hover":{background:rG(90),color:"rgb(27, 27, 29, 0.8)"},"&:disabled":{opacity:.7,background:"transparent"},"&:hover:disabled":{opacity:.7,background:"transparent"}})),r1={margin:0},r2={margin:0,textDecoration:"underline",color:"rgb(47, 129, 247)",cursor:"pointer"},r5=rY(r1),r7='ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',r4=rY({fontFamily:r7,fontSize:"1em"}),r3=rY(r2),r6=rY({listStyle:"none",padding:0,margin:0}),r8=rY({padding:0,margin:0}),r9=rY({height:"100%"}),oe=rY({fontWeight:700}),ot={xs:"0.75rem",sm:"0.8rem"},on=rY({whiteSpace:"nowrap"}),oi=rY({position:"absolute",left:-9999,width:1,height:1,overflow:"hidden"}),or=Object.assign(function(){return null},{iconButton:r0,ml:function(e){return rY({marginLeft:e})},bw:function(e){return rY({borderWidth:e})},pt:function(e){return rY({paddingTop:e})},pl:function(e){return rY({paddingLeft:e})},pr:function(e){return rY({paddingRight:e})},pb:function(e){return rY({paddingBottom:e})},py:function(e){return rY({paddingTop:e,paddingBottom:e})},p:function(e){return rY({padding:e})},mt:function(e){return rY({marginTop:e})},mb:function(e){return rY({marginBottom:e})},mr:function(e){return rY({marginRight:e})},m:function(e){return rY({margin:e})},my:function(e){return rY({marginTop:e,marginBottom:e})},codeText:r4,bold:oe,button:r$,text:r5,link:r3,srOnly:oi,liReset:r6,ulReset:r8,textSize:function(e){return rY({fontSize:ot[e]||"1rem"})},opacity:function(e){return rY({opacity:e})},color:function(e){return rY({color:e})},align:function(e){return rY({textAlign:e})},height100:r9,nowrap:on,position:function(e){return rY({position:e})},cursor:function(e){return rY({cursor:e})},coreButton:rZ}),oo=Object.assign(function(){return null},{button:rZ,text:r1,link:r2,codeFontFamily:r7}),oa=rY({display:"block",verticalAlign:"middle"}),ol=Object.assign(function(){return null},{selectedComponent:function(e){return rY(en({},rW,oo.button,{borderRadius:null==e?void 0:e.borderRadius,"&:hover":en({},rW,{boxShadow:"0 0 0 3px rgba(48, 116, 217, 0.3)",borderRadius:null==e?void 0:e.borderRadius}),"&:focus":en({},rW,{boxShadow:"0 0 0 3px rgba(48, 116, 217, 0.3)",borderRadius:null==e?void 0:e.borderRadius}),variants:{componentSelect:{true:en({},rW,{boxShadow:"0 0 0 3px rgb(48, 116, 217)",borderRadius:null==e?void 0:e.borderRadius,"&:focus-visible":{outline:0},"&:focus":{outline:0},"&:hover":en({},rW,{boxShadow:"0 0 0 3px rgb(48, 116, 217)",borderRadius:null==e?void 0:e.borderRadius})})}}}))},tableWrapper:rY({display:"flex",height:268,width:"100%",flexDirection:"column",position:"relative"})}),os={name:"n8i3ag",styles:"position:relative;height:100%;width:100%;flex-grow:1;overflow-x:hidden"},ou={name:"4hfwcq",styles:"height:100%;width:100%;flex-grow:1"},od=function(e){return null!=e&&e.disabledFeatures?h.jsxs("div",{css:os,"aria-disabled":!0,children:[null==e?void 0:e.children,h.jsx("div",{style:{position:"absolute",inset:0}})]}):h.jsx("div",{css:ou,children:null==e?void 0:e.children})},oc=function(e){return null!=e&&e.disabledFeatures?h.jsxs("div",{className:""+ol.tableWrapper,children:[null==e?void 0:e.children,h.jsx("div",{style:{position:"absolute",inset:0}})]}):h.jsx(o.Fragment,{children:null==e?void 0:e.children})},op=function(e){var t;return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:e.active?null!=(t=e.fill)?t:"black":"none",css:["display:inline-block;",m.css("lg"===e.size?{height:"1.25rem",width:"1.25rem"}:{height:"1rem",width:"1rem"},";",""),"",""],viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor","data-component":"filter-icon",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 01-.659 1.591l-5.432 5.432a2.25 2.25 0 00-.659 1.591v2.927a2.25 2.25 0 01-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 00-.659-1.591L3.659 7.409A2.25 2.25 0 013 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0112 3z"})})},of={name:"6r56vi",styles:"height:1rem;width:1rem"},om=function(e){return h.jsx("svg",{onClick:e.onClick,xmlns:"http://www.w3.org/2000/svg",css:of,viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})},oh={name:"3vy5qs",styles:"height:1.25rem;width:1.25rem;opacity:0.7"},ov=function(e){return h.jsx("svg",{onClick:e.onClick,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",css:oh,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})})},og={name:"15zcgxh",styles:"margin:auto;margin-top:0.25rem;height:1.25rem;width:1.25rem"},ob=function(e){return h.jsx("svg",{onClick:e.onClick,xmlns:"http://www.w3.org/2000/svg",css:og,viewBox:"0 0 20 20",fill:"#88ecac",children:h.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})},ox={name:"15zcgxh",styles:"margin:auto;margin-top:0.25rem;height:1.25rem;width:1.25rem"},oy={name:"1gp9wld",styles:"height:1.25rem;width:1.25rem"},ow=function(e){return h.jsxs(h.Fragment,{children:["removeFilter"==e.purpose&&h.jsx("svg",{onClick:e.onClick,xmlns:"http://www.w3.org/2000/svg",css:ox,viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),"removeFilter"!=e.purpose&&h.jsx("svg",{onClick:e.onClick,xmlns:"http://www.w3.org/2000/svg",css:oy,viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 10 0-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})]})},oC={name:"dnnczx",styles:"display:inline;height:1.25rem;width:1.25rem"},oj=function(e){var t;return h.jsx("svg",{onClick:e.onClick,xmlns:"http://www.w3.org/2000/svg",css:oC,fill:null!=(t=null==e?void 0:e.fill)?t:"#88ecac",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd"})})},oS={name:"1gp9wld",styles:"height:1.25rem;width:1.25rem"},oF=function(e){return h.jsx("svg",{onClick:e.onClick,xmlns:"http://www.w3.org/2000/svg",css:oS,viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})},ok={name:"1gp9wld",styles:"height:1.25rem;width:1.25rem"},oT=function(e){return h.jsx("svg",{onClick:e.onClick,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",css:ok,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"})})},o_={name:"1gp9wld",styles:"height:1.25rem;width:1.25rem"},oI=function(e){return h.jsx("svg",{onClick:e.onClick,xmlns:"http://www.w3.org/2000/svg",css:o_,viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})},oA={name:"6r56vi",styles:"height:1rem;width:1rem"},oD=function(e){return h.jsx("svg",{onClick:e.onClick,css:oA,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})},oO={name:"6r56vi",styles:"height:1rem;width:1rem"},oE=function(e){return h.jsxs("svg",{onClick:e.onClick,css:oO,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"})]})},oL={name:"y1h7kl",styles:"display:inline;height:1.5rem;width:1.5rem"},oP=function(e){return h.jsx("svg",{onClick:e.onClick,xmlns:"http://www.w3.org/2000/svg",css:oL,viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})},oR={name:"6r56vi",styles:"height:1rem;width:1rem"},oN={name:"6r56vi",styles:"height:1rem;width:1rem"},oM=function(e){return h.jsxs(h.Fragment,{children:[e.isOpen&&h.jsx("svg",{onClick:e.onClick,xmlns:"http://www.w3.org/2000/svg",css:oR,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),!e.isOpen&&h.jsx("svg",{onClick:e.onClick,xmlns:"http://www.w3.org/2000/svg",css:oN,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})]})},oz={name:"y1h7kl",styles:"display:inline;height:1.5rem;width:1.5rem"},oq=function(e){return h.jsx("svg",{onClick:e.onClick,css:oz,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 01-2.25 2.25M16.5 7.5V18a2.25 2.25 0 002.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 002.25 2.25h13.5M6 7.5h3v3H6v-3z"})})},oB=function(e){return h.jsx("svg",{width:null!=e&&e.width?""+(null==e?void 0:e.width):"24",height:null!=e&&e.height?""+(null==e?void 0:e.height):"24",viewBox:"0 0 160 160",fill:"rgb(55, 65, 81)",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M72.7304 36.3655L84.8523 48.4873L96.9741 36.3655C100.189 33.1506 104.549 31.3444 109.096 31.3444C113.642 31.3444 118.003 33.1505 121.218 36.3655L157.583 72.731C160.798 75.9459 162.604 80.3062 162.604 84.8528C162.604 89.3994 160.798 93.7597 157.583 96.9746L121.218 133.34C118.003 136.555 113.642 138.361 109.096 138.361C104.549 138.361 100.189 136.555 96.9741 133.34L84.8523 121.218L72.7304 133.34C69.5155 136.555 65.1552 138.361 60.6086 138.361C56.062 138.361 51.7017 136.555 48.4868 133.34L12.1213 96.9746C8.90637 93.7597 7.10025 89.3994 7.10025 84.8528C7.10025 80.3062 8.90637 75.9459 12.1213 72.731L48.4868 36.3655C51.7017 33.1506 56.062 31.3444 60.6086 31.3444C65.1552 31.3444 69.5155 33.1506 72.7304 36.3655ZM111.52 123.643L147.886 87.2771C148.529 86.6342 148.89 85.7621 148.89 84.8528C148.89 83.9435 148.529 83.0714 147.886 82.4284L111.52 46.0629C110.877 45.4199 110.005 45.0587 109.096 45.0587C108.187 45.0587 107.315 45.4199 106.672 46.0629L70.3061 82.4284C69.6631 83.0714 69.3019 83.9435 69.3019 84.8528C69.3019 85.7621 69.6631 86.6342 70.3061 87.2771L106.672 123.643C107.315 124.286 108.187 124.647 109.096 124.647C110.005 124.647 110.877 124.286 111.52 123.643ZM21.8187 82.4284C21.1758 83.0714 20.8145 83.9435 20.8145 84.8528C20.8145 85.7621 21.1758 86.6342 21.8187 87.2771L58.1842 123.643C58.8272 124.286 59.6993 124.647 60.6086 124.647C61.5179 124.647 62.39 124.286 63.033 123.643L75.1548 111.521L60.6086 96.9746C57.3937 93.7597 55.5876 89.3994 55.5876 84.8528C55.5876 80.3062 57.3937 75.9459 60.6086 72.731L75.1548 58.1848L63.033 46.0629C62.39 45.4199 61.5179 45.0587 60.6086 45.0587C59.6993 45.0587 58.8272 45.4199 58.1842 46.0629L21.8187 82.4284Z"})})},oV={name:"37ue6p",styles:"display:inline-block;height:1.25rem;width:1.25rem"},oW=function(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",css:oV,viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75"})})},oH=function(e){return h.jsx("svg",{width:null!=e&&e.width?""+(null==e?void 0:e.width):"16",height:null!=e&&e.height?""+(null==e?void 0:e.height):"16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:rG(15),children:h.jsx("path",{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z",clipRule:"evenodd"})})},oY=function(e){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:null!=e&&e.width?""+(null==e?void 0:e.width):"20",height:null!=e&&e.height?""+(null==e?void 0:e.height):"20",children:h.jsx("path",{fillRule:"evenodd",d:"M7.28 7.72a.75.75 0 0 1 0 1.06l-2.47 2.47H21a.75.75 0 0 1 0 1.5H4.81l2.47 2.47a.75.75 0 1 1-1.06 1.06l-3.75-3.75a.75.75 0 0 1 0-1.06l3.75-3.75a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"})})},oG=function(e){return h.jsxs("svg",{width:null!=e&&e.width?""+(null==e?void 0:e.width):"24",height:null!=e&&e.height?""+(null==e?void 0:e.height):"24",viewBox:"0 0 20 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("path",{d:"M17.5007 4.66663C16.2923 4.66663 15.6173 5.86663 15.8923 6.75829L12.934 9.72496C12.684 9.64996 12.3173 9.64996 12.0673 9.72496L9.94232 7.59996C10.2257 6.70829 9.55065 5.49996 8.33398 5.49996C7.12565 5.49996 6.44232 6.69996 6.72565 7.59996L2.92565 11.3916C2.03398 11.1166 0.833984 11.7916 0.833984 13C0.833984 13.9166 1.58398 14.6666 2.50065 14.6666C3.70898 14.6666 4.38398 13.4666 4.10898 12.575L7.90065 8.77496C8.15065 8.84996 8.51732 8.84996 8.76732 8.77496L10.8923 10.9C10.609 11.7916 11.284 13 12.5007 13C13.709 13 14.3923 11.8 14.109 10.9L17.0757 7.94163C17.9673 8.21663 19.1673 7.54163 19.1673 6.33329C19.1673 5.41663 18.4173 4.66663 17.5007 4.66663Z",fill:"url(#paint0_linear_2169_391)"}),h.jsx("path",{d:"M12.5 5.5L13.2833 3.775L15 3L13.2833 2.225L12.5 0.5L11.7333 2.225L10 3L11.7333 3.775L12.5 5.5Z",fill:"url(#paint1_linear_2169_391)"}),h.jsx("path",{d:"M2.91732 7.16667L3.33398 5.5L5.00065 5.08333L3.33398 4.66667L2.91732 3L2.50065 4.66667L0.833984 5.08333L2.50065 5.5L2.91732 7.16667Z",fill:"url(#paint2_linear_2169_391)"}),h.jsxs("defs",{children:[h.jsxs("linearGradient",{id:"paint0_linear_2169_391",x1:"0.833984",y1:"4.66663",x2:"19.4886",y2:"5.49589",gradientUnits:"userSpaceOnUse",children:[h.jsx("stop",{stopColor:"#3074D9"}),h.jsx("stop",{offset:"0.53125",stopColor:"#4542E1"}),h.jsx("stop",{offset:"1",stopColor:"#FF77B8"})]}),h.jsxs("linearGradient",{id:"paint1_linear_2169_391",x1:"10",y1:"0.5",x2:"15.0947",y2:"0.623532",gradientUnits:"userSpaceOnUse",children:[h.jsx("stop",{stopColor:"#3074D9"}),h.jsx("stop",{offset:"0.53125",stopColor:"#4542E1"}),h.jsx("stop",{offset:"1",stopColor:"#FF77B8"})]}),h.jsxs("linearGradient",{id:"paint2_linear_2169_391",x1:"0.833984",y1:"3",x2:"5.07954",y2:"3.10294",gradientUnits:"userSpaceOnUse",children:[h.jsx("stop",{stopColor:"#3074D9"}),h.jsx("stop",{offset:"0.53125",stopColor:"#4542E1"}),h.jsx("stop",{offset:"1",stopColor:"#FF77B8"})]})]})]})},oU=function(e){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:rG(15),width:null!=e&&e.width?""+(null==e?void 0:e.width):"20",height:null!=e&&e.height?""+(null==e?void 0:e.height):"20",children:h.jsx("path",{d:"M3.478 2.404a.75.75 0 0 0-.926.941l2.432 7.905H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.905a.75.75 0 0 0 .926.94 60.519 60.519 0 0 0 18.445-8.986.75.75 0 0 0 0-1.218A60.517 60.517 0 0 0 3.478 2.404Z"})})},oK=function(e){var t,n;return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:rG(15),width:null!=(t=e.width)?t:"20",height:null!=(n=e.height)?n:"20",children:h.jsx("path",{d:"M7.493 18.5c-.425 0-.82-.236-.975-.632A7.48 7.48 0 0 1 6 15.125c0-1.75.599-3.358 1.602-4.634.151-.192.373-.309.6-.397.473-.183.89-.514 1.212-.924a9.042 9.042 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75A.75.75 0 0 1 15 2a2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H14.23c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23h-.777ZM2.331 10.727a11.969 11.969 0 0 0-.831 4.398 12 12 0 0 0 .52 3.507C2.28 19.482 3.105 20 3.994 20H4.9c.445 0 .72-.498.523-.898a8.963 8.963 0 0 1-.924-3.977c0-1.708.476-3.305 1.302-4.666.245-.403-.028-.959-.5-.959H4.25c-.832 0-1.612.453-1.918 1.227Z"})})},oX=function(e){var t,n;return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",width:null!=(t=e.width)?t:"20",height:null!=(n=e.height)?n:"20",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.633 10.25c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75a.75.75 0 0 1 .75-.75 2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282m0 0h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23H5.904m10.598-9.75H14.25M5.904 18.5c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 0 1-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 9.953 4.167 9.5 5 9.5h1.053c.472 0 .745.556.5.96a8.958 8.958 0 0 0-1.302 4.665c0 1.194.232 2.333.654 3.375Z"})})},oQ=function(e){var t,n;return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:rG(15),width:null!=(t=e.width)?t:"20",height:null!=(n=e.height)?n:"20",children:h.jsx("path",{d:"M15.73 5.5h1.035A7.465 7.465 0 0 1 18 9.625a7.465 7.465 0 0 1-1.235 4.125h-.148c-.806 0-1.534.446-2.031 1.08a9.04 9.04 0 0 1-2.861 2.4c-.723.384-1.35.956-1.653 1.715a4.499 4.499 0 0 0-.322 1.672v.633A.75.75 0 0 1 9 22a2.25 2.25 0 0 1-2.25-2.25c0-1.152.26-2.243.723-3.218.266-.558-.107-1.282-.725-1.282H3.622c-1.026 0-1.945-.694-2.054-1.715A12.137 12.137 0 0 1 1.5 12.25c0-2.848.992-5.464 2.649-7.521C4.537 4.247 5.136 4 5.754 4H9.77a4.5 4.5 0 0 1 1.423.23l3.114 1.04a4.5 4.5 0 0 0 1.423.23ZM21.669 14.023c.536-1.362.831-2.845.831-4.398 0-1.22-.182-2.398-.52-3.507-.26-.85-1.084-1.368-1.973-1.368H19.1c-.445 0-.72.498-.523.898.591 1.2.924 2.55.924 3.977a8.958 8.958 0 0 1-1.302 4.666c-.245.403.028.959.5.959h1.053c.832 0 1.612-.453 1.918-1.227Z"})})},oJ=function(e){var t,n;return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",width:null!=(t=e.width)?t:"20",height:null!=(n=e.height)?n:"20",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.498 15.25H4.372c-1.026 0-1.945-.694-2.054-1.715a12.137 12.137 0 0 1-.068-1.285c0-2.848.992-5.464 2.649-7.521C5.287 4.247 5.886 4 6.504 4h4.016a4.5 4.5 0 0 1 1.423.23l3.114 1.04a4.5 4.5 0 0 0 1.423.23h1.294M7.498 15.25c.618 0 .991.724.725 1.282A7.471 7.471 0 0 0 7.5 19.75 2.25 2.25 0 0 0 9.75 22a.75.75 0 0 0 .75-.75v-.633c0-.573.11-1.14.322-1.672.304-.76.93-1.33 1.653-1.715a9.04 9.04 0 0 0 2.86-2.4c.498-.634 1.226-1.08 2.032-1.08h.384m-10.253 1.5H9.7m8.075-9.75c.01.05.027.1.05.148.593 1.2.925 2.55.925 3.977 0 1.487-.36 2.89-.999 4.125m.023-8.25c-.076-.365.183-.75.575-.75h.908c.889 0 1.713.518 1.972 1.368.339 1.11.521 2.287.521 3.507 0 1.553-.295 3.036-.831 4.398-.306.774-1.086 1.227-1.918 1.227h-1.053c-.472 0-.745-.556-.5-.96a8.95 8.95 0 0 0 .303-.54"})})},oZ=function(e){var t,n;return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:null!=(t=e.width)?t:"20",height:null!=(n=e.height)?n:"20",children:h.jsx("path",{fillRule:"evenodd",d:"M12 1.5a.75.75 0 0 1 .75.75V4.5a.75.75 0 0 1-1.5 0V2.25A.75.75 0 0 1 12 1.5ZM5.636 4.136a.75.75 0 0 1 1.06 0l1.592 1.591a.75.75 0 0 1-1.061 1.06l-1.591-1.59a.75.75 0 0 1 0-1.061Zm12.728 0a.75.75 0 0 1 0 1.06l-1.591 1.592a.75.75 0 0 1-1.06-1.061l1.59-1.591a.75.75 0 0 1 1.061 0Zm-6.816 4.496a.75.75 0 0 1 .82.311l5.228 7.917a.75.75 0 0 1-.777 1.148l-2.097-.43 1.045 3.9a.75.75 0 0 1-1.45.388l-1.044-3.899-1.601 1.42a.75.75 0 0 1-1.247-.606l.569-9.47a.75.75 0 0 1 .554-.68ZM3 10.5a.75.75 0 0 1 .75-.75H6a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 10.5Zm14.25 0a.75.75 0 0 1 .75-.75h2.25a.75.75 0 0 1 0 1.5H18a.75.75 0 0 1-.75-.75Zm-8.962 3.712a.75.75 0 0 1 0 1.061l-1.591 1.591a.75.75 0 1 1-1.061-1.06l1.591-1.592a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"})})},o$=function(e){var t,n;return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:null!=(t=e.width)?t:"20",height:null!=(n=e.height)?n:"20",children:h.jsx("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm6-2.438c0-.724.588-1.312 1.313-1.312h4.874c.725 0 1.313.588 1.313 1.313v4.874c0 .725-.588 1.313-1.313 1.313H9.564a1.312 1.312 0 0 1-1.313-1.313V9.564Z",clipRule:"evenodd"})})},o0=function(e){var t,n;return h.jsx("svg",{fill:"currentColor",width:null!=(t=e.width)?t:"20",height:null!=(n=e.height)?n:"20",viewBox:"0 0 32 32",id:"icon",xmlns:"http://www.w3.org/2000/svg",stroke:"inherit",strokeWidth:"0.736",children:h.jsx("path",{d:"M18,28A12,12,0,1,0,6,16v6.2L2.4,18.6,1,20l6,6,6-6-1.4-1.4L8,22.2V16H8A10,10,0,1,1,18,26Z"})})},o1={name:"1gp9wld",styles:"height:1.25rem;width:1.25rem"},o2=function(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",css:o1,children:h.jsx("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z",clipRule:"evenodd"})})},o5={name:"1gp9wld",styles:"height:1.25rem;width:1.25rem"},o7=function(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",css:o5,children:h.jsx("path",{fillRule:"evenodd",d:"M12 5.25c1.213 0 2.415.046 3.605.135a3.256 3.256 0 0 1 3.01 3.01c.044.583.077 1.17.1 1.759L17.03 8.47a.75.75 0 1 0-1.06 1.06l3 3a.75.75 0 0 0 1.06 0l3-3a.75.75 0 0 0-1.06-1.06l-1.752 1.751c-.023-.65-.06-1.296-.108-1.939a4.756 4.756 0 0 0-4.392-4.392 49.422 49.422 0 0 0-7.436 0A4.756 4.756 0 0 0 3.89 8.282c-.017.224-.033.447-.046.672a.75.75 0 1 0 1.497.092c.013-.217.028-.434.044-.651a3.256 3.256 0 0 1 3.01-3.01c1.19-.09 2.392-.135 3.605-.135Zm-6.97 6.22a.75.75 0 0 0-1.06 0l-3 3a.75.75 0 1 0 1.06 1.06l1.752-1.751c.023.65.06 1.296.108 1.939a4.756 4.756 0 0 0 4.392 4.392 49.413 49.413 0 0 0 7.436 0 4.756 4.756 0 0 0 4.392-4.392c.017-.223.032-.447.046-.672a.75.75 0 0 0-1.497-.092c-.013.217-.028.434-.044.651a3.256 3.256 0 0 1-3.01 3.01 47.953 47.953 0 0 1-7.21 0 3.256 3.256 0 0 1-3.01-3.01 47.759 47.759 0 0 1-.1-1.759L6.97 15.53a.75.75 0 0 0 1.06-1.06l-3-3Z",clipRule:"evenodd"})})},o4=function(e){var t,n,i;return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:null!=(t=e.width)?t:"16",height:null!=(n=e.height)?n:"16",viewBox:"0 0 447.641 447.641",fill:null!=(i=null==e?void 0:e.fill)?i:rG(15),children:h.jsx("path",{d:"M253.254,420.02L58.883,225.617h127.578c2.569-19.24,6.3-74.921-28.166-117.694 C127.838,70.109,75.132,50.942,1.666,50.942L0,33.547c1.252-0.228,31.214-5.926,72.962-5.926 c88.106,0,236.631,25.955,252.083,197.996h122.595L253.254,420.02z"})})},o3=function(e,t){return[].concat(e.supportedFeatures).includes(t)},o6={parameters:!0,disableAutoSave:!0,showGlobalFilters:!0,showResetButton:!1,canManageGlobalFilters:!0,canEditComponentLibrary:!0,canUseComponentLibrary:!0,canAddTags:!0,canCreateStandaloneComponents:!0,canDownloadComponentData:!0,canEditComponentsOnDashboard:!0,canRemoveComponentsFromDashboard:!0,canConfigureLocalFilters:!0,canAddNewRows:!0,canAddNewCells:!0,canEditCustomMetrics:!0,allowPercentagesCustomField:!0,allowDateCalculationsCustomField:!0,allowConditionalCustomField:!0,allowSimpleMathsCustomField:!0,allowAggregateMathsCustomField:!0,allowRoundedNumberCustomField:!0,allowRulesCustomField:!0,showDateAndTimeFilter:!0,showDateFilter:!0,canSeeEmptyState:!1,canDownloadPDF:!0,canDownloadViewData:!0,canDownloadDataSet:!0,canDownloadViewAsPNG:!0,forceMobile:!1,unloadOffScreenViews:!1,showSavingIndicator:!1},o8={parameters:!0,disableAutoSave:!1,showGlobalFilters:!0,showResetButton:!0,canAddTags:!0,canManageGlobalFilters:!0,canEditComponentLibrary:!0,canUseComponentLibrary:!0,canCreateStandaloneComponents:!0,canDownloadComponentData:!0,canEditComponentsOnDashboard:!0,canRemoveComponentsFromDashboard:!0,canConfigureLocalFilters:!0,canAddNewRows:!0,canAddNewCells:!0,canEditCustomMetrics:!0,allowPercentagesCustomField:!0,allowDateCalculationsCustomField:!0,allowConditionalCustomField:!0,allowSimpleMathsCustomField:!0,allowAggregateMathsCustomField:!0,allowRoundedNumberCustomField:!0,allowRulesCustomField:!0,showDateAndTimeFilter:!0,showDateFilter:!0,canSeeEmptyState:!1,canDownloadPDF:!0,canDownloadViewData:!0,canDownloadDataSet:!0,canDownloadViewAsPNG:!0,forceMobile:!1,unloadOffScreenViews:!1,showSavingIndicator:!0},o9=[].concat(["barChart","horizontalBarChart","areaChart","lineChart","scatterChart","pieChart","singleStat","dataTable","basicTable","comboChart","mercatorMap","progress","custom"]).filter(function(e){return"custom"!=e}),ae=function(e){return{attributes:e,localFilters:[],results:[],colSpan:1,reports:[],updatesFromParameters:{}}},at=function(e){return{displayTitle:e,colSpan:12}},an=function(e){return"displayTitle"in e},ai=function(e,t,n,i){var r,o,a,l,s,u=(s=e[t],"left"==i?[].concat(s.components).slice(0,n).reverse():[].concat(s.components).slice(n+1,s.components.length)),d=u.length-1,c=u.findIndex(function(e){return e.colSpan>2});return -1==c?-1:"left"==i?d-c:c+1+n},ar=function(e){return{colSpan:e,isEmpty:!0}};function ao(e){return 1===e?12:e<5?12/e:2}var aa,al=function(e,t,n,i){var r=[].concat(e),o=[].concat(r[n].components);return o[i]=en({},t,{colSpan:o[i].colSpan}),r[n]={components:o,height:r[n].height},r},as=function(e,t){return{components:e,height:null!=t?t:350}},au=function(e){return"isEmpty"in e},ad=function(e){var t=[].concat(e),n=s.sumBy(t,function(e){return e.colSpan});return 12==n||(t[t.length-1].colSpan+=12-n),t},ac=function(e){return!(e&&au(e)&&e.colSpan<=0)},ap=function(e,t){if("isEmpty"in e||an(e))return e;var n=(0,iA(e.attributes.type,t).load)(e.attributes),i=[];return s.isArray(e.localFilters)&&(i=[].concat(e.localFilters?e.localFilters:[]).map(function(e){return tN(e)})),"addOns"in e.attributes&&s.isEmpty(i)&&e.attributes.addOns.forEach(function(e){i=[].concat(i,[{type:"dateFilter"==e.type?"dateFilter":"singleSelectFilter",value:null,requiresValue:!1,managedByConfiguration:!1,appliesToFields:[{fieldId:e.field,dataSetId:n.dataSetId}]}])}),delete e.addOns,delete n.addOns,en({},e,{localFilters:i,attributes:n,results:[]})},af=function(e){if(au(e)||an(e))return e;var t=[].concat(e.localFilters&&s.isArray(e.localFilters)?e.localFilters:[]).map(tR);return en({},e,{results:void 0,queries:void 0,attributes:en({},e.attributes,{offset:void 0}),localFilters:t})},am=function(e,t){var n,i;if(!e.attributes)throw Error("Component attributes are required in saveable");return{attributes:en({},e.attributes,{protectedByOrganisation:!!t||void 0}),localFilters:null!=(n=e.localFilters)?n:[],colSpan:1,results:[],updatesFromParameters:null!=(i=e.updatesFromParameters)?i:{},reports:[]}},ah=function(e){return p.alternatives().conditional(".type",{is:"barChart",then:nE(e).schema}).conditional(".type",{is:"mercatorMap",then:il(e).schema}).conditional(".type",{is:"horizontalBarChart",then:n5(e).schema}).conditional(".type",{is:"lineChart",then:nR(e).schema}).conditional(".type",{is:"comboChart",then:nY(e).schema}).conditional(".type",{is:"areaChart",then:n3(e).schema}).conditional(".type",{is:"pieChart",then:nz(e).schema}).conditional(".type",{is:"scatterChart",then:nV(e).schema}).conditional(".type",{is:"singleStat",then:ie(e).schema}).conditional(".type",{is:"dataTable",then:nQ(e).schema}).conditional(".type",{is:"basicTable",then:n1(e).schema}).conditional(".type",{is:"progress",then:ip(e).schema}).conditional(".type",{is:"custom",then:ir(e).schema})},av=d.QueryEngineConfig.getQueryEngineConfig("js"),ag={today:!1,past_1_day:!0,yesterday:!0,past_3_days:!0,past_7_days:!0,past_30_days:!0,past_90_days:!0,past_3_months:!1,past_6_months:!1,past_12_months:!1,past_18_months:!1},ab=function(e,t){var n;return{description:t,range:{before:rt(e),after:rt((n=new Date(e.getTime()-864e5),new Date(n.getFullYear(),n.getMonth(),n.getDate())))}}},ax=function(e,t,n){var i=new Date,r=new Date(i);return t>0&&r.setMonth(i.getMonth()-t),e>0&&(r=new Date(i.getTime()-24*e*36e5)),{description:n,range:{before:i,after:r}}},ay=function(e){var t,n,i,r;return{today:(t=new Date,n=e("filter.today","Today"),i=rt(t),(r=new Date(i)).setDate(r.getDate()+1),r.setMilliseconds(r.getMilliseconds()-1),{description:n,range:{before:r,after:i}}),past_1_day:ax(1,0,e("filter.past_1_day","Last 24 hours")),yesterday:ab(new Date,e("filter.yesterday","Yesterday")),past_3_days:ax(3,0,e("filter.past_3_days","Last 3 days")),past_7_days:ax(7,0,e("filter.past_7_days","Last 7 days")),past_30_days:ax(30,0,e("filter.past_30_days","Last 30 days")),past_90_days:ax(90,0,e("filter.past_90_days","Last 90 days")),past_3_months:ax(0,3,e("filter.past_3_months","Last 3 months")),past_6_months:ax(0,6,e("filter.past_6_months","Last 6 months")),past_12_months:ax(0,12,e("filter.past_12_months","Last 12 months")),past_18_months:ax(0,18,e("filter.past_18_months","Last 18 months"))}},aw=function(e,t){var n=ay(e),i=Object.keys(ag).map(function(e){return e in n?"_vizzly_"+e:e}),r=i.indexOf("_vizzly_today");r>-1&&(i.splice(r,1),i.unshift("_vizzly_today"));for(var o,a={},l={},s=ed(i);!(o=s()).done;){var u=o.value,d=u.replace("_vizzly_",""),c=n[d],p=null==t?void 0:t[d];"boolean"==typeof p?p&&(l[u]=c):null!=p?l[u]=p:!1!==ag[d]&&(l[u]=c)}if(t)for(var f=0,m=Object.entries(t);f<m.length;f++){var h=m[f],v=h[0],g=h[1];v in ag||(i.push(v),l[v]=g)}for(var b,x=ed(i);!(b=x()).done;){var y=b.value;y in l&&(a[y]=l[y])}return a},aC=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="MissingDateTimeFormatOption",n}return ei(t,e),t}(ea(Error)),aj=function(e,t){var n={};return Object.keys(e).forEach(function(t){e[t]&&(n[t]=e[t])}),Object.keys(t.supportedTimeTruncFunctions).forEach(function(e){var i=t.supportedTimeTruncFunctions[e].dateFormat;if(!n[i])throw new aC("Date format option "+i+" is required by the query engine, but it has not been set on the dateTimeFormatOptions.")}),n},aS={mode:"endUser",scope:"read_write",maxCSVDownloadLimit:1e4,featureToggles:en({},o8),developerTools:!1,componentOverrides:{},customViews:[],reportScheduleOptions:[],overrideDeveloperInfo:null,disableToolbar:!1,onlyViewTypes:function(){return[]},dataPanel:function(e){return e},formatPanel:function(e){return e},isProgrammaticParent:!1,dashboardFilters:function(){return[]},onDashboardFilterChange:function(){},dateFilterOptions:function(){for(var e=ay(ij),t={},n=0,i=Object.entries(ag);n<i.length;n++){var r=i[n],o=r[0];r[1]&&o in e&&(t["_vizzly_"+o]=e[o])}return t}(),dateTimeFormatOptions:{"DD/MM/YYYY":{description:"DD/MM/YYYY",formatter:function(e){return re(e,"DD/MM/YYYY")}},"MM/DD/YYYY":{description:"MM/DD/YYYY",formatter:function(e){return re(e,"MM/DD/YYYY")}},"DD-MM-YYYY":{description:"DD-MM-YYYY",formatter:function(e){return re(e,"DD-MM-YYYY")}},"MM-DD-YYYY":{description:"MM-DD-YYYY",formatter:function(e){return re(e,"MM-DD-YYYY")}},"DD MMMM YYYY, hh:mm":{description:"DD MMMM YYYY, hh:mm",formatter:function(e){return re(e,"DD MMMM YYYY, hh:mm")}},"dddd DD MMMM YYYY, hh:mm":{description:"dddd DD MMMM YYYY, hh:mm",formatter:function(e){return re(e,"dddd DD MMMM YYYY, hh:mm")}},"hh:mm":{description:"hh:mm",formatter:function(e){return re(e,"hh:mm")}},"hh:mm:ss":{description:"hh:mm:ss",formatter:function(e){return re(e,"hh:mm:ss")}},"DD MMMM YYYY":{description:"DD MMMM YYYY",formatter:function(e){return re(e,"DD MMMM YYYY")}},"MMMM YYYY":{description:"MMMM YYYY",formatter:function(e){return re(e,"MMMM YYYY")}},YYYY:{description:"YYYY",formatter:function(e){return re(e,"YYYY")}},"YYYY-MM-DD[T]HH:mm:ss":{description:"YYYY-MM-DD[T]HH:mm:ss",formatter:function(e){return re(e,"YYYY-MM-DD[T]HH:mm:ss")}},quarter:{description:"Quarter",formatter:function(e){return re(e,"quarter")}},week:{description:"Week",formatter:function(e){return re(e,"week")}}},numberFormatOptions:rI(ij),textOverrides:{},queryEngineConfig:av,organizationName:void 0,onEditorUpdate:function(e){return e},onSave:function(){return eP("Save functionality not set.")},onScheduledReportChange:(aa=et($().mark(function e(){return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return eP("Scheduled report change functionality not set."),e.abrupt("return",null);case 2:case"end":return e.stop()}},e)})),function(){return aa.apply(this,arguments)}),onOpenConfigManagerUi:void 0,onReset:function(){throw Error("onReset function not implemented.")},textOverride:function(e,t){return t},labelFormat:function(){}};function aF(e,t){var n=a_().id;o.useEffect(function(){var i,r=i2.get(null!=(i=null!=t?t:n)?i:"",function(t){return e(t)});return function(){return r()}},[])}var ak=a.createContext(en({},aS,{setOverrideDeveloperInfo:function(){throw"Not initiated."}})),aT=function(e){var t,n,i,r,a,l,d,c,p,f,m,v,g,b,x,y,w,C,j,S,F,k,T,_,I,A,D,O,E,L,P,R,N,M=(t=e.mode,n=null==(O=e.dashboardBehaviour)?void 0:O.featureToggles,i=null==(E=e.dashboardBehaviour)?void 0:E.queryEngineConfig,r=null==(L=e.dashboardBehaviour)?void 0:L.scope,a=e.id,l=u.merge({},aS.featureToggles,n),d=null!=i?i:aS.queryEngineConfig,c=t||aS.mode,p=r||aS.scope,f=en({},o8,l),"admin"==c&&(f=en({},o6,{showDateAndTimeFilter:void 0===l.showDateAndTimeFilter||l.showDateAndTimeFilter,showDateFilter:void 0===l.showDateFilter||l.showDateFilter,canUseComponentLibrary:void 0===l.canUseComponentLibrary||l.canUseComponentLibrary,canSeeEmptyState:null!=(v=l.canSeeEmptyState)&&v,canDownloadViewData:void 0===l.canDownloadViewData||l.canDownloadViewData,canDownloadDataSet:void 0===l.canDownloadDataSet||l.canDownloadDataSet,canDownloadViewAsPNG:void 0===l.canDownloadViewAsPNG||l.canDownloadViewAsPNG,forceMobile:void 0!==l.forceMobile&&l.forceMobile,unloadOffScreenViews:void 0!==l.unloadOffScreenViews&&l.unloadOffScreenViews})),"read"==p&&"admin"!=c&&(f.disableAutoSave=!0,f.canEditComponentLibrary=!1,f.canEditComponentsOnDashboard=!1,f.canCreateStandaloneComponents=!1,f.parameters=!1,f.canAddTags=!1,f.canRemoveComponentsFromDashboard=!1,f.canConfigureLocalFilters=!1,f.canAddNewRows=!1,f.canAddNewCells=!1,f.canEditCustomMetrics=!1,f.canUseComponentLibrary=!1,f.canManageGlobalFilters=!1,f.showSavingIndicator=!1),o3(d,"simpleMaths")||(f.allowSimpleMathsCustomField=!1),o3(d,"aggregateMaths")||(f.allowAggregateMathsCustomField=!1),o3(d,"subquery")||(f.allowPercentagesCustomField=!1),o3(d,"switchField")||(f.allowRulesCustomField=!1),o3(d,"roundedNumbers")||(f.allowRoundedNumberCustomField=!1),o3(d,"dateMaths")||(f.allowDateCalculationsCustomField=!1),f.forceMobile&&(f.canUseComponentLibrary=!1,f.canAddNewRows=!1,f.canAddNewCells=!1,f.canAddTags=!1,f.canCreateStandaloneComponents=!1,f.canEditComponentsOnDashboard=!1,f.canRemoveComponentsFromDashboard=!1,f.canEditComponentLibrary=!1),g=f,x=(b=o.useState(g))[0],y=b[1],aF(function(e){e.featureToggles&&y(en({},x,e.featureToggles))},a),{featureToggles:x}).featureToggles,z=e.textOverride||ij,q=o.useState(null),B=q[0],V=q[1],W=(w=en({},e.dashboardBehaviour||{},{mode:e.mode}),C=e.includeComponentTypes,j=e.excludeComponentTypes,T=w.mode||aS.mode,_=w.scope||aS.scope,I=w.isProgrammaticParent||aS.isProgrammaticParent,A="admin"==T?{}:en({},w.componentOverrides),D=w.queryEngineConfig?w.queryEngineConfig:aS.queryEngineConfig,en({},aS,{isProgrammaticParent:I,mode:T,scope:_,reportScheduleOptions:w.reportScheduleOptions||aS.reportScheduleOptions,customViews:w.customViews||aS.customViews,componentOverrides:A,onlyViewTypes:function(e){var t;return(t=[].concat(C||o9),j&&(t=s.reject(t,function(e){return j.includes(e)})),t).filter(function(t){var n=!!iA(t).setDataAttributesFromPreAggregatedDataSet;return!(e.preAggregated&&!n)})},developerTools:null!=(k=w.developerTools)&&k,featureToggles:M,textOverrides:w.textOverrides||aS.textOverrides,maxCSVDownloadLimit:w.maxCSVDownloadLimit?w.maxCSVDownloadLimit:aS.maxCSVDownloadLimit,queryEngineConfig:D,dataPanel:w.dataPanel?w.dataPanel:aS.dataPanel,formatPanel:w.formatPanel?w.formatPanel:aS.formatPanel,numberFormatOptions:en({},rI(z),w.numberFormatOptions),onEditorUpdate:w.onEditorUpdate?w.onEditorUpdate:aS.onEditorUpdate,dateFilterOptions:aw(z,w.dateFilterOptions),onSave:w.onSave?w.onSave:aS.onSave,onScheduledReportChange:w.onScheduledReportChange?w.onScheduledReportChange:aS.onScheduledReportChange,dashboardFilters:w.dashboardFilters?w.dashboardFilters:aS.dashboardFilters,onDashboardFilterChange:w.onDashboardFilterChange?w.onDashboardFilterChange:aS.onDashboardFilterChange,onOpenConfigManagerUi:w.onOpenConfigManagerUi,organizationName:w.organizationName,dateTimeFormatOptions:aj(en({},aS.dateTimeFormatOptions,w.dateTimeFormatOptions?w.dateTimeFormatOptions:{}),D),disableToolbar:w.disableToolbar}));return h.jsx(ak.Provider,{value:en({},W,{componentOverrides:null!=(P=null==e||null==(R=e.dashboardBehaviour)?void 0:R.componentOverrides)?P:{},developerTools:aI(W.developerTools),isProgrammaticParent:e.isProgrammaticParent,setOverrideDeveloperInfo:V,overrideDeveloperInfo:B,onError:e.onError,onReset:e.onReset,onViewClick:e.onViewClick,nullValueAlias:e.nullValueAlias,renderTableCell:e.renderTableCell,cascadeFilterSelection:null==e?void 0:e.cascadeFilterSelection,textOverride:z,labelFormat:e.labelFormat?(N=e.labelFormat,function(e){if(N){var t=N(e);if("string"==typeof t||void 0===t)return t;console.error("labelFormat function returned an invalid type",e)}}):function(){},filterLibrary:e.filterLibrary||void 0,pdfSettings:e.pdfSettings,id:e.id,featureToggles:M,valueAlias:e.valueAlias}),children:e.children})},a_=function(){return a.useContext(ak)},aI=function(e){if("undefined"!=typeof window&&"VizzlyDev"in window){var t,n=(null==(t=window)||null==(t=t.VizzlyDev)?void 0:t.getRuntimeDeveloperTools())||{};if(Object.keys(n).length>0)return console.warn("\n------------------------------------------------\n------------------------------------------------\nUSING VIZZLY DEVELOPER TOOL OVERRIDES\n------------------------------------------------\nDisable by running the following in the browser console;\n\nVizzlyDev.clearRuntimeDeveloperTools()\n\n------------------------------------------------\n------------------------------------------------\n"),n}return e},aA=function(e){var t=(null==e?void 0:e.developerTools)&&"object"==typeof(null==e?void 0:e.developerTools)&&"theme"in(null==e?void 0:e.developerTools)&&!0===(null==e?void 0:e.developerTools.theme),n=(null==e?void 0:e.developerTools)&&"object"==typeof(null==e?void 0:e.developerTools)&&"componentOverride"in(null==e?void 0:e.developerTools)&&!0===(null==e?void 0:e.developerTools.componentOverride),i=function(){setTimeout(function(){document.querySelectorAll("[data-themeapi]").forEach(function(e){var t,n,i,r,o,a,l,s;n=e.getAttribute("data-themeapi"),r=null==(i=e.getAttribute("data-chipposition"))?void 0:i.split("."),o="0px",a="20px",l=void 0,s=void 0,null!=r&&r.length&&(r.includes("left")&&(l="0px",o=void 0),r.includes("center")&&(l="calc(50% - 35px)",o=void 0),r.includes("bottom")&&(s="8px",a=void 0),r.includes("above")&&(a="0")),e.style.setProperty("--theme-value","'"+n+"'"),e.style.setProperty("--chip-top-value",""+a),e.style.setProperty("--chip-right-value",""+o),e.style.setProperty("--chip-left-value",""+l),e.style.setProperty("--chip-bottom-value",""+s),e.classList.add("theme-box")})},300)},r=function(){setTimeout(function(){document.querySelectorAll("[data-componentoverride]").forEach(function(e){!function(e){var t=e.getAttribute("data-componentoverride");e.style.setProperty("--override-value","'"+t+"'")}(e),e.classList.add("override-box")})},300)};return o.useEffect(function(){t&&aD(),n&&aO()},[t]),o.useEffect(function(){return t&&(i(),document.addEventListener("click",i)),n&&(r(),document.addEventListener("click",r)),function(){document.removeEventListener("click",i),document.removeEventListener("click",r)}},[]),h.jsx(o.Fragment,{children:null==e?void 0:e.children})},aD=function(){g.injectGlobal({name:"4a4ux5",styles:".vizzly-modals .theme-box:hover,.vizzly-studio .theme-box:hover{outline:2px solid #1db954;}.vizzly-modals .theme-box,.vizzly-studio .theme-box{outline:2px solid transparent;}.vizzly-modals .theme-box:hover::after,.vizzly-studio .theme-box:hover::after{opacity:1!important;z-index:999999999999;}.vizzly-modals .theme-box:after,.vizzly-studio .theme-box::after{opacity:0.4;content:var(--theme-value);position:absolute;background:#1db954;color:#fff;width:auto;font-size:10px;height:20px;border-radius:8px;right:var(--chip-right-value);top:var(--chip-top-value);bottom:var(--chip-bottom-value);left:var(--chip-left-value);padding:2.5px 5px 2px;box-shadow:0 4px 8px rgba(0, 0, 0, 0.2);font-style:initial;font-weight:initial;}"})},aO=function(){g.injectGlobal({name:"1jyh5on",styles:".vizzly-modals .override-box:hover,.vizzly-studio .override-box:hover{outline:2px solid #652C8F;}.vizzly-modals .override-box,.vizzly-studio .override-box{outline:2px solid transparent;}.vizzly-modals .override-box:hover::after,.vizzly-studio .override-box:hover::after{opacity:1!important;z-index:999999999999;}.vizzly-modals .override-box:after,.vizzly-studio .override-box::after{opacity:0.4;content:var(--override-value);position:absolute;background:#652C8F;color:#fff;width:auto;font-size:10px;height:20px;border-radius:8px;right:0;top:20px;padding:2.5px 5px 2px;box-shadow:0 4px 8px rgba(0, 0, 0, 0.2);font-style:initial;font-weight:initial;}"})},aE=function(e){var t=a_(),n=t.componentOverrides,i=t.developerTools,r=t.setOverrideDeveloperInfo,o=null==n?void 0:n[e.renderOverrideKey];if(o){var a=en({},e.componentProps,{testId:void 0,onClickWithDevToolCheck:void 0,activeDevToolHighlight:void 0});delete a.testId,delete a.onClickWithDevToolCheck,delete a.activeDevToolHighlight;var l=o(a);return"string"==typeof l?h.jsx("div",{dangerouslySetInnerHTML:{__html:l}}):l}var s=!0===i||"object"==typeof i&&i.componentOverride;return h.jsx(e.Element,en({},e.componentProps,{activeDevToolHighlight:s,onClickWithDevToolCheck:function(t){return function(n){if(!n.shiftKey||!s)return t&&t(n);r({overrideKey:e.renderOverrideKey,componentProps:e.componentProps}),n.stopPropagation()}}}))},aL=function(e,t,n){return function(i){return h.jsx(aE,{Element:e,renderOverrideKey:t,componentProps:n?n(i):i})}},aP=function(e,t,n){return aL(function(n){return h.jsx(aN,{activeDevToolHighlight:n.activeDevToolHighlight,onClickWithDevToolCheck:n.onClickWithDevToolCheck,renderOverrideKey:t,children:h.jsx(e,en({},n))})},t,n)},aR={name:"bjn8wh",styles:"position:relative"},aN=function(e){var t;return h.jsx("div",en({style:{display:"inherit"},css:aR,onClick:e.onClickWithDevToolCheck()},((t={})["data-componentoverride"]=null==e?void 0:e.renderOverrideKey,t),{"data-testid":e.renderOverrideKey,children:e.children}))},aM=aP(function(e){return h.jsx(op,{active:e.active})},"renderFilterIcon"),az=aP(function(){return h.jsx(oq,{})},"renderReportIcon"),aq=aP(function(){return h.jsx(oW,{active:!0})},"renderParametersIcon"),aB=aP(function(){return h.jsx(om,{})},"renderCloseIcon"),aV=aP(function(){return h.jsx(ov,{})},"renderUndoIcon"),aW=aP(function(){return h.jsx(ob,{})},"renderCompletedIcon"),aH=aP(function(e){return h.jsx(ow,{purpose:e.purpose})},"renderDeleteIcon"),aY=aP(function(e){return h.jsx(oj,en({},e))},"renderPlusIcon"),aG=aP(function(){return h.jsx(oF,{})},"renderEditIcon"),aU=aP(function(){return h.jsx(oT,{})},"renderLockedIcon"),aK=aP(function(){return h.jsx(oI,{})},"renderDownloadIcon"),aX=aP(function(){return h.jsx(oD,{})},"renderComponentOptionsMenuIcon"),aQ=aP(function(){return h.jsx(oP,{})},"renderLibraryIcon"),aJ=aP(function(e){return h.jsx(oM,{isOpen:e.isOpen})},"renderAccordionIcon"),aZ=aP(function(){return h.jsx(oU,{})},"renderSendIcon"),a$=aP(function(){return h.jsx(o$,{})},"renderStopIcon"),a0=aP(function(){return h.jsx(oH,{})},"renderUserIcon"),a1=aP(function(){return h.jsx(oB,{width:20,height:20})},"renderAIChatIcon"),a2=aP(function(){return h.jsx(oG,{width:20,height:20})},"renderAIIcon"),a5=aP(function(){return h.jsx(oX,{width:20,height:20})},"renderThumbsUpUnselectedIcon"),a7=aP(function(){return h.jsx(oK,{width:20,height:20})},"renderThumbsUpSelectedIcon"),a4=aP(function(){return h.jsx(oJ,{width:20,height:20})},"renderThumbsDownUnselectedIcon"),a3=aP(function(){return h.jsx(oQ,{width:20,height:20})},"renderThumbsDownSelectedIcon"),a6=aP(function(){return h.jsx(oZ,{width:20,height:20})},"renderSelectIcon"),a8=aP(function(){return h.jsx(oY,{})},"renderBackButtonArrowIcon"),a9=aP(function(){return h.jsx(oE,{})},"renderTagIcon"),le=aP(function(){return h.jsx(o2,{})},"renderCheckIcon"),lt=aP(function(){return h.jsx(o7,{})},"renderSwitchIcon"),ln=aP(function(){return h.jsx(o0,{})},"renderResetIcon"),li=aP(function(e){return h.jsx(o4,en({},e))},"renderDrilldownIcon");function lr(){for(var e=[],t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach(function(t){switch(typeof t){case"string":e.push(t);break;case"object":Object.keys(t).forEach(function(n){t[n]&&e.push(n)})}}),e.length>0?e.join(" "):void 0}var lo=function(e){var t,n;return rY({width:"100%",display:"grid",gridTemplateColumns:null==e||null==(t=e.columns)?void 0:t.join(" "),gridTemplateRows:null==e||null==(n=e.rows)?void 0:n.join(" "),height:null==e?void 0:e.height,gap:null==e?void 0:e.gap,rowGap:null==e?void 0:e.rowGap,columnGap:null==e?void 0:e.columnGap,marginBottom:null==e?void 0:e.marginBottom,position:null==e?void 0:e.position,placeContent:null==e?void 0:e.placeContent,gridAutoFlow:null==e?void 0:e.flow,justifyContent:null==e?void 0:e.justifyContent,alignItems:null==e?void 0:e.alignItems,alignContent:null==e?void 0:e.alignContent,gridTemplateAreas:null==e?void 0:e.areas,minWidth:null==e?void 0:e.minWidth,justifyItems:null==e?void 0:e.justifyItems,flexGrow:null!=e&&e.grow?1:void 0})},la=function(e){var t,n,i=null!=(t=null==e?void 0:e.as)?t:"div";return h.jsx(i,{className:lr(""+lo(e),null==e?void 0:e.className),"data-component":null!=(n=null==e?void 0:e["data-component"])?n:"Grid",role:null==e?void 0:e.role,children:null==e?void 0:e.children})},ll=Object.assign(function(){return null},{container:function(e){return rY({position:"absolute",top:0,right:0,zIndex:2147483247,border:null==e?void 0:e.border,borderRadius:null==e?void 0:e.borderRadius,background:null==e?void 0:e.background,color:null==e?void 0:e.color,boxShadow:null==e?void 0:e.boxShadow,fontSize:null==e?void 0:e.fontSize})},option:function(e){var t,n,i;return rY(en({display:"flex",width:"100%",alignItems:"center",justifyContent:"flex-start",padding:null==e?void 0:e.padding,borderBottom:null==e?void 0:e.separatorBorder,gap:"0.5rem",color:"inherit"},rW,{variants:{clickable:((i={}).true={cursor:"pointer","&:hover":en({background:null==e||null==(t=e["&:hover"])?void 0:t.background,color:null==e||null==(n=e["&:hover"])?void 0:n.color},rW),"&:last-of-type":{borderBottomLeftRadius:null==e?void 0:e.borderRadius,borderBottomRightRadius:null==e?void 0:e.borderRadius},"&:hover:last-of-type":{borderBottomLeftRadius:null==e?void 0:e.borderRadius,borderBottomRightRadius:null==e?void 0:e.borderRadius},"&:first-of-type":{borderTopLeftRadius:null==e?void 0:e.borderRadius,borderTopRightRadius:null==e?void 0:e.borderRadius},"&:hover:first-of-type":{borderTopLeftRadius:null==e?void 0:e.borderRadius,borderTopRightRadius:null==e?void 0:e.borderRadius}},i)}}))},close:rY({marginRight:"0.5rem",color:"inherit","&:hover":{opacity:.7}})});function ls(e,t){a.useEffect(function(){function n(n){e.current&&!e.current.contains(n.target)&&t()}return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}},[e,t])}var lu=function(){return o.useContext(ld)},ld=o.createContext(void 0);function lc(e,t){if(void 0!==e)try{return v(e).brighten(t).css()}catch(n){return void console.error("Invalid color provided:",n)}}var lp=function(e){return 1===e?lf:lh},lf={detail:"minimal",rowLimit:6,cellLimit:4,forms:{label:{fontSize:rQ.font.standard,fontWeight:rQ.font.bold,margin:"0 0 0.3rem 0"},input:{border:"2px "+rQ.colors.brand[8]+" solid",background:"#fff",borderRadius:rQ.size.borderRadius,padding:"0.35rem 0.5rem",fontSize:rQ.font.standard,color:rQ.colors.brand.base,"&:focus":{border:"2px rgb(224, 242, 255) solid"},"&:hover":{border:"2px rgb(224, 242, 255) solid"}},select:{border:"2px "+rQ.colors.brand[8]+" solid",background:"#fff",borderRadius:rQ.size.borderRadius,padding:"0.35rem 0.5rem",color:rQ.colors.brand.base,fontSize:rQ.font.standard,fontWeight:"inherit",indicatorColor:rQ.colors.brand.base,"&:focus":{border:"2px rgb(224, 242, 255) solid"},"&:hover":{border:"2px rgb(224, 242, 255) solid"}},dateTime:{input:{border:"2px rgb(243, 244, 246) solid",background:"#fff",borderRadius:rQ.size.borderRadius,padding:"0.26rem 0.5rem",fontSize:rQ.font.standard,color:rQ.colors.brand.base,"&:focus":{border:"2px rgb(224, 242, 255) solid"},"&:hover":{border:"2px rgb(224, 242, 255) solid"}},date:{width:96},time:{width:40},indicatorColor:rQ.colors.brand.base,calendar:{selected:{background:"rgb(48, 116, 217)",color:"#fff"},unselected:{background:"transparent",color:"inherit",border:"1px solid #c9d1d9","&:hover":{background:"rgb(228, 231, 231)",color:"inherit",border:"1px solid rgb(228, 231, 231)"}},arrows:{background:"transparent",fill:"rgb(55, 65, 81)",border:"1px solid #e4e7e7",borderRadius:"8px","&:hover":{background:"rgb(233, 235, 240)",border:"1px solid #c4c4c4"}},title:{fontSize:rQ.font.header,fontWeight:rQ.font.bold,color:rQ.font.color}}}},dropdowns:{fontSize:rQ.font.standard,background:"rgb(255 255 255 / 1)",color:"inherit",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1),0 1px 2px -1px rgb(0 0 0 / 0.1)",borderRadius:rQ.size.borderRadius,border:"0px solid transparent",separatorBorder:"1px solid "+rQ.colors.brand[8],"&:hover":{background:rQ.colors.brand[5]},padding:"0.5rem"},buttons:{primary:{borderRadius:rQ.size.borderRadius,border:"1px solid rgb(48, 116, 217)",background:rQ.colors.blue,padding:"0.30rem 0.75rem",boxShadow:"0 2px 0 rgb(0 0 0 / 5%)",color:"#fff",fontSize:rQ.font.standard,"&:hover":{background:"#5795e6"}},secondary:{borderRadius:rQ.size.borderRadius,border:"1px solid "+rQ.colors.brand[20],background:"rgb(255, 255, 255)",padding:"0.30rem 0.75rem",color:rQ.font.color,fontSize:rQ.font.standard,"&:hover":{opacity:.7,background:"rgb(233, 235, 240)",border:"1px solid rgb(209, 209, 209, 0.8)",color:"rgb(27, 27, 29, 0.8)"},"&:disabled":{opacity:.7,background:"transparent"},"&:hover:disabled":{opacity:.7,background:"transparent"}},add:{border:"2px dashed rgba(143, 143, 145, 0.2)",borderRadius:rQ.size.borderRadius,color:"#8f8f91",background:"transparent","&:hover":{border:"2px dashed #3074d9",color:"#3074d9"},small:{fontSize:"0.75rem"},medium:{fontSize:rQ.font.standard},large:{fontSize:rQ.font.standard}},grid:{selected:{borderRadius:rQ.size.borderRadius,fontWeight:rQ.font.bold,background:"rgb(243 244 246)",fontSize:rQ.font.standard,"&:hover":{boxShadow:"0 0 #0000, 0 0 #0000, 0 20px 25px -5px rgb(0 0 0 / 0.1),0 8px 10px -6px rgb(0 0 0 / 0.1)"}},unselected:{borderRadius:rQ.size.borderRadius,fontWeight:rQ.font.bold,background:"transparent",fontSize:rQ.font.standard,"&:hover":{boxShadow:"0 0 #0000, 0 0 #0000, 0 20px 25px -5px rgb(0 0 0 / 0.1),0 8px 10px -6px rgb(0 0 0 / 0.1)"}}}},panels:{padding:"0.75rem 1rem",borderRadius:rQ.size.borderRadius,background:"#fff",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1),0 2px 4px -2px rgb(0 0 0 / 0.1)"},modals:{base:{borderRadius:rQ.size.borderRadius,border:"0px solid",background:"rgb(255, 255, 255)",boxShadow:"0 0 #0000,0 0 #0000,0 20px 25px -5px rgb(0 0 0 / 0.1),0 8px 10px -6px rgb(0 0 0 / 0.1)",zIndex:2147483147},header:{padding:"0.75rem 0.75rem 0px"},content:{fontSize:rQ.font.standard,padding:"0.75rem",alternativeBackground:"rgb(229 231 235 / 0.2)"},footer:{padding:"0.75rem"},overlay:{background:"#000",opacity:.3},options:{disableOutsideClick:!1,closeButton:"outside",showTitle:{editor:!1,library:!1}}},alerts:{padding:"8px 12px",borderRadius:rQ.size.borderRadius,info:{background:"rgb(224, 242, 255)",border:"1px solid rgb(224, 242, 255)",iconColor:"#1677ff"},warning:{background:"rgb(255, 245, 234)",border:"1px solid #e1b878",iconColor:"#b98900"},critical:{background:"rgb(255, 85, 85)",border:"1px solid rgb(255, 85, 85)",color:"rgb(255, 255, 255)",iconColor:"#fff"},title:{fontWeight:rQ.font.bold,fontSize:rQ.font.standard},content:{fontSize:rQ.font.standard}},tabs:{selected:{borderRadius:rQ.size.borderRadius,padding:"0.5rem 0",fontSize:rQ.font.standard,fontWeight:600,boxShadow:"0 0 #0000,0 0 #0000,0 1px 2px 0 rgb(0 0 0 / 0.05)",background:"rgb(48 116 217)",color:"rgb(255 255 255)"},unselected:{borderRadius:rQ.size.borderRadius,padding:"0.5rem 0",fontSize:rQ.font.standard,fontWeight:600,color:"rgba(0, 0, 0, 0.4)"}},lists:{title:{fontSize:14,fontWeight:rQ.font.bold},fontSize:rQ.font.standard,border:"2px solid rgb(229 231 235 / 0.6)",borderRadius:rQ.size.borderRadius,background:"rgb(255 255 255 / 1)",icon:{color:"#1f293799",background:"#fff",border:"1px solid transparent"},select:{padding:"4px 0 3px 16px",fontSize:13,"&:hover":{background:rG(97)}},row:{padding:"1px 1.5px 3.5px 8px"}},popoverMenu:{borderRadius:rQ.size.borderRadius,fontSize:rQ.font.standard,background:"rgb(249 247 250)",color:"inherit",boxShadow:"0 0 #0000,0 0 #0000,0 10px 15px -3px rgb(0 0 0 / 0.1),0 4px 6px -4px rgb(0 0 0 / 0.1)","&:hover":{background:"rgb(255, 255, 255)"},padding:"0.35rem 0.75rem"},charts:{colors:["#feae4a","#5fbaff","#e15e9d"],title:{fontWeight:rQ.font.bold,fontSize:rQ.font.header,color:rQ.colors.brand[90]},labels:{fontSize:9},axisTitles:{fontSize:11,fontWeight:700,color:rG(15)},subject:{color:"#8f8f91",fontSize:"0.75rem"},iconColor:"#2d2f31",pie:{cornerRadius:5,gap:!0,hole:!0},barChart:{cornerRadius:3},singleStat:{delteStyle:"pill"},threshold:{stroke:"#F4F4F4"}},tables:{th:{background:rG(95),borderTop:0,borderBottom:"3px solid "+rG(70),fontSize:13,fontWeight:600,padding:"0.5rem 0.5rem",borderRight:"1px solid "+rG(70),last:{borderRight:0},inner:{borderRight:!1},"&:hover":{color:rQ.colors.brand[90]},group:{fontSize:13,fontWeight:400},column:{background:"rgba(48, 116, 217, 0.05)",padding:"0.5rem",borderRight:"1px solid "+rG(70)},row:{borderBottom:"1px solid "+rG(70),padding:"0.5rem"},level:{2:{background:"rgba(48, 116, 217, 0.15)"}}}},accordion:{iconColor:rQ.colors.blue,button:{fontWeight:rQ.font.bold,fontSize:rQ.font.standard,color:rQ.colors.blue}},dashboard:{borderColor:rG(80),borderStyle:"solid",borderWidth:2,borderRadius:rQ.size.borderRadius,icon:{color:rG(5),background:"transparent","&:hover":{color:lc(rG(5),.95)}}},radioGroup:{description:{fontWeight:"inherit",color:rQ.colors.brand[80],fontSize:11},label:{fontWeight:"inherit",color:"inherit",fontSize:13}},search:{border:"1px solid rgb(243, 244, 246)",background:"#fff",borderRadius:"0.5rem",padding:"6px 10px 7px 16px",fontSize:16,fontWeight:500,height:36,"&:focus":{boxShadow:"0 0 0 3px rgb(224, 242, 255)"},"&:hover":{boxShadow:"0 0 0 3px rgb(224, 242, 255)"},icons:{color:"rgb(48, 116, 217)"}},library:{verified:{color:"rgba(22, 119, 255, 0.3)"}},header:{borderBottom:"2px solid "+rG(75),padding:"0 0 0.5rem 0",title:{fontSize:18,fontWeight:500,htmlElement:"span"}},ai:{suggestions:{border:"1px solid transparent",background:"#D2D2FF",color:"#374151",borderRadius:8,padding:"8px 16px","&:hover":{background:lc("#d2d2ff",.15),border:"1px solid #d2d2ff"}},avatar:{border:"none",color:rG(15),background:"#fff"}},icons:{borderRadius:8,color:rG(5),padding:4,"&:hover":{color:lc(rG(5),.95),background:rG(95)}}},lm=rG(82),lh={detail:"minimal",rowLimit:6,cellLimit:4,version:2,forms:{label:{fontSize:14,color:rG(0),fontWeight:500,margin:"0 0 0.3rem 0"},input:{fontSize:14,padding:"7.5px 1rem",color:rG(0),fontWeight:400,border:"2px "+lm+" solid",background:"#fff",borderRadius:8,"&:focus":{border:"2px rgb(224, 242, 255) solid"},"&:hover":{border:"2px rgb(224, 242, 255) solid"}},select:{border:"2px "+lm+" solid",background:"#fff",borderRadius:8,indicatorColor:rQ.colors.brand.base,"&:focus":{border:"2px rgb(224, 242, 255) solid"},"&:hover":{border:"2px rgb(224, 242, 255) solid"},fontSize:14,padding:"7px 1rem",color:rG(0),fontWeight:400},dateTime:{input:{border:"2px "+lm+" solid",background:"#fff",borderRadius:8,padding:"0.26rem 0.5rem",fontSize:14,color:rG(0),"&:focus":{border:"2px rgb(224, 242, 255) solid"},"&:hover":{border:"2px rgb(224, 242, 255) solid"}},date:{width:96},time:{width:48},indicatorColor:rQ.colors.brand.base,calendar:{selected:{background:"rgb(48, 116, 217)",color:"#fff"},unselected:{background:"transparent",color:"inherit",border:"1px solid #c9d1d9","&:hover":{background:"rgb(228, 231, 231)",color:"inherit",border:"1px solid rgb(228, 231, 231)"}},arrows:{background:"transparent",fill:"rgb(55, 65, 81)",border:"1px solid #e4e7e7",borderRadius:"8px","&:hover":{background:"rgb(233, 235, 240)",border:"1px solid #c4c4c4"}},title:{fontSize:rQ.font.header,fontWeight:rQ.font.bold,color:rQ.font.color}}}},dropdowns:{fontSize:14,background:"rgb(255 255 255 / 1)",color:"inherit",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1),0 1px 2px -1px rgb(0 0 0 / 0.1)",borderRadius:8,border:"0px solid transparent",separatorBorder:"1px transparent solid","&:hover":{background:rG(95)},padding:"0.5rem 1rem"},buttons:{primary:{padding:".6rem 1rem",borderRadius:8,fontSize:14,fontWeight:500,background:rG(0),color:"#fff",border:"0",boxShadow:"unset",narrowPadding:"0.46rem 1rem 0.5rem","&:hover":{background:rG(10),border:0,boxShadow:"unset"},"&:disabled":{opacity:1,background:rG(50),border:"0"},"&:hover:disabled":{opacity:1,background:rG(50),border:"0"}},secondary:{padding:".6rem 1rem",borderRadius:8,fontSize:14,background:"rgb(255, 255, 255)",fontWeight:500,color:rG(0),border:"0",boxShadow:"unset","&:hover":{opacity:.7,background:"rgb(233, 235, 240)",border:0,boxShadow:"unset"},"&:disabled":{opacity:.7,background:"transparent",border:0},"&:hover:disabled":{opacity:.7,background:"transparent",border:0}},add:{border:"2px dashed "+rG(70),color:rG(15),background:"transparent",borderRadius:8,"&:hover":{border:"2px dashed #3074d9",color:"#3074d9"},small:{fontSize:12,fontWeight:500},medium:{fontSize:12,fontWeight:500},large:{fontSize:14,fontWeight:500}}},panels:{padding:"0.75rem 1rem",borderRadius:8,background:"#fff",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1),0 2px 4px -2px rgb(0 0 0 / 0.1)"},modals:{base:{borderRadius:8,border:"0px solid",background:"rgb(255, 255, 255)",boxShadow:"0 0 #0000,0 0 #0000,0 20px 25px -5px rgb(0 0 0 / 0.1),0 8px 10px -6px rgb(0 0 0 / 0.1)",zIndex:2147483147},header:{background:"rgb(229 231 235 / 0.2)",padding:"1.5rem 2rem  0.5rem 2rem"},content:{fontSize:14,background:"rgb(229 231 235 / 0.2)",padding:"1rem 2rem",alternativeBackground:"rgb(229 231 235 / 0.2)"},footer:{padding:"0.5rem 2rem  0.5rem 2rem"},overlay:{background:"#000",opacity:.3},options:{disableOutsideClick:!1,closeButton:"outside",showTitle:{editor:!1,library:!1}}},alerts:{padding:"8px 12px",borderRadius:8,info:{background:"rgb(224, 242, 255)",border:"1px solid rgb(224, 242, 255)",iconColor:"#1677ff"},warning:{background:"rgb(255, 245, 234)",border:"1px solid #e1b878",iconColor:"#b98900"},critical:{background:"rgb(255, 85, 85)",border:"1px solid rgb(255, 85, 85)",color:"rgb(255, 255, 255)",iconColor:"#fff"},title:{fontWeight:rQ.font.bold,fontSize:rQ.font.standard},content:{fontSize:rQ.font.standard}},tabs:{selected:{borderRadius:"0",padding:"11.5px 16px",fontSize:14,fontWeight:"initial",background:"transparent",color:"inherit",borderBottom:"3px solid #3683f5",boxShadow:"unset","&:disabled":{opacity:1,background:rG(50),border:"0"},"&:hover:disabled":{opacity:1,background:rG(50),border:"0"}},unselected:{borderRadius:"0",padding:"11.5px 16px 13.5px",fontSize:14,fontWeight:"initial",background:"transparent",color:"#6d7175",borderBottom:"1px solid "+rG(90),"&:hover":{borderRadius:"6px 6px 0 0",color:"#202223"},"&:disabled":{opacity:1,background:rG(90),border:"0"},"&:hover:disabled":{opacity:1,background:rG(90),border:"0"}}},lists:{title:{fontSize:14,fontWeight:rQ.font.bold},subTitle:{fontSize:14,fontWeight:rQ.font.bold,color:rG(20),margin:"0 0 0.5rem 0"},fontSize:rQ.font.standard,borderRadius:8,background:"rgb(255 255 255 / 1)",icon:{color:"#1f293799",background:"#fff",border:"1px solid transparent"},border:"2px solid "+lm,padding:"0.5rem",select:{padding:"4px 0 3px 16px",fontSize:13,"&:hover":{background:rG(97)}},row:{padding:"1px 1.5px 3.5px 8px"}},popoverMenu:{borderRadius:8,fontSize:14,background:"rgb(249 247 250)",color:"inherit",boxShadow:"0 0 #0000,0 0 #0000,0 10px 15px -3px rgb(0 0 0 / 0.1),0 4px 6px -4px rgb(0 0 0 / 0.1)","&:hover":{background:"rgb(255, 255, 255)"},padding:"0.35rem 0.75rem"},charts:{colors:["#feae4a","#5fbaff","#e15e9d"],title:{fontWeight:rQ.font.bold,fontSize:rQ.font.header,color:rG(10)},labels:{fontSize:9},axisTitles:{fontSize:11,fontWeight:700,color:rG(15)},subject:{color:"#8f8f91",fontSize:"0.75rem"},iconColor:"#2d2f31",pie:{cornerRadius:5,gap:!0,hole:!0},barChart:{cornerRadius:3},singleStat:{delteStyle:"pill"},threshold:{stroke:"#F4F4F4"}},tables:{th:{background:"transparent",borderTop:0,borderBottom:"2px solid "+rG(70),fontSize:13,fontWeight:600,padding:"0.5rem 0.5rem",borderRight:"1px solid transparent",last:{borderRight:0},inner:{borderRight:!1},"&:hover":{color:rQ.colors.brand[90]},group:{fontSize:13,fontWeight:400},column:{background:"rgba(48, 116, 217, 0.05)",padding:"0.5rem",borderRight:"1px solid "+rG(70)},row:{borderBottom:"1px solid transparent",padding:"0.5rem",borderRight:"1px solid "+rG(70),borderLeft:"1px solid "+rG(70)},level:{2:{background:"rgba(48, 116, 217, 0.15)"}}},body:{cells:{padding:"7.3px 8px",fontSize:13,borderBottom:"1px solid "+rQ.colors.brand[8]},odd:{"&:hover":{background:rQ.colors.brand[5]}},even:{"&:hover":{background:rQ.colors.brand[5]}}}},accordion:{iconColor:rQ.colors.blue,button:{fontWeight:rQ.font.bold,fontSize:rQ.font.standard,color:rQ.colors.blue}},dashboard:{borderColor:rG(80),borderStyle:"solid",borderWidth:2,borderRadius:"0.75rem",icon:{color:rG(5),background:"transparent","&:hover":{color:lc(rG(5),.95)}}},radioGroup:{description:{fontWeight:"inherit",color:rG(20),fontSize:11},label:{fontWeight:"inherit",color:"inherit",fontSize:13}},search:{border:"1px solid "+lm,background:"#fff",borderRadius:"0.5rem",padding:"6px 10px 7px 16px",fontSize:16,fontWeight:500,height:36,"&:focus":{boxShadow:"0 0 0 3px rgb(224, 242, 255)"},"&:hover":{boxShadow:"0 0 0 3px rgb(224, 242, 255)"},icons:{color:"rgb(48, 116, 217)"}},library:{verified:{color:"rgba(22, 119, 255, 0.3)"}},filters:{filterBy:{padding:"0.45rem 1rem 0.46rem",lineHeight:"21px"}},header:{borderBottom:"2px solid "+rG(75),padding:"0 0 0.5rem 0",title:{fontSize:18,fontWeight:500,htmlElement:"span"}},ai:{suggestions:{border:"1px solid transparent",background:"#D2D2FF",color:"#374151",borderRadius:8,padding:"8px 16px","&:hover":{background:lc("#d2d2ff",.15),border:"1px solid #d2d2ff"}},avatar:{border:"none",color:rG(15),background:"#fff"}},icons:{borderRadius:8,color:rG(5),padding:4,"&:hover":{color:lc(rG(5),.95),background:rG(95)}}},lv=b({key:"css"}),lg=function(e){var t,n,i=null!=(t=null==(n=e.theme)?void 0:n.version)?t:2,r=s.defaultsDeep({},lb(i,null==e?void 0:e.theme,null==e?void 0:e.storedTheme),lp(i));return h.jsx(ld.Provider,{value:r,children:h.jsx(m.CacheProvider,{value:lv,children:null==e?void 0:e.children})})},lb=function(e,t,n){var i,r,o,a,l,u,d,c,p,f,m,h,v,g,b,x,y,w,C,j,S,F,k,T,_,I,A,D,O,E,L={baseFont:{fontSize:null!=(i=null!=(r=null==t||null==(o=t.baseFont)?void 0:o.fontSize)?r:null==n?void 0:n.fontSize)?i:rQ.font.standard,fontFamily:null!=(a=null!=(l=null==t||null==(u=t.baseFont)?void 0:u.fontFamily)?l:null==n?void 0:n.fontFamily)?a:rQ.font.sanSerif},titles:{fontFamily:null!=(d=null!=(c=null!=(p=null==t||null==(f=t.titles)?void 0:f.fontFamily)?p:null==t||null==(m=t.baseFont)?void 0:m.fontFamily)?c:null==n?void 0:n.fontFamily)?d:rQ.font.sanSerif,fontSize:null!=(h=null==t||null==(v=t.titles)?void 0:v.fontSize)?h:null==t||null==(g=t.baseFont)?void 0:g.fontSize},colors:null!=(b=null!=(x=null!=(y=null==t||null==(w=t.charts)?void 0:w.colors)?y:null==t?void 0:t.colors)?x:null==n?void 0:n.colors)?b:null==(C=lp(e).charts)?void 0:C.colors,rowLimit:null!=(j=null!=(S=null==t?void 0:t.rowLimit)?S:null==n?void 0:n.rowLimit)?j:lp(e).rowLimit,detail:null!=(F=null!=(k=null==t?void 0:t.detail)?k:null==n?void 0:n.detail)?F:lp(e).detail,fontFamily:null!=(T=null!=(_=null==t?void 0:t.fontFamily)?_:null==n?void 0:n.fontFamily)?T:rQ.font.sanSerif,fontSize:null!=(I=null!=(A=null==t?void 0:t.fontSize)?A:null==n?void 0:n.fontSize)?I:rQ.font.sanSerif,dashboard:{icon:{color:null!=(D=null==t||null==(O=t.dashboard)||null==(O=O.icon)?void 0:O.color)?D:null==(E=lp(e))||null==(E=E.dashboard)||null==(E=E.icon)?void 0:E.color}}};return s.merge({},t,L)},lx=o.createContext(!1);function ly(e){return h.jsx(lx.Provider,{value:e.force,children:e.children})}function lw(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(e in t){var o=t[e];return"function"==typeof o?o.apply(void 0,i):o}var a=Error('Tried to handle "'+e+'" but there is no handler defined. Only defined handlers are: '+Object.keys(t).map(function(e){return'"'+e+'"'}).join(", ")+".");throw Error.captureStackTrace&&Error.captureStackTrace(a,lw),a}var lC,lj,lS=["static"],lF=["unmount"],lk=["as","children","refName"],lT=((lC={})[lC.None=0]="None",lC[lC.RenderStrategy=1]="RenderStrategy",lC[lC.Static=2]="Static",lC),l_=((lj={})[lj.Unmount=0]="Unmount",lj[lj.Hidden=1]="Hidden",lj);function lI(e){var t=e.slot,n=e.defaultTag,i=e.features,r=e.visible,o=e.name,a=lD(e.theirProps,e.ourProps);if(void 0===r||r)return lA(a,t,n,o);var l=null!=i?i:lT.None;if(l&lT.Static){var s=a.static,u=el(a,lS);if(void 0!==s&&s)return lA(u,t,n,o)}if(l&lT.RenderStrategy){var d,c=a.unmount,p=el(a,lF);return lw(void 0===c||c?l_.Unmount:l_.Hidden,((d={})[l_.Unmount]=function(){return null},d[l_.Hidden]=function(){return lA(en({},p,{hidden:!0,style:{display:"none"}}),t,n,o)},d))}return lA(a,t,n,o)}function lA(e,t,n,i){void 0===t&&(t={});var r,a=lL(e,["unmount","static"]),l=a.as,s=void 0===l?n:l,u=a.children,d=a.refName,c=void 0===d?"ref":d,p=el(a,lk),f=void 0!==e.ref?((r={})[c]=e.ref,r):{},m="function"==typeof u?u(t):u;p.className&&"function"==typeof p.className&&(p.className=p.className(t));var h={};if(t){for(var v=!1,g=[],b=0,x=Object.entries(t);b<x.length;b++){var y=x[b],w=y[1];"boolean"==typeof w&&(v=!0),!0===w&&g.push(y[0])}v&&(h["data-headlessui-state"]=g.join(" "))}if(s===o.Fragment&&Object.keys(lE(p)).length>0){if(!o.isValidElement(m)||Array.isArray(m)&&m.length>1)throw Error(['Passing props on "Fragment"!',"","The current component <"+i+' /> is rendering a "Fragment".',"However we need to passthrough the following props:",Object.keys(p).map(function(e){return"  - "+e}).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(function(e){return"  - "+e}).join("\n")].join("\n"));return o.cloneElement(m,Object.assign({},lD(m.props,lE(lL(p,["ref"]))),h,f,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{ref:t.every(function(e){return null==e})?void 0:function(e){for(var n,i=ed(t);!(n=i()).done;){var r=n.value;null!=r&&("function"==typeof r?r(e):r.current=e)}}}}(m.ref,f.ref)))}return o.createElement(s,Object.assign({},lL(p,["ref"]),s!==o.Fragment&&f,s!==o.Fragment&&h),m)}function lD(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return{};if(1===t.length)return t[0];for(var i={},r={},o=0;o<t.length;o++){var a=t[o];for(var l in a)l.startsWith("on")&&"function"==typeof a[l]?(null!=r[l]||(r[l]=[]),r[l].push(a[l])):i[l]=a[l]}if(i.disabled||i["aria-disabled"])return Object.assign(i,Object.fromEntries(Object.keys(r).map(function(e){return[e,void 0]})));var s=function(e){var t;Object.assign(i,((t={})[e]=function(t){for(var n=r[e],i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];for(var l,s=ed(n);!(l=s()).done;){var u=l.value;if((t instanceof Event||(null==t?void 0:t.nativeEvent)instanceof Event)&&t.defaultPrevented)return;u.apply(void 0,[t].concat(o))}},t))};for(var u in r)s(u);return i}function lO(e){var t;return Object.assign(o.forwardRef(e),{displayName:null!=(t=e.displayName)?t:e.name})}function lE(e){var t=Object.assign({},e);for(var n in t)void 0===t[n]&&delete t[n];return t}function lL(e,t){void 0===t&&(t=[]);for(var n,i=Object.assign({},e),r=ed(t);!(n=r()).done;){var o=n.value;o in i&&delete i[o]}return i}var lP="undefined"==typeof window||"undefined"==typeof document,lR=lP?o.useEffect:o.useLayoutEffect;function lN(e){var t=o.useRef(e);return lR(function(){t.current=e},[e]),t}var lM=function(e){var t=lN(e);return a.useCallback(function(){return t.current.apply(t,arguments)},[t])},lz=Symbol();function lq(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=o.useRef(t);o.useEffect(function(){i.current=t},[t]);var r=lM(function(e){for(var t,n=ed(i.current);!(t=n()).done;){var r=t.value;null!=r&&("function"==typeof r?r(e):r.current=e)}});return t.every(function(e){return null==e||(null==e?void 0:e[lz])})?void 0:r}var lB,lV,lW=((lB={}).Space=" ",lB.Enter="Enter",lB.Escape="Escape",lB.Backspace="Backspace",lB.Delete="Delete",lB.ArrowLeft="ArrowLeft",lB.ArrowUp="ArrowUp",lB.ArrowRight="ArrowRight",lB.ArrowDown="ArrowDown",lB.Home="Home",lB.End="End",lB.PageUp="PageUp",lB.PageDown="PageDown",lB.Tab="Tab",lB),lH={serverHandoffComplete:!1};function lY(){var e=o.useState(lH.serverHandoffComplete),t=e[0],n=e[1];return o.useEffect(function(){!0!==t&&n(!0)},[t]),o.useEffect(function(){!1===lH.serverHandoffComplete&&(lH.serverHandoffComplete=!0)},[]),t}var lG=0;function lU(){return++lG}var lK,lX=null!=(lV=a.useId)?lV:function(){var e=lY(),t=a.useState(e?lU:null),n=t[0],i=t[1];return lR(function(){null===n&&i(lU())},[n]),null!=n?""+n:void 0},lQ=["features"],lJ=((lK={})[lK.None=1]="None",lK[lK.Focusable=2]="Focusable",lK[lK.Hidden=4]="Hidden",lK),lZ=lO(function(e,t){var n=e.features,i=void 0===n?lJ.None:n,r=el(e,lQ);return lI({ourProps:{ref:t,"aria-hidden":(i&lJ.Focusable)===lJ.Focusable||void 0,style:en({position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},(i&lJ.Hidden)===lJ.Hidden&&(i&lJ.Focusable)!==lJ.Focusable&&{display:"none"})},theirProps:r,slot:{},defaultTag:"div",name:"Hidden"})});function l$(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch(function(e){return setTimeout(function(){throw e})})}function l0(){var e=[],t=[],n={enqueue:function(e){t.push(e)},addEventListener:function(e,t,i,r){return e.addEventListener(t,i,r),n.add(function(){return e.removeEventListener(t,i,r)})},requestAnimationFrame:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=requestAnimationFrame.apply(void 0,arguments);return n.add(function(){return cancelAnimationFrame(e)})}),nextFrame:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return n.requestAnimationFrame(function(){return n.requestAnimationFrame.apply(n,t)})},setTimeout:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=setTimeout.apply(void 0,arguments);return n.add(function(){return clearTimeout(e)})}),microTask:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r={current:!0};return l$(function(){r.current&&t[0]()}),n.add(function(){r.current=!1})},add:function(t){return e.push(t),function(){var n=e.indexOf(t);n>=0&&(0,e.splice(n,1)[0])()}},dispose:function(){for(var t,n=ed(e.splice(0));!(t=n()).done;)(0,t.value)()},workQueue:function(){return et($().mark(function e(){var n,i,r;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=ed(t.splice(0));case 1:if((i=n()).done){e.next=7;break}return r=i.value,e.next=5,r();case 5:e.next=1;break;case 7:case"end":return e.stop()}},e)}))()}};return n}function l1(e){return lP?null:e instanceof Node?e.ownerDocument:null!=e&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}var l2,l5,l7,l4,l3=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(function(e){return e+":not([tabindex='-1'])"}).join(","),l6=((l2={})[l2.First=1]="First",l2[l2.Previous=2]="Previous",l2[l2.Next=4]="Next",l2[l2.Last=8]="Last",l2[l2.WrapAround=16]="WrapAround",l2[l2.NoScroll=32]="NoScroll",l2),l8=((l5={})[l5.Error=0]="Error",l5[l5.Overflow=1]="Overflow",l5[l5.Success=2]="Success",l5[l5.Underflow=3]="Underflow",l5),l9=((l7=l9||{})[l7.Previous=-1]="Previous",l7[l7.Next=1]="Next",l7),se=((l4={})[l4.Strict=0]="Strict",l4[l4.Loose=1]="Loose",l4);function st(e){null==e||e.focus({preventScroll:!0})}function sn(e,t){return void 0===t&&(t=function(e){return e}),e.slice().sort(function(e,n){var i=t(e),r=t(n);if(null===i||null===r)return 0;var o=i.compareDocumentPosition(r);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function si(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i=null);var r=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,o=Array.isArray(e)?n?sn(e):e:(void 0===(a=e)&&(a=document.body),null==a?[]:Array.from(a.querySelectorAll(l3)));i=null!=(l=i)?l:r.activeElement;var a,l,s,u,d=function(){if(t&(l6.First|l6.Next))return l9.Next;if(t&(l6.Previous|l6.Last))return l9.Previous;throw Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")}(),c=function(){if(t&l6.First)return 0;if(t&l6.Previous)return Math.max(0,o.indexOf(i))-1;if(t&l6.Next)return Math.max(0,o.indexOf(i))+1;if(t&l6.Last)return o.length-1;throw Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")}(),p=t&l6.NoScroll?{preventScroll:!0}:{},f=0,m=o.length,h=void 0;do{if(f>=m||f+m<=0)return l8.Error;var v,g=c+f;if(t&l6.WrapAround)g=(g+m)%m;else{if(g<0)return l8.Underflow;if(g>=m)return l8.Overflow}null==(v=h=o[g])||v.focus(p),f+=d}while(h!==r.activeElement);return t&(l6.Next|l6.Previous)&&null!=(u=null==(s=h)||null==s.matches?void 0:s.matches("textarea,input"))&&u&&h.select(),h.hasAttribute("tabindex")||h.setAttribute("tabindex","0"),l8.Success}var sr,so=((sr={})[sr.Forwards=0]="Forwards",sr[sr.Backwards=1]="Backwards",sr);function sa(){var e=o.useRef(!1);return lR(function(){return e.current=!0,function(){e.current=!1}},[]),e}function sl(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.useMemo(function(){return l1.apply(void 0,t)},[].concat(t))}function ss(e,t,n,i){var r=lN(n);o.useEffect(function(){var n;function o(e){r.current(e)}return(e=null!=(n=e)?n:window).addEventListener(t,o,i),function(){return e.removeEventListener(t,o,i)}},[e,t,i])}function su(e,t){var n=o.useRef([]),i=lM(e);o.useEffect(function(){for(var e,r=[].concat(n.current),o=ed(t.entries());!(e=o()).done;){var a=e.value;if(n.current[a[0]]!==a[1]){var l=i(t,r);return n.current=t,l}}},[i].concat(t))}var sd,sc=["initialFocus","containers","features"],sp=((sd=sp||{})[sd.None=1]="None",sd[sd.InitialFocus=2]="InitialFocus",sd[sd.TabLock=4]="TabLock",sd[sd.FocusLock=8]="FocusLock",sd[sd.RestoreFocus=16]="RestoreFocus",sd[sd.All=30]="All",sd),sf=Object.assign(lO(function(e,t){var n=o.useRef(null),i=lq(n,t),r=e.initialFocus,a=e.containers,l=e.features,s=void 0===l?sp.All:l,u=el(e,sc);lY()||(s=sp.None);var d,c,p,f,m,v,g,b,x,y,w,C,j=sl(n);d={ownerDocument:j},c=Boolean(s&sp.RestoreFocus),p=d.ownerDocument,f=o.useRef(null),ss(null==p?void 0:p.defaultView,"focusout",function(e){c&&(f.current||(f.current=e.target))},!0),su(function(){c||((null==p?void 0:p.activeElement)===(null==p?void 0:p.body)&&st(f.current),f.current=null)},[c]),m=o.useRef(!1),o.useEffect(function(){return m.current=!1,function(){m.current=!0,l$(function(){m.current&&(st(f.current),f.current=null)})}},[]);var S,F,k,T,_,I,A,D,O,E=(v={ownerDocument:j,container:n,initialFocus:r},g=Boolean(s&sp.InitialFocus),b=v.ownerDocument,x=v.container,y=v.initialFocus,w=o.useRef(null),C=sa(),su(function(){if(g){var e=x.current;e&&l$(function(){if(C.current){var t=null==b?void 0:b.activeElement;if(null!=y&&y.current){if((null==y?void 0:y.current)===t)return void(w.current=t)}else if(e.contains(t))return void(w.current=t);null!=y&&y.current?st(y.current):si(e,l6.First)===l8.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),w.current=null==b?void 0:b.activeElement}})}},[g]),w);S={ownerDocument:j,container:n,containers:a,previousActiveElement:E},F=Boolean(s&sp.FocusLock),k=S.ownerDocument,T=S.container,_=S.containers,I=S.previousActiveElement,A=sa(),ss(null==k?void 0:k.defaultView,"focus",function(e){if(F&&A.current){var t=new Set(null==_?void 0:_.current);t.add(T);var n=I.current;if(n){var i=e.target;i&&i instanceof HTMLElement?function(e,t){for(var n,i,r=ed(e);!(i=r()).done;)if(null!=(n=i.value.current)&&n.contains(t))return!0;return!1}(t,i)?(I.current=i,st(i)):(e.preventDefault(),e.stopPropagation(),st(n)):st(I.current)}}},!0);var L=(O=o.useRef(so.Forwards),D=lN(function(e){"Tab"===e.key&&(O.current=e.shiftKey?so.Backwards:so.Forwards)}),o.useEffect(function(){function e(e){D.current(e)}return window.addEventListener("keydown",e,!0),function(){return window.removeEventListener("keydown",e,!0)}},["keydown",!0]),O),P=lM(function(){var e,t=n.current;t&&lw(L.current,((e={})[so.Forwards]=function(){return si(t,l6.First)},e[so.Backwards]=function(){return si(t,l6.Last)},e))});return h.jsxs(h.Fragment,{children:[Boolean(s&sp.TabLock)&&h.jsx(lZ,{as:"button",type:"button",onFocus:P,features:lJ.Focusable}),lI({ourProps:{ref:i},theirProps:u,defaultTag:"div",name:"FocusTrap"}),Boolean(s&sp.TabLock)&&h.jsx(lZ,{as:"button",type:"button",onFocus:P,features:lJ.Focusable})]})}),{features:sp}),sm=new Set,sh=new Map;function sv(e){e.setAttribute("aria-hidden","true"),e.inert=!0}function sg(e){var t=sh.get(e);t&&(null===t["aria-hidden"]?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",t["aria-hidden"]),e.inert=t.inert)}var sb,sx=["target"],sy="headlessui-portal-root",sw=o.Fragment,sC=lO(function(e,t){var n,i,r,a,l,s,u,d,c,p=o.useRef(null),f=lq((void 0===d&&(d=!0),Object.assign(function(e){p.current=e},((c={})[lz]=d,c))),t),m=sl(p),h=(i=o.useContext(lx),r=o.useContext(sS),a=sl(p),s=(l=o.useState(function(){if(!i&&null!==r||lP)return null;var e=null==a?void 0:a.getElementById(sy);if(e)return e;if(null===a)return null;var t=a.createElement("div");return t.setAttribute("id",sy),t.setAttribute("data-testid",sy),a.body.appendChild(t)}))[0],u=l[1],o.useEffect(function(){null!==s&&(null!=a&&a.body.contains(s)||null==a||a.body.appendChild(s))},[s,a]),o.useEffect(function(){i||null!==r&&u(r.current)},[r,u,i]),s),v=o.useState(function(){var e;return lP?null:null!=(e=null==m?void 0:m.createElement("div"))?e:null})[0],g=lY(),b=o.useRef(!1);return lR(function(){if(b.current=!1,h&&v)return h.contains(v)||(v.setAttribute("data-headlessui-portal",""),h.appendChild(v)),function(){b.current=!0,l$(function(){var e;b.current&&h&&v&&(h.removeChild(v),h.childNodes.length<=0&&(null==(e=h.parentElement)||e.removeChild(h)))})}},[h,v]),g&&h&&v?x.createPortal(lI({ourProps:{ref:f},theirProps:e,defaultTag:sw,name:"Portal"}),v):null}),sj=o.Fragment,sS=o.createContext(null),sF=Object.assign(sC,{Group:lO(function(e,t){var n=e.target,i=el(e,sx),r=lq(t);return h.jsx(sS.Provider,{value:n,children:lI({ourProps:{ref:r},theirProps:i,defaultTag:sj,name:"Popover.Group"})})})}),sk=o.createContext(null),sT=lO(function(e,t){var n=function e(){var t=o.useContext(sk);if(null===t){var n=Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(n,e),n}return t}(),i="headlessui-description-"+lX(),r=lq(t);return lR(function(){return n.register(i)},[i,n.register]),lI({ourProps:en({ref:r},n.props,{id:i}),theirProps:e,slot:n.slot||{},defaultTag:"p",name:n.name||"Description"})}),s_=o.createContext(null);s_.displayName="OpenClosedContext";var sI=((sb={})[sb.Open=0]="Open",sb[sb.Closed=1]="Closed",sb);function sA(){return o.useContext(s_)}function sD(e){return h.jsx(s_.Provider,{value:e.value,children:e.children})}var sO,sE=o.createContext(function(){});sE.displayName="StackContext";var sL=((sO={})[sO.Add=0]="Add",sO[sO.Remove=1]="Remove",sO);function sP(e){var t=e.children,n=e.onUpdate,i=e.type,r=e.element,a=e.enabled,l=o.useContext(sE),s=lM(function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];null==n||n.apply(void 0,t),l.apply(void 0,t)});return lR(function(){var e=void 0===a||!0===a;return e&&s(sL.Add,i,r),function(){e&&s(sL.Remove,i,r)}},[s,i,r,a]),h.jsx(sE.Provider,{value:s,children:t})}function sR(e,t,n){var i=lN(t);o.useEffect(function(){function t(e){i.current(e)}return document.addEventListener(e,t,n),function(){return document.removeEventListener(e,t,n)}},[e,n])}var sN,sM,sz,sq=["open","onClose","initialFocus","__demoMode"],sB=((sN=sB||{})[sN.Open=0]="Open",sN[sN.Closed=1]="Closed",sN),sV=((sM=sV||{})[sM.SetTitleId=0]="SetTitleId",sM),sW=((sz={})[sV.SetTitleId]=function(e,t){return e.titleId===t.id?e:en({},e,{titleId:t.id})},sz),sH=o.createContext(null);function sY(e){var t=o.useContext(sH);if(null===t){var n=Error("<"+e+" /> is missing a parent <Dialog /> component.");throw Error.captureStackTrace&&Error.captureStackTrace(n,sY),n}return t}function sG(e,t){return lw(t.type,sW,e,t)}sH.displayName="DialogContext";var sU,sK=lT.RenderStrategy|lT.Static,sX=lO(function(e,t){var n,i=e.open,r=e.onClose,a=e.initialFocus,l=e.__demoMode,s=el(e,sq),u=o.useState(0),d=u[0],c=u[1],p=sA();void 0===i&&null!==p&&(i=lw(p,((n={})[sI.Open]=!0,n[sI.Closed]=!1,n)));var f=o.useRef(new Set),m=o.useRef(null),v=lq(m,t),g=o.useRef(null),b=sl(m),x=e.hasOwnProperty("open")||null!==p,y=e.hasOwnProperty("onClose");if(!x&&!y)throw Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!x)throw Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!y)throw Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if("boolean"!=typeof i)throw Error("You provided an `open` prop to the `Dialog`, but the value is not a boolean. Received: "+i);if("function"!=typeof r)throw Error("You provided an `onClose` prop to the `Dialog`, but the value is not a function. Received: "+r);var w,C,j,S,F,k,T,_=i?sB.Open:sB.Closed,I=o.useReducer(sG,{titleId:null,descriptionId:null,panelRef:o.createRef()}),A=I[0],D=I[1],O=lM(function(){return r(!1)}),E=lM(function(e){return D({type:sV.SetTitleId,id:e})}),L=!!lY()&&!(void 0!==l&&l)&&_===sB.Open,P=d>1,R=null!==o.useContext(sH);void 0===(C=!!P&&L)&&(C=!0),lR(function(){if(C&&m.current){var e=m.current,t=l1(e);if(t){sm.add(e);for(var n,i=ed(sh.keys());!(n=i()).done;){var r=n.value;r.contains(e)&&(sg(r),sh.delete(r))}return t.querySelectorAll("body > *").forEach(function(e){if(e instanceof HTMLElement){for(var t,n=ed(sm);!(t=n()).done;)if(e.contains(t.value))return;1===sm.size&&(sh.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),sv(e))}}),function(){if(sm.delete(e),sm.size>0)t.querySelectorAll("body > *").forEach(function(e){if(e instanceof HTMLElement&&!sh.has(e)){for(var t,n=ed(sm);!(t=n()).done;)if(e.contains(t.value))return;sh.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),sv(e)}});else for(var n,i=ed(sh.keys());!(n=i()).done;){var r=n.value;sg(r),sh.delete(r)}}}}},[C]),function(e,t,n){void 0===n&&(n=!0);var i=o.useRef(!1);function r(n,r){if(i.current&&!n.defaultPrevented){var o=function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(e),a=r(n);if(null!==a&&a.getRootNode().contains(a)){for(var l,s,u,d,c=ed(o);!(d=c()).done;){var p=d.value;if(null!==p){var f=p instanceof HTMLElement?p:p.current;if(null!=f&&f.contains(a))return}}return void 0===(l=se.Loose)&&(l=se.Strict),a!==(null==(s=l1(a))?void 0:s.body)&&lw(l,((u={})[se.Strict]=function(){return a.matches(l3)},u[se.Loose]=function(){for(var e=a;null!==e;){if(e.matches(l3))return!0;e=e.parentElement}return!1},u))||-1===a.tabIndex||n.preventDefault(),t(n,a)}}}o.useEffect(function(){requestAnimationFrame(function(){i.current=n})},[n]);var a=o.useRef(null);sR("mousedown",function(e){var t;i.current&&(a.current=(null==e.composedPath||null==(t=e.composedPath())?void 0:t[0])||e.target)},!0),sR("click",function(e){a.current&&(r(e,function(){return a.current}),a.current=null)},!0),sR("blur",function(e){return r(e,function(){return window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null})},!0)}(function(){var e,t;return[].concat(Array.from(null!=(e=null==b?void 0:b.querySelectorAll("body > *, [data-headlessui-portal]"))?e:[]).filter(function(e){return e instanceof HTMLElement&&!e.contains(g.current)&&(!A.panelRef.current||!e.contains(A.panelRef.current))}),[null!=(t=A.panelRef.current)?t:m.current])},O,L&&!P),ss(null==b?void 0:b.defaultView,"keydown",function(e){e.defaultPrevented||e.key===lW.Escape&&_===sB.Open&&(P||(e.preventDefault(),e.stopPropagation(),O()))}),S=_===sB.Open&&!R,o.useEffect(function(){var e;if(S&&b){var t=l0(),n=b.documentElement,i=(null!=(e=b.defaultView)?e:window).innerWidth-n.clientWidth;if(o(n,"overflow","hidden"),i>0&&o(n,"paddingRight",i-(n.clientWidth-n.offsetWidth)+"px"),/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0){var r=window.pageYOffset;o(n,"position","fixed"),o(n,"marginTop","-"+r+"px"),o(n,"width","100%"),t.add(function(){return window.scrollTo(0,r)})}return t.dispose}function o(e,n,i){var r,o=e.style.getPropertyValue(n);return Object.assign(e.style,((r={})[n]=i,r)),t.add(function(){var t;Object.assign(e.style,((t={})[n]=o,t))})}},[b,S]),o.useEffect(function(){if(_===sB.Open&&m.current){var e=new IntersectionObserver(function(e){for(var t,n=ed(e);!(t=n()).done;){var i=t.value;0===i.boundingClientRect.x&&0===i.boundingClientRect.y&&0===i.boundingClientRect.width&&0===i.boundingClientRect.height&&O()}});return e.observe(m.current),function(){return e.disconnect()}}},[_,m,O]);var N=(k=(F=o.useState([]))[0],T=F[1],[k.length>0?k.join(" "):void 0,o.useMemo(function(){return function(e){var t=lM(function(e){return T(function(t){return[].concat(t,[e])}),function(){return T(function(t){var n=t.slice(),i=n.indexOf(e);return -1!==i&&n.splice(i,1),n})}}),n=o.useMemo(function(){return{register:t,slot:e.slot,name:e.name,props:e.props}},[t,e.slot,e.name,e.props]);return h.jsx(sk.Provider,{value:n,children:e.children})}},[T])]),M=N[0],z=N[1],q="headlessui-dialog-"+lX(),B=o.useMemo(function(){return[{dialogState:_,close:O,setTitleId:E},A]},[_,A,O,E]),V=o.useMemo(function(){return{open:_===sB.Open}},[_]),W={ref:v,id:q,role:"dialog","aria-modal":_===sB.Open||void 0,"aria-labelledby":A.titleId,"aria-describedby":M};return h.jsxs(sP,{type:"Dialog",enabled:_===sB.Open,element:m,onUpdate:lM(function(e,t,n){var i;"Dialog"===t&&lw(e,((i={})[sL.Add]=function(){f.current.add(n),c(function(e){return e+1})},i[sL.Remove]=function(){f.current.add(n),c(function(e){return e-1})},i))}),children:[h.jsx(ly,{force:!0,children:h.jsx(sF,{children:h.jsx(sH.Provider,{value:B,children:h.jsx(sF.Group,{target:m,children:h.jsx(ly,{force:!1,children:h.jsx(z,{slot:V,name:"Dialog.Description",children:h.jsx(sf,{initialFocus:a,containers:f,features:L?lw(P?"parent":"leaf",{parent:sf.features.RestoreFocus,leaf:sf.features.All&~sf.features.FocusLock}):sf.features.None,children:lI({ourProps:W,theirProps:s,slot:V,defaultTag:"div",features:sK,visible:_===sB.Open,name:"Dialog"})})})})})})})}),h.jsx(lZ,{features:lJ.Hidden,ref:g})]})}),sQ=lO(function(e,t){var n=sY("Dialog.Overlay")[0],i=n.dialogState,r=n.close;return lI({ourProps:{ref:lq(t),id:"headlessui-dialog-overlay-"+lX(),"aria-hidden":!0,onClick:lM(function(e){if(e.target===e.currentTarget){if(function(e){for(var t,n,i=e.parentElement,r=null;i&&!(i instanceof HTMLFieldSetElement);)i instanceof HTMLLegendElement&&(r=i),i=i.parentElement;var o=null!=(t=""===(null==(n=i)?void 0:n.getAttribute("disabled")))&&t;return(!o||!function(e){if(!e)return!1;for(var t=e.previousElementSibling;null!==t;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}(r))&&o}(e.currentTarget))return e.preventDefault();e.preventDefault(),e.stopPropagation(),r()}})},theirProps:e,slot:o.useMemo(function(){return{open:i===sB.Open}},[i]),defaultTag:"div",name:"Dialog.Overlay"})}),sJ=Object.assign(sX,{Backdrop:lO(function(e,t){var n=sY("Dialog.Backdrop"),i=n[0].dialogState,r=n[1],a=lq(t),l="headlessui-dialog-backdrop-"+lX();o.useEffect(function(){if(null===r.panelRef.current)throw Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[r.panelRef]);var s=o.useMemo(function(){return{open:i===sB.Open}},[i]);return h.jsx(ly,{force:!0,children:h.jsx(sF,{children:lI({ourProps:{ref:a,id:l,"aria-hidden":!0},theirProps:e,slot:s,defaultTag:"div",name:"Dialog.Backdrop"})})})}),Panel:lO(function(e,t){var n=sY("Dialog.Panel"),i=n[0].dialogState,r=lq(t,n[1].panelRef),a="headlessui-dialog-panel-"+lX(),l=o.useMemo(function(){return{open:i===sB.Open}},[i]);return lI({ourProps:{ref:r,id:a,onClick:lM(function(e){e.stopPropagation()})},theirProps:e,slot:l,defaultTag:"div",name:"Dialog.Panel"})}),Overlay:sQ,Title:lO(function(e,t){var n=sY("Dialog.Title")[0],i=n.dialogState,r=n.setTitleId,a="headlessui-dialog-title-"+lX(),l=lq(t);return o.useEffect(function(){return r(a),function(){return r(null)}},[a,r]),lI({ourProps:{ref:l,id:a},theirProps:e,slot:o.useMemo(function(){return{open:i===sB.Open}},[i]),defaultTag:"h2",name:"Dialog.Title"})}),Description:sT});function sZ(e){if(e.type)return e.type;var t,n=null!=(t=e.as)?t:"button";return"string"==typeof n&&"button"===n.toLowerCase()?"button":void 0}var s$,s0,s1,s2,s5,s7=((s$=s7||{})[s$.Open=0]="Open",s$[s$.Closed=1]="Closed",s$),s4=((s0=s4||{})[s0.ToggleDisclosure=0]="ToggleDisclosure",s0[s0.CloseDisclosure=1]="CloseDisclosure",s0[s0.SetButtonId=2]="SetButtonId",s0[s0.SetPanelId=3]="SetPanelId",s0[s0.LinkPanel=4]="LinkPanel",s0[s0.UnlinkPanel=5]="UnlinkPanel",s0);(sU={})[s4.ToggleDisclosure]=function(e){var t;return en({},e,{disclosureState:lw(e.disclosureState,((t={})[s7.Open]=s7.Closed,t[s7.Closed]=s7.Open,t))})},sU[s4.CloseDisclosure]=function(e){return e.disclosureState===s7.Closed?e:en({},e,{disclosureState:s7.Closed})},sU[s4.LinkPanel]=function(e){return!0===e.linkedPanel?e:en({},e,{linkedPanel:!0})},sU[s4.UnlinkPanel]=function(e){return!1===e.linkedPanel?e:en({},e,{linkedPanel:!1})},sU[s4.SetButtonId]=function(e,t){return e.buttonId===t.buttonId?e:en({},e,{buttonId:t.buttonId})},sU[s4.SetPanelId]=function(e,t){return e.panelId===t.panelId?e:en({},e,{panelId:t.panelId})},o.createContext(null).displayName="DisclosureContext",o.createContext(null).displayName="DisclosureAPIContext",o.createContext(null).displayName="DisclosurePanelContext";var s3=((s2=s3||{})[s2.Open=0]="Open",s2[s2.Closed=1]="Closed",s2),s6=((s5=s6||{})[s5.TogglePopover=0]="TogglePopover",s5[s5.ClosePopover=1]="ClosePopover",s5[s5.SetButton=2]="SetButton",s5[s5.SetButtonId=3]="SetButtonId",s5[s5.SetPanel=4]="SetPanel",s5[s5.SetPanelId=5]="SetPanelId",s5);function s8(e){var t=e.onFocus,n=o.useState(!0),i=n[1];return n[0]?h.jsx(lZ,{as:"button",type:"button",features:lJ.Focusable,onFocus:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){e.preventDefault();var n,r=50;n=requestAnimationFrame(function e(){if(!(r--<=0))return t()?(i(!1),void cancelAnimationFrame(n)):void(n=requestAnimationFrame(e));n&&cancelAnimationFrame(n)})})}):null}(s1={})[s6.TogglePopover]=function(e){var t;return en({},e,{popoverState:lw(e.popoverState,((t={})[s3.Open]=s3.Closed,t[s3.Closed]=s3.Open,t))})},s1[s6.ClosePopover]=function(e){return e.popoverState===s3.Closed?e:en({},e,{popoverState:s3.Closed})},s1[s6.SetButton]=function(e,t){return e.button===t.button?e:en({},e,{button:t.button})},s1[s6.SetButtonId]=function(e,t){return e.buttonId===t.buttonId?e:en({},e,{buttonId:t.buttonId})},s1[s6.SetPanel]=function(e,t){return e.panel===t.panel?e:en({},e,{panel:t.panel})},s1[s6.SetPanelId]=function(e,t){return e.panelId===t.panelId?e:en({},e,{panelId:t.panelId})},o.createContext(null).displayName="PopoverContext",o.createContext(null).displayName="PopoverAPIContext",o.createContext(null).displayName="PopoverGroupContext",o.createContext(null).displayName="PopoverPanelContext",o.createContext(null).displayName="GroupContext";var s9,ue,ut=["defaultIndex","vertical","manual","onChange","selectedIndex"],un=((s9=un||{})[s9.SetSelectedIndex=0]="SetSelectedIndex",s9[s9.RegisterTab=1]="RegisterTab",s9[s9.UnregisterTab=2]="UnregisterTab",s9[s9.RegisterPanel=3]="RegisterPanel",s9[s9.UnregisterPanel=4]="UnregisterPanel",s9),ui=((ue={})[un.SetSelectedIndex]=function(e,t){var n=e.tabs.filter(function(e){var t;return!(null!=(t=e.current)&&t.hasAttribute("disabled"))});if(t.index<0)return en({},e,{selectedIndex:e.tabs.indexOf(n[0])});if(t.index>e.tabs.length)return en({},e,{selectedIndex:e.tabs.indexOf(n[n.length-1])});var i=e.tabs.slice(0,t.index),r=[].concat(e.tabs.slice(t.index),i).find(function(e){return n.includes(e)});return r?en({},e,{selectedIndex:e.tabs.indexOf(r)}):e},ue[un.RegisterTab]=function(e,t){if(e.tabs.includes(t.tab))return e;var n,i=e.tabs[e.selectedIndex],r=sn([].concat(e.tabs,[t.tab]),function(e){return e.current}),o=null!=(n=r.indexOf(i))?n:e.selectedIndex;return -1===o&&(o=e.selectedIndex),en({},e,{tabs:r,selectedIndex:o})},ue[un.UnregisterTab]=function(e,t){return en({},e,{tabs:e.tabs.filter(function(e){return e!==t.tab})})},ue[un.RegisterPanel]=function(e,t){return e.panels.includes(t.panel)?e:en({},e,{panels:sn([].concat(e.panels,[t.panel]),function(e){return e.current})})},ue[un.UnregisterPanel]=function(e,t){return en({},e,{panels:e.panels.filter(function(e){return e!==t.panel})})},ue),ur=o.createContext(null);function uo(e){var t=o.useContext(ur);if(null===t){var n=Error("<"+e+" /> is missing a parent <Tab.Group /> component.");throw Error.captureStackTrace&&Error.captureStackTrace(n,uo),n}return t}ur.displayName="TabsSSRContext";var ua=o.createContext(null);function ul(e){var t=o.useContext(ua);if(null===t){var n=Error("<"+e+" /> is missing a parent <Tab.Group /> component.");throw Error.captureStackTrace&&Error.captureStackTrace(n,ul),n}return t}ua.displayName="TabsDataContext";var us=o.createContext(null);function uu(e){var t=o.useContext(us);if(null===t){var n=Error("<"+e+" /> is missing a parent <Tab.Group /> component.");throw Error.captureStackTrace&&Error.captureStackTrace(n,uu),n}return t}function ud(e,t){return lw(t.type,ui,e,t)}us.displayName="TabsActionsContext";var uc=o.Fragment,up=lO(function(e,t){var n=e.defaultIndex,i=void 0===n?0:n,r=e.vertical,a=e.manual,l=e.onChange,s=e.selectedIndex,u=void 0===s?null:s,d=el(e,ut),c=void 0!==r&&r?"vertical":"horizontal",p=void 0!==a&&a?"manual":"auto",f=null!==u,m=lq(t),v=o.useReducer(ud,{selectedIndex:null!=u?u:i,tabs:[],panels:[]}),g=v[0],b=v[1],x=o.useMemo(function(){return{selectedIndex:g.selectedIndex}},[g.selectedIndex]),y=lN(l||function(){}),w=lN(g.tabs),C=o.useMemo(function(){return en({orientation:c,activation:p},g)},[c,p,g]),j=lN(f?e.selectedIndex:g.selectedIndex),S=o.useMemo(function(){return{registerTab:function(e){return b({type:un.RegisterTab,tab:e}),function(){return b({type:un.UnregisterTab,tab:e})}},registerPanel:function(e){return b({type:un.RegisterPanel,panel:e}),function(){return b({type:un.UnregisterPanel,panel:e})}},change:function(e){j.current!==e&&y.current(e),f||b({type:un.SetSelectedIndex,index:e})}}},[b,f]);lR(function(){b({type:un.SetSelectedIndex,index:null!=u?u:i})},[u]);var F=o.useRef({tabs:[],panels:[]});return h.jsx(ur.Provider,{value:F,children:h.jsx(us.Provider,{value:S,children:h.jsxs(ua.Provider,{value:C,children:[C.tabs.length<=0&&h.jsx(s8,{onFocus:function(){for(var e,t=ed(w.current);!(e=t()).done;){var n,i,r=e.value;if(0===(null==(n=r.current)?void 0:n.tabIndex))return null==(i=r.current)||i.focus(),!0}return!1}}),lI({ourProps:{ref:m},theirProps:d,slot:x,defaultTag:uc,name:"Tabs"})]})})})}),uf=lO(function(e,t){var n=ul("Tab.List"),i=n.orientation,r=n.selectedIndex;return lI({ourProps:{ref:lq(t),role:"tablist","aria-orientation":i},theirProps:e,slot:{selectedIndex:r},defaultTag:"div",name:"Tabs.List"})}),um=lT.RenderStrategy|lT.Static,uh=Object.assign(lO(function(e,t){var n,i="headlessui-tabs-tab-"+lX(),r=ul("Tab"),a=r.orientation,l=r.activation,s=r.selectedIndex,u=r.tabs,d=r.panels,c=uu("Tab"),p=ul("Tab"),f=uo("Tab"),m=o.useRef(null),h=lq(m,t);lR(function(){return c.registerTab(m)},[c,m]);var v=f.current.tabs.indexOf(i);-1===v&&(v=f.current.tabs.push(i)-1);var g=u.indexOf(m);-1===g&&(g=v);var b,x,y,w,C,j=g===s,S=lM(function(e){var t=e();if(t===l8.Success&&"auto"===l){var n,i=null==(n=l1(m))?void 0:n.activeElement,r=p.tabs.findIndex(function(e){return e.current===i});-1!==r&&c.change(r)}return t}),F=lM(function(e){var t=u.map(function(e){return e.current}).filter(Boolean);if(e.key===lW.Space||e.key===lW.Enter)return e.preventDefault(),e.stopPropagation(),void c.change(g);switch(e.key){case lW.Home:case lW.PageUp:return e.preventDefault(),e.stopPropagation(),S(function(){return si(t,l6.First)});case lW.End:case lW.PageDown:return e.preventDefault(),e.stopPropagation(),S(function(){return si(t,l6.Last)})}return S(function(){return lw(a,{vertical:function(){return e.key===lW.ArrowUp?si(t,l6.Previous|l6.WrapAround):e.key===lW.ArrowDown?si(t,l6.Next|l6.WrapAround):l8.Error},horizontal:function(){return e.key===lW.ArrowLeft?si(t,l6.Previous|l6.WrapAround):e.key===lW.ArrowRight?si(t,l6.Next|l6.WrapAround):l8.Error}})})===l8.Success?e.preventDefault():void 0}),k=o.useRef(!1),T=lM(function(){var e;k.current||(k.current=!0,null==(e=m.current)||e.focus(),c.change(g),l$(function(){k.current=!1}))}),_=lM(function(e){e.preventDefault()}),I=o.useMemo(function(){return{selected:j}},[j]);return lI({ourProps:{ref:h,onKeyDown:F,onMouseDown:_,onClick:T,id:i,role:"tab",type:(w=(y=o.useState(function(){return sZ(e)}))[0],C=y[1],lR(function(){C(sZ(e))},[e.type,e.as]),lR(function(){w||m.current&&m.current instanceof HTMLButtonElement&&!m.current.hasAttribute("type")&&C("button")},[w,m]),w),"aria-controls":null==(n=d[g])||null==(n=n.current)?void 0:n.id,"aria-selected":j,tabIndex:j?0:-1},theirProps:e,slot:I,defaultTag:"button",name:"Tabs.Tab"})}),{Group:up,List:uf,Panels:lO(function(e,t){var n=ul("Tab.Panels").selectedIndex;return lI({ourProps:{ref:lq(t)},theirProps:e,slot:o.useMemo(function(){return{selectedIndex:n}},[n]),defaultTag:"div",name:"Tabs.Panels"})}),Panel:lO(function(e,t){var n,i,r,a=ul("Tab.Panel"),l=a.selectedIndex,s=a.tabs,u=a.panels,d=uu("Tab.Panel"),c=uo("Tab.Panel"),p="headlessui-tabs-panel-"+lX(),f=o.useRef(null),m=lq(f,t);lR(function(){return d.registerPanel(f)},[d,f]);var v=c.current.panels.indexOf(p);-1===v&&(v=c.current.panels.push(p)-1);var g=u.indexOf(f);-1===g&&(g=v);var b=g===l,x=o.useMemo(function(){return{selected:b}},[b]),y={ref:m,id:p,role:"tabpanel","aria-labelledby":null==(n=s[g])||null==(n=n.current)?void 0:n.id,tabIndex:b?0:-1};return b||null!=(i=e.unmount)&&!i||null!=(r=e.static)&&r?lI({ourProps:y,theirProps:e,slot:x,defaultTag:"div",features:um,visible:b,name:"Tabs.Panel"}):h.jsx(lZ,en({as:"span"},y))})});function uv(e){for(var t,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e&&i.length>0&&(t=e.classList).add.apply(t,i)}function ug(e){for(var t,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e&&i.length>0&&(t=e.classList).remove.apply(t,i)}var ub,ux=((ub={}).Ended="ended",ub.Cancelled="cancelled",ub);function uy(){var e=o.useState(l0)[0];return o.useEffect(function(){return function(){return e.dispose()}},[e]),e}var uw=["beforeEnter","afterEnter","beforeLeave","afterLeave","enter","enterFrom","enterTo","entered","leave","leaveFrom","leaveTo"],uC=["show","appear","unmount"];function uj(e){return void 0===e&&(e=""),e.split(" ").filter(function(e){return e.trim().length>1})}var uS,uF=o.createContext(null);uF.displayName="TransitionContext";var uk=((uS=uk||{}).Visible="visible",uS.Hidden="hidden",uS),uT=o.createContext(null);function u_(e){return"children"in e?u_(e.children):e.current.filter(function(e){return null!==e.el.current}).filter(function(e){return e.state===uk.Visible}).length>0}function uI(e,t){var n=lN(e),i=o.useRef([]),r=sa(),a=uy(),l=lM(function(e,t){void 0===t&&(t=l_.Hidden);var o,l=i.current.findIndex(function(t){return t.el===e});-1!==l&&(lw(t,((o={})[l_.Unmount]=function(){i.current.splice(l,1)},o[l_.Hidden]=function(){i.current[l].state=uk.Hidden},o)),a.microTask(function(){!u_(i)&&r.current&&(null==n.current||n.current())}))}),s=lM(function(e){var t=i.current.find(function(t){return t.el===e});return t?t.state!==uk.Visible&&(t.state=uk.Visible):i.current.push({el:e,state:uk.Visible}),function(){return l(e,l_.Unmount)}}),u=o.useRef([]),d=o.useRef(Promise.resolve()),c=o.useRef({enter:[],leave:[],idle:[]}),p=lM(function(e,n,i){u.current.splice(0),t&&(t.chains.current[n]=t.chains.current[n].filter(function(t){return t[0]!==e})),null==t||t.chains.current[n].push([e,new Promise(function(e){u.current.push(e)})]),null==t||t.chains.current[n].push([e,new Promise(function(e){Promise.all(c.current[n].map(function(e){return e[1]})).then(function(){return e()})})]),"enter"===n?d.current=d.current.then(function(){return null==t?void 0:t.wait.current}).then(function(){return i(n)}):i(n)}),f=lM(function(e,t,n){Promise.all(c.current[t].splice(0).map(function(e){return e[1]})).then(function(){var e;null==(e=u.current.shift())||e()}).then(function(){return n(t)})});return o.useMemo(function(){return{children:i,register:s,unregister:l,onStart:p,onStop:f,wait:d,chains:c}},[s,l,i,p,f,c,d])}function uA(){}uT.displayName="NestingContext";var uD=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function uO(e){for(var t={},n=0;n<uD.length;n++){var i,r=uD[n];t[r]=null!=(i=e[r])?i:uA}return t}var uE=lT.RenderStrategy,uL=lO(function(e,t){var n,i,r,a=e.beforeEnter,l=e.afterEnter,s=e.beforeLeave,u=e.afterLeave,d=e.enter,c=e.enterFrom,p=e.enterTo,f=e.entered,m=e.leave,v=e.leaveFrom,g=e.leaveTo,b=el(e,uw),x=o.useRef(null),y=lq(x,t),w=b.unmount?l_.Unmount:l_.Hidden,C=function(){var e=o.useContext(uF);if(null===e)throw Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),j=C.show,S=C.appear,F=C.initial,k=o.useState(j?uk.Visible:uk.Hidden),T=k[0],_=k[1],I=function(){var e=o.useContext(uT);if(null===e)throw Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),A=I.register,D=I.unregister,O=o.useRef(null);o.useEffect(function(){return A(x)},[A,x]),o.useEffect(function(){var e;if(w===l_.Hidden&&x.current){if(!j||T===uk.Visible)return lw(T,((e={})[uk.Hidden]=function(){return D(x)},e[uk.Visible]=function(){return A(x)},e));_(uk.Visible)}},[T,x,A,D,j,w]);var E=lN({enter:uj(d),enterFrom:uj(c),enterTo:uj(p),entered:uj(f),leave:uj(m),leaveFrom:uj(v),leaveTo:uj(g)}),L=(i={beforeEnter:a,afterEnter:l,beforeLeave:s,afterLeave:u},r=o.useRef(uO(i)),o.useEffect(function(){r.current=uO(i)},[i]),r),P=lY();o.useEffect(function(){if(P&&T===uk.Visible&&null===x.current)throw Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[x,T,P]);var R,N,M,z,q,B,V,W,H,Y=F&&!S,G=P?Y||O.current===j?"idle":j?"enter":"leave":"idle",U=lM(function(e){return lw(e,{enter:function(){return L.current.beforeEnter()},leave:function(){return L.current.beforeLeave()},idle:function(){}})}),K=lM(function(e){return lw(e,{enter:function(){return L.current.afterEnter()},leave:function(){return L.current.afterLeave()},idle:function(){}})}),X=uI(function(){_(uk.Hidden),D(x)},I);return N=(R={container:x,classes:E,direction:G,onStart:lN(function(e){X.onStart(x,e,U)}),onStop:lN(function(e){X.onStop(x,e,K),"leave"!==e||u_(X)||(_(uk.Hidden),D(x))})}).container,M=R.direction,z=R.classes,q=R.onStart,B=R.onStop,V=sa(),W=uy(),H=lN(M),lR(function(){var e,t,n,i,r,o,a,l,s,u,d,c,p=l0();W.add(p.dispose);var f=N.current;if(f&&"idle"!==H.current&&V.current)return p.dispose(),q.current(H.current),p.add((e=f,t=z.current,n="enter"===H.current,i=function(e){var t;p.dispose(),lw(e,((t={})[ux.Ended]=function(){B.current(H.current)},t[ux.Cancelled]=function(){},t))},a=n?"enter":"leave",l=l0(),s=void 0!==i?(r=i,o={called:!1},function(){if(!o.called)return o.called=!0,r.apply(void 0,arguments)}):function(){},"enter"===a&&(e.removeAttribute("hidden"),e.style.display=""),u=lw(a,{enter:function(){return t.enter},leave:function(){return t.leave}}),d=lw(a,{enter:function(){return t.enterTo},leave:function(){return t.leaveTo}}),c=lw(a,{enter:function(){return t.enterFrom},leave:function(){return t.leaveFrom}}),ug.apply(void 0,[e].concat(t.enter,t.enterTo,t.enterFrom,t.leave,t.leaveFrom,t.leaveTo,t.entered)),uv.apply(void 0,[e].concat(u,c)),l.nextFrame(function(){ug.apply(void 0,[e].concat(c)),uv.apply(void 0,[e].concat(d)),function(e,t){var n=l0();if(!e)return n.dispose;var i=getComputedStyle(e),r=[i.transitionDuration,i.transitionDelay].map(function(e){var t=e.split(",").filter(Boolean).map(function(e){return e.includes("ms")?parseFloat(e):1e3*parseFloat(e)}).sort(function(e,t){return t-e})[0];return void 0===t?0:t});if(0!==r[0]+r[1]){var o=[];o.push(n.addEventListener(e,"transitionrun",function(i){i.target===i.currentTarget&&(o.splice(0).forEach(function(e){return e()}),o.push(n.addEventListener(e,"transitionend",function(e){e.target===e.currentTarget&&(t(ux.Ended),o.splice(0).forEach(function(e){return e()}))}),n.addEventListener(e,"transitioncancel",function(e){e.target===e.currentTarget&&(t(ux.Cancelled),o.splice(0).forEach(function(e){return e()}))})))}))}else t(ux.Ended);n.add(function(){return t(ux.Cancelled)})}(e,function(n){return n===ux.Ended&&(ug.apply(void 0,[e].concat(u)),uv.apply(void 0,[e].concat(t.entered))),s(n)})}),l.dispose)),p.dispose},[M]),o.useEffect(function(){Y&&(O.current=w===l_.Hidden?null:j)},[j,Y,T]),h.jsx(uT.Provider,{value:X,children:h.jsx(sD,{value:lw(T,((n={})[uk.Visible]=sI.Open,n[uk.Hidden]=sI.Closed,n)),children:lI({ourProps:{ref:y},theirProps:b,defaultTag:"div",features:uE,visible:T===uk.Visible,name:"Transition.Child"})})})}),uP=lO(function(e,t){var n=e.show,i=e.appear,r=void 0!==i&&i,a=e.unmount,l=el(e,uC),s=o.useRef(null),u=lq(s,t);lY();var d,c=sA();if(void 0===n&&null!==c&&(n=lw(c,((d={})[sI.Open]=!0,d[sI.Closed]=!1,d))),![!0,!1].includes(n))throw Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");var p=o.useState(n?uk.Visible:uk.Hidden),f=p[0],m=p[1],v=uI(function(){m(uk.Hidden)}),g=o.useState(!0),b=g[0],x=g[1],y=o.useRef([n]);lR(function(){!1!==b&&y.current[y.current.length-1]!==n&&(y.current.push(n),x(!1))},[y,n]);var w=o.useMemo(function(){return{show:n,appear:r,initial:b}},[n,r,b]);o.useEffect(function(){if(n)m(uk.Visible);else if(u_(v)){var e=s.current;if(!e)return;var t=e.getBoundingClientRect();0===t.x&&0===t.y&&0===t.width&&0===t.height&&m(uk.Hidden)}else m(uk.Hidden)},[n,v]);var C={unmount:a};return h.jsx(uT.Provider,{value:v,children:h.jsx(uF.Provider,{value:w,children:lI({ourProps:en({},C,{as:o.Fragment,children:h.jsx(uL,en({ref:u},C,l))}),theirProps:{},defaultTag:o.Fragment,features:uE,visible:f===uk.Visible,name:"Transition"})})})}),uR=Object.assign(uP,{Child:lO(function(e,t){var n=null!==o.useContext(uF),i=null!==sA();return h.jsx(h.Fragment,{children:h.jsx(!n&&i?uP:uL,en({ref:t},e))})}),Root:uP}),uN=function(e){var t,n,i,r,o,a,l,s,u,d;return rY(en({padding:null==e?void 0:e.padding,paddingTop:null!=(t=null==e?void 0:e.paddingTop)?t:null==e?void 0:e.paddingY,paddingLeft:null!=(n=null==e?void 0:e.paddingLeft)?n:null==e?void 0:e.paddingX,paddingRight:null!=(i=null==e?void 0:e.paddingRight)?i:null==e?void 0:e.paddingX,paddingBottom:null!=(r=null==e?void 0:e.paddingBottom)?r:null==e?void 0:e.paddingY,marginTop:null!=(o=null==e?void 0:e.marginTop)?o:null==e?void 0:e.marginY,marginBottom:null!=(a=null==e?void 0:e.marginBottom)?a:null==e?void 0:e.marginY,marginRight:null!=(l=null==e?void 0:e.marginRight)?l:null==e?void 0:e.marginX,marginLeft:null!=(s=null==e?void 0:e.marginLeft)?s:null==e?void 0:e.marginX,margin:null==e?void 0:e.margin,position:null==e?void 0:e.position,overflowX:null==e?void 0:e.overflowX,overflowY:null==e?void 0:e.overflowY,width:null==e?void 0:e.width,gridRow:null==e?void 0:e.gridRow,gridColumn:null==e?void 0:e.gridColumn,height:null==e?void 0:e.height,overflow:null==e?void 0:e.overflow,flex:null==e?void 0:e.flex,flexGrow:null==e?void 0:e.flexGrow,maxWidth:null==e?void 0:e.maxWidth,maxHeight:null==e?void 0:e.maxHeight,minHeight:null==e?void 0:e.minHeight,minWidth:null==e?void 0:e.minWidth,overflowWrap:null!=e&&e.textWrap?"break-word":void 0,wordWrap:null!=e&&e.textWrap?"break-word":void 0,wordBreak:null!=e&&e.textWrap?"break-word":void 0,hyphens:null!=e&&e.hyphens&&null!=e&&e.textWrap?"auto":void 0,alignSelf:null==e?void 0:e.alignSelf,border:null==e?void 0:e.border,textAlign:null==e?void 0:e.textAlign,display:null==e?void 0:e.display,listStyle:null==e?void 0:e.listStyle,right:null==e?void 0:e.right,top:null==e?void 0:e.top,left:null==e?void 0:e.left,gridArea:null==e?void 0:e.area,bottom:null==e?void 0:e.bottom,lineHeight:null==e?void 0:e.lineHeight,whiteSpace:null!=e&&e.nowrap?"nowrap":void 0,borderTop:null==e?void 0:e.borderTop},(d={},null!=e&&e.mdWidth&&(d=en({},d,{"@media (max-width: 1366px)":{width:null==e?void 0:e.mdWidth}})),null!=e&&e.smWidth&&(d=en({},d,{"@media (max-width: 920px)":{width:null==e?void 0:e.smWidth}})),d)))},uM=function(e){var t,n,i,r,o,a=null!=(t=null==(n=e)?void 0:n.as)?t:"div";return"fieldset"===e.as&&(e=en({padding:0,border:0,marginY:0,marginX:0},e)),h.jsx(a,{className:lr(""+uN(e),null==(i=e)?void 0:i.className),"data-component":null!=(r=e["data-component"])?r:"View","data-themeapi":e["data-themeapi"],"data-testid":e["data-testid"],role:e.role,children:null==(o=e)?void 0:o.children})},uz=function(e){var t=e.width,n=o.useRef(null);function i(){null==e||e.onClose()}ls(n,function(){return null==e?void 0:e.onClose()}),o.useEffect(function(){return window.addEventListener("scroll",i),function(){return window.removeEventListener("scroll",i)}},[]),o.useEffect(function(){return window.addEventListener("resize",i),function(){window.removeEventListener("resize",i)}},[]);var r=lu();return null!=e&&e.position?h.jsx(ly,{force:!0,children:h.jsx(sF,{children:h.jsx("div",{style:uB(void 0===t?170:t,null==e?void 0:e.position,null==e?void 0:e.align),"data-component":"popover-menu-container",ref:n,className:ll.container(null==r?void 0:r.popoverMenu)+" vizzly-popover","data-themeapi":"popoverMenu",children:null==e?void 0:e.children})})}):h.jsx("div",{className:ll.container(null==r?void 0:r.popoverMenu)+" vizzly-popover","data-themeapi":"popoverMenu",children:null==e?void 0:e.children})},uq=Object.assign(uz,{Options:function(e){return h.jsx(la,{rows:["auto"],gap:"0.5rem",children:h.jsx(uM,{paddingY:null!=e&&e.padding?"0.5rem":void 0,children:null==e?void 0:e.children})})},Option:function(e){var t=lu();return h.jsx("li",{className:""+ll.option(null==t?void 0:t.popoverMenu)({clickable:(null==e?void 0:e.onChange)&&"true"}),"data-testid":null==e?void 0:e.testId,onClick:function(){return(null==e?void 0:e.onChange)&&(null==e?void 0:e.onChange())},role:(null==e?void 0:e.onChange)&&"button",children:null==e?void 0:e.children})},Container:uz,DisplayWrapper:function(e){var t=e.width,n=lu();return h.jsx("div",{className:""+ll.container(null==n?void 0:n.popoverMenu),style:{width:void 0===t?160:t},children:null==e?void 0:e.children})}});function uB(e,t,n){var i,r,o=null!=(i=null==t?void 0:t.left)?i:0,a=t||{},l=a.left,s=void 0===l?0:l,u=a.top,d=a.width,c=void 0===d?0:d,p=a.height,f=(void 0===u?0:u)+(void 0===p?0:p)+window.pageYOffset;return{position:"absolute",left:"right"===n?o+e>window.innerWidth?s-c:s:s<e?s-c:s-e+c,top:null!=(r=null==t?void 0:t.topOverride)?r:f,width:e}}function uV(){var e=o.useState(!1),t=e[0],n=e[1],i=o.useState(void 0),r=i[0],l=i[1],s=a.useRef(null);return{ref:s,show:t,position:r,close:function(){return n(!1)},open:function(){n(!t),s.current&&l(s.current.getBoundingClientRect())}}}var uW={convert:!1,stripUnknown:!0},uH=function(e,t,n){var i=o.useState(""),r=i[0],a=i[1],l=e.map(function(e){if(n&&"object"==typeof e&&null!==e&&"value"in e&&"string"==typeof e.value){var t=n(e.value);return t?en({},e,{alias:t}):e}return e});return""===r?{values:e.map(function(e,t){return{item:e,refIndex:t}}),searchString:r,setSearch:a}:{values:new y(l,{keys:[].concat(t,["alias"]),useExtendedSearch:!0}).search(r).map(function(e){return{item:e.item,refIndex:e.refIndex}}),setSearch:a,searchString:r}},uY={"&::-webkit-scrollbar":{height:8,width:8,opacity:.6},"&:active::-webkit-scrollbar-thumb":{visibility:"visible"},"&:focus::-webkit-scrollbar-thumb":{visibility:"visible"},"&:hover::-webkit-scrollbar-thumb":{visibility:"visible"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(142, 139, 130, 0.8)",visibility:"hidden",borderRadius:4},"&::-webkit-scrollbar-corner":{backgroundColor:"transparent"}},uG=rY({width:"100%"}),uU=Object.assign(function(){return null},{dropdown:function(e,t){return rY({marginTop:8,width:null!=e?e:void 0,minWidth:null!=t?t:void 0,position:"absolute",top:"100%",zIndex:40,left:0,variants:{fixedHeight:{on:{maxHeight:328},withAction:{maxHeight:288}}}})},optionWrappper:function(e,t){return rY(en({fontSize:null==e?void 0:e.fontSize,position:"relative",top:"100%",left:0,overflow:"overlay",borderRadius:t||null==e?void 0:e.borderRadius,borderTopLeftRadius:t?null==e?void 0:e.borderRadius:void 0,borderTopRightRadius:t?null==e?void 0:e.borderRadius:void 0,background:null==e?void 0:e.background,color:null==e?void 0:e.color,boxShadow:null==e?void 0:e.boxShadow,border:null==e?void 0:e.border,variants:{fixedHeight:{on:{maxHeight:328},withAction:{maxHeight:288}}}},uY))},option:function(e){return rY({position:"relative",width:"100%",cursor:"pointer",borderBottom:null==e?void 0:e.separatorBorder,"&:hover":null==e?void 0:e["&:hover"]})},button:function(e){return rY({position:"relative",width:"100%",borderLeftWidth:2,borderColor:"transparent",padding:null==e?void 0:e.padding,display:"grid",gap:8,textAlign:"left",boxSizing:"border-box",variants:{selected:{on:en({fontWeight:500,gridTemplateColumns:"1fr 24px"},null==e?void 0:e.selected),off:{gridTemplateColumns:"1fr"}}}})},selectedIcon:rY({height:"1.25rem",width:"1.25rem"}),layout:uG,subtext:rY({color:"inherit",opacity:.6,fontWeight:400}),action:function(e){return rY({fontSize:null==e?void 0:e.fontSize,color:rG(15),position:"relative",bottom:0,width:"100%",textAlign:"left",background:rG(90),padding:"0.65rem 0.5rem",borderBottomLeftRadius:null==e?void 0:e.borderRadius,borderBottomRightRadius:null==e?void 0:e.borderRadius,boxShadow:null==e?void 0:e.boxShadow,border:null==e?void 0:e.border,"&:hover":{background:rG(95)},marginBottom:"0.5rem"})}}),uK={name:"14n397",styles:"position:relative;width:100%;cursor:pointer;border-bottom-width:1px;--tw-border-opacity:1;border-color:rgb(243 244 246 / var(--tw-border-opacity));padding-top:0.5rem;padding-bottom:0.5rem;text-align:center;--tw-text-opacity:1;color:rgb(107 114 128 / var(--tw-text-opacity))"},uX=function(e){var t,n,i,r,o;return rY({width:null!=(t=null==e?void 0:e.width)?t:"100%",maxWidth:null==e?void 0:e.maxWidth,minWidth:null==e?void 0:e.minWidth,height:null==e?void 0:e.height,display:"flex",alignItems:null==e?void 0:e.alignItems,gridRow:null==e?void 0:e.gridRow,gridColumn:null==e?void 0:e.gridColumn,padding:null==e?void 0:e.padding,paddingTop:null!=(n=null==e?void 0:e.paddingTop)?n:null==e?void 0:e.paddingY,paddingLeft:null!=(i=null==e?void 0:e.paddingLeft)?i:null==e?void 0:e.paddingX,paddingRight:null!=(r=null==e?void 0:e.paddingRight)?r:null==e?void 0:e.paddingX,paddingBottom:null!=(o=null==e?void 0:e.paddingBottom)?o:null==e?void 0:e.paddingY,margin:null==e?void 0:e.margin,gap:null==e?void 0:e.gap,rowGap:null==e?void 0:e.rowGap,columnGap:null==e?void 0:e.columnGap,flexWrap:null!=e&&e.wrap?"wrap":void 0,flex:null==e?void 0:e.flex,flexDirection:null==e?void 0:e.direction,justifyContent:null==e?void 0:e.justifyContent,cursor:null==e?void 0:e.cursor,overflow:null==e?void 0:e.overflow,border:null==e?void 0:e.border,minHeight:null==e?void 0:e.minHeight,position:null==e?void 0:e.position,flexGrow:null==e?void 0:e.grow,maxHeight:null==e?void 0:e.maxHeight,alignContent:null==e?void 0:e.alignContent,placeContent:null==e?void 0:e.placeContent,placeItems:null==e?void 0:e.placeItems,justifyItems:null==e?void 0:e.justifyItems,alignSelf:null==e?void 0:e.alignSelf,gridArea:null==e?void 0:e.gridArea})},uQ=function(e){var t,n,i,r,o,a,l,s,u=null!=(t=null==(n=e)?void 0:n.as)?t:"div";return"fieldset"===e.as&&(e=en({padding:0,border:0,margin:0},e)),h.jsx(u,{className:lr(""+uX(e),null==(i=e)?void 0:i.className),"data-component":null!=(r=null==(o=e)?void 0:o["data-component"])?r:"Flex",role:null==(a=e)?void 0:a.role,"aria-labelledby":null==(l=e)?void 0:l["aria-labelledby"],children:null==(s=e)?void 0:s.children})},uJ=rY({position:"relative",display:"flex",flex:1,flexDirection:"row"}),uZ=rY({width:16,zIndex:999,top:0,bottom:0,left:-3,position:"absolute",alignSelf:"flex-start",cursor:"pointer"}),u$=Object.assign(function(){return null},{itemWrapper:uJ,item:function(e){var t;return rY({width:"100%",borderRadius:null==e?void 0:e.borderRadius,background:null==e?void 0:e.background,boxShadow:null==e?void 0:e.boxShadow,color:null==e?void 0:e.color,fontSize:null==e?void 0:e.fontSize,boxSizing:"border-box",variants:{highlight:{on:{border:null==e?void 0:e.border,borderColor:"#3074d9"},off:{border:null==e?void 0:e.border}},componentPadding:((t={}).true={padding:"0.5rem"},t),clickable:{on:{cursor:"pointer"}}}})},label:function(e){var t;return rY(en({},oo.text,{fontSize:null!=(t=null==e?void 0:e.fontSize)?t:"0.875rem",lineHeight:"inherit",letterSpacing:"-0.05em"}))},metadata:function(e){var t;return rY(en({},oo.text,{fontSize:null!=(t=null==e?void 0:e.fontSize)?t:"0.875rem",lineHeight:"inherit",letterSpacing:"-0.05em",color:"inherit",opacity:.6}))},right:rY({display:"flex",placeContent:"center"}),edit:rY({marginRight:"0.75rem",display:"grid",placeContent:"center",color:"inherit",opacity:.5}),deleteWrapper:function(e){var t,n;return rY({position:"absolute",top:"-0.75rem",right:"-0.55rem",height:21.5,width:21.5,background:null==e||null==(t=e.icon)?void 0:t.background,border:null==e||null==(n=e.icon)?void 0:n.border,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"})},deleteButton:function(e){var t,n;return rY(en({},oo.button,{height:16,color:null==e||null==(t=e.icon)?void 0:t.color,"&:hover":{color:lc(null==e||null==(n=e.icon)?void 0:n.color,1.5)}}))},iconSize:rY({height:"1rem",width:"1rem"}),addWrapper:rY(en({position:"relative",width:"100%"},rW)),title:function(e){return rY(en({padding:0},rW,e))},titleContainer:function(){return rY({variants:{hasBorder:{true:{borderBottom:"2px solid #e5e7eb"}}}})},dragHandleContainer:uZ}),u0=Object.assign(function(){return null},{item:rY({opacity:.5}),string:rY({fontSize:"0.55rem",transform:"scaleX(1.2)",marginLeft:1}),bool:rY({fontSize:"0.65rem",fontWeight:"bold"}),icon:function(e,t){if("stopColor"!==t)return rY("stroke"===t?{"& > *":{stroke:null!=e?e:rG(5)}}:{"& > *":{fill:null!=e?e:rG(5)}})}}),u1=function(e){return h.jsxs(o.Fragment,{children:["number"===(null==e?void 0:e.icon)&&h.jsx(C.HashtagIcon,{width:"75%","aria-label":"Number"}),"date_time"===(null==e?void 0:e.icon)&&h.jsx(C.CalendarIcon,{width:"75%","aria-label":"Date"}),"string"===(null==e?void 0:e.icon)&&h.jsx(uM,{as:"div",className:""+or.codeText,"data-component":"DataTypeIcon-string",children:h.jsxs(la,{columns:["1fr","1fr"],className:""+or.codeText,children:[h.jsx("span",{className:""+or.bold,"aria-label":"String",children:"A"}),h.jsx("span",{className:lr(""+u0.string({}),""+or.bold),children:"A"})]})}),"string[]"===(null==e?void 0:e.icon)&&h.jsx(uM,{as:"div",className:""+or.codeText,"data-component":"DataTypeIcon-string[]",children:h.jsxs(la,{columns:["1fr","1fr"],children:[h.jsx("span",{className:""+or.bold,"aria-label":"String",children:"A"}),h.jsx("span",{className:lr(""+u0.string({}),""+or.bold),children:"[]"})]})}),"boolean"===(null==e?void 0:e.icon)&&h.jsx(uM,{as:"div",className:lr(""+u0.bool({}),""+u2),"data-component":"DataTypeIcon-boolean",children:h.jsxs(la,{columns:["1fr","1fr","1fr"],height:"20px",children:[h.jsx(uM,{alignSelf:"start",children:"T"}),h.jsx(uM,{alignSelf:"center",marginLeft:-.5,children:"/"}),h.jsx(uM,{alignSelf:"end",children:"F"})]})})]})},u2=rY({fontSize:11,lineHeight:1.3,fontFamily:oo.codeFontFamily}),u5=function(e){var t=function(t){var n=rH(e)(t);return g.css(n,"","")};return t.toString=t,""+t},u7=function(e){var t,n,i;return h.jsx(uM,{width:24,paddingTop:null!=(t=null==e?void 0:e.paddingTop)?t:"0.2rem",alignSelf:null==e?void 0:e.alignSelf,"data-component":"item-icon",marginLeft:-2,children:h.jsxs(uQ,{justifyContent:"center",alignItems:"center",className:""+u0.item,paddingTop:null!=(n=null==e?void 0:e.flexPaddingTop)?n:"0.10rem",children:[(i=null==e?void 0:e.icon,a.isValidElement(i)&&h.jsx(u4,{icon:null==e?void 0:e.icon,width:null==e?void 0:e.iconWidth,iconColorMap:e.iconColorMap})),h.jsx(u1,{icon:null==e?void 0:e.icon})]})})},u4=function(e){var t,n,i,r=o.useRef(null),a=lu();return o.useEffect(function(){if("stopColor"===e.iconColorMap&&r.current){var t=r.current.querySelector("svg");t&&t.querySelectorAll("stop").forEach(function(e){var t;e.setAttribute("stop-color",null==a||null==(t=a.charts)?void 0:t.iconColor)})}},[e.iconColorMap,null==a||null==(t=a.charts)?void 0:t.iconColor]),h.jsx("div",{ref:r,"data-themeapi":"charts.iconColor",className:lr(""+u0.icon(null==a||null==(n=a.charts)?void 0:n.iconColor,e.iconColorMap),u5({width:null!=(i=null==e?void 0:e.width)?i:"75%"})),children:null==e?void 0:e.icon})},u3={name:"1gp9wld",styles:"height:1.25rem;width:1.25rem"},u6=Object.assign(function(e){var t,n,i=lu();return h.jsx(o.Fragment,{children:(null==e?void 0:e.open)&&h.jsx("div",{className:""+uU.dropdown(null==e?void 0:e.width,null==e?void 0:e.minWidth)({fixedHeight:e.onFreeTextSelected?"withAction":(null==e?void 0:e.fixedHeight)&&"on"}),"data-component":"dropdown","data-themeapi":"dropdown",children:h.jsxs(uM,{position:"relative",children:[h.jsx("div",{className:""+uU.optionWrappper(null==i?void 0:i.dropdowns,!!e.onFreeTextSelected)({fixedHeight:e.onFreeTextSelected?"withAction":(null==e?void 0:e.fixedHeight)&&"on"}),"data-component":"dropdown","data-themeapi":"dropdown",children:h.jsx(uM,{role:"list","data-component":"dropdown-options",maxHeight:e.onFreeTextSelected?360:400,children:null==e?void 0:e.children})}),e.onFreeTextSelected&&h.jsx("button",{onClick:function(){return e.onFreeTextSelected&&e.onFreeTextSelected()},className:or.button+" "+uU.action(null==i?void 0:i.dropdowns),children:e.textOverride?e.textOverride("dropdown.free_text","Enter Custom Value..."):null!=(t=null==(n=e.freeTextOptions)?void 0:n.label)?t:"Enter Custom Value..."})]})})})},{Option:function(e){var t=e.label,n=lu();return h.jsx("div",{className:""+uU.option(null==n?void 0:n.dropdowns),role:"listitem","aria-selected":null==e?void 0:e.selected,"data-themeapi":"dropdown",children:h.jsxs("div",{tabIndex:-1,onClick:function(t){return e.onChange(t)},onKeyUp:function(){return e.onChange()},role:"button",className:""+uU.button(null==n?void 0:n.dropdowns)({selected:null!=e&&e.selected?"on":"off"}),"data-testid":null==e?void 0:e.testId,children:[null!=e&&e.render?e.render(e):h.jsx(o.Fragment,{children:null!=e&&e.subtext||null!=e&&e.icon?h.jsxs(uQ,{direction:"row",gap:"0.5rem",children:[(null==e?void 0:e.icon)&&h.jsx(u7,{icon:null==e?void 0:e.icon,paddingTop:"0"}),h.jsxs(uM,{flexGrow:1,paddingTop:"0.1rem",children:[h.jsx(uM,{children:s.isFunction(t)?t():t}),(null==e?void 0:e.subtext)&&h.jsx(uM,{className:""+uU.subtext,children:null==e?void 0:e.subtext})]})]}):h.jsx("span",{children:s.isFunction(t)?t():t})}),(null==e?void 0:e.selected)&&h.jsx(uQ,{alignItems:"center",justifyContent:"center",alignSelf:"start",paddingTop:"0.25rem",children:h.jsx("div",{className:""+uU.selectedIcon,children:h.jsx(w.CheckIcon,{css:u3,"aria-hidden":"true"})})})]})})},Empty:function(e){return h.jsx("div",{css:uK,children:e.label})},Title:function(e){var t,n=e.label,i=lu();return h.jsx("div",{className:""+rY({padding:null==(t=null==i?void 0:i.dropdowns)?void 0:t.padding,paddingTop:0,paddingBottom:0,fontSize:"0.75rem",variants:{index:{true:{borderTop:"1px solid #dbdcdf",marginTop:"0.25rem"}}}})({index:0!==e.index}),role:"listitem","data-component":"dropdown-title",children:h.jsx("p",{className:""+rY({marginBottom:0,fontSize:"0.75rem",lineHeight:"1rem",fontWeight:500,textTransform:"uppercase",letterSpacing:"0.05em"}),children:s.isFunction(n)?n():n})})}}),u8=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return"v "+t.flatMap(function(e){return e?["vizzly_"+e]:[]}).join(" ")},u9=function(e,t,n){var i=[].concat(n).flatMap(function(e){if(s.isFunction(e)){var n=e();if(n)return[u8(n)]}return s.isString(e)&&t[e]?[u8(e)]:[]}).join(" ");return u8(e)+" "+i},de=g.keyframes({name:"19mmmx",styles:"0%,15%{transform:translate(0, 0);}50%{transform:translate(0, -5px);opacity:0.7;}85%,100%{transform:translate(0, 0);}"}),dt=function(e){var t;return h.jsx("div",{"data-testid":"loading-component-ball",css:[m.css("height:7px;width:7px;border-radius:50%;background:",null!=(t=e.color)?t:"white",";float:left;margin:0 3px;&:nth-of-type(1){z-index:1;-moz-animation:",de," 2s infinite ease-in-out;-webkit-animation:",de," 2s infinite ease-in-out;}&:nth-of-type(2){-moz-animation:",de," 2s infinite ease-in-out;-webkit-animation:",de," 2s infinite ease-in-out;-webkit-animation-delay:0.25s;animation-delay:0.25s;}&:nth-of-type(3){-moz-animation:",de," 2s infinite ease-in-out;-webkit-animation:",de," 2s infinite ease-in-out;-webkit-animation-delay:0.5s;animation-delay:0.5s;}",""),"",""]})},dn=aP(function(e){var t=e.color,n=e.mAuto;return h.jsxs("div",{className:u8("loading"),css:["margin-top:-0.5rem;margin-bottom:-0.5rem;",n&&{margin:"auto"},"",""],children:[h.jsx(dt,{color:t}),h.jsx(dt,{color:t}),h.jsx(dt,{color:t})]})},"renderLoadingComponent"),di={name:"45oqhd",styles:"display:grid;align-content:center;text-align:center"},dr=function(e){var t;return h.jsx("div",{css:di,style:{width:"100%",height:"100%",minHeight:null!=(t=null==e?void 0:e.minHeight)?t:"200px"},"data-testid":"loading-component",children:e.override?e.override({}):h.jsx(dn,{mAuto:!0,color:"#e5e5e5"})})},da={name:"45oqhd",styles:"display:grid;align-content:center;text-align:center"},dl=function(e){return h.jsx("div",{css:da,style:{width:"100%",height:"100%"},children:h.jsx(dn,{mAuto:!0,color:e.color})})},ds=function(e){var t;return h.jsx("button",{"data-testid":null==e?void 0:e.testId,onClick:function(t){t.stopPropagation(),null==e||e.onClear()},onKeyUp:function(t){t.stopPropagation(),null==e||e.onClear()},className:lr(null==e?void 0:e.className,""+or.button),"aria-label":null!=(t=null==e?void 0:e["aria-label"])?t:null!=e&&e.textOverride?null==e?void 0:e.textOverride("clear","Clear"):"Clear",children:h.jsx("div",{children:h.jsx("svg",{fill:null==e?void 0:e.fill,height:8,width:10,stroke:null==e?void 0:e.stroke,focusable:"false",viewBox:"0 0 12 12",className:""+oa,children:h.jsx("path",{fillRule:"evenodd",d:"M11.53.47a.75.75 0 0 0-1.061 0l-4.47 4.47L1.529.47A.75.75 0 1 0 .468 1.531l4.47 4.47-4.47 4.47a.75.75 0 1 0 1.061 1.061l4.47-4.47 4.47 4.47a.75.75 0 1 0 1.061-1.061l-4.47-4.47 4.47-4.47a.75.75 0 0 0 0-1.061z"})})})})},du={height:"1.5rem",width:"1.5rem",cursor:"pointer",paddingTop:1,outline:"2px solid transparent",outlineOffset:2},dd=Object.assign(function(e){return rY({width:"100%",minWidth:null!=e?e:void 0})},{inputComponent:function(e,t){var n,i;return rY(en({display:"flex",outline:"2px solid transparent",outlineOffset:2,textAlign:"left",lineHeight:1.25,borderRadius:null==e?void 0:e.borderRadius,background:null==e?void 0:e.background,color:null==e?void 0:e.color,fontWeight:null==e?void 0:e.fontWeight,fontSize:null==e?void 0:e.fontSize,boxShadow:null==e?void 0:e.boxShadow},t?en({},null==e?void 0:e["&:focus"]):((n={})["&:hover"]=null==e?void 0:e["&:hover"],n),{variants:{highlighted:{on:{outline:"2px solid transparent",outlineOffset:2}},subtle:{off:{border:t?null==e||null==(i=e["&:focus"])?void 0:i.border:null==e?void 0:e.border},on:{border:null==e?void 0:e.border,borderColor:"transparent",background:"transparent"}}}}))},clickableArea:function(e){return rY({width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",padding:null==e?void 0:e.padding,paddingRight:0,gridArea:"1 / 1 / 2 / 3",variants:{rightAligned:{on:{textAlign:"right"},off:{}}}})},multiple:function(e,t){return rY({display:"inline-grid",gridArea:"1 / 1 / 2 / 3",padding:null==e?void 0:e.padding,paddingLeft:0,paddingRight:0,width:null!=t?t:void 0,variants:{rightAligned:{on:{textAlign:"right"},off:{}}}})},input:rY({height:"100%",width:"100%",appearance:"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",background:"transparent",padding:"0 0.5rem",color:"inherit",outline:"2px solid transparent",border:0,"&:disabled":{border:"none"},variants:{rightAligned:{on:{textAlign:"right"},off:{}}}}),loading:rY({paddingLeft:"0.25rem",paddingRight:0,width:100,alignSelf:"center"}),clearContainer:rY({display:"flex",width:32,alignItems:"center",paddingLeft:"0.5rem",paddingRight:"0.25rem"}),clearButton:function(e){return rY(en({},du,{color:null==e?void 0:e.indicatorColor}))},controlGrid:rY({paddingBottom:1}),arrowContainer:function(e){return rY({display:"flex",width:32,alignItems:"center",justifyContent:"center",padding:0,margin:0,color:"rgb(209 213 219)",variants:{subtle:{off:{borderLeft:null==e?void 0:e.border}}}})}}),dc=rY({variants:{open:{up:{},off:{transform:"rotate(180deg)"},side:{transform:"rotate(90deg)"}}}}),dp=function(e){var t;return h.jsx("button",{onClick:function(t){t.stopPropagation(),t.preventDefault(),null==e||e.onClick()},"aria-label":e.label,className:""+(t=null==e?void 0:e.styled,rY(en({},oo.button,{height:"1.5rem",cursor:"pointer",color:null==t?void 0:t.indicatorColor,outline:"2px solid transparent",outlineOffset:2,"&:disabled":{border:"none"}}))),children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:lr(""+dc({open:null==e||!e.expanded||null!=e&&e.disabled?null==e?void 0:e.arrowStart:"off"}),""+oa),children:h.jsx("polyline",{points:"18 15 12 9 6 15"})})})},df=function(e){var t,n,i,r,a,l,u,d,c,p=e.disabled,f=e.placeholder,m=e.onClear,v=e.isLoading,g=o.useRef(null),b=function(){null==e||e.setOpen(!0),null!==g.current&&g.current.focus()},x=s.isString(null==e?void 0:e.selectedValue)?null==e?void 0:e.selectedValue:void 0;o.useEffect(function(){null!=e&&e.open&&null!==g.current&&!v&&g.current.focus()},[null==e?void 0:e.open]);var y=lu(),w=null!=e&&e.open?null!=e&&e.textOverride?null==e?void 0:e.textOverride("close","Close"):"Close":null!=e&&e.textOverride?null==e?void 0:e.textOverride("open","Open"):"Open";return h.jsx("div",{className:""+dd(e.fixedWidth),"data-component":"control","aria-labelledby":null!=e&&e.multiple?null==e?void 0:e.id:void 0,onClick:function(){return(null==e?void 0:e.onClick)&&(null==e?void 0:e.onClick())},children:h.jsxs("div",{className:lr(e.classNameInputComponent,""+dd.inputComponent(null==y||null==(t=y.forms)?void 0:t.select,null==e?void 0:e.open)({highlighted:null!=e&&e.highlighted?"on":"off",subtle:null!=e&&e.subtle?"on":"off"})),"data-themeapi":"forms.select",children:[h.jsxs(uQ,{flex:"1 1 auto",wrap:!0,"data-component":"control-flex",alignItems:null!=e&&e.multiple?"flex-start":void 0,rowGap:null!=e&&e.multiple?"0.25rem":void 0,minHeight:null!=e&&e.multiple?33:void 0,direction:null!=e&&e.multiple?"row":void 0,children:[(null==e?void 0:e.multiple)&&h.jsx(o.Fragment,{children:null==e?void 0:e.children}),!(null!=e&&e.multiple)&&h.jsx(uM,{flex:1,"data-component":"control-view",children:h.jsxs(la,{"data-component":"control-grid",className:lr(""+dd.controlGrid),minWidth:e.fixedWidth,children:[h.jsx(o.Fragment,{children:null!=e&&e.open?h.jsx(o.Fragment,{children:0===e.value.length&&x&&h.jsx("div",{className:lr(dd.clickableArea(null==y||null==(i=y.forms)?void 0:i.select)({small:null!=e&&e.sm?"on":"off",rightAligned:null!=e&&e.rightAligned?"on":"off"}),e.classNameInputControlGrid),"aria-labelledby":null==e?void 0:e["aria-labelledby"],children:x})}):h.jsx("div",{onClick:function(){return b()},onKeyUp:function(){return b()},"data-testid":e.testId,className:lr(""+dd.clickableArea(null==y||null==(n=y.forms)?void 0:n.select),null==e?void 0:e.className),"aria-labelledby":null==e?void 0:e["aria-labelledby"],children:null==e?void 0:e.children})}),!(null!=e&&e.multiple)&&(null==e?void 0:e.open)&&h.jsx("div",{className:lr(dd.multiple(null==y||null==(r=y.forms)?void 0:r.select,e.fixedWidth)({small:null!=e&&e.sm?"on":"off"}),e.classNameInputControl),"data-component":"control-multiple",children:h.jsx("input",{style:{minWidth:f?9*(null==f?void 0:f.length)+"px":void 0},id:null==e?void 0:e.id,value:null==e?void 0:e.value,onChange:function(t){return null==e?void 0:e.onChange(t.target.value)},onClick:function(){return(null==e?void 0:e.multiple)&&(null==e?void 0:e.setOpen(!(null!=e&&e.open)))},"aria-labelledby":null==e?void 0:e["aria-labelledby"],placeholder:null==e?void 0:e.placeholder,disabled:p,ref:g,className:dd.input({rightAligned:null!=e&&e.rightAligned?"on":"off"}),autoComplete:"off"})})]})})]}),v&&h.jsx("div",{className:""+dd.loading,children:h.jsx(dl,{color:"#3074d9"})}),m&&(null==e?void 0:e.clearable)&&h.jsx("div",{className:""+dd.clearContainer,children:h.jsx(ds,{onClear:function(){return m&&m()},className:""+dd.clearButton(null==y||null==(a=y.forms)?void 0:a.select),fill:null==y||null==(l=y.forms)||null==(l=l.select)?void 0:l.indicatorColor,stroke:null==y||null==(u=y.forms)||null==(u=u.select)?void 0:u.indicatorColor,testId:e.testId?e.testId+"-clear":void 0,textOverride:e.textOverride})}),h.jsx("div",{className:dd.arrowContainer(null==y||null==(d=y.forms)?void 0:d.select)({subtle:null!=e&&e.subtle?"on":"off"}),children:h.jsx(dp,{label:w,arrowStart:"up",disabled:p,onClick:function(){return null==e?void 0:e.setOpen(!(null!=e&&e.open))},styled:null==y||null==(c=y.forms)?void 0:c.select,expanded:null==e?void 0:e.open})})]})})},dm=Object.assign(rY({display:"flex",position:"relative",alignItems:"start",flexDirection:"column",variants:{dynamicWidth:{true:{width:"100%"}}}})),dh=function(e){var t=o.useState(!1),n=t[0],i=t[1];return o.useEffect(function(){var t;return e?t=setTimeout(function(){return i(!0)},500):i(!1),function(){t&&clearTimeout(t)}},[e]),n},dv=aL(function(e){var t,n,i,r,l,u,d=e.selected,c=e.options,p=e.setSelectOptionsAreOpen,f=e.isLoading,m=e.selectOptionsAreOpen,v=e.onClickWithDevToolCheck,g=e.activeDevToolHighlight,b=e.textOverride,x=e.formatLabel,y=a_().featureToggles,w=null===e.selected?null:c[e.selected],C="boolean"==typeof(null==w?void 0:w.label)?eM(null==w?void 0:w.label,function(){return""}):w?w.label:e.placeholder||(b?b("select_empty","Select..."):"Select..."),j=(r=s.isFunction(C)?C():C,x?x(r):r),S=a.useRef(null);ls(S,function(){return p(!1)});var F,k=Object.keys(c[0]||{}),T=uH(c,k,x),_=T.values,I=T.setSearch,A=T.searchString,D=function(t){t!=d&&e.onChange(null===t?null:t),p(!1)},O=dh(e.isLoading),E=(F=null!=e&&e.selectOptionsAreOpen?A:s.isFunction(C)?C():C,x?x(F):F),L=(u=null==(l=_.find(function(e){return e.refIndex===d}))?void 0:l.item.label,s.isString(u)&&x?x(u):u);return h.jsxs("div",en({className:""+dm({dynamicWidth:null!=(t=null==e?void 0:e.dynamicWidth)?t:y.forceMobile}),ref:S,"data-component":null==e?void 0:e["data-component"]},((n={})["data-componentoverride"]="renderSelectComponent",n),{children:[h.jsx(df,{onClick:null==e?void 0:e.onClick,value:E,onChange:function(e){return I(e)},open:m,setOpen:v(function(){p(!m),I("")}),onClear:function(){w&&e.canBeCleared&&D(null),w&&e.canBeCleared&&I("")},clearable:!(!w||!e.canBeCleared),subtle:null==e?void 0:e.subtle,selectedValue:L,highlighted:g,rightAligned:null==e?void 0:e.rightAligned,testId:null==e?void 0:e.testId,classNameInputComponent:null==e?void 0:e.classNameInputComponent,classNameInputControl:e.classNameInputControl,classNameInputControlGrid:e.classNameInputControlGrid,id:null==e?void 0:e.id,"aria-labelledby":null==e?void 0:e["aria-labelledby"],className:null==e?void 0:e.controlClassName,textOverride:e.textOverride,fixedWidth:e.fixedWidth,children:null!=e&&e.renderSelected?null==e?void 0:e.renderSelected(w):h.jsxs(o.Fragment,{children:[w&&e.selectedLabelPrefix,j]})}),h.jsxs(u6,{open:m,fixedHeight:!0,width:e.dropdownForFilter?void 0:"calc(100% - 2px)",minWidth:e.dropdownForFilter?158:void 0,onFreeTextSelected:e.onFreeTextSelected,textOverride:e.textOverride,children:[f&&h.jsx(uM,{height:80,children:O&&h.jsx(dl,{color:"#3074d9"})}),!f&&_.map(function(t,n){var i,r=(i=s.isFunction(t.item.label)?t.item.label():t.item.label,x?x(i):t.item.label);return t.item.title?h.jsx(u6.Title,{label:t.item.label,index:n},"option_"+t.refIndex+"_"+t.item.label):h.jsx(u6.Option,en({onChange:function(){return D(t.refIndex)},label:r,subtext:t.item.subText,selected:t.refIndex==d,testId:t.item.testId?""+t.item.testId:null!=e&&e.testId?(null==e?void 0:e.testId)+"-"+n:void 0,icon:t.item.icon},e.renderOption&&{render:function(){return e.renderOption&&e.renderOption(t.item)}}),"option_"+t.refIndex+"_"+t.item.label)}),!f&&!O&&0===_.length&&h.jsx(uM,{padding:8,width:200,children:null!=(i=e.noOptionsMessage)?i:e.textOverride?e.textOverride("no_options","No Options"):"No Options"})]})]}))},"renderSelectComponent",function(e){var t,n;return en({},e,{setSelectOptionsAreOpen:(t=e.setSelectOptionsAreOpen,n=[p.boolean()],function(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];return n.forEach(function(e,t){var n=e.validate(i[t],uW);if(n.error)throw n.error;i[t]=n.value}),t.apply(void 0,i)})})}),dg=function(e,t,n,i){return rY(en({},e,{margin:null!=n?n:null==e?void 0:e.margin,fontWeight:null!=i?i:null==e?void 0:e.fontWeight,display:t?"none":"block",padding:0,position:"relative",width:"100%"}))},db=rY({color:"#7D7D7E"}),dx=function(e){var t,n,i=null!=(t=null==e?void 0:e.as)?t:"label",r=lu(),o={className:""+(e.classNameOverride?e.classNameOverride:dg(null==r||null==(n=r.forms)?void 0:n.label,null==e?void 0:e.labelHidden,null==e?void 0:e.margin,null==e?void 0:e.fontWeight)),"data-themeapi":"forms.label","data-chipposition":"above.right",htmlFor:null==e?void 0:e.htmlFor,id:null==e?void 0:e.id};return e.tooltip?h.jsxs(uQ,{gap:"0.25rem",children:[h.jsx(i,en({},o,{children:null==e?void 0:e.children})),h.jsx(uM,{width:18,children:(null==e?void 0:e.tooltip.href)&&h.jsxs("a",{href:null==e?void 0:e.tooltip.href,target:"_blank",rel:"noopener noreferrer",children:[h.jsx("span",{className:""+or.srOnly,children:null==e?void 0:e.tooltip.label}),h.jsx(w.QuestionMarkCircleIcon,{className:lr("help-icon",""+db)})]})})]}):h.jsx(i,en({},o,{children:null==e?void 0:e.children}))},dy=function(e,t){return rY(en({},e,{boxSizing:"border-box"},t?{outline:"2px solid rgb(239, 68, 68)",outlineOffset:-2}:{outline:"2px solid transparent",outlineOffset:-2},{position:"relative"}))},dw=["labelHidden","onClear","textOverride"],dC=["labelHidden","onClear","textOverride"],dj=["sm","error"],dS=a.forwardRef(function(e,t){var n,i,r,a,l,s,u,d=lu();return el(e,dw),h.jsxs(o.Fragment,{children:[(null==e?void 0:e.label)&&h.jsx(dx,{htmlFor:null==e?void 0:e.id,labelHidden:null==e?void 0:e.labelHidden,children:null==e?void 0:e.label}),!e.onClear&&h.jsx(dk,en({ref:t},e,{className:lr(""+dy(null!=(n=null==e?void 0:e.inputTheme)?n:null==d||null==(i=d.forms)?void 0:i.input,null==e?void 0:e.error),e.className)})),e.onClear&&h.jsxs(uQ,{alignItems:"center",position:"relative","data-component":"input",children:[h.jsx(dk,en({ref:t},e,{className:lr(""+dy(null!=(r=null==e?void 0:e.inputTheme)?r:null==d||null==(a=d.forms)?void 0:a.input,null==e?void 0:e.error),e.className)})),h.jsx(ds,{onClear:function(){return e.onClear&&e.onClear()},className:dd.clearButton(null==d||null==(l=d.forms)?void 0:l.select)+" "+dT,fill:null==d||null==(s=d.forms)||null==(s=s.select)?void 0:s.indicatorColor,stroke:null==d||null==(u=d.forms)||null==(u=u.select)?void 0:u.indicatorColor})]})]})}),dF={name:"15jydtm",styles:"width:100%;appearance:none;text-align:left;line-height:1.25;transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms"},dk=a.forwardRef(function(e,t){var n=el(e,dC);return h.jsx("input",en({css:dF,id:null==e?void 0:e.id,ref:t},n,{className:lr(u9("input",e,dj),e.className),"data-themeapi":"forms.input","data-chipposition":"above.right",disabled:null==e?void 0:e.disabled}))}),dT=rY({position:"absolute",right:6,display:"flex",alignItems:"center",justifyCntent:"center"}),d_=function(e){var t,n=s.isFunction(e.options)&&e.selected?[{value:e.selected,label:e.selected}]:[],i=o.useState(s.isArray(e.options)?{loading:!1,options:e.options}:{loading:!1,options:n}),r=i[0],a=i[1],l=r.options,u=o.useState(void 0!==e.defaultOpen&&e.defaultOpen),d=u[0],c=u[1];o.useEffect(function(){var t,n=new AbortController;d&&(t=et($().mark(function t(){var i;return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!s.isFunction(e.options)){t.next=6;break}return a({loading:!0,options:[]}),t.next=4,e.options(n.signal);case 4:(i=t.sent)?a({loading:!1,options:i}):eR("[Vizzly] Failed to fetch async options for select.");case 6:return t.abrupt("return",function(){n.abort("Select unmounted")});case 7:case"end":return t.stop()}},t)})),function(){return t.apply(this,arguments)})()},[d]);var p=o.useState(!1),f=p[0],m=p[1];o.useEffect(function(){!r.loading&&e.hasFreeText&&Array.isArray(l)&&e.selected&&m(!l.some(function(t){return t.value===e.selected}))},[r.loading,e.hasFreeText,l,e.selected]),o.useEffect(function(){s.isArray(e.options)&&a({loading:!1,options:e.options})},[e.options]);var v=l.findIndex(function(t){return s.isArray(t.value)||s.isObject(t.value)?JSON.stringify(t.value)==JSON.stringify(e.selected):t.value==e.selected});return h.jsxs(o.Fragment,{children:[(null==e?void 0:e.label)&&h.jsx(dx,{labelHidden:null==e?void 0:e.labelHidden,id:f||null==e?void 0:e.id,htmlFor:f?e.id:void 0,tooltip:null==e?void 0:e.tooltip,children:null==e?void 0:e.label}),!f&&h.jsx(dv,{"data-component":null==e?void 0:e["data-component"],testId:e.testId,dynamicWidth:e.dynamicWidth,onChange:function(t){null===t?e.onChange(null,null):e.onChange(r.options[t].value,t)},onClick:e.onClick,classNameInputControl:e.classNameInputControl,classNameInputComponent:e.classNameInputComponent,classNameInputControlGrid:e.classNameInputControlGrid,controlClassName:null==e?void 0:e.controlClassName,setSelectOptionsAreOpen:c,options:r.options,isLoading:null!=(t=null==e?void 0:e.loading)?t:r.loading,subtle:e.subtle,selected:-1===v?null:v,selectOptionsAreOpen:d,anchorOptionsLeft:e.anchorLeft,error:e.error,canBeCleared:e.showClearBtn,selectedLabelPrefix:e.selectedPrefix,placeholder:e.placeholder,rightAligned:null==e?void 0:e.rightAligned,id:null==e?void 0:e.id,"aria-labelledby":null==e?void 0:e.id,renderSelected:null==e?void 0:e.renderSelected,renderOption:null==e?void 0:e.renderOption,noOptionsMessage:e.noOptionsMessage,textOverride:e.textOverride,fixedWidth:e.fixedWidth,dropdownForFilter:e.dropdownForFilter,onFreeTextSelected:e.hasFreeText?function(){m(!0),e.onChange("",null)}:void 0,formatLabel:e.formatLabel}),f&&h.jsx(dS,{type:"string",onChange:function(t){e.onChange(t.target.value,null)},id:null==e?void 0:e.id,autoFocus:!0,onClear:function(){var t;m(!1),e.onChange(null==r||null==(t=r.options[0])?void 0:t.value,null)},value:e.selected,textOverride:e.textOverride})]})},dI=function(e){return h.jsx("div",{"data-component":"select-input",children:null==e?void 0:e.children})},dA=function(e){var t=e.placeholder,n=e.showClearBtn;return h.jsx(d_,{showClearBtn:void 0===n||n,options:e.options,onChange:e.setSelected,selected:e.currentValue,anchorLeft:e.anchorLeft,placeholder:t,selectedPrefix:t+" \xb7 ",maintainOptionOrder:e.maintainOptionOrder,testId:"select",textOverride:e.textOverride,label:t,labelHidden:!0,id:e.id,dropdownForFilter:!0,fixedWidth:e.labelWidth,formatLabel:e.formatLabel})},dD=p.object({displayTitle:p.string().min(1).required(),colSpan:p.number().valid(12).required()}),dO=p.number().min(1).max(12).required().messages({"number.base":'"colSpan" must be a number',"number.min":'"colSpan" must be at least {#limit}',"number.max":'"colSpan" must be less than or equal to {#limit}',"any.required":'"colSpan" is a required field'}),dE=p.object({isEmpty:p.valid(!0).required(),colSpan:dO}),dL=function(e){var t;return p.object({id:p.string(),display:dP(e),componentLibrary:p.array().required().items(p.object({attributes:ah({queryEngineConfig:e})})),globalFilters:p.array().items(p.custom(function(t,n){if(!e)return n.error("any.invalid");var i=tQ(e,!!t.requiresValue).validate(t).error;return i?n.error("any.invalid",{message:i.message}):t})).required(),customFields:p.object().required()})};function dP(e){var t;return p.array().required().items(p.object({height:p.number().required(),components:p.array().required().min(1).items(p.alternatives(dE,p.object({attributes:ah({queryEngineConfig:e}),colSpan:dO}),dD))}))}var dR=function(e,t){var n,i,r=t?{queryEngineConfig:t}:void 0;if("string"==typeof e.definition)throw Error("Dashboard is an encrypted string, use the query engine to fetch the dashboard. Please use the queryEngineConfig prop to pass the query engine configuration.");return{id:e.id,parentDashboardId:e.parent_dashboard_id,isPlayground:!1,permission:e.permission,globalFilters:[].concat(e.definition.globalFilters||[]).map(function(e){return tN(e)}),componentLibrary:[].concat(e.definition.componentLibrary||[]).map(function(e){return ap(en({},e,{colSpan:(null==e?void 0:e.colSpan)||1}),r)}),theme:en({},rS,e.theme),display:(n=e.definition.display).map(function(e){var t,n,i,o,a,l,u,d;return a=(o="components"in e?e:{components:e,height:350}).components.filter(ac).map(function(e){return e&&e.colSpan<=0?en({},e,{colSpan:1}):e}),l=s.sumBy(a,function(e){return null==e?1:0}),u=Math.floor((12-s.sumBy(a,function(e){return null==e?0:e.colSpan}))/l),d=[].concat(a).map(function(e){return null===e?{isEmpty:!0,colSpan:u}:au(e)||an(e)?e:ap(en({},e,{colSpan:e.colSpan}),r)}),{components:ad(d),height:o.height||350}}),webhookId:e.webhook_id||null,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at),metadata:e.metadata||{}}},dN=function(e,t){return e.dataSets.findIndex(function(e){return e.id==t})},dM=function(e,t){return iE(e.dataSets,t)},dz=function(e,t){return dN(e,t)>=0},dq=function(e){var t=en({},e),n={};e.dataSets.forEach(function(e){n[e.id]=iz(e)});var i,r=null===t.parentDashboardId?t.componentLibrary:dJ(t),o=[].concat(e.globalFilters).filter(function(e){return!e.managedByConfiguration}).map(tR);return{isPlayground:e.isPlayground,globalFilters:o,componentLibrary:[].concat(r).map(af),display:(0,e.display).map(function(e){return{components:[].concat(e.components).map(af),height:e.height}}),customFields:n}},dB=function(e,t,n){var i,r;return en({},e,{dataSets:(i=t,r=n,r?[].concat([].concat(i=i.map(iq)).map(function(e){var t=(r[e.id]||[]).map(tn);return en({},e,{fields:[].concat(e.fields,t)})})):i)})},dV=function(e){return en({isPlayground:!1,display:[{components:[ar(8),ar(4)],height:350},{components:[ar(4),ar(4),ar(4)],height:350}],componentLibrary:[],globalFilters:[],customFields:{}},e)},dW=function(e){var t=[];return e.display.forEach(function(e){e.components.forEach(function(e){au(e)||an(e)||(t=[].concat(t,[e.attributes.dataSetId]))})}),s.uniq(t).flatMap(function(t){var n=iE(e.dataSets,t);return n?[n]:[]})},dH=function(e){var t,n,i=dW(e),r=(n=[],e.componentLibrary.forEach(function(e){n=[].concat(n,[e.attributes.dataSetId])}),s.uniq(n).flatMap(function(t){var n=iE(e.dataSets,t);return n?[n]:[]}));return s.uniqBy([].concat(r,i),function(e){return e.id})},dY=function(e,t){return[].concat(t).filter(function(t){return t.parentDashboardId==e})},dG=function(e){return[].concat(e).filter(function(e){return null==e.parentDashboardId})},dU=function(e){if(0==e.length)throw"Cannot get first created dashboard from empty list of dashboards.";return[].concat(e).sort(function(e,t){var n=new Date(e.createdAt),i=new Date(t.createdAt);return n.getTime()-i.getTime()})[0]},dK=function(e){return[].concat(e).sort(function(e,t){var n=new Date(e.updatedAt);return new Date(t.updatedAt).getTime()-n.getTime()})},dX=function(e){return dK(e)[0]||null},dQ=function(e,t){return e.find(function(e){return e.id==t})||null},dJ=function(e){return e.componentLibrary.filter(function(e){return!e.attributes.protectedByOrganisation})};function dZ(e,t,n){var i=t.find(function(e){return e.id===n});return void 0===i?e:en({},i,{id:e.id,createdAt:e.createdAt,updatedAt:new Date})}var d$=function(e,t){var n=new Map;return e.forEach(function(e){var t=e.attributes.viewId;n.set(null!=t?t:"",e)}),t.forEach(function(e){var t=e.attributes.viewId;n.has(null!=t?t:"")||n.set(null!=t?t:"",e)}),Array.from(n.values())},d0=function(e){var t=e.filter(function(e){return e.isProgrammatic});if(0!==t.length){if(t.length>1)throw Error("There should only be one programmatic dashboard");return t[0].id}},d1={__proto__:null,indexOfDataSet:dN,getDataSet:dM,hasDataSet:dz,getComponentsUsingDataSet:function(e,t){return s.flatMap([].concat(e.display),function(e){return s.flatMap(e.components,function(e){return au(e)||an(e)?[]:(null==e?void 0:e.attributes.dataSetId)==t?[e]:[]})})},toSaveableDefinition:dq,setDataSets:dB,newSaveable:dV,takePlaygroundDashboards:function(e){return s.filter([].concat(e),function(e){return e.isPlayground})},takeLiveDashboards:function(e){return s.filter([].concat(e),function(e){return!e.isPlayground})},getDataSetsUsedOnDisplay:dW,getDataSetsUsedOnDashboard:dH,getCopiesOfParentDashboard:dY,getParentDashboards:dG,getFirstCreated:dU,orderByLastUpdated:dK,takeMostRecentlyUpdated:dX,find:dQ,updateLibraryWithProtectedComponents:function(e){var t=new Map(e.map(function(e){return[e.id,e]}));return e.map(function(e){if(null===e.parentDashboardId)return e;var n,i=null==(n=t.get(e.parentDashboardId))?void 0:n.componentLibrary,r=null==i?void 0:i.filter(function(e){return e.attributes.protectedByOrganisation});return r?en({},e,{componentLibrary:[].concat(dJ(e),r)}):e})},resetToParentDashboard:dZ,buildProgrammaticDashboard:function(e,t){var n=[];return e.map(function(e){if(void 0===e.id)throw Error("Dashboard id is undefined");var i,r=dB(e,t,e.customFields||{});n.push({id:r.id,dataSets:r.dataSets,display:null!=(i=r.display)?i:[],globalFilters:[],componentLibrary:r.componentLibrary||[],parentDashboardId:null,metadata:{},theme:{},webhookId:"",isPlayground:!1,createdAt:new Date,updatedAt:new Date,isProgrammatic:!0})}),n},VIZZLY_EDITOR_ID:"vizzly_editor",updateWithProgrammaticDashboard:function(e,t){var n=function(e,t){if(t.length>0&&"vizzly_editor"===t[0].id)return[].concat(e,[en({},t[0],{parentDashboardId:e[0].id,isProgrammatic:!0,permission:e[0].permission})])}(e,t);if(n)return n;var i=new Map(t.map(function(e){return[e.id,e]}));return e.map(function(e){var t=i.get(e.id);if(null!==e.parentDashboardId){var n=i.get(e.parentDashboardId);if((null==n?void 0:n.id)===e.parentDashboardId)return en({},e,{componentLibrary:d$(null==n?void 0:n.componentLibrary,e.componentLibrary)})}return null!=t?t:e})},addUniqueLibraryComponents:d$,checkAndReturnProgrammaticDashboardId:d0,colSpanSchema:dO,saveableDashboardDefinitionSchema:dL,displaySchema:dP,fromRaw:dR,Dashboard:void 0},d2=function(e,t){return null===e?null:s.reduce(t,function(e,t){var n,i,r;return i=t.id,(r=s.cloneDeep(e)).attributes=iA(e.attributes.type).removeField(e.attributes,i),r},e)},d5=[];function d7(e){for(var t,n=[],i=ed(e);!(t=i()).done;){var r=t.value;n.push("dateTimeFilter"===r.type?en({},r,{type:"dateFilter"}):r)}return n}function d4(e,t){var n=en({},e);return"attributes"in n&&("measure"in n.attributes&&t.updatedMeasures&&(n.attributes.measure=t.updatedMeasures),"dimension"in n.attributes&&t.updatedDimension&&(n.attributes.dimension=t.updatedDimension),"timeDimension"in n.attributes&&t.updatedTimeDimension&&(n.attributes.timeDimension=t.updatedTimeDimension)),n}var d3,d6=function(e,t,n,i){var r=[].concat(e.dashboard.componentLibrary);return r[n]=en({},t,{attributes:en({},t.attributes,{protectedByOrganisation:!!i||void 0})}),en({},e,{componentEditor:null,dashboard:en({},e.dashboard,{componentLibrary:r})})},d8=function(e,t,n,i){var r=al(e.dashboard.display,t,n,i);return en({},e,{dashboard:en({},e.dashboard,{display:r})})},d9=function(e,t){var n=t.rowIndex,i=s.cloneDeep(e.dashboard.display);return i.length>1?(i.splice(n,1),en({},e,{dashboard:en({},e.dashboard,{display:i})})):e},ce=a.createContext(null),ct=function(e){var t,n,i,r,l,u,d,c,p,f,m,v,g,b,x,y=e.dashboard,w=e.children,C=e.trackEvent,j=(t={componentEditor:e.componentEditor||null,dashboard:y?ci(y,e.theme):y},l=(r=a_()).dashboardFilters,u=r.onDashboardFilterChange,d=r.filterLibrary,p=(c=t.dashboard).dataSets.map(function(e){return e.id}),(i=function(e,t){if(e){var n=e(t.map(function(e){return ae(e.attributes)})),i={};return n.forEach(function(e){var t,n;i[null!=(t=null==e||null==(n=e.attributes)?void 0:n.viewId)?t:""]=!0}),i}return null}(d,n=c.componentLibrary.filter(function(e){return p.includes(e.attributes.dataSetId)})))&&(n=n.filter(function(e){var t;return i&&i[null!=(t=e.attributes.viewId)?t:""]})),f=n,c.componentLibrary=f,v=en({pickFromComponentLibrary:null,componentEditor:null,inPreviewMode:!1},t,{dashboard:c}),m={dashboardFilters:l,onDashboardFilterChange:u},g=function(e,t){var n=t.type;return[function(e){var t,n,i,r,o,a,l,u,d,c,p,f;return t=e,n=m,u=n.dashboardFilters,d=[].concat(t.dashboard.globalFilters).filter(function(e){return!e.managedByConfiguration}),c=(a=t.dashboard.dataSets,l={},a.forEach(function(e){e.fields.forEach(function(t){[].concat(t.dashboardRequiredFilterGroups||[]).forEach(function(n){var i=n.publicName+" - "+t.dataType;l[i]=[].concat(l[i]||[],[{publicName:n.publicName,dataSetField:t,dataSetId:e.id}])})})}),Object.values(l)).map(function(e){return{type:"date_time"==e[0].dataSetField.dataType?"dateFilter":"singleSelectFilter",managedByConfiguration:!0,requiresValue:!0,title:e[0].publicName,appliesToFields:e.map(function(e){return{dataSetId:e.dataSetId,fieldId:e.dataSetField.id}}),value:null}}),p=u(dH(t.dashboard),d5).map(function(e){return en({},e,{managedByConfiguration:!0})}),f=(i=[].concat(d7(c),d7(p),d7(d)),r=t.dashboard.dataSets,o=new Set(r.flatMap(function(e){return e.fields.map(function(e){return e.id})})),r.forEach(function(e){e.fields.forEach(function(e){o.add(e.id)})}),i.map(function(e){var t=Object.assign({},e);return t.appliesToFields=e.appliesToFields.filter(function(e){return o.has(e.fieldId)}),t})).map(function(e){var n=tV(t.dashboard.globalFilters,e);return en({},e,{value:n?n.value:e.value||null})}),s.some(f,function(e,t){var n=[].concat(f);return n.splice(t,1),!!tV(n,e)})&&eP("Identical global dashboard filters found. This will cause strange behaviour. Please make sure the global filters all apply to a unique set of `appliesToFields` values."),en({},t,{dashboard:en({},t.dashboard,{globalFilters:f})})},function(e){var n,i,r;return"setGlobalFilters"!=t.type&&"init"!=t.type||m.onDashboardFilterChange(e.dashboard.globalFilters),e}].reduce(function(e,t){return t(e)},function(){var i,r,o,a,l,u,d,c,p,f,m,h,v,g,b,x,y,w,C,j,S,F,k,T,_,I,A,D,O,E,L,P,R,N,M,z,q,B,V,W,H,Y,G,U,K,X,Q,J,Z,$,ee,et,ei,er,eo,ea,el,es,eu,ed,ec,ep,ef,em,eh,ev,eg,eb,ex,ey,ew,eC,ej,eS,eF,ek,eT,e_,eI,eA,eD,eE,eL,eP,eR,eN,eM,ez,eq,eB,eV,eW,eH,eY,eG,eU,eK,eX,eQ,eJ,eZ,e$,e0;switch(n){case"insertRow":return o=e.dashboard.display,a=t.rowIndex,void 0===l&&(l=350),(u=[].concat(o)).splice(a,0,{components:[{isEmpty:!0,colSpan:12}],height:l}),en({},e,{dashboard:en({},e.dashboard,{display:u})});case"appendCell":return f=function(e,t){for(var n,i=s.cloneDeep(e),r=[].concat(i[t].components),o=ar(ao(r.length+1)),a=(r=[].concat(r,[o])).length-1,l=0;l<((n=r.length)>2&&n<5?3:2);l++){var u=ai(i,t,a,"left");r.length<5?r[l].colSpan=ao(r.length):r[u].colSpan=r[u].colSpan-1,i[t]={components:[].concat(r),height:i[t].height}}return i}(e.dashboard.display,t.rowIndex),en({},e,{dashboard:en({},e.dashboard,{display:f})});case"addHeaderRow":return v=t.rowIndex,g=t.initialTitle,b=[].concat(e.dashboard.display),x=at(g),y=as([x],52),b.splice(v,0,y),en({},e,{dashboard:en({},e.dashboard,{display:b})});case"setHeaderComponent":return S=t.component,F=t.rowIndex,k=t.cellIndex,(T=s.cloneDeep(e)).dashboard.display[F].components[k]=S,T;case"removeCell":return A=t.rowIndex,D=t.cellIndex,E=(O=s.cloneDeep(e.dashboard.display))[A].components[D],O[A].components.length>1?(O[A].components.splice(D,1),O[A].components[0].colSpan=O[A].components[0].colSpan+E.colSpan,en({},e,{dashboard:en({},e.dashboard,{display:O})})):d9(e,en({},t,{type:"removeRow"}));case"removeRow":return d9(e,t);case"clearCell":return R=t.rowIndex,N=t.cellIndex,(M=s.cloneDeep(e.dashboard.display))[R].components[N]=ar(M[R].components[N].colSpan),en({},e,{dashboard:en({},e.dashboard,{display:M})});case"addDataSet":return B=t.dataSet,(V=[].concat(e.dashboard.dataSets)).push(B),en({},e,{dashboard:en({},e.dashboard,{dataSets:V})});case"removeDataSet":return function(e,t){var n=t.dataSetId;if(!dz(e.dashboard,n))return e;var i=dN(e.dashboard,n),r=[].concat(e.dashboard.dataSets);return r.splice(i,1),en({},e,{dashboard:en({},e.dashboard,{dataSets:r})})}(e,t);case"setDataSets":return function(e,t){var n,i,r,o,a=t.dataSets,l=(n=[].concat(e.dashboard.dataSets),[].concat(a).flatMap(function(e){var t,i,r=iE(n,e.id);return null==r?[]:(t=[].concat(e.fields).map(function(e){return e.id}),i=[],[].concat(r.fields).forEach(function(e){t.includes(e.id)||(i=[].concat(i,[e]))}),i)})),u=s.reduce(l,function(e,t){var n,i,r;return i=t.id,(r=s.cloneDeep(e)).map(function(e){var t=e.components.map(function(e){return"isEmpty"in e||an(e)||(e.attributes=iA(e.attributes.type).removeField(e.attributes,i)),e});return en({},e,{components:t})}),r},e.dashboard.display);return en({},e,{componentEditor:(o=d2(o=(null==(r=e.componentEditor)?void 0:r.component)||null,l),r?en({},r,{component:o}):null),dashboard:en({},e.dashboard,{componentLibrary:[].concat(e.dashboard.componentLibrary).map(function(e){return d2(e,l)}),dataSets:[].concat(a),display:u})})}(e,t);case"startPickingComponentFromLibraryForDisplay":return en({},e,{pickFromComponentLibrary:{cellIndex:t.cellIndex,rowIndex:t.rowIndex}});case"startEditingComponent":return en({},e,{componentEditor:{target:{libraryIndex:t.libraryIndex,displayTarget:t.displayTarget},component:t.component||null}});case"saveComponent":return function(e,t){if(!e.componentEditor)throw"Cannnot save a component when the editor is not active.";if(null==(n=e.componentEditor)||!n.component||!e.componentEditor.component.attributes)throw"Component must be set for it to be saved.";var n,i=en({},e);return null!=e.componentEditor.target.libraryIndex&&(i=d6(e,e.componentEditor.component,e.componentEditor.target.libraryIndex,t.protectedComponent)),e.componentEditor.target.displayTarget&&!e.componentEditor.target.libraryIndex&&(i=d8(i,e.componentEditor.component,e.componentEditor.target.displayTarget.rowIndex,e.componentEditor.target.displayTarget.cellIndex)),en({},i,{componentEditor:null,pickFromComponentLibrary:e.pickFromComponentLibrary})}(e,t);case"addCustomComponent":return X=en({},e),null!=t.target.libraryIndex&&(X=d6(e,t.component,t.target.libraryIndex)),t.target.displayTarget&&!t.target.libraryIndex&&(X=d8(X,t.component,t.target.displayTarget.rowIndex,t.target.displayTarget.cellIndex)),en({},X,{componentEditor:null});case"clearModal":return en({},e,{pickFromComponentLibrary:null,componentEditor:null});case"updateEditorComponent":return e.componentEditor?en({},e,{componentEditor:en({},e.componentEditor,{component:t.component})}):en({},e);case"setResultsForComponentInDisplay":return function(e,t){var n=t.rowIndex,i=t.cellIndex,r=e.dashboard.display[n].components[i];if(!r)throw"We can only set results on an existing component on the dashboard.";var o=en({},r,{results:t.results});return en({},d8(e,o,n,i))}(e,t);case"setResultsForComponentInLibrary":return et=t.libraryIndex,ei=t.results,(er=[].concat(e.dashboard.componentLibrary))[et]=en({},er[et],{results:ei}),en({},e,{dashboard:en({},e.dashboard,{componentLibrary:er})});case"setResultsForComponentInEditor":return function(e,t){if(!e.componentEditor)throw"Cannot set results for a closed editor.";if(!e.componentEditor.component)throw"Cannot set results for a non-existant component in editor.";return en({},e,{componentEditor:en({},e.componentEditor,{component:en({},e.componentEditor.component,{results:t.results})})})}(e,t);case"pickComponentFromLibraryForDisplay":return function(e,t){var n=en({},e.dashboard.componentLibrary[t.libraryIndex]);if(!n)throw"Cannot set a non-existant library component for display";if(!e.pickFromComponentLibrary)throw"Component library not open, so cannot set library component on display";var i=e.pickFromComponentLibrary;return en({},d8(e,n,i.rowIndex,i.cellIndex),{pickFromComponentLibrary:null})}(e,t);case"setDashboard":return en({},e,{dashboard:t.dashboard});case"setTheme":return en({},e,{dashboard:en({},e.dashboard,{theme:t.theme})});case"setGlobalFilters":return en({},e,{dashboard:en({},e.dashboard,{globalFilters:t.globalFilters})});case"setColSpans":return ep=t,ef=s.cloneDeep(e.dashboard.display),(em=s.cloneDeep(e.dashboard.display)[ep.rowIndex]).components.map(function(e,t){e.colSpan=ep.colSpans[t].colSpan}),ef[ep.rowIndex]=em,en({},e,{dashboard:en({},e.dashboard,{display:ef})});case"setRowHeight":return ev=t,eg=s.cloneDeep(e.dashboard.display),(eb=s.cloneDeep(e.dashboard.display)[ev.rowIndex]).height=ev.height,eg[ev.rowIndex]=eb,en({},e,{dashboard:en({},e.dashboard,{display:eg})});case"changePreviewMode":return en({},e,{inPreviewMode:t.inPreviewMode});case"updateDisplayComponentAttributes":return ej=t.rowIndex,eS=t.cellIndex,eF=en({},e.dashboard.display[ej].components[eS],{attributes:en({},t.attributes)}),d8(e,eF,ej,eS);case"updateComponentLibraryAttributes":return e_=t.libraryIndex,eI=t.attributes,(eA=[].concat(e.dashboard.componentLibrary))[e_]=en({},eA[e_],{attributes:eI}),en({},e,{dashboard:en({},e.dashboard,{componentLibrary:eA})});case"removeComponentFromLibrary":return eL=t.libraryIndex,(eP=[].concat(e.dashboard.componentLibrary)).splice(eL,1),en({},e,{dashboard:en({},e.dashboard,{componentLibrary:eP})});case"setComponentReports":return function(e,t){var n=t.rowIndex,i=t.cellIndex,r=e.dashboard.display[n].components[i];if(!r)throw"We can only set local filters on an existing component on the dashboard.";var o=en({},r,{reports:t.reports});return en({},d8(e,o,n,i))}(e,t);case"swapComponents":return eO("swapComponents",t),eq=t.positionB,eB=en({},(eM=e.dashboard.display)[(ez=t.positionA).rowIndex].components[ez.cellIndex]),eV=en({},eM[eq.rowIndex].components[eq.cellIndex]),eM=al(eM,eB,eq.rowIndex,eq.cellIndex),eW=eM=al(eM,eV,ez.rowIndex,ez.cellIndex),en({},e,{dashboard:en({},e.dashboard,{display:eW})});case"setAttributes":return function(e,t){var n=t.rowIndex,i=t.cellIndex,r=e.dashboard.display[n].components[i];if(!r)throw"We can only set attributes on an existing component on the dashboard.";var o=en({},r,{attributes:t.attributes});return en({},d8(e,o,n,i))}(e,t);case"setParameterBasedUpdate":return eG=t.rowIndex,eU=t.cellIndex,eK=function(e,t,n,i){var r=e[t].components[n];if(!r||au(r)||an(r))throw"We can only set parameters on an existing component on the dashboard.";return d4(r,i)}(e.dashboard.display,eG,eU,t.payload),en({},d8(e,eK,eG,eU));case"addComponentToLibrary":return eJ=[].concat(e.dashboard.componentLibrary),eZ=am(t.component,t.protectedComponent),eJ.push(eZ),en({},e,{componentEditor:null,dashboard:en({},e.dashboard,{componentLibrary:eJ})});case"setLocalFilters":return function(e,t){var n=t.localFilters,i=t.rowIndex,r=t.cellIndex,o=t.libraryIndex,a=en({},e);if(void 0!==i&&void 0!==r){var l=e.dashboard.display[i].components[r];if(!l)throw"We can only set local filters on an existing component on the dashboard.";var s=en({},l,{localFilters:n});a=d8(e,s,i,r)}if(void 0!==o){var u=e.dashboard.componentLibrary[o];if(!u)throw"We can only set local filters on an existing component on the library.";var d=en({},u,{localFilters:n});a=d6(e,d,o)}return en({},a)}(e,t);case"startEditor":return en({},e,{componentEditor:{target:{libraryIndex:t.libraryIndex,displayTarget:{rowIndex:0,cellIndex:0}},component:t.component||null}});case"init":return e}}())},a.useReducer(g,v,function(e){return g(e,{type:"init"})})),S=j[0],F=j[1];return o.useEffect(function(){(null==e?void 0:e.onDashboardUpdate)&&(null==e||e.onDashboardUpdate(S.dashboard))},[JSON.stringify(S.dashboard)]),h.jsx(ce.Provider,{value:en({},S,{dispatch:F,trackEvent:C||function(){},updatingDashboard:e.updatingDashboard,runQueriesCallback:(x=et($().mark(function t(n,i,r){return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!S.dashboard){t.next=2;break}return t.abrupt("return",e.runQueriesCallback(n,{abortSignal:i,dataSets:S.dashboard.dataSets,filterConfig:r}));case 2:return t.abrupt("return",null);case 3:case"end":return t.stop()}},t)})),function(e,t,n){return x.apply(this,arguments)})}),children:h.jsx(lg,{theme:null==e?void 0:e.theme,storedTheme:null==S||null==(b=S.dashboard)?void 0:b.theme,children:w})})},cn=function(){return a.useContext(ce)},ci=function(e,t){var n,i,r,o,a,l,s,u,d,c,p,f;return en({},e,{theme:{detail:null!=(n=null==t?void 0:t.detail)?n:null==e||null==(i=e.theme)?void 0:i.detail,rowLimit:null!=(r=null==t?void 0:t.rowLimit)?r:null==e||null==(o=e.theme)?void 0:o.rowLimit,fontFamily:null!=(a=null==t||null==(l=t.baseFont)?void 0:l.fontFamily)?a:null==e||null==(s=e.theme)?void 0:s.fontFamily,fontSize:null!=(u=null==t||null==(d=t.baseFont)?void 0:d.fontSize)?u:null==e||null==(c=e.theme)?void 0:c.fontSize,colors:null!=(p=null==t?void 0:t.colors)?p:null==e||null==(f=e.theme)?void 0:f.colors}})},cr=(d3=et($().mark(function e(t,n,i,r){return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(t,i,r);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",null);case 10:case"end":return e.stop()}},e,null,[[0,6]])})),function(e,t,n,i){return d3.apply(this,arguments)}),co=function(e,t,n){var i;return i=et($().mark(function i(r){var o,a;return $().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,cr(e,t,r);case 3:if(o=i.sent){i.next=6;break}throw Error("Failed to fetch filter options.");case 6:return a=o.flatMap(function(e){return e?e.content.map(function(e){return e[0]}):[]}),i.abrupt("return",s.uniq(a).map(function(t){var i=eM(t,function(){throw"Async options should not be formatting a date time field."});return i&&rO(i,n,{filter:e})&&(i=""+rO(i,n,{filter:e})),{label:i,value:t}}));case 10:return i.prev=10,i.t0=i.catch(0),i.t0 instanceof Error?console.error(i.t0.message):console.error(i.t0),i.abrupt("return",[]);case 14:case"end":return i.stop()}},i,null,[[0,10]])})),function(e){return i.apply(this,arguments)}},ca=function(e,t,n){var i=document.createElement("div"),r=document.createElement(t);r.textContent=e,null!=n&&n.fontSize&&(r.style.fontSize="number"==typeof n.fontSize?n.fontSize+"px":""+n.fontSize),null!=n&&n.fontWeight&&(r.style.fontWeight=""+n.fontWeight),i.appendChild(r),i.style.display="inline-block",i.style.visibility="hidden",document.body.appendChild(i);var o=r.offsetWidth;return document.body.removeChild(i),o};function cl(e,t){var n=ca(e,"span",{fontSize:null==t?void 0:t.fontSize,fontWeight:null==t?void 0:t.fontWeight});return(n>100?n:100)+24}var cs,cu=function(e){var t,n,i,r=cn().runQueriesCallback,a=a_(),l=a.cascadeFilterSelection,s=a.textOverride,u=a.valueAlias,d=e.filter,c=e.filterIndex,p=e.dataSets,f=e.onChange,m=o.useState(null),v=m[0],g=m[1],b=lu(),x=o.useRef(void 0),y=(t=et($().mark(function t(n){return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.filter.options){t.next=2;break}return t.abrupt("return",e.filter.options);case 2:return t.next=4,co(tG(d),r,u)(n);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)});o.useEffect(function(){var e;(e=et($().mark(function e(){var t,n;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!d.requiresValue||null!==d.value){e.next=6;break}return t=new AbortController,e.next=4,y(t.signal);case 4:(n=e.sent)&&n[0]?(eO("Filter forcing initial value to be set."),g(n),f(en({},d,{value:n[0].value}))):eP("Ran select filter options to force a value, but no results were returned.");case 6:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})()},[JSON.stringify(d)]),o.useEffect(function(){l&&null!==x.current&&JSON.stringify(x.current)!==JSON.stringify(d.optionsFilters)&&g(null),x.current=d.optionsFilters},[d.optionsFilters]);var w=cl(tB(d,p,s),null==b||null==(n=b.forms)?void 0:n.select);if(e.filter.hidden)return null;var C=function(){if(u){var e,t;if("string"==typeof d.value&&rO(d.value,u,{filter:d}))return null!=(e=rO(d.value,u,{filter:d}))?e:d.value;if("number"==typeof d.value&&rO(d.value.toString(),u,{filter:d}))return null!=(t=rO(d.value.toString(),u,{filter:d}))?t:d.value}return d.value}();return h.jsx(dA,{showClearBtn:e.showClearBtn,anchorLeft:!0,placeholder:tB(d,p,s),options:v||y,currentValue:C,setSelected:function(t){e.onChange(en({},d,{value:t}))},textOverride:s,id:ek(null!=(i=e.filter.title)?i:"")+"_"+e.filter.type,labelWidth:w,formatLabel:function(e){var t;return null!=(t=rO(e,u,{filter:d}))?t:e}},"filter-"+c)},cd=a.forwardRef(function(e,t){return h.jsxs(h.Fragment,{children:[(null==e?void 0:e.label)&&h.jsx(dx,{htmlFor:null==e?void 0:e.id,children:null==e?void 0:e.label}),h.jsx("input",en({className:""+cc(),type:"checkbox",ref:t},e,{checked:e.checked}))]})}),cc=function(){return rY({marginRight:"0.5rem",height:"1rem",width:"1rem",cursor:"pointer",appearance:"none",borderRadius:"0.125rem",borderWidth:2,borderStyle:"solid",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",verticalAlign:"top",transitionProperty:"all",borderColor:rG(50),backgroundColor:"rgb(255, 255, 255)",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"200ms","&:checked":{borderColor:"rgb(48, 116, 217)",backgroundColor:"rgb(48, 116, 217)"},"&:hover":{borderColor:"rgb(48, 116, 217)"},"&:focus":{outline:"2px solid transparent",outlineOffset:2}})},cp=Object.assign(function(){return null},{popover:function(e){return rY(en({background:rG(0),zIndex:99999999999,padding:"6px 8px",borderRadius:4,fontSize:"0.75rem",lineHeight:"1rem",fontWeight:500,letterSpacing:"0.1em",color:"rgb(255, 255, 255)"},{minWidth:e}))}}),cf=Object.assign(function(e){var t,n,i,r=o.useState(null!=(t=null==e?void 0:e.showTooltip)&&t),a=r[0],l=r[1],s=o.useState(null),u=s[0],d=s[1],c=o.useState(null),p=c[1],f=j.usePopper(u,c[0],{placement:null!=(n=null==e?void 0:e.placement)?n:"bottom-start",modifiers:null!=(i=null==e?void 0:e.modifiers)?i:[]}),m=f.styles,v=f.attributes;return h.jsxs("div",{className:lr((null==e?void 0:e.className)&&""+(null==e?void 0:e.className)),children:[h.jsx("span",{ref:d,onMouseEnter:function(){return l(!0)},onMouseLeave:function(){return l(!1)},className:lr((null==e?void 0:e.classNameTrigger)&&""+(null==e?void 0:e.classNameTrigger)),children:e.children}),a&&h.jsx("div",en({ref:p,className:""+cp.popover(null==e?void 0:e.tooltipMinWidth),style:en({},m.popper,{visibility:a?"visible":"hidden"})},v.popper,{children:e.tooltipContent()}))]})},{Content:function(e){var t;return h.jsx("div",{children:null!=(t=e.text)?t:null==e?void 0:e.children})}}),cm={name:"1576s6y",styles:"display:flex;height:18px;min-width:max-content;align-items:center;justify-content:center;border-radius:9999px;--tw-bg-opacity:1;background-color:rgb(229 231 235 / var(--tw-bg-opacity));padding-top:0.125rem;padding-bottom:0.125rem;padding-left:0.5rem;padding-right:0.5rem;font-weight:500;--tw-text-opacity:1;color:rgb(30 41 59 / var(--tw-text-opacity))"},ch={name:"1ho1ybk",styles:"max-width:100%;flex:0 1 auto;font-size:0.75rem;line-height:1;font-weight:400"},cv={name:"10bts8a",styles:"display:flex;flex:1 1 auto;flex-direction:row-reverse"},cg=function(e){var t=e.textOverride,n=t?t("remove_pill","Remove [[label]]",{label:e.label}):"Remove "+(null==e?void 0:e.label);return h.jsxs("div",{css:cm,children:[h.jsx("div",{css:ch,children:e.label}),h.jsx("div",{css:cv,children:h.jsxs("button",{onClick:function(t){t.preventDefault(),e.onRemove()},className:""+or.button,children:[h.jsx("span",{className:""+or.srOnly,children:n}),!(null!=e&&e.disableClear)&&h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:lr(g.css({name:"13h9wtn",styles:"margin-left:0.5rem;height:1rem;width:1rem;cursor:pointer;border-radius:9999px;opacity:0.7;:hover{opacity:1;}"}),""+oa),"aria-label":n,children:[h.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),h.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})]})})]})},cb=Object.assign(function(e){return h.jsx(uQ,{columnGap:"0.25rem",rowGap:"0.25rem",flex:1,wrap:!0,minWidth:e.minWidth,padding:e.padding,"data-component":"selected-chips",children:e.children})},{More:function(e){var t=e.pills,n=e.textOverride,i=e.numberOfPills;return h.jsx(cf,{tooltipContent:function(){return h.jsx(cf.Content,{children:t.map(function(e,n){return 0===n?null:h.jsxs(o.Fragment,{children:[e,t.length!==n+1&&", "]},n)})})},children:h.jsx(cg,{label:n?n("more_pill","[[numberOfPills]] more",{numberOfPills:null!=i?i:t.length-1}):(null!=i?i:t.length-1)+" more",disableClear:!0,onRemove:function(){},textOverride:n})})},Selected:cg}),cx={name:"1d3w5wq",styles:"width:100%"},cy={name:"1egouu6",styles:"position:relative;display:flex;width:100%;flex-direction:column;align-items:center"},cw=function(e){var t,n,i,r,l,u,d=null!=(t=null==e?void 0:e.showableChips)?t:2,c=e.selected,p=e.textOverride,f=o.useState([]),m=f[0],v=f[1];o.useEffect(function(){s.isArray(e.options)&&v(e.options)},[e.options]);var g=o.useState(null!=(n=null==e?void 0:e.isLoading)&&n),b=g[0],x=g[1],y=o.useState(s.isFunction(e.options)?"unloaded":void 0),w=y[0],C=y[1],j=a.useState(!1),S=j[0],F=j[1];o.useEffect(function(){var t,n=(t=et($().mark(function t(){var n;return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(x(!0),n=new AbortController,C("loading"),!s.isFunction(e.options)){t.next=9;break}return e.options(n.signal).then(function(e){C("loaded"),e&&(v(e),x(!1))}),t.abrupt("return",function(){n.abort("Multi-select unmounted"),C("failed")});case 9:x(!1),v(e.options);case 11:return t.abrupt("return",function(){});case 12:case"end":return t.stop()}},t)})),function(){return t.apply(this,arguments)});S&&s.isFunction(e.options)&&n()},[S]);var k=uH(m,["label","value"]),T=k.values,_=k.searchString,I=k.setSearch,A=o.useRef(null);ls(A,function(){F(!1),P(d)});var D=function(t){I("");var n=[].concat(c);n=c.includes(t)?s.filter([].concat(c),function(e){return e!=t}):[].concat(c,[t]),e.setSelected(n)},O=s.sumBy(m,function(e){return e.hide?0:1}),E=o.useState(d),L=E[0],P=E[1];o.useEffect(function(){P(S?c.length:d)},[c.length,m.length]);var R=lu(),N=dh(e.isLoading);return h.jsxs("div",{css:cx,"data-fetchstatus":null!=w?w:void 0,children:[(null==e?void 0:e.id)&&(null==e?void 0:e.label)&&h.jsx(dx,{labelHidden:null==e?void 0:e.labelHidden,id:null==e?void 0:e.id,children:null==e?void 0:e.label}),h.jsxs("div",{css:cy,ref:A,children:[h.jsxs(df,{value:_,onChange:function(e){return I(e)},open:S,setOpen:function(e){F(e),P(e?c.length:d)},multiple:!0,id:null==e?void 0:e.id,"aria-labelledby":(null==e?void 0:e.id)&&(null==e?void 0:e.label)&&(null==e?void 0:e.id),onClick:function(){return!S&&0===c.length&&F(!0)},testId:"multi-select",textOverride:p,fixedWidth:null==e?void 0:e.labelWidth,children:[(null==e?void 0:e.selectedPrefix)&&h.jsx(uM,{"data-component":"selected-prefix",padding:null!=(i=null==R||null==(r=R.forms)||null==(r=r.select)?void 0:r.padding)?i:"0.30rem 0.5rem",paddingRight:0,children:null==e?void 0:e.selectedPrefix}),(null==e?void 0:e.placeholder)&&0===c.length&&h.jsx(uM,{padding:"0.35rem 0.5rem",as:"span",children:h.jsx("span",{style:{color:"#A1A8B3"},children:null==e?void 0:e.placeholder})}),h.jsxs(uQ,{columnGap:"0.25rem",rowGap:"0.25rem",flex:1,minWidth:S?0===c.length?void 0:190:void 0,wrap:!0,padding:null!=(l=null==R||null==(u=R.forms)||null==(u=u.select)?void 0:u.padding)?l:"0.30rem","data-component":"selected-chips",children:[c.length<=L&&c.map(function(t,n){var i=m[t];return i?h.jsx(cb.Selected,{onRemove:function(){return D(t)},label:i.label,disableClear:null==e?void 0:e.disableClearAll,textOverride:p},n):null}),L<=d&&c.length>d&&h.jsxs(o.Fragment,{children:[c.map(function(t,n){var i=m[t];return n>d-1?null:i?h.jsx(cb.Selected,{onRemove:function(){return D(t)},label:i.label,disableClear:null==e?void 0:e.disableClearAll,textOverride:p},n):null}),h.jsx(cf,{tooltipContent:function(){return h.jsx(cf.Content,{children:c.map(function(e,t){var n;return t<=d-1?null:h.jsxs(o.Fragment,{children:[null==(n=m[e])?void 0:n.label,c.length!==t+1&&", "]},t)})})},children:h.jsx(cb.Selected,{onRemove:function(){},label:c.length-d+" more",disableClear:!0,textOverride:p})})]})]})]}),h.jsxs(u6,{open:S,width:e.dropdownForFilter?void 0:"calc(100% - 2px)",minWidth:e.dropdownForFilter?192:void 0,onFreeTextSelected:e.onFreeTextSelected,freeTextOptions:e.freeTextOptions,children:[b&&h.jsx(uM,{height:80,children:N&&h.jsx(dl,{color:"#3074d9"})}),c.length!==O&&h.jsxs(o.Fragment,{children:[h.jsx(uM,{padding:8,children:h.jsx(dS,{id:(null==e?void 0:e.id)+"-add-item",label:"Add "+e.placeholder,labelHidden:!0,autoFocus:!0,defaultValue:_,onChange:function(e){return I(e.target.value)}})}),T.map(function(e,t){return h.jsx(o.Fragment,{children:!e.item.hide&&!c.includes(e.refIndex)&&h.jsx(u6.Option,{onChange:function(){return D(e.refIndex)},label:e.item.label})},t)})]}),!b&&c.length===O&&h.jsx(uM,{padding:8,children:p?p("no_options","No Options"):"No Options"})]})]})]})},cC=function(e){var t,n,i,r,a,l,s=lu(),u=o.useRef(void 0),d=a_(),c=d.cascadeFilterSelection,p=d.textOverride,f=d.featureToggles,m=d.valueAlias,v=cn().runQueriesCallback,g=e.filter,b=e.filterIndex,x=e.dataSets,y=e.onChange,w=o.useState(null),C=w[0],j=w[1],S=o.useState(!1),F=S[0],k=S[1],T=(t=et($().mark(function t(n){var i;return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.filter.options){t.next=3;break}return j(e.filter.options),t.abrupt("return",e.filter.options);case 3:return t.next=5,co(tG(g),v,m)(n);case 5:return j(i=t.sent),t.abrupt("return",i);case 8:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}),_=(n=et($().mark(function e(){var t,n;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C){e.next=7;break}return k(!0),t=new AbortController,e.next=5,T(t.signal);case 5:(n=e.sent)&&n[0]?(eO("Filter forcing initial value to be set."),k(!1),j(n)):eP("Ran select filter options to force a value, but no results were returned.");case 7:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});o.useEffect(function(){var e;(e=et($().mark(function e(){var t,n;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g.requiresValue||null!==g.value&&0!==g.value.length){e.next=6;break}return t=new AbortController,e.next=4,T(t.signal);case 4:(n=e.sent)&&n[0]?(eO("Filter forcing initial value to be set."),j(n),y(en({},g,{value:[n[0].value]}))):eP("Ran select filter options to force a value, but no results were returned.");case 6:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})()},[JSON.stringify(g)]);var I=tB(g,x,p),A=o.useState([]),D=A[0],O=A[1];o.useEffect(function(){var e,t;null!=g&&g.value?C&&(null==C?void 0:C.length)>0?O((e=null==g?void 0:g.value,C.reduce(function(t,n,i){return e&&e.includes(n.value)&&t.push(i),t},[]))):_():O([])},[g,C]),o.useEffect(function(){c&&null!==u.current&&JSON.stringify(u.current)!==JSON.stringify(g.optionsFilters)&&j(null),u.current=g.optionsFilters},[g.optionsFilters]);var E=cl(I,null==s||null==(i=s.forms)?void 0:i.select);return e.filter.hidden?null:h.jsx(uM,{minWidth:E+36,"data-component":"multi-select-filter",width:f.forceMobile?"100%":void 0,children:h.jsx(cw,{options:C||T,setSelected:function(t){C&&e.onChange(en({},g,{value:t.map(function(e){var t;return null==(t=C[e])?void 0:t.value}).filter(function(e){return void 0!==e})}))},selected:D,isLoading:F,id:"filter-"+b,disableClearAll:!(null!=e&&e.showClearBtn)&&1===(null==(r=g.value)?void 0:r.length),selectedPrefix:I+(null!=(a=g.value)&&a.length&&(null==(l=g.value)?void 0:l.length)>0?" \xb7 ":""),showableChips:1,textOverride:p,labelWidth:E,label:I,labelHidden:!0,dropdownForFilter:!0},"filter-"+b)})},cj=Object.assign(function(){return null},{input:{border:"none",borderStyle:"none",borderWidth:"initial",borderColor:"initial",borderImage:"initial",backgroundColor:"transparent",boxShadow:"unset",fontFamily:"inherit",fontSize:"inherit",fontWeight:"inherit",color:"inherit",padding:"0",margin:"0",boxSizing:"border-box",outline:"none",appearance:"none",textAlign:"left"}}),cS=rY({position:"relative",display:"flex",height:"100%"}),cF=rY({display:"flex",width:"100%",height:"100%",alignItems:"center"}),ck=rY({width:18,display:"flex",verticalAlign:"middle",color:"rgb(72, 72, 72)",alignSelf:"center",justifyContent:"center"}),cT=Object.assign(function(){return null},{picker:rY(en({},cj.input,{appearance:"searchfield"})),prefixStyle:function(e){var t,n,i;return rY({alignSelf:"center",paddingTop:0,paddingBottom:0,paddingRight:0,paddingLeft:"0.5rem",background:null==e||null==(t=e.input)?void 0:t.background,borderRadius:null==e||null==(n=e.input)?void 0:n.borderRadius,borderTopRightRadius:0,borderBottomRightRadius:0,color:null==e||null==(i=e.input)?void 0:i.color,whiteSpace:"nowrap",flex:1})},inputsWrapper:function(e){var t,n,i,r,o,a,l,s,u,d,c;return rY({position:"relative",border:null==e||null==(t=e.input)?void 0:t.border,boxShadow:null==e||null==(n=e.input)?void 0:n.boxShadow,borderRadius:null==e||null==(i=e.input)?void 0:i.borderRadius,fontSize:null==e||null==(r=e.input)?void 0:r.fontSize,background:null==e||null==(o=e.input)?void 0:o.background,cursor:"default","&:hover":{border:null==e||null==(a=e.input)||null==(a=a["&:hover"])?void 0:a.border,background:null==e||null==(l=e.input)||null==(l=l["&:hover"])?void 0:l.background,boxShadow:null==e||null==(s=e.input)||null==(s=s["&:hover"])?void 0:s.boxShadow},"&:focus":{border:null==e||null==(u=e.input)||null==(u=u["&:focus"])?void 0:u.border,background:null==e||null==(d=e.input)||null==(d=d["&:focus"])?void 0:d.background,boxShadow:null==e||null==(c=e.input)||null==(c=c["&:focus"])?void 0:c.boxShadow}})},inputs:cF,separator:ck,dateInput:function(e){var t,n,i,r,o,a;return rY({width:null==e||null==(t=e.date)?void 0:t.width,background:null==e||null==(n=e.input)?void 0:n.background,padding:null==e||null==(i=e.input)?void 0:i.padding,cursor:"default",borderRadius:null==e||null==(r=e.input)?void 0:r.borderRadius,color:null==e||null==(o=e.input)?void 0:o.color,border:0,fontWeight:null==e||null==(a=e.input)?void 0:a.fontWeight,"&:focus":{outline:0}})},timeInput:function(e){var t;return rY({width:null==e||null==(t=e.time)?void 0:t.width,paddingLeft:0,paddingRight:0})},clearContainer:function(){return rY({width:18,alignSelf:"center"})},wrapper:cS,separatorIcon:function(e){return rY({verticalAlign:"middle",display:"block",fill:null==e?void 0:e.indicatorColor,height:18,width:18})},clearButton:function(e){return rY(en({},du,{fill:null==e?void 0:e.indicatorColor}))}}),c_=function(e){var t,n=lu();return h.jsx("div",{style:{display:"inline-block"},children:h.jsx("input",{type:"text",name:null==e?void 0:e.name,value:null==e?void 0:e.value,placeholder:null==e?void 0:e.label,"aria-label":null==e?void 0:e.label,autoComplete:"off",className:""+cT.dateInput(null==n||null==(t=n.forms)?void 0:t.dateTime),onChange:function(t){return null==e?void 0:e.onChange(t.currentTarget.value)}})})},cI=function(e){var t,n=o.useState(null==e||null==(t=e.value)?void 0:t.format(null==e?void 0:e.timeFormat)),i=n[0],r=n[1],a=o.useRef(null);o.useEffect(function(){e.shouldClear&&a.current&&(r(void 0),a.current.value="")},[e.shouldClear]),o.useEffect(function(){var t;return r(null==e||null==(t=e.value)?void 0:t.format(null==e?void 0:e.timeFormat))},[null==e?void 0:e.value]);var l=o.useState(!1),s=l[0],u=l[1],d=o.useRef(null),c=function(e){for(var t=[],n=0;n<1440;n+=15){var i=Math.floor(n/60),r=n%60,o=("0"+i).slice(-2)+":"+("0"+r).slice(-2),a=S().hour(i).minute(r).second(0);t.push({label:o,value:a})}return t}();return ls(d,function(){u(!1)}),o.useEffect(function(){if(i){var t=cA(i,null==e?void 0:e.timeFormat);t&&(null==e||e.onChange(t),u(!1))}},[i]),h.jsxs("div",{ref:d,children:[h.jsx("div",{style:{position:"relative"},children:h.jsx("input",{ref:a,type:"text",name:null==e?void 0:e.name,value:i,placeholder:null==e?void 0:e.label,"aria-label":null==e?void 0:e.label,autoComplete:"off",className:null==e?void 0:e.className,onChange:function(e){r(e.currentTarget.value)},onClick:function(t){var n;u(!s),(null==e?void 0:e.onClick)&&(null==e||e.onClick(t))}})}),h.jsx("div",{style:{maxWidth:80},children:h.jsx(u6,{open:s,fixedHeight:!0,width:"calc(100% - 2px)",children:c.map(function(t,n){return h.jsx(u6.Option,{label:t.label,onChange:function(n){var i;null==n||n.stopPropagation(),r((i=t.value).format(null==e?void 0:e.timeFormat)),null==e||e.onChange(i),u(!1)}},n)})})})]},null==e?void 0:e.name)},cA=function(e,t){var n=S(e,"HH:mm:ss",!0);return S(e,"HH:mm",!0).isValid()||n.isValid()?S(e,t):null},cD=function(e){return rY(en({maxHeight:"100%"},e,{variants:{hasFooter:{true:{},false:{borderBottomLeftRadius:null==e?void 0:e.borderRadius,borderBottomRightRadius:null==e?void 0:e.borderRadius}},hasHeader:{true:{},false:{borderTopLeftRadius:null==e?void 0:e.borderRadius,borderTopRightRadius:null==e?void 0:e.borderRadius}}}}))},cO=rY(en({overflow:"overlay"},uY)),cE=function(e){return rY(en({},e,{variants:{buttons:{end:{display:"grid",justifyContent:"end"}}}}))},cL=function(){var e,t=lu();return h.jsx("div",{"aria-hidden":"true",role:"presentation",className:""+cT.separator,children:h.jsx("svg",{focusable:"false",viewBox:"0 0 1000 1000",className:""+cT.separatorIcon(null==t||null==(e=t.forms)?void 0:e.dateTime),"data-themeapi":"forms.dateTime.indicatorColor",children:h.jsx("path",{d:"M694 242l249 250c12 11 12 21 1 32L694 773c-5 5-10 7-16 7s-11-2-16-7c-11-11-11-21 0-32l210-210H68c-13 0-23-10-23-23s10-23 23-23h806L662 275c-21-22 11-54 32-33z"})})})},cP=function(e){var t,n,i,r,a,l,s,u,d,c=lu(),p=function(t){return null==t?void 0:t.format(e.timeFormat)},f=u5({color:null==c||null==(t=c.forms)||null==(t=t.dateTime)||null==(t=t.input)?void 0:t.color,fontWeight:null==c||null==(n=c.forms)||null==(n=n.dateTime)||null==(n=n.input)?void 0:n.fontWeight,padding:null==c||null==(i=c.forms)||null==(i=i.dateTime)||null==(i=i.input)?void 0:i.padding,paddingLeft:0}),m=function(t){return t?t.format(e.dateFormat):void 0},v=e.pickerOpen||!e.datesDefined;return h.jsx(o.Fragment,{children:h.jsxs("div",{className:""+cT.inputs,children:[e.prefix&&h.jsxs("div",{className:lr(""+cT.prefixStyle(null==c||null==(r=c.forms)?void 0:r.dateTime),u5({paddingRight:"0.5rem"})),children:[null!=(a=e.label)?a:"Custom"," \xb7"]}),v?h.jsx(o.Fragment,{children:h.jsx(uQ,{alignItems:"center",paddingRight:"1rem",className:lr(f,e.prefix?void 0:u5({padding:null==c||null==(l=c.forms)||null==(l=l.dateTime)||null==(l=l.input)?void 0:l.padding})),children:e.textOverride?e.textOverride("date_picker.select","Select..."):"Select..."})}):h.jsxs(uQ,{alignItems:"center",children:[e.state.fixed&&h.jsxs(o.Fragment,{children:[h.jsx("div",{className:f,children:m(e.startDate)}),"date_time"===e.type&&h.jsx("div",{"data-component":"time.start",className:f,children:p(e.time.start)}),h.jsx("div",{className:f,children:h.jsx(cL,{})}),h.jsx("div",{className:f,children:m(e.endDate)}),"date_time"===e.type&&h.jsx("div",{"data-component":"time.end",className:f,children:p(e.time.end)})]}),e.state.relative&&h.jsx(cR,{relative:e.state.relative,textOverride:e.textOverride}),h.jsx("div",{className:""+cT.clearContainer(),children:h.jsx(ds,{onClear:e.onClearAll,className:""+cT.clearButton(null==c||null==(s=c.forms)?void 0:s.dateTime),"aria-label":e.textOverride?e.textOverride("clear_date","Clear Dates"):"Clear Dates",fill:null==c||null==(u=c.forms)||null==(u=u.select)?void 0:u.indicatorColor,stroke:null==c||null==(d=c.forms)||null==(d=d.select)?void 0:d.indicatorColor})})]})]})})},cR=function(e){var t,n,i=e.relative,r=e.textOverride,o=(n=[],null==i||null==(t=i[0])||t.forEach(function(e){var t=e.value;if(null!==t.unit&&null!==t.timeFrame){var i,o=ti(r)[t.unit].description,a=tr(r)[t.timeFrame].description,l=e.op+" "+(r&&r("date_picker.relative_date","[[value]] [[duration]] in [[timeframe]]",{value:null!=(i=t.value)?i:"",duration:o,timeframe:a}));n.push(l)}}),n);return h.jsxs(cb,{padding:"0 0.30rem 0 0",children:[o.map(function(e,t){return t>0?null:h.jsx(cb.Selected,{label:e,disableClear:!0,onRemove:function(){},textOverride:r},JSON.stringify(e))}),o.length>1&&h.jsx(cb.More,{pills:o,textOverride:r})]})},cN=function(e){var t,n,i,r,a,l,s,u,d,c,p,f,m,v,b,x,y,w,C,j,k,T,_,I,A,D,O,E,L,P,R,N,M,z,q,B,V,W,H,Y,G,U,K,X,Q,J,Z,$,ee=lu(),et=o.useState("startDate"),en=et[0],ei=et[1];return h.jsx("div",{className:lr(""+(r=null==ee||null==(t=ee.forms)?void 0:t.dateTime,g.css(".DateRangePickerInput{display:grid;background:",null==r||null==(a=r.input)?void 0:a.background,";border-radius:",null==r||null==(l=r.input)?void 0:l.borderRadius,"px;grid-template-columns:minmax(76px, auto) 18px minmax(76px, auto) 24px;}.DateInput:first-of-type{border-radius:0;border-top-right-radius:0;border-bottom-right-radius:0;}.DateInput:first-of-type>input{border-radius:0;border-top-right-radius:0;border-bottom-right-radius:0;padding-left:0.25rem;padding-right:0;}.DateInput_input{color:",null==r||null==(s=r.input)?void 0:s.color,";font-weight:",null==r||null==(u=r.input)?void 0:u.fontWeight,";background:",null==r||null==(d=r.input)?void 0:d.background,";outline:2px solid transparent;line-height:initial;&:hover:{border:",null==r||null==(c=r.input)||null==(c=c["&:hover"])?void 0:c.border,";background:",null==r||null==(p=r.input)||null==(p=p["&:hover"])?void 0:p.background,";}}.DateInput_input__focused input{border:",null==r||null==(f=r.input)||null==(f=f["&:focus"])?void 0:f.border,";background:",null==r||null==(m=r.input)||null==(m=m["&:focus"])?void 0:m.background,";}.DateInput:last-of-type>input{border-top-left-radius:0;border-bottom-left-radius:0;border-left:0;padding-left:0.25rem;padding-right:0;}.DateInput{margin:0;padding:0;background:",null==r||null==(v=r.input)?void 0:v.background,";position:relative;display:grid;min-width:76px;align-content:center;padding-bottom:1px;}.DateRangePickerInput_clearDates{border:0;color:inherit;font:inherit;line-height:normal;cursor:pointer;padding:5px;margin:2.5px;background-color:transparent;}.DateInput_input+.DateInput_input{margin-left:8px;}.DateInput_input__focused{outline-offset:0px;}.DateRangePickerInput__withBorder{border:none;border-bottom:2px solid black;border-radius:0;}.DayPickerKeyboardShortcuts_show__bottomRight::before{border-right-color:black;}.DayPickerKeyboardShortcuts_show__bottomRight::after{border-right-color:white;}.DayPickerKeyboardShortcuts_show__topRight::before{border-right-color:black;}.DayPickerKeyboardShortcuts_show__topRight::after{border-right-color:white;}.PresetDateRangePicker_panel{padding:0 22px 11px;}.PresetDateRangePicker_button{position:relative;height:100%;text-align:center;background:0 0;border:2px solid #00a699;color:#00a699;padding:4px 12px;margin-right:8px;font:inherit;font-weight:700;line-height:normal;overflow:visible;-moz-box-sizing:border-box;box-sizing:border-box;cursor:pointer;}.PresetDateRangePicker_button:active{outline:0;}.PresetDateRangePicker_button__selected{color:#fff;background:#00a699;}.SingleDatePickerInput{display:inline-block;background-color:#fff;}.SingleDatePickerInput__withBorder{border-radius:2px;border:1px solid #dbdbdb;}.SingleDatePickerInput__rtl{direction:rtl;}.SingleDatePickerInput__disabled{background-color:#f2f2f2;}.SingleDatePickerInput__block{display:block;}.SingleDatePickerInput__showClearDate{padding-right:30px;}.SingleDatePickerInput_clearDate{background:0 0;border:0;color:inherit;font:inherit;line-height:normal;overflow:visible;cursor:pointer;padding:10px;margin:0 10px 0 5px;position:absolute;right:0;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);}.SingleDatePickerInput_clearDate__default:focus,.SingleDatePickerInput_clearDate__default:hover{background:#dbdbdb;border-radius:50%;}.SingleDatePickerInput_clearDate__small{padding:6px;}.SingleDatePickerInput_clearDate__hide{visibility:hidden;}.SingleDatePickerInput_clearDate_svg{fill:#82888a;height:12px;width:15px;vertical-align:middle;}.SingleDatePickerInput_clearDate_svg__small{height:9px;}.SingleDatePickerInput_calendarIcon{background:0 0;border:0;color:inherit;font:inherit;line-height:normal;overflow:visible;cursor:pointer;display:inline-block;vertical-align:middle;padding:10px;margin:0 5px 0 10px;}.SingleDatePickerInput_calendarIcon_svg{fill:#82888a;height:15px;width:14px;vertical-align:middle;}.SingleDatePicker{position:relative;display:inline-block;}.SingleDatePicker__block{display:block;}.SingleDatePicker_picker{z-index:1;background-color:#fff;position:absolute;}.SingleDatePicker_picker__rtl{direction:rtl;}.SingleDatePicker_picker__directionLeft{left:0;}.SingleDatePicker_picker__directionRight{right:0;}.SingleDatePicker_picker__portal{background-color:rgba(0, 0, 0, 0.3);position:fixed;top:0;left:0;height:100%;width:100%;}.SingleDatePicker_picker__fullScreenPortal{background-color:#fff;}.SingleDatePicker_closeButton{background:0 0;border:0;color:inherit;font:inherit;line-height:normal;overflow:visible;cursor:pointer;position:absolute;top:0;right:0;padding:15px;z-index:2;}.SingleDatePicker_closeButton:focus,.SingleDatePicker_closeButton:hover{color:darken(#cacccd, 10%);text-decoration:none;}.SingleDatePicker_closeButton_svg{height:15px;width:15px;fill:#cacccd;}.DayPickerKeyboardShortcuts_buttonReset{background:0 0;border:0;border-radius:0;color:inherit;font:inherit;line-height:normal;overflow:visible;padding:0;cursor:pointer;font-size:14px;}.DayPickerKeyboardShortcuts_buttonReset:active{outline:0;}.DayPickerKeyboardShortcuts_show{width:33px;height:26px;position:absolute;z-index:2;}.DayPickerKeyboardShortcuts_show::before{content:'';display:block;position:absolute;}.DayPickerKeyboardShortcuts_show__bottomRight{bottom:0;right:0;}.DayPickerKeyboardShortcuts_show__bottomRight::before{border-top:26px solid transparent;border-right:33px solid #00a699;bottom:0;right:0;}.DayPickerKeyboardShortcuts_show__bottomRight:hover::before{border-right:33px solid #008489;}.DayPickerKeyboardShortcuts_show__topRight{top:0;right:0;}.DayPickerKeyboardShortcuts_show__topRight::before{border-bottom:26px solid transparent;border-right:33px solid #00a699;top:0;right:0;}.DayPickerKeyboardShortcuts_show__topRight:hover::before{border-right:33px solid #008489;}.DayPickerKeyboardShortcuts_show__topLeft{top:0;left:0;}.DayPickerKeyboardShortcuts_show__topLeft::before{border-bottom:26px solid transparent;border-left:33px solid #00a699;top:0;left:0;}.DayPickerKeyboardShortcuts_show__topLeft:hover::before{border-left:33px solid #008489;}.DayPickerKeyboardShortcuts_showSpan{color:#fff;position:absolute;}.DayPickerKeyboardShortcuts_showSpan__bottomRight{bottom:0;right:5px;}.DayPickerKeyboardShortcuts_showSpan__topRight{top:1px;right:5px;}.DayPickerKeyboardShortcuts_showSpan__topLeft{top:1px;left:5px;}.DayPickerKeyboardShortcuts_panel{overflow:auto;background:#fff;border:1px solid #dbdbdb;border-radius:2px;position:absolute;top:0;bottom:0;right:0;left:0;z-index:2;padding:22px;margin:33px;text-align:left;}.DayPickerKeyboardShortcuts_title{font-size:16px;font-weight:700;margin:0;}.DayPickerKeyboardShortcuts_list{list-style:none;padding:0;font-size:14px;}.DayPickerKeyboardShortcuts_close{position:absolute;right:22px;top:22px;z-index:2;}.DayPickerKeyboardShortcuts_close:active{outline:0;}.DayPickerKeyboardShortcuts_closeSvg{height:15px;width:15px;fill:#cacccd;}.DayPickerKeyboardShortcuts_closeSvg:focus,.DayPickerKeyboardShortcuts_closeSvg:hover{fill:#82888a;}.CalendarDay{-moz-box-sizing:border-box;box-sizing:border-box;cursor:pointer;font-size:14px;text-align:center;}.CalendarDay:active{outline:0;}.CalendarDay__defaultCursor{cursor:default;}.CalendarDay__default{background:",null==r||null==(b=r.calendar)||null==(b=b.unselected)?void 0:b.background,";border:",null==r||null==(x=r.calendar)||null==(x=x.unselected)?void 0:x.border,";color:",null==r||null==(y=r.calendar)||null==(y=y.unselected)?void 0:y.color,";}.CalendarDay__default:hover{background:",null==r||null==(w=r.calendar)||null==(w=w.unselected)||null==(w=w["&:hover"])?void 0:w.background,";border:",null==r||null==(C=r.calendar)||null==(C=C.unselected)?void 0:C.border,";color:",null==r||null==(j=r.calendar)||null==(j=j.unselected)||null==(j=j["&:hover"])?void 0:j.color,";}.CalendarDay__hovered_offset{background:#f4f5f5;border:1px double #e4e7e7;color:inherit;}.CalendarDay__outside{border:0;background:#fff;color:#484848;}.CalendarDay__outside:hover{border:0;}.CalendarDay__blocked_minimum_nights{background:#fff;border:1px solid #eceeee;color:#cacccd;}.CalendarDay__blocked_minimum_nights:active,.CalendarDay__blocked_minimum_nights:hover{background:#fff;color:#cacccd;}.CalendarDay__highlighted_calendar{background:#ffe8bc;color:#484848;}.CalendarDay__highlighted_calendar:active,.CalendarDay__highlighted_calendar:hover{background:",null==r||null==(k=r.calendar)||null==(k=k.selected)?void 0:k.background,";opacity:0.8;color:",null==r||null==(T=r.calendar)||null==(T=T.selected)?void 0:T.color,";}.CalendarDay__selected_span{background:",null==r||null==(_=r.calendar)||null==(_=_.selected)?void 0:_.background,";opacity:0.8;border:1px double ",null==r||null==(I=r.calendar)||null==(I=I.selected)?void 0:I.background,";color:",null==r||null==(A=r.calendar)||null==(A=A.selected)?void 0:A.color,";}.CalendarDay__selected_span:active,.CalendarDay__selected_span:hover{background:",null==r||null==(D=r.calendar)||null==(D=D.selected)?void 0:D.background,";opacity:0.7;border:1px double ",null==r||null==(O=r.calendar)||null==(O=O.selected)?void 0:O.background,";color:",null==r||null==(E=r.calendar)||null==(E=E.selected)?void 0:E.color,";border-radius:0;}.CalendarDay__selected,.CalendarDay__selected:active,.CalendarDay__selected:hover{background:",null==r||null==(L=r.calendar)||null==(L=L.selected)?void 0:L.background,";border:1px double ",null==r||null==(P=r.calendar)||null==(P=P.selected)?void 0:P.background,";color:",null==r||null==(R=r.calendar)||null==(R=R.selected)?void 0:R.color,";}.CalendarDay__hovered_span,.CalendarDay__hovered_span:hover{background:",null==r||null==(N=r.calendar)||null==(N=N.selected)?void 0:N.background,";border:1px double ",null==r||null==(M=r.calendar)||null==(M=M.selected)?void 0:M.background,";opacity:0.8;color:",null==r||null==(z=r.calendar)||null==(z=z.selected)?void 0:z.color,";}.CalendarDay__hovered_span:active{background:",null==r||null==(q=r.calendar)||null==(q=q.selected)?void 0:q.background,";border:1px double ",null==r||null==(B=r.calendar)||null==(B=B.selected)?void 0:B.background,";color:",null==r||null==(V=r.calendar)||null==(V=V.selected)?void 0:V.color,";}.CalendarDay__blocked_calendar,.CalendarDay__blocked_calendar:active,.CalendarDay__blocked_calendar:hover{background:#cacccd;border:1px solid #cacccd;color:#82888a;}.CalendarDay__blocked_out_of_range,.CalendarDay__blocked_out_of_range:active,.CalendarDay__blocked_out_of_range:hover{background:#fff;border:1px solid #e4e7e7;color:#cacccd;}.CalendarDay__hovered_start_first_possible_end{background:#eceeee;border:1px double #eceeee;}.CalendarDay__hovered_start_blocked_min_nights{background:#eceeee;border:1px double #e4e7e7;}.CalendarMonth{color:inherit;background:transparent;text-align:center;vertical-align:top;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.CalendarMonth_table{border-collapse:collapse;border-spacing:0;}.CalendarMonth_verticalSpacing{border-collapse:separate;}.CalendarMonth_caption{color:",null==r||null==(W=r.calendar)||null==(W=W.title)?void 0:W.color,";font-size:",($=null==r||null==(H=r.calendar)||null==(H=H.title)?void 0:H.fontSize)+("number"==typeof $?"px":""),";text-align:center;padding-top:22px;padding-bottom:48px;caption-side:initial;}.CalendarMonth_caption>strong{font-weight:",null==r||null==(Y=r.calendar)||null==(Y=Y.title)?void 0:Y.fontWeight,";}.CalendarMonth_caption__verticalScrollable{padding-top:12px;padding-bottom:7px;}.CalendarMonthGrid{background:transparent;text-align:left;z-index:0;}.CalendarMonthGrid__animating{z-index:1;}.CalendarMonthGrid__horizontal{position:absolute;left:0;}.CalendarMonthGrid__vertical,.CalendarMonthGrid__vertical_scrollable{margin:0 auto;}.CalendarMonthGrid_month__horizontal{display:inline-block;vertical-align:top;min-height:100%;}.CalendarMonthGrid_month__hideForAnimation{position:absolute;z-index:-1;opacity:0;pointer-events:none;}.CalendarMonthGrid_month__hidden{visibility:hidden;}.DayPickerNavigation{position:relative;z-index:2;}.DayPickerNavigation__horizontal{height:0;}.DayPickerNavigation__verticalScrollable_prevNav{z-index:1;}.DayPickerNavigation__verticalDefault{position:absolute;width:100%;height:52px;bottom:0;left:0;}.DayPickerNavigation__verticalScrollableDefault{position:relative;}.DayPickerNavigation__bottom{height:auto;}.DayPickerNavigation__bottomDefault{-webkit-box-pack:justify;-ms-flex-pack:justify;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-justify-content:space-between;justify-content:space-between;}.DayPickerNavigation_button{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:0;padding:0;margin:0;}.DayPickerNavigation_button__default{border:",null==r||null==(G=r.calendar)||null==(G=G.arrows)?void 0:G.border,";background-color:",null==r||null==(U=r.calendar)||null==(U=U.arrows)?void 0:U.background,";color:",null==r||null==(K=r.calendar)||null==(K=K.arrows)?void 0:K.border,";}.DayPickerNavigation_button__default:focus,.DayPickerNavigation_button__default:hover{border:",null==r||null==(X=r.calendar)||null==(X=X.arrows)||null==(X=X["&:hover"])?void 0:X.border,";background-color:",null==r||null==(Q=r.calendar)||null==(Q=Q.arrows)||null==(Q=Q["&:hover"])?void 0:Q.background,";}.DayPickerNavigation_button__default:active{background:#f2f2f2;}.DayPickerNavigation_button__disabled{cursor:default;border:1px solid #f2f2f2;}.DayPickerNavigation_button__disabled:focus,.DayPickerNavigation_button__disabled:hover{border:1px solid #f2f2f2;}.DayPickerNavigation_button__disabled:active{background:0 0;}.DayPickerNavigation_button__horizontalDefault{position:absolute;top:18px;line-height:0.78;border-radius:",null==r||null==(J=r.calendar)||null==(J=J.arrows)?void 0:J.borderRadius,";padding:6px 9px;}.DayPickerNavigation_bottomButton__horizontalDefault{position:static;margin:-10px 22px 30px;}.DayPickerNavigation_leftButton__horizontalDefault{left:13px;}.DayPickerNavigation_rightButton__horizontalDefault{right:31px;}.DayPickerNavigation_button__verticalDefault{padding:5px;background:#fff;box-shadow:0 0 5px 2px rgba(0, 0, 0, 0.1);position:relative;display:inline-block;text-align:center;height:100%;width:50%;}.DayPickerNavigation_nextButton__verticalDefault{border-left:0;}.DayPickerNavigation_nextButton__verticalScrollableDefault,.DayPickerNavigation_prevButton__verticalScrollableDefault{width:100%;}.DayPickerNavigation_svg__horizontal{height:19px;width:19px;fill:",null==r||null==(Z=r.calendar)||null==(Z=Z.arrows)?void 0:Z.fill,";display:block;}.DayPickerNavigation_svg__vertical{height:42px;width:42px;fill:#484848;}.DayPickerNavigation_svg__disabled{fill:#f2f2f2;}.DayPicker{position:relative;text-align:left;}.DayPicker__verticalScrollable{height:100%;}.DayPicker__hidden{visibility:hidden;}.DayPicker__withBorder{box-shadow:0 2px 6px rgba(0, 0, 0, 0.05),0 0 0 1px rgba(0, 0, 0, 0.07);border-radius:3px;}.DayPicker_portal__horizontal{box-shadow:none;position:absolute;left:50%;top:50%;}.DayPicker_portal__vertical{position:initial;}.DayPicker_focusRegion{outline:0;}.DayPicker_calendarInfo__horizontal,.DayPicker_wrapper__horizontal{display:inline-block;vertical-align:top;}.DayPicker_weekHeaders{position:relative;}.DayPicker_weekHeaders__horizontal{margin-left:9px;}.DayPicker_weekHeader{color:inherit;position:absolute;top:62px;z-index:2;text-align:left;}.DayPicker_weekHeader__vertical{left:50%;}.DayPicker_weekHeader__verticalScrollable{top:0;display:table-row;border-bottom:1px solid #dbdbdb;background:#fff;margin-left:0;left:0;width:100%;text-align:center;}.DayPicker_weekHeader_ul{list-style:none;margin:1px 0;padding-left:0;padding-right:0;font-size:14px;}.DayPicker_weekHeader_li{display:inline-block;text-align:center;}.DayPicker_transitionContainer{position:relative;overflow:hidden;border-radius:3px;}.DayPicker_transitionContainer__horizontal{-webkit-transition:height 0.2s ease-in-out;-moz-transition:height 0.2s ease-in-out;transition:height 0.2s ease-in-out;}.DayPicker_transitionContainer__vertical{width:100%;}.DayPicker_transitionContainer__verticalScrollable{padding-top:20px;height:100%;position:absolute;top:0;bottom:0;right:0;left:0;overflow-y:scroll;}.DateInput__block{width:100%;}.DateInput__disabled{background:#f2f2f2;color:#dbdbdb;}.DateInput_input{width:100%;}.DateInput_input__small{font-size:15px;line-height:18px;letter-spacing:0.2px;padding:7px 7px 5px;}.DateInput_input__regular{font-weight:auto;}.DateInput_input__readOnly{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.DateInput_input__disabled{background:#f2f2f2;font-style:italic;}.DateInput_screenReaderMessage{border:0;clip:rect(0, 0, 0, 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;}.DateInput_fang{position:absolute;width:20px;height:10px;left:22px;z-index:2;}.DateInput_fangShape{fill:#fff;}.DateInput_fangStroke{stroke:#dbdbdb;fill:transparent;}.DateRangePickerInput__disabled{background:#f2f2f2;}.DateRangePickerInput__withBorder{border-radius:2px;border:1px solid #dbdbdb;}.DateRangePickerInput__rtl{direction:rtl;}.DateRangePickerInput__block{display:block;}.DateRangePickerInput_arrow{display:inline-block;vertical-align:middle;color:#484848;align-self:center;}.DateRangePickerInput_arrow_svg{vertical-align:middle;fill:#484848;height:18px;width:18px;}.DateRangePickerInput_clearDates__small{padding:6px;}.DateRangePickerInput_clearDates__hide{cursor:inherit;&:hover{background:unset;}}.DateRangePickerInput_clearDates_svg{fill:rgb(75 85 99);stroke:rgb(75 85 99);height:8px;width:8px;vertical-align:middle;}.DateRangePickerInput_clearDates_svg__small{height:9px;}.DateRangePickerInput_calendarIcon{background:0 0;border:0;color:inherit;font:inherit;line-height:normal;overflow:visible;cursor:pointer;display:inline-block;vertical-align:middle;padding:10px;margin:0 5px 0 10px;}.DateRangePickerInput_calendarIcon_svg{fill:#82888a;height:15px;width:14px;vertical-align:middle;}.DateRangePicker{position:relative;display:grid;align-content:center;}.DateRangePicker__block{display:block;}.DateRangePicker_picker{z-index:1;background-color:#fff;position:absolute;}.DateRangePicker_picker__rtl{direction:rtl;}.DateRangePicker_picker__directionLeft{left:0;}.DateRangePicker_picker__directionRight{right:0;}.DateRangePicker_picker__portal{background-color:rgba(0, 0, 0, 0.3);position:fixed;top:0;left:0;height:100%;width:100%;}.DateRangePicker_picker__fullScreenPortal{background-color:#fff;}.DateRangePicker_closeButton{background:0 0;border:0;color:inherit;font:inherit;line-height:normal;overflow:visible;cursor:pointer;position:absolute;top:0;right:0;padding:15px;z-index:2;}.DateRangePicker_closeButton:focus,.DateRangePicker_closeButton:hover{color:darken(#cacccd, 10%);text-decoration:none;}.DateRangePicker_closeButton_svg{height:15px;width:15px;fill:#cacccd;}","")),u5({height:"100%"})),"data-themeapi":"forms.dateTime.calendar",children:h.jsx(F.DayPickerRangeController,{initialVisibleMonth:function(){return S()},startDate:null==(n=e.dates)?void 0:n.start,endDate:null==(i=e.dates)?void 0:i.end,onDatesChange:e.onDatesChange,focusedInput:en,onFocusChange:function(e){ei(e||"startDate")},numberOfMonths:2,hideKeyboardShortcutsPanel:!0,minimumNights:0,noBorder:!0,isOutsideRange:function(){return!1},renderMonthElement:function(e){var t=e.month,n=e.onYearSelect;return h.jsxs("span",{children:[h.jsxs("span",{className:""+or.bold,children:[t.format("MMMM")," "]}),h.jsx("select",{value:t.year(),onChange:function(e){return n(t,e.target.value)},className:""+cT.picker,"data-testid":"year-select",children:Array.from({length:25},function(e,t){return S().year()-t}).map(function(e){return h.jsx("option",{value:e,children:e},"year-"+e)})})]})}})})},cM=function(e){var t;return h.jsx(uQ,{className:lr(u9("button-group",e,[])),gap:e.gap||"0.75rem",justifyContent:null!=(t=null==e?void 0:e.buttons)?t:"start","data-component":e["data-component"],children:e.children})},cz=["sm","primary","secondary","disabled","loading","suppressed"],cq=aL(function(e){var t,n,i,r,a,l,s=lu(),u=null!=e&&e.primary?"primary":null!=e&&e.secondary?"secondary":e.suppressed?"suppressed":"secondary";return h.jsx("button",en({},((t={})["data-componentoverride"]="renderButtonComponent",t),{"data-component":null==e?void 0:e["data-component"],"data-testid":e.testId,onClick:e.onClickWithDevToolCheck&&e.onClickWithDevToolCheck(e.onClick),disabled:e.disabled,className:lr(u9("button",e,cz),null==e?void 0:e.className,""+(n=null==s?void 0:s.buttons,i=e.themeOverride,rY(en({},oo.button,{transitionDuration:"150ms",transitionProperty:"all",transitionTimingFunction:"cubic-bezier(0.4,0,0.2,1)",cursor:"pointer",letterSpacing:"normal",whiteSpace:"nowrap",transform:"translateY(0) scale(1)",lineHeight:"inherit","&:disabled":{opacity:.7,cursor:"inherit"},"&:disabled:hover":{opacity:.95,cursor:"inherit"},variants:{type:{primary:{},secondary:{},suppressed:{}},highlight:{false:{outline:"2px solid transparent",outlineOffset:-2},true:{outline:"2px solid rgb(239, 68, 68)",outlineOffset:-2}},block:{true:{display:"block",width:"100%"}}},compoundVariants:[{type:"primary",css:en({},null==n?void 0:n.primary,i)},{type:"secondary",css:en({},null==n?void 0:n.secondary,{"&:hover":en({},null==n||null==(r=n.secondary)?void 0:r["&:hover"]),"&:disabled":en({},null==n||null==(a=n.secondary)?void 0:a["&:disabled"]),"&:hover:disabled":en({},null==n||null==(l=n.secondary)?void 0:l["&:hover:disabled"])},i)},{type:"suppressed",css:en({},null==n?void 0:n.secondary,i,{background:"transparent",paddingLeft:4,paddingRight:4,"&:disabled":{background:"transparent"}})}]})))({type:u,highlight:!(null==e||!e.highlight),block:null==e?void 0:e.block})),onMouseEnter:e.onMouseEnter,"data-themeapi":e.internal?void 0:"buttons."+u,children:e.icon?h.jsxs(uQ,{gap:"0.25rem",alignItems:"center",children:[h.jsx(uM,{width:20,children:e.icon.Icon()}),h.jsx("span",{children:e.children})]}):h.jsx(o.Fragment,{children:e.children})}))},"renderButtonComponent"),cB=function(e){var t=e.textOverride;return h.jsxs(uQ,{direction:"column",grow:1,children:[h.jsx(uM,{flexGrow:1,children:e.children}),h.jsx(uM,{children:h.jsxs(uQ,{justifyContent:"space-between",children:[h.jsx(cM,{children:h.jsx(cq,{onClick:e.onClearAll,children:t?t("date_picker.button_clear","Clear"):"Clear"})}),h.jsxs(cM,{buttons:"end",children:[h.jsx(cq,{onClick:e.onCancel,children:t?t("date_picker.button_close","Close"):"Close"}),h.jsx(cq,{onClick:function(){return e.onApply()},primary:!0,disabled:e.applyDisabled,children:t?t("date_picker.button_apply","Apply"):"Apply"})]})]})})]})},cV=function(e,t){if(!t)throw Error("time is null or undefined");var n=S(e),i=S(t);return(n=n.hour(i.hour()).minute(i.minute()).second(i.second())).toDate()},cW=function(e){var t,n,i,r,a,l,s,u,d,c,p=e.dateFormat,f=e.textOverride,m=e.fixed,v=e.setState,g=e.setTime,b=e.timeFormat,x=e.time,y=lu(),w=function(e){return e?e.format(p):void 0},C=o.useState(!1),j=C[0],S=C[1];o.useEffect(function(){j&&S(!1)},[j]);var F=o.useCallback(function(e){var t=e.startDate,n=e.endDate;g({start:t?cA("00:00",b):null,end:n?cA("23:59",b):null}),t&&n&&t.isAfter(n)?v({fixed:{start:n,end:t},relative:void 0,type:pP.Fixed}):v({fixed:{start:t,end:n},relative:void 0,type:pP.Fixed})},[]),k=o.useCallback(function(e){g({start:e.start,end:e.end})},[]),T=o.useCallback(function(){v({fixed:{end:null,start:null},relative:void 0,type:pP.Fixed}),g({start:null,end:null}),S(!0)},[e.onClear]);return h.jsx(cB,{onClearAll:e.onClearAll,textOverride:e.textOverride,onCancel:e.onCancel,onApply:e.onApply,applyDisabled:!(null!=m&&m.start&&null!=m&&m.end),children:h.jsxs(o.Fragment,{children:[h.jsx("div",{className:u5({width:"date_time"!==e.type?"50%":"66%"}),children:h.jsx("div",{className:""+cT.inputsWrapper(null==y||null==(t=y.forms)?void 0:t.dateTime),"data-themeapi":"forms.dateTime.input",children:h.jsxs("div",{className:lr(""+cT.inputs,u5({height:32})),children:[h.jsxs(uQ,{gap:0,alignItems:"center",children:[h.jsx(c_,{name:"start_date",value:w(null!=(n=null==m?void 0:m.start)?n:null),label:f?f("start_date","Start Date"):"Start Date",onChange:function(e){var t;v({fixed:{start:cH(e,p),end:null!=(t=null==m?void 0:m.end)?t:null},type:pP.Fixed})},dateFormat:p}),"date_time"===e.type&&h.jsx(o.Fragment,{children:h.jsx(cI,{label:f?f("time","Time"):"Time",name:"start_time",onChange:function(e){k({start:e,end:x.end})},className:cT.dateInput(null==y||null==(i=y.forms)?void 0:i.dateTime)+" "+cT.timeInput(null==y||null==(r=y.forms)?void 0:r.dateTime),onClick:function(e){return e.stopPropagation()},timeFormat:b,value:x.start,shouldClear:j})})]}),h.jsx(cL,{}),h.jsxs(uQ,{gap:0,children:[h.jsx(c_,{name:"end_date",value:w(null!=(a=null==m?void 0:m.end)?a:null),label:f?f("end_date","End Date"):"End Date",onChange:function(e){var t;v({fixed:{end:cH(e,p),start:null!=(t=null==m?void 0:m.start)?t:null},type:pP.Fixed})},dateFormat:p}),"date_time"===e.type&&h.jsx(cI,{label:f?f("time","Time"):"Time",name:"end_time",onChange:function(e){k({start:x.start,end:e})},className:cT.dateInput(null==y||null==(l=y.forms)?void 0:l.dateTime)+" "+cT.timeInput(null==y||null==(s=y.forms)?void 0:s.dateTime),onClick:function(e){return e.stopPropagation()},timeFormat:b,value:x.end,shouldClear:j})]}),h.jsx("div",{className:""+cT.clearContainer(),children:h.jsx(ds,{onClear:T,className:""+cT.clearButton(null==y||null==(u=y.forms)?void 0:u.dateTime),"aria-label":f?f("clear_date","Clear Dates"):"Clear Dates",fill:null==y||null==(d=y.forms)||null==(d=d.select)?void 0:d.indicatorColor,stroke:null==y||null==(c=y.forms)||null==(c=c.select)?void 0:c.indicatorColor})})]})})}),h.jsx(cN,{dates:m,onDatesChange:F,textOverride:f})]})})},cH=function(e,t){return S(e,t,!0).isValid()?S(e,t):null},cY=Object.assign(function(){return null},{list:function(e){var t;return rY({position:"relative",width:"100%",display:"grid",gridTemplateColumns:null==e?void 0:e.columns,padding:null!=(t=null==e?void 0:e.padding)?t:"0 0.5rem",margin:"0 0 1.5rem 0",borderBottom:null!=e&&e.theme&&null!=e&&e.theme.borderBottom?null==e?void 0:e.theme.borderBottom:"0px solid transparent"})},button:function(e){var t,n,i,r,o,a,l,s,u,d,c,p,f,m,h,v,g,b,x,y,w,C,j,S,F,k,T;return rY({lineHeight:"1rem",letterSpacing:"0.1em",whiteSpace:"nowrap",position:"relative",variants:{state:{unselected:{borderRadius:null==e||null==(t=e.unselected)?void 0:t.borderRadius,padding:null==e||null==(n=e.unselected)?void 0:n.padding,fontSize:null==e||null==(i=e.unselected)?void 0:i.fontSize,fontWeight:null==e||null==(r=e.unselected)?void 0:r.fontWeight,color:null==e||null==(o=e.unselected)?void 0:o.color,boxShadow:null==e||null==(a=e.unselected)?void 0:a.boxShadow,background:null!=(l=null==e||null==(s=e.unselected)?void 0:s.background)?l:"inherit",border:null==e||null==(u=e.unselected)?void 0:u.border,borderRight:null==e||null==(d=e.unselected)?void 0:d.borderRight,borderLeft:null==e||null==(c=e.unselected)?void 0:c.borderLeft,borderTop:null==e||null==(p=e.unselected)?void 0:p.borderTop,borderBottom:null==e||null==(f=e.unselected)?void 0:f.borderBottom,"&:hover":en({},rW,null==e||null==(m=e.unselected)?void 0:m["&:hover"])},selected:{borderRadius:null==e||null==(h=e.selected)?void 0:h.borderRadius,padding:null==e||null==(v=e.selected)?void 0:v.padding,fontSize:null==e||null==(g=e.selected)?void 0:g.fontSize,fontWeight:null==e||null==(b=e.selected)?void 0:b.fontWeight,color:null==e||null==(x=e.selected)?void 0:x.color,boxShadow:null==e||null==(y=e.selected)?void 0:y.boxShadow,background:null==e||null==(w=e.selected)?void 0:w.background,border:null==e||null==(C=e.selected)?void 0:C.border,borderRight:null==e||null==(j=e.selected)?void 0:j.borderRight,borderLeft:null==e||null==(S=e.selected)?void 0:S.borderLeft,borderTop:null==e||null==(F=e.selected)?void 0:F.borderTop,borderBottom:null==e||null==(k=e.selected)?void 0:k.borderBottom,"&:hover":en({},null==e||null==(T=e.selected)?void 0:T["&:hover"])}},button:{true:{cursor:"pointer",padding:"0.5rem",border:0,whiteSpace:"nowrap"}}}})},panel:function(e,t){return rY({paddingLeft:null!=e?e:"0.5rem",paddingRight:null!=t?t:"0.5rem"})},hasChanges:rY({fontSize:8})}),cG=["children","paddingLeft","paddingRight","className"],cU=Object.assign(function(){return null},{Group:function(e){return h.jsx(uh.Group,en({},e,{children:h.jsx("div",{className:u8("tab-group"),children:e.children})}))},Button:function(e){var t=lu();return h.jsx(uh,en({},e,{className:""+or.button,children:function(n){var i,r=n.selected;return h.jsx("div",{className:lr(u9("tab-button",{selected:r},["selected"]),""+cY.button(null!=(i=e.tabsStyleOverride)?i:null==t?void 0:t.tabs)({state:r?"selected":"unselected"})),"data-themeapi":"tabs-"+(r?"selected":"unselected"),children:e.children})}}))},Panel:function(e){var t=e.children,n=e.paddingLeft,i=e.paddingRight,r=e.className,o=el(e,cG);return h.jsx(uh.Panel,en({className:lr(u8("tab-panel"),""+cY.panel(n,i),r)},o,{children:t}))},Panels:function(e){return h.jsx(uh.Panels,en({},e,{children:e.children}))},List:function(e){var t,n=lu();return h.jsx(uh.List,en({className:lr(u8("tab-button-list"),""+cY.list({columns:null==e?void 0:e.columns,theme:null!=(t=null==e?void 0:e.tabsStyleOverride)?t:null==n?void 0:n.tabs,padding:null==e?void 0:e.padding}))},e,{"data-themeapi":"tabs","data-chipposition":"above.left",children:e.children}))}}),cK=function(e,t){var n,i=e.value;return!!e.field&&!!e.op&&(i&&"object"==typeof i&&"unit"in i&&"value"in i&&"timeFrame"in i?ta(i):!(!t&&[void 0,NaN,""].includes(i)))},cX=function(e){if(!e.field)return null;var t,n,i,r,o=a_().textOverride,a=(t=e.field,n=e.queryEngineConfig.supportedOperators,i={},[].concat(t.allowedOperators).forEach(function(e){var r=n[e];r.validDataTypes.includes(t.dataType)&&(i[e]=r)}),i),l=[].concat(Object.keys(a)).flatMap(function(t,n){return null!=e&&e.isAList||!["is_one_of","is_not_one_of"].includes(t)?[{label:a[t].publicName,value:t,testId:e.testId+"-pick-op-"+n}]:[]});"allowedOperators"in e.field&&e.field.allowedOperators.includes("=")&&l.push({label:o("math_op_is_null","Is null"),value:"is_null",testId:"is-null"}),"allowedOperators"in e.field&&e.field.allowedOperators.includes("!=")&&l.push({label:o("math_op_is_not_null","Is not null"),value:"is_not_null",testId:"is-not-null"});var s=e.selected;return"!="==e.selected&&null===e.value?s="is_not_null":"="==e.selected&&null===e.value&&(s="is_null"),h.jsx(d_,{label:o("operator","Operator"),labelHidden:!0,id:null==e?void 0:e.id,testId:e.testId+"-pick-op",onChange:function(t){e.onChange("is_not_null"==t?{op:"!=",value:null}:"is_null"==t?{op:"=",value:null}:{op:t})},options:null!=(r=e.supportedQueryOperators)?r:l,selected:s,textOverride:o})},cQ=Object.assign(function(){return null},{remove:function(e){return rY(en({"& svg":en({},rW,{fill:"#e5e7eb"})},e?{}:{"&:hover  svg":en({},rW,{fill:"#de0938",cursor:"pointer"})}))},complete:function(e){return rY(en({},e?{}:{"& svg":en({},rW,{fill:"rgb(229, 231, 235)"})}))}}),cJ=function(e,t,n,i,r,a){var l=o.useState(!1),s=l[0],u=l[1];try{var d=function(e,t){if("dataSetId"in t){var n=nu(t).flatMap(function(t){var n=iP(e,t);return te(n)?[n]:[]});return JSON.stringify(n)}return""}(r,e);return o.useEffect(function(){var r,o=new AbortController;return(r=et($().mark(function r(){var a;return $().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u(!0),r.next=3,cr(e,t,o.signal,i);case 3:(a=r.sent)?(u(!1),o.signal.aborted||n(a)):n([null]);case 5:case"end":return r.stop()}},r)})),function(){return r.apply(this,arguments)})(),function(){o.abort("useQueryEffect unmounted")}},[JSON.stringify({componentType:a,dataSetId:r.id,queries:e,filterConfig:i,watchCustomFieldChangesKey:d})]),{queriesAreChanging:s}}catch(c){if(u(!1),c instanceof t7)return{queriesAreChanging:!1};throw c}},cZ=function(e,t,n,i,r,o){var a=iA(t,{queryEngineConfig:i}),l=n.preAggregated&&a.setDataAttributesFromPreAggregatedDataSet?a.setDataAttributesFromPreAggregatedDataSet(a.init(n.id),n):a.autoGenerate(n);if(o)try{var s,u,d,c,p,f,m=(s=o.attributes,p={},f=c$.includes("measure")?"measure":null,c$.forEach(function(e){if(e in s&&e in l){var t=s[e];if(e!==f||!Array.isArray(t))return void(p[e]=t);p[f]=t.map(function(e){if(t4(e))return e;var t=iP(n,e.field);return en({},e,{function:eK(i,t.dataType)[0]})})}}),p);eE("Swapping component type");var h=a.setAttributes(l,en({type:t},m));return r(h,n,"initial"),ae(h)}catch(v){eE("Component properties are not compatible with new type",v)}var g=r(l,n,"initial");return ae(a.setAttributes(l,g))},c$=["measure","order","timeDimension","dimension","filter","displayTitle","displaySubject","limit"],c0=function(){var e,t,n=a_(),i=n.onlyViewTypes,r=n.queryEngineConfig,a=n.textOverride;o.useState(null);var l=cn(),s=l.dashboard,u=l.componentEditor,d=l.runQueriesCallback,c=l.dispatch,p=l.trackEvent,f=a_(),m=f.featureToggles,h=f.numberFormatOptions,v=f.mode,g=f.dataPanel,b=f.formatPanel,x=f.onEditorUpdate,y=(null==u?void 0:u.component)||null;if(o.useEffect(function(){var e,t=(e=et($().mark(function e(){var t;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cZ(0,i(s.dataSets[0])[0],s.dataSets[0],r,x);case 2:t=e.sent,u&&c(en({type:"startEditingComponent",component:t},u.target));case 4:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)});y||t()},[]),!y)return null;var w=iA(y.attributes.type,{queryEngineConfig:r}),C=iE(s.dataSets,y.attributes.dataSetId);if(!C)return null;var j,S=null!=u&&null!=(e=u.target)&&e.libraryIndex||0===(null==u||null==(t=u.target)?void 0:t.libraryIndex)?"library":"dashboard",F=function(e){if(y&&w){var t,n=x(e,C,"edit");e.type!==y.attributes.type&&(w=iA(e.type,{queryEngineConfig:r}));try{t=w.setAttributes(e,n)}catch(i){console.warn("[VIZZLY] Not applying changes from `onEditorUpdate` because of a validation error.",i),t=e}var o=en({},y,{attributes:t});c({type:"updateEditorComponent",component:o})}};return{setLocalFilters:function(e){c({type:"updateEditorComponent",component:en({},y,{localFilters:e})})},setParameterUpdate:function(e){var t=d4(y,e);c({type:"updateEditorComponent",component:en({},t)})},queryEngineConfig:r,selectedComponent:y.attributes.type,onSelectViewType:function(e,t){var n,i,o,a,l,s,u;n=null!=t&&t.customView?(a=t.customView,u=(s=iA("custom",{queryEngineConfig:r})).setAttributes(s.init(C.id,{customViewId:a.id}),{type:"custom"}),x(u,C,"initial"),ae(u)):cZ(0,e,C,r,x,y),c({type:"updateEditorComponent",component:n})},dataPanel:g,formatPanel:b,setDataSet:(j=et($().mark(function e(t){var n,o,a,l;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u&&u.component&&t)||!(o=iN(s.dataSets,t)[0])){e.next=10;break}return(a=i(o)).includes(l=u.component.attributes.type)||(l=a[0]),e.next=8,cZ(0,l,o,r,x);case 8:c({type:"updateEditorComponent",component:e.sent});case 10:case"end":return e.stop()}},e)})),function(e){return j.apply(this,arguments)}),featureToggles:m,dashboard:s,setDataSets:function(e){c({type:"setDataSets",dataSets:e})},dataSet:C,viewOptions:i,numberFormatOptions:h,setAttributes:F,setPartialAttributes:function(e){w&&F(w.setAttributes(y.attributes,e))},setResults:function(e){c({type:"setResultsForComponentInEditor",results:e})},mode:v,origin:S,componentEditor:u,component:y,trackEvent:p,runQueriesCallback:d,dispatch:c,textOverride:a}},c1=rG(85),c2=function(e){return h.jsx("div",{"aria-valuenow":e.valueNow,"aria-valuemin":e.valueMin,"aria-valuemax":e.valueMax,"aria-label":e.title,children:h.jsxs(uQ,{direction:"column",gap:"0.25rem",children:[h.jsxs(uQ,{justifyContent:"space-between",alignItems:"end",children:[h.jsx("span",{className:u5({fontSize:"0.8rem",textAlign:"left"}),children:e.showTitle?e.title:""}),e.showValue&&h.jsx(uM,{as:"p",margin:0,children:null==e?void 0:e.displayValueNow})]}),h.jsx("div",{className:c5,"data-percentage":e.percentage,children:h.jsx("div",{className:c7(e.color,e.percentage)})})]})})},c5=u5({height:10,backgroundColor:c1,borderRadius:"9999px",position:"relative",overflow:"hidden",width:"100%"}),c7=function(e,t){return u5({height:"100%",width:Math.max(0,Math.min(100,t))+"%",backgroundColor:"string"==typeof e?e:null==e?void 0:e[0],borderRadius:"inherit",transition:"width 0.3s ease"})},c4=function(e){var t,n,i,r,o=null!=(t=e.radius)?t:120,a=null!=(n=e.stroke)?n:15,l=o-2*a,s=2*l*Math.PI,u=s-e.percentage/100*s,d="gradient-"+Math.random().toString(36).substr(2,9);return h.jsxs(uQ,{direction:"column",alignItems:"center",children:[h.jsxs("div",{style:{position:"relative"},"aria-valuenow":e.valueNow,"aria-valuemin":e.valueMin,"aria-valuemax":e.valueMax,"aria-label":e.title,children:[h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:1.25*o,height:1.25*o,viewBox:"0 0 "+2*o+" "+2*o,children:[h.jsx("defs",{children:h.jsx("linearGradient",{id:d,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:Array.isArray(r=e.color)?r.map(function(e,t,n){return h.jsx("stop",{offset:t/(n.length-1)*100+"%",stopColor:e},t)}):[h.jsx("stop",{offset:"0%",stopColor:r},"0"),h.jsx("stop",{offset:"100%",stopColor:r},"1")]})}),h.jsx("circle",{stroke:c1,fill:"transparent",strokeWidth:a,strokeDasharray:s+" "+s,r:l,cx:o,cy:o}),h.jsx("circle",{stroke:"url(#"+d+")",fill:"transparent",strokeWidth:a,strokeDasharray:s+" "+s,style:{strokeDashoffset:u},r:l,cx:o,cy:o,transform:"rotate(-90 "+o+" "+o+")",strokeLinecap:"round"})]}),e.showValue&&h.jsx("p",{className:""+c3,children:null!=(i=null==e?void 0:e.displayValueNow)?i:e.percentage+"%"})]}),e.showTitle&&h.jsx("div",{className:or.textSize("sm")+" "+c6,children:e.title})]})},c3=rY({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",margin:0}),c6=rY({textAlign:"center",height:20}),c8=function(e){var t=Number(rr(e.valueNow,e.valueMax).toFixed(2));return h.jsx(e.type===iu.Circular?c4:c2,en({},e,{percentage:t}))},c9=Object.assign(c8,{View:c8,Circular:c4,Linear:c2}),pe={name:"blres4",styles:"--tw-rotate:90deg;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))"},pt=function(e){return h.jsx("svg",en({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},e,{children:h.jsx("path",{d:"M448 32C483.3 32 512 60.65 512 96V416C512 451.3 483.3 480 448 480H64C28.65 480 0 451.3 0 416V96C0 60.65 28.65 32 64 32H448zM152 96H64V160H152V96zM208 160H296V96H208V160zM448 96H360V160H448V96zM64 288H152V224H64V288zM296 224H208V288H296V224zM360 288H448V224H360V288zM152 352H64V416H152V352zM208 416H296V352H208V416zM448 352H360V416H448V352z"})}))},pn={areaChart:function(e){var t;return h.jsx("svg",en({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},e,{children:h.jsx("path",{d:"M500 384c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v308h436zM372.7 159.5L288 216l-85.3-113.7c-5.1-6.8-15.5-6.3-19.9 1L96 248v104h384l-89.9-187.8c-3.2-6.5-11.4-8.7-17.4-4.7z"})}))},barChart:function(e){var t;return h.jsx("svg",en({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},e,{children:h.jsx("path",{d:"M160 80C160 53.49 181.5 32 208 32H240C266.5 32 288 53.49 288 80V432C288 458.5 266.5 480 240 480H208C181.5 480 160 458.5 160 432V80zM0 272C0 245.5 21.49 224 48 224H80C106.5 224 128 245.5 128 272V432C128 458.5 106.5 480 80 480H48C21.49 480 0 458.5 0 432V272zM400 96C426.5 96 448 117.5 448 144V432C448 458.5 426.5 480 400 480H368C341.5 480 320 458.5 320 432V144C320 117.5 341.5 96 368 96H400z"})}))},horizontalBarChart:function(e){var t;return h.jsx("svg",en({css:pe,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},e,{children:h.jsx("path",{d:"M160 80C160 53.49 181.5 32 208 32H240C266.5 32 288 53.49 288 80V432C288 458.5 266.5 480 240 480H208C181.5 480 160 458.5 160 432V80zM0 272C0 245.5 21.49 224 48 224H80C106.5 224 128 245.5 128 272V432C128 458.5 106.5 480 80 480H48C21.49 480 0 458.5 0 432V272zM400 96C426.5 96 448 117.5 448 144V432C448 458.5 426.5 480 400 480H368C341.5 480 320 458.5 320 432V144C320 117.5 341.5 96 368 96H400z"})}))},lineChart:function(e){var t;return h.jsx("svg",en({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},e,{children:h.jsx("path",{d:"M64 400C64 408.8 71.16 416 80 416H480C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H80C35.82 480 0 444.2 0 400V64C0 46.33 14.33 32 32 32C49.67 32 64 46.33 64 64V400zM342.6 278.6C330.1 291.1 309.9 291.1 297.4 278.6L240 221.3L150.6 310.6C138.1 323.1 117.9 323.1 105.4 310.6C92.88 298.1 92.88 277.9 105.4 265.4L217.4 153.4C229.9 140.9 250.1 140.9 262.6 153.4L320 210.7L425.4 105.4C437.9 92.88 458.1 92.88 470.6 105.4C483.1 117.9 483.1 138.1 470.6 150.6L342.6 278.6z"})}))},pieChart:function(e){var t;return h.jsxs("svg",en({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},e,{children:[h.jsx("path",{d:"M2 10a8 8 0 018-8v8h8a8 8 0 11-16 0z"}),h.jsx("path",{d:"M12 2.252A8.014 8.014 0 0117.748 8H12V2.252z"})]}))},scatterChart:function(e){var t;return h.jsxs("svg",en({viewBox:"0 0 2134 2134",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1.5}},e,{children:[h.jsx("path",{d:"M208.333 208.334v1716.66M214.91 1926.73h1716.66",style:{strokeWidth:"166.67px"}}),h.jsx("circle",{cx:987.916,cy:920.416,r:187.917,style:{strokeWidth:"8.33px",strokeLinecap:"square"}}),h.jsx("circle",{cx:708.749,cy:1516.25,r:187.917,style:{strokeWidth:"8.33px",strokeLinecap:"square"}}),h.jsx("circle",{cx:1633.75,cy:907.916,r:187.917,style:{strokeWidth:"8.33px",strokeLinecap:"square"}}),h.jsx("circle",{cx:1775.42,cy:307.916,r:187.917,style:{strokeWidth:"8.33px",strokeLinecap:"square"}})]}))},singleStat:function(e){var t;return h.jsx("svg",en({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},e,{children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5l-3.9 19.5m-2.1-19.5l-3.9 19.5"})}))},dataTable:function(e){return pt(e)},basicTable:function(e){return pt(e)},comboChart:function(e){var t;return h.jsx("svg",en({},e,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512.000000 512.000000",children:h.jsxs("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",stroke:"currentColor",children:[h.jsx("path",{d:"M4840 4671 c-138 -42 -207 -183 -151 -306 l18 -40 -337 -483 -337 -483 -74 -2 c-51 -2 -84 -8 -106 -21 l-31 -19 -169 121 c-92 66 -220 158 -283 204 l-115 84 -2 48 c-3 69 -20 113 -60 157 -71 79 -205 93 -296 30 -62 -42 -100 -120 -95 -191 l3 -51 -308 -240 -308 -240 -50 9 c-118 22 -231 -44 -259 -150 -7 -24 -15 -49 -19 -57 -6 -12 -204 -122 -474 -263 l-78 -41 -42 24 c-62 34 -157 33 -219 -4 -26 -15 -56 -39 -68 -54 l-21 -27 -255 39 -255 39 -15 35 c-39 93 -112 141 -211 141 -134 -1 -223 -91 -223 -227 1 -131 92 -223 222 -223 65 0 123 26 170 74 l35 36 224 -35 c123 -19 238 -37 256 -40 24 -4 33 -12 38 -34 8 -39 60 -98 105 -121 58 -30 110 -34 174 -16 94 28 156 107 160 205 l1 37 268 143 c245 131 270 142 285 128 30 -28 106 -57 147 -57 70 0 117 19 166 69 62 61 86 153 60 223 -8 21 14 40 291 256 l300 233 39 -15 c54 -22 136 -20 181 2 l36 19 288 -208 288 -208 3 -51 c3 -62 30 -117 77 -157 46 -42 95 -56 172 -51 81 5 137 42 177 118 30 59 34 104 13 173 l-14 47 342 490 c341 489 341 490 372 484 76 -14 176 39 218 115 32 59 36 152 9 208 -45 96 -167 153 -263 124z"}),h.jsx("path",{d:"M4765 3605 l-25 -24 0 -1544 c0 -1506 0 -1545 19 -1568 18 -23 25 -24 135 -24 107 0 117 2 138 23 l23 23 3 1522 c2 1028 0 1534 -7 1558 -15 49 -43 59 -162 59 -93 0 -102 -2 -124 -25z"}),h.jsx("path",{d:"M2914 3246 c-17 -7 -34 -21 -38 -31 -3 -9 -6 -626 -6 -1370 0 -1317 1 -1353 19 -1376 18 -22 28 -24 129 -27 104 -4 110 -3 138 21 l29 25 0 1361 0 1360 -22 23 c-20 20 -35 23 -120 25 -69 2 -107 -1 -129 -11z"}),h.jsx("path",{d:"M1962 2580 c-12 -11 -24 -31 -27 -43 -3 -12 -4 -478 -3 -1035 l3 -1014 29 -25 c28 -24 34 -25 138 -21 101 3 111 5 129 27 18 23 19 54 19 1055 l0 1033 -23 21 c-21 20 -34 22 -133 22 -97 0 -113 -2 -132 -20z"}),h.jsx("path",{d:"M3842 2593 c-7 -3 -19 -18 -27 -33 -13 -25 -15 -167 -15 -1039 0 -719 3 -1017 11 -1034 17 -37 50 -47 150 -47 94 0 141 14 153 45 3 9 6 478 6 1041 l0 1025 -25 24 c-23 24 -30 25 -132 24 -59 0 -114 -3 -121 -6z"}),h.jsx("path",{d:"M102 1748 c-12 -6 -27 -27 -33 -47 -6 -24 -9 -235 -7 -623 l3 -587 23 -23 c21 -21 31 -23 138 -23 110 0 117 1 135 24 18 22 19 48 19 636 l0 614 -26 20 c-23 18 -40 21 -128 20 -55 0 -111 -5 -124 -11z"}),h.jsx("path",{d:"M1025 1735 l-25 -24 0 -605 c0 -332 3 -612 6 -621 12 -31 59 -45 153 -45 100 0 133 10 150 47 16 34 16 1192 0 1226 -17 37 -50 47 -160 47 -93 0 -102 -2 -124 -25z"})]})}))},mercatorMap:function(e){var t;return h.jsx("svg",en({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{fill:"none"},className:"w-5 h-5"},e,{children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.75 3.03v.568c0 .334.148.65.405.864l1.068.89c.442.369.535 1.01.216 1.49l-.51.766a2.25 2.25 0 01-1.161.886l-.143.048a1.107 1.107 0 00-.57 1.664c.369.555.169 1.307-.427 1.605L9 13.125l.423 1.059a.956.956 0 01-1.652.928l-.679-.906a1.125 1.125 0 00-1.906.172L4.5 15.75l-.612.153M12.75 3.031a9 9 0 00-8.862 12.872M12.75 3.031a9 9 0 016.69 14.036m0 0l-.177-.529A2.25 2.25 0 0017.128 15H16.5l-.324-.324a1.453 1.453 0 00-2.328.377l-.036.073a1.586 1.586 0 01-.982.816l-.99.282c-.55.157-.894.702-.8 1.267l.073.438c.08.474.49.821.97.821.846 0 1.598.542 1.865 1.345l.215.643m5.276-3.67a9.012 9.012 0 01-5.276 3.67m0 0a9 9 0 01-10.275-4.835M15.75 9c0 .896-.393 1.7-1.016 2.25"})}))},progress:function(e){return h.jsx(c9,{valueMax:100,valueNow:64,type:iu.Circular,title:"Progress type",color:(null==e?void 0:e.color)||"#2d2f31",radius:19,stroke:5})},custom:function(e){return h.jsx(h.Fragment,{})}},pi=function(e){if(e in pr)return pr[e]},pr={areaChart:"fill",barChart:"fill",horizontalBarChart:"fill",lineChart:"fill",pieChart:"fill",scatterChart:"fill",singleStat:"stroke",dataTable:"fill",basicTable:"fill",comboChart:"fill",mercatorMap:"stroke",progress:"stopColor"},po=function(e){return"rowIndex"in e},pa=function(e){return"title"in e},pl=function(){var e=a_(),t=e.textOverride,n=e.queryEngineConfig,i=e.customViews,r=c0();if(!r)return null;var o=r.viewOptions(r.dataSet),a=i.filter(pa);a&&a.length>0&&(o=[].concat(o,a.map(function(e){return e.id})));var l=[].concat(o).flatMap(function(e){var i=is.includes(e)?e:"custom",o=iA(i,{textOverride:t,queryEngineConfig:n});if(!o.setDataAttributesFromPreAggregatedDataSet&&r.dataSet.preAggregated)return[];if("custom"===i){var l=a.find(function(t){return t.id===e});return l?[{value:"custom",label:l.title,icon:l.Icon(),customViewId:l.id}]:[]}return[{value:e,label:o.title,icon:pn[i]()}]}),s=function(){if("custom"!==r.component.attributes.type)return r.component.attributes.type}();return h.jsx(dI,{children:h.jsx(d_,{label:t("view","View"),labelHidden:!0,id:"select-view",testId:"select-view",dynamicWidth:!0,anchorLeft:!0,onChange:function(e,t){var n,o,a=l[t];"custom"===a.value&&"customViewId"in a&&a.customViewId?r.onSelectViewType(e,{customView:(o=a.customViewId,i.find(function(e){return pa(e)&&e.id===o}))}):r.onSelectViewType(e)},selected:s,renderOption:function(e){return h.jsx(ps,en({},e,{option:"option",iconColorMap:pi(null==e?void 0:e.value)}))},renderSelected:function(e){var t=e;return"custom"===r.component.attributes.type&&(t=l.find(function(e){return"customViewId"in r.component.attributes&&"customViewId"in e&&e.customViewId===r.component.attributes.customViewId})),h.jsx(ps,en({},t,{option:"view",iconColorMap:pi(null==e?void 0:e.value)}))},options:l})})},ps=function(e){return h.jsxs(uQ,{direction:"row",gap:"0.5rem",alignItems:"center",height:"view"===e.option?16:"inline"===e.option?18:20,children:[(null==e?void 0:e.icon)&&h.jsx(u7,{flexPaddingTop:"0",paddingTop:"0",icon:null==e?void 0:e.icon,iconWidth:"horizontalBarChart"===e.value[0]||"barChart"===e.value[0]?"66%":void 0,alignSelf:"center",iconColorMap:e.iconColorMap}),h.jsx(uM,{as:"span",marginY:"0.15rem",children:null==e?void 0:e.label})]})},pu=aP(function(e){return h.jsx("input",{defaultValue:e.value,"data-testid":e.testId,css:["width:100%;appearance:none;border-radius:0.375rem;border-width:2px;--tw-border-opacity:1;border-color:rgb(243 244 246 / var(--tw-border-opacity));--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity));padding-top:0.25rem;padding-bottom:0.25rem;padding-left:0.5rem;padding-right:0.5rem;text-align:left;line-height:1.25;--tw-text-opacity:1;color:rgb(55 65 81 / var(--tw-text-opacity));outline:2px solid transparent;outline-offset:2px;transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;:focus{--tw-border-opacity:1;border-color:rgb(224 242 255 / var(--tw-border-opacity));}",e.error&&{"--tw-border-opacity":"1",borderColor:"rgb(239 68 68 / var(--tw-border-opacity))"},""],type:"datetime-local",onChange:function(t){var n=t.target.value?new Date(t.target.value):null;e.onChange(n)}})},"renderDateTimeInput"),pd=function(e){var t=o.useState(!1),n=t[0],i=t[1],r=o.useRef(null),a=a_().textOverride;ls(r,function(){i(!1)});var l=function(){if(e.value&&e.value.unit&&e.value.timeFrame){var t,n=ti(a)[e.value.unit].description,i=tr(a)[e.value.timeFrame].description;return a("date_picker.relative_date","[[value]] [[duration]] in [[timeframe]]",{value:null!=(t=e.value.value)?t:"",duration:n,timeframe:i})}}();return h.jsxs(uM,{position:"relative",flexGrow:1,children:[h.jsx(dS,{onClick:function(){return i(!n)},onChange:function(){},label:"Value",labelHidden:!0,readOnly:!0,id:e.id+"_relative_picker_input",value:l,className:u5({textTransform:e.value?"lowercase":void 0}),placeholder:"Relative date"}),n&&h.jsx(pc,{onApply:function(t){i(!1),e.onChange(t)},ref:r,align:"right",initialValue:e.value,id:e.id+"_relative_picker"})]})},pc=o.forwardRef(function(e,t){var n,i,r,a=e.id,l=o.useState(null!=(n=e.initialValue)?n:{value:null,unit:null,timeFrame:"future"}),s=l[0],u=l[1],d=o.useState(!1),c=d[0],p=d[1];o.useEffect(function(){p(ta(s))},[s]);var f=a_().textOverride,m=lu(),v=Object.entries(ti(f)).map(function(e){return{label:e[1].description,value:e[0]}}),g=Object.entries(tr(f)).map(function(e){return{label:e[1].description,value:e[0]}});return h.jsx("div",{ref:t,className:u5({position:"absolute",right:"right"===e.align?0:void 0,left:"left"===e.align?0:void 0,zIndex:4294966294}),children:h.jsx("div",{className:lr(""+cD(null==m||null==(i=m.modals)?void 0:i.base),u5({padding:"1rem"})),children:h.jsxs(uQ,{width:340,direction:"column",gap:"1rem",children:[h.jsx(uM,{children:h.jsxs(uQ,{gap:"0.5rem",children:[h.jsx(uM,{width:96,children:h.jsx(dS,{onChange:function(e){u(en({},s,{value:parseFloat(e.target.value)}))},type:"number",label:f("date_picker.value","Relative Value"),labelHidden:!0,value:null!=(r=s.value)?r:void 0,autoFocus:!0,id:a+"_relative_value"})}),h.jsx(uM,{flex:1,children:h.jsx(d_,{label:f("date_picker.unit","Unit"),labelHidden:!0,selected:s.unit,onChange:function(e){u(en({},s,{unit:e}))},options:v,id:a+"_relative_unit"})}),h.jsx(uM,{flex:1,children:h.jsx(d_,{label:f("date_picker.time_frame","Timeframe"),labelHidden:!0,selected:s.timeFrame,onChange:function(e){u(en({},s,{timeFrame:e}))},options:g,id:a+"_relative_timeframe"})})]})}),h.jsx(uM,{alignSelf:"right",children:h.jsx(cM,{buttons:"end",children:h.jsx(cq,{onClick:function(){c&&e.onApply(s)},primary:!0,disabled:!c,children:f("date_picker.button","Apply")})})})]})})})}),pp=((cs={})[cs.Relative=0]="Relative",cs[cs.Fixed=1]="Fixed",cs);function pf(e){var t,n,i=e.value,r=e.setFilter,a=o.useState(null!=(t=e.options)&&t.disableRelativeDates?pp.Fixed:null!=(n=e.options)&&n.disableFixedDates?pp.Relative:"string"==typeof i||void 0===i?pp.Fixed:pp.Relative),l=a[0],s=a[1];return h.jsxs(uQ,{height:"100%",gap:"0.25rem",children:[h.jsxs(uQ,{children:[l===pp.Fixed&&h.jsx(pu,{value:i?re(new Date(i),"YYYY-MM-DD[T]HH:mm:ss"):void 0,onChange:function(e){r({value:e?e.toISOString():null})},testId:""+e.testId}),l===pp.Relative&&h.jsx(pd,{onChange:function(e){return r({value:e})},value:i,id:e.id})]}),void 0===e.options&&h.jsx(uQ,{width:40,children:h.jsx("button",{onClick:function(){s(l===pp.Fixed?pp.Relative:pp.Fixed)},className:u5(en({},or.coreButton,{color:"initial",padding:"0.4rem",borderRadius:8},rW,{"&:hover":en({},rW,{opacity:.7,backgroundColor:rG(90),borderRadius:8,padding:"0.4rem"})})),"aria-label":"Switch to "+(l===pp.Fixed?"relative":"fixed")+" date",children:h.jsx(lt,{})})})]})}function pm(e){var t=3;return null!=e&&e.hideField&&(t-=1),t}var ph={name:"1jjvu4g",styles:"margin-left:0.5rem;width:1.75rem;flex:none;text-align:right"},pv={name:"xioa8z",styles:"width:1.75rem;flex:none;text-align:right"},pg=function(e){var t,n,i,r,a,l=pm(e.options),s=e.textOverride,u=e.id,d=e.filter,c=d.field,p=d.op,f=d.value,m=cK(e.filter),v=function(t){e.onChange(en({},e.filter,t))},g=(i=[],iD(e.dataSet.fields,{removeAggregateMaths:!0,removePercentage:!0}).forEach(function(t,n){i.push({label:t.publicName,value:t,testId:e.testId+"-pick-field-"+n,icon:h.jsx(u7,{icon:t.dataType,paddingTop:0})})}),i);return h.jsxs("div",{css:["display:flex;",m&&{"--tw-border-opacity":"1",borderColor:"rgb(74 222 128 / var(--tw-border-opacity))"},"",""],children:[h.jsxs(la,{grow:!0,gap:"0.5rem",columns:["repeat("+l+", minmax(0, 1fr))"],children:[!(null!=(t=e.options)&&t.hideField)&&h.jsx("div",{children:h.jsx(d_,{label:s("field","Field"),id:e.testId+"-pick-field-"+u,labelHidden:!0,testId:e.testId+"-pick-field",onChange:function(t,n){var i=void 0;"number"==typeof n&&null!=e&&e.overrideFieldOptions&&(i=null==e?void 0:e.overrideFieldOptions[n].function),v({value:void 0,op:void 0,field:t,function:i})},options:null!=(n=null==e?void 0:e.overrideFieldOptions)?n:g,selected:c,renderSelected:c?function(e){return h.jsx(ps,en({},e,{option:"inline"}))}:void 0,controlClassName:""+or.pl("0.5rem"),textOverride:s})}),h.jsx("div",{css:[c?{opacity:"1"}:{opacity:"0"},"transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;",""],children:h.jsx(cX,{queryEngineConfig:e.queryEngineConfig,onChange:function(e){return v(en({},e))},field:c,testId:e.testId,selected:p,value:f,id:"percentage-operator-"+(null==e?void 0:e.rowIndex)+"-"+u,isAList:c&&"string"==c.dataType,supportedQueryOperators:e.supportedQueryOperators})}),h.jsx("div",{css:[p?{opacity:"1"}:{opacity:"0"},"transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;",""],children:("!="!=p&&"="!=p||null!==f)&&h.jsxs(h.Fragment,{children:[c&&"number"==c.dataType&&h.jsx(dS,{id:e.testId+"-value-"+u,label:s("value","Value"),labelHidden:!0,"data-testid":e.testId+"-value",type:"number",onChange:function(e){var t=parseFloat(e.target.value);v({value:t})},defaultValue:f}),c&&("string"==c.dataType||"string[]"==c.dataType)&&h.jsx(o.Fragment,{children:"="===p||"!="===p||"array_contains"===p||"is_one_of"===p||"is_not_one_of"===p?h.jsx(pb,{onChange:function(e){return v({value:e})},testId:e.testId+"-value-"+u,value:f,dataSet:e.dataSet,field:c,id:u,multiple:"is_one_of"===p||"is_not_one_of"===p||"array_contains"===p,filter:e.filter}):h.jsx(dS,{label:s("value","Value"),labelHidden:!0,id:e.testId+"-value-"+u,"data-testid":e.testId+"-value",type:"text",onChange:function(e){v({value:e.target.value})},defaultValue:f})}),c&&"boolean"==c.dataType&&h.jsx(d_,{label:s("value","Value"),labelHidden:!0,id:e.testId+"-value-"+u,selected:f,onChange:function(e){return v({value:e})},options:[{label:"True",value:!0},{label:"False",value:!1}],textOverride:s}),c&&"date_time"==c.dataType&&h.jsx(pf,{value:f,setFilter:v,testId:e.testId,id:e.id,options:e.options})]})||h.jsx("p",{children:"-"})})]}),h.jsx("div",{css:ph,className:""+cQ.complete(m),children:h.jsx(aW,{})}),!e.hideRemove&&h.jsx("div",{css:pv,children:h.jsx("button",{onClick:function(){return e.onDelete()},className:lr(""+cQ.remove(!(null==e||!e.removeDisabled)),""+or.button),"aria-label":s("remove_filter","Remove filter: [[filterNumber]]",{filterNumber:e.rowIndex+1}),disabled:null==e?void 0:e.removeDisabled,id:u,children:h.jsx(aH,{purpose:"removeFilter"})})})]})},pb=function(e){var t,n,i,r,a,l,s,u,d,c=e.value,p=(t=null==e?void 0:e.dataSet,n=e.field.id,r=cn().runQueriesCallback,l=(a=o.useState(void 0))[0],s=a[1],i="string[]"==(u=iP(t,n)).dataType?[tZ(t.id,u).query]:[t$(t,n)],cJ(i,r,function(e){null===e&&s(null),e&&s(e[0])},{},t),{result:null!=l?l:null,loading:void 0===l,error:null===l}).result,f=a_(),m=f.textOverride,v=f.valueAlias,g=(null==p?void 0:p.content.map(function(t,n){var i=t[0];return{value:i,label:i,testId:e.testId+"-pick-field-"+n}}))||[];return null!=e&&e.multiple?h.jsx(cw,{label:m("values","Values"),id:"select-multiple-value-"+e.id,labelHidden:!0,setSelected:function(t){return null==e?void 0:e.onChange(t.map(function(e){return g[e].value}))},selected:(d=[],g.forEach(function(e,t){null!=c&&c.includes(e.value)&&d.push(t)}),d),options:g,textOverride:m}):h.jsx(d_,{testId:null==e?void 0:e.testId,label:m("value","Value"),labelHidden:!0,id:"select-single-value-"+e.id,selected:null==e?void 0:e.value,onChange:function(t){return null==e?void 0:e.onChange(t)},options:g,textOverride:m,hasFreeText:!0,formatLabel:function(t){var n,i;return null!=(n=rO(t,v,{fieldId:null==(i=e.field)?void 0:i.id}))?n:t}})},px={name:"t91scv",styles:"display:grid;place-content:center"},py=function(e){var t=o.useState("initial"),n=t[0],i=t[1],r=e.autoFeedback?et($().mark(function t(){var n;return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=!1,!e.onClick){t.next=7;break}return i("loading"),t.next=5,e.onClick();case 5:i((n=!!t.sent)?"success":"error");case 7:return t.abrupt("return",n);case 8:case"end":return t.stop()}},t)})):e.onClick,a=(e.error||"error"==n?"error":(e.isLoading||"loading"==n)&&"loading")||(e.success||"success"==n)&&"success"||n;return h.jsxs(cq,{testId:e.testId,error:"error"==a,isLoading:"loading"==a,primary:!e.secondary,secondary:e.secondary,onClick:r,type:e.type,disabled:e.disabled,"data-component":null==e?void 0:e["data-component"],block:null==e?void 0:e.block,internal:null==e?void 0:e.internal,className:null==e?void 0:e.className,themeOverride:null==e?void 0:e.themeOverride,icon:e.icon,onMouseEnter:e.onMouseEnter,children:[h.jsx("div",{css:["loading"==a&&{visibility:"hidden"},"",""],children:e.children}),"loading"==a&&h.jsx("div",{css:px,children:h.jsx(dn,{color:"white"})})]})},pw={name:"1v017vf",styles:"margin-top:1.5rem;margin-bottom:1.5rem;text-align:left"},pC={name:"151yjvf",styles:"margin-bottom:0.5rem;font-weight:500;text-transform:uppercase;letter-spacing:0.1em"},pj={name:"zjik7",styles:"display:flex"},pS={name:"1x4tmz9",styles:"width:3.5rem;flex:none"},pF={name:"1gok8e8",styles:"margin-bottom:0.5rem"},pk=function(e){var t=e.textOverride,n=pm(e.options);return h.jsxs(h.Fragment,{children:[e.wipFilters.map(function(i,r){var o,a=null!=e&&e.maxOrFilters?Math.min(null==e?void 0:e.maxOrFilters,i.length):i.length;return h.jsxs("div",{children:[0!=r&&h.jsx("div",{css:pw,children:h.jsx("span",{css:pC,children:t("filter_or","or")})}),h.jsxs("div",{children:[!e.removeHeadings&&h.jsxs("div",{css:pj,children:[h.jsxs(la,{grow:!0,gap:"0.5rem",columns:["repeat("+n+", minmax(0, 1fr))"],children:[!(null!=(o=e.options)&&o.hideField)&&h.jsx("div",{children:h.jsx(dx,{as:"span",children:e.fieldHeadingOverride||t("field","Field")})}),h.jsx("div",{children:h.jsx(dx,{as:"span",children:t("operator","Operator")})}),h.jsx("div",{children:h.jsx(dx,{as:"span",children:t("value","Value")})})]}),h.jsx("div",{css:pS})]}),i.slice(0,a).map(function(n,o){return h.jsx("div",{css:pF,children:h.jsx(pg,{id:"filter-"+r+"-"+o,queryEngineConfig:e.queryEngineConfig,testId:"filter-"+r+"-"+o,filter:n,dataSet:e.dataSet,onChange:function(t){e.updateWipFilter(t,r,o)},onDelete:function(){e.deleteWipFilter(r,o)},rowIndex:o,removeDisabled:void 0!==e.removeLastEnabled?!e.removeLastEnabled:i.length<=1||i.length===o+1,overrideFieldOptions:null==e?void 0:e.overrideFieldOptions,hideRemove:1===e.maxOrFilters,textOverride:t,supportedQueryOperators:e.supportedQueryOperators,options:e.options})},"filter_"+r+"_"+o)})]})]},"filter_"+r)}),e.onAddOrFilter&&h.jsx(py,{secondary:!0,onClick:function(){return e.onAddOrFilter&&e.onAddOrFilter()},children:t("add_or_filter","Add `OR`")})]})};function pT(e,t,n,i){var r,o,a;return en({},e,i&&!!(r=n[t])&&r.validDataTypes.includes(e.dataType)&&"string"==typeof t&&n.hasOwnProperty(t)&&{dataType:"number",allowedOperators:[">","<","=","!=",">=","<=","is_one_of","is_not_one_of"]})}function p_(e,t,n,i){return[].concat(e).map(function(e){return[].concat(e).map(function(e){var r;return en({},e,{field:pT(iP(t,e.field),null!=(r=e.function)?r:"none",n,i)})})})}function pI(e,t){return[].concat(e).map(function(e){return[].concat(e).flatMap(function(e){var n;return cK(e,1===t.maxFilters)?[{op:e.op,value:e.value,field:null==(n=e.field)?void 0:n.id,function:e.function}]:[]})}).filter(function(e){return!s.isEmpty(e)})}var pA=function(e,t,n,i){void 0===i&&(i={startWithEmptyField:!1,maxFilters:void 0,enableChangeToNumber:!1});var r,l=p_(e,t,n,i.enableChangeToNumber),u=a.useState(l),d=u[0],c=u[1];o.useEffect(function(){c(p_(e,t,n,i.enableChangeToNumber))},[JSON.stringify(e)]);var p={field:null!=(r=i)&&r.startWithEmptyField?void 0:t.fields[0],op:void 0,value:void 0};s.isEmpty(d)&&(d=[[p]]);var f=[].concat(d).map(function(e){var t=e[e.length-1];return t&&cK(t)?[].concat(e,[p]):[].concat(e)});return{addOrFilter:function(){var e=[].concat(d);e.push([p]),c(e)},deleteWipFilter:function(e,t){var n=d;return n[e].splice(t,1),s.isEmpty(n[e])&&n.splice(e,1),c([].concat(n)),pI(d,i)},updateWipFilter:function(e,t,n){var i=d;i[t][n]=e,c([].concat(i))},completedFilters:pI(d,i),wipFilters:f}},pD=function(e,t){var n=t.map(function(e){return e.dataSetId});return e.filter(function(e){return n.includes(e.id)}).map(function(e){return en({},e,{fields:e.fields.filter(function(n){return t.some(function(t){return t.fieldId===n.id&&t.dataSetId===e.id})})})})};function pO(e,t){return[].concat(Object.keys(e.supportedOperators)).flatMap(function(n,i){return t.includes(n)?{label:e.supportedOperators[n].publicName,value:n,testId:"pick-op-"+i}:[]})}var pE,pL=function(e){var t,n,i=((n=e.data).forEach(function(e){}),{id:"aggregated-dataset",name:"Aggregated Dataset",fields:[n[0].fields[0]]}),r=e.textOverride,a=pA(null!=(t=e.relative)?t:[],i,e.queryEngineConfig.supportedAggregates),l=a.completedFilters,s=a.wipFilters,d=a.deleteWipFilter,c=a.updateWipFilter;return o.useEffect(function(){u.isEqual(e.relative,l)||e.setState({type:pP.Relative,fixed:void 0,relative:l})},[l]),h.jsx(cB,{onClearAll:e.onClearAll,textOverride:e.textOverride,onCancel:e.onCancel,onApply:e.onApply,applyDisabled:0===l.length,children:h.jsx(uQ,{direction:"column",gap:"0.5rem",children:h.jsx(uM,{children:h.jsx(pk,{wipFilters:s,completedFilters:l,dataSet:i,updateWipFilter:c,queryEngineConfig:e.queryEngineConfig,deleteWipFilter:d,textOverride:null!=r?r:ij,options:{disableFixedDates:!0,hideField:!0},supportedQueryOperators:pO(e.queryEngineConfig,["<","<=",">",">="])})})})})},pP=((pE={})[pE.Fixed=0]="Fixed",pE[pE.Relative=1]="Relative",pE),pR=aL(function(e){var t,n,i,r,a,l,s,u,d=e.startDate,c=e.endDate,p=e.startTime,f=e.endTime,m=e.onChange,v=e.id,g=e.prefix,b=e.onClear,x=e.label,y=e.type,w=e.textOverride,C=null!=(t=e.dateFormat)?t:"DD/MM/YYYY",j=null!=(n=e.timeFormat)?n:"HH:mm",F=o.useState({start:p?cA(p,j):null,end:f?cA(f,j):null}),k=F[0],T=F[1],_=o.useState({}),I=_[0],A=_[1],D=o.useState(e.relative?{relative:e.relative,type:pP.Relative}:{fixed:{start:d?S(d):null,end:c?S(c):null},type:pP.Fixed}),O=D[0],E=D[1],L=lu(),P=o.useState(!1),R=P[0],N=P[1];o.useEffect(function(){var t,n;!e.showCustom||null!=(t=O.fixed)&&t.end||null!=(n=O.fixed)&&n.start||O.relative||N(!0)},[e.showCustom]);var M=o.useRef(null),z=o.useState(0),q=z[0],B=z[1];o.useEffect(function(){M.current&&B(M.current.getBoundingClientRect().height)},[M.current]);var V=function(){var e,t,n,i,r,o,a,l,s,u;null!=(e=O.fixed)&&e.start&&null!=(t=O.fixed)&&t.end&&m((a="date_time"===y?S(null!=(n=null==k?void 0:k.start)?n:"00:00","HH:mm"):null,l=null==(i=O.fixed)?void 0:i.start.toDate(),s="date_time"===y?S(null!=(r=null==k?void 0:k.end)?r:"00:00","HH:mm"):null,u=null==(o=O.fixed)?void 0:o.end.toDate(),{start:cV(l,a||S("00:00","HH:mm")),end:cV(u,s||S("23:59","HH:mm"))})),O.relative&&m(O.relative),N(!1)},W=o.useRef(null),H=function(){e.startDate||e.endDate||e.relative?(e.startDate&&e.endDate&&E({fixed:{end:S(e.endDate),start:S(e.startDate)},relative:void 0,type:pP.Fixed}),e.relative&&E({relative:e.relative,type:pP.Relative}),T({start:e.startTime?cA(e.startTime,j):null,end:e.endTime?cA(e.endTime,j):null}),N(!1)):e.setShowCustom&&e.setShowCustom(!1)};ls(W,function(){H()});var Y=function(){E({fixed:{end:null,start:null},relative:void 0,type:pP.Fixed}),T({start:null,end:null}),m(null),N(!1),e.setShowCustom&&e.setShowCustom(!1)};return o.useEffect(function(){var e=function(){var e=M.current;if(e){var t=e.getBoundingClientRect();if(648<window.innerWidth-t.left)return void A({left:0,right:"unset"});if(t.left+t.width<648&&t.left+648>648)return void A({left:"50%",transform:"translateX(-50%)",right:"unset"});A({right:0,left:"unset"})}};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}},[]),h.jsxs("div",{className:""+cT.wrapper,id:""+(null!=v?v:"date-picker"),"data-component":"date-picker",children:[h.jsx("div",{className:lr(""+cT.inputsWrapper(null==L||null==(i=L.forms)?void 0:i.dateTime),u5({width:"100%"})),"data-themeapi":"forms.dateTime.input",onClick:function(){return N(!0)},ref:M,children:h.jsx(cP,{prefix:g,label:x,timeFormat:j,dateFormat:C,pickerOpen:R,datesDefined:!(!d||!c)||!!e.relative,type:y,onClearAll:Y,textOverride:w,startDate:null!=(r=null==(a=O.fixed)?void 0:a.start)?r:null,time:k,endDate:null!=(l=null==(s=O.fixed)?void 0:s.end)?l:null,state:O})}),R&&h.jsx("div",{className:lr(u5(en({top:q+2,position:"absolute",width:648,display:"flex",flexDirection:"column",zIndex:2147483147},I))),"data-themeapi":"forms.dateTime.calendar",ref:W,children:h.jsx("div",{className:lr(""+cD(null==L||null==(u=L.modals)?void 0:u.base),u5({padding:"1rem"})),children:h.jsxs(cU.Group,{defaultIndex:O.type,onChange:function(e){E(en({},O,{type:e}))},className:u5({flexGrow:1,display:"flex",flexDirection:"column"}),children:[h.jsxs(cU.List,{columns:"1fr 1fr",children:[h.jsx(cU.Button,{"data-component":"tab-fixed",children:w?w("date_picker.fixed","Fixed"):"Fixed"}),h.jsx(cU.Button,{"data-component":"tab-relative",children:w?w("date_picker.relative","Relative"):"Relative"})]}),h.jsxs(cU.Panels,{className:u5({height:"100%",flexGrow:1}),children:[h.jsx(cU.Panel,{className:u5({flexGrow:1,display:"flex",flexDirection:"column"}),children:h.jsx(cW,{dateFormat:C,textOverride:w,fixed:O.fixed,onApply:V,setState:E,type:y,onCancel:H,onClearAll:Y,setTime:T,timeFormat:j,time:k,onClear:b})}),e.queryEngineConfig&&e.data?h.jsx(cU.Panel,{className:u5({flexGrow:1,display:"flex",flexDirection:"column"}),children:h.jsx(pL,{textOverride:w,onClearAll:Y,onCancel:H,onApply:V,queryEngineConfig:e.queryEngineConfig,data:e.data,relative:O.relative,setState:E})}):h.jsx("div",{children:"appliesToFields, queryEngineConfig and data are undefined"})]})]})})})]})},"renderDateTimeRangeInput",function(e){return en({},e)}),pN=function(e){var t=e.placeholder,n=e.dateFilterOptions,i=e.onChangeToTimeRange,r=e.showClearBtn,a=e.textOverride,l=o.useState(e.currentValue),s=l[0],u=l[1],d=Object.keys(n).map(function(e){return{value:e,label:n[e].description}});return i&&(d=[].concat(d,[{label:a?a("custom_range","Custom range"):"Custom range",value:"__vizzly_custom"}])),h.jsx(d_,{showClearBtn:void 0===r||r,options:d,onChange:function(t){"__vizzly_custom"===t?(u(t),e.onChangeToTimeRange&&e.onChangeToTimeRange()):(u(t),e.onChange&&e.onChange(t))},selected:s,anchorLeft:!0,placeholder:t,selectedPrefix:null!=e&&e.hasSelectedPrefix?t+" \xb7 ":void 0,maintainOptionOrder:!0,textOverride:a,fixedWidth:null==e?void 0:e.fixedWidth,label:t,labelHidden:!0,id:null==e?void 0:e.id,dropdownForFilter:e.dropdownForFilter})},pM=function(e){var t,n,i,r,a,l=e.hasCustomPicker,u=(null==e?void 0:e.currentValue).type,d=function(){if("value"in e.currentValue){var t,n,i;if("fixedRange"===(null==(t=e.currentValue.value)?void 0:t.type))return{fixedRange:e.currentValue.value};if("relativeRange"===(null==(n=e.currentValue.value)?void 0:n.type))return{relativeRange:e.currentValue.value};if("relative"===(null==(i=e.currentValue.value)?void 0:i.type))return{relative:e.currentValue.value}}}(),c=(null==d||null==(t=d.fixedRange)?void 0:t.after)||void 0,p=(null==d||null==(n=d.fixedRange)?void 0:n.before)||void 0,f="dateAndTimeFilter"===u&&p instanceof Date?null==p?void 0:p.toLocaleTimeString():null,m="dateAndTimeFilter"===u&&c instanceof Date?null==c?void 0:c.toLocaleTimeString():null,v=o.useState(!!(null!=d&&d.relativeRange||null!=d&&d.fixedRange)),g=v[0],b=v[1];return h.jsxs(o.Fragment,{children:[!g&&h.jsx(pN,{showClearBtn:e.showClearBtn,dateFilterOptions:e.dateFilterOptions,placeholder:null==e?void 0:e.placeholder,fixedWidth:null==e?void 0:e.fixedWidth,dropdownForFilter:!0,onChangeToTimeRange:function(){b(!0)},onChange:function(t){l&&b(!1),e.onChange&&e.onChange(t)},currentValue:null!=(i=null==d||null==(r=d.relative)?void 0:r.value)?i:null,hasSelectedPrefix:!0,custom:l,textOverride:e.textOverride,id:null==e?void 0:e.id}),l&&g&&h.jsx(pR,{label:null==e?void 0:e.placeholder,id:null==e?void 0:e.id,startDate:c,endDate:p,startTime:m,endTime:f,relative:null==d||null==(a=d.relativeRange)?void 0:a.filters,queryEngineConfig:e.queryEngineConfig,data:e.data,onChange:function(t){var n;return null===t?e.onChange(null):s.isArray(t)?e.onChange(t):e.onChange(t&&"start"in t&&"end"in t&&null!==t.start&&null!==t.end?{startDate:t.start,endDate:t.end}:null)},prefix:!0,onClear:function(){null==e||e.onChange(null),b(!1)},setShowCustom:b,showCustom:g,type:"dateAndTimeFilter"===u?"date_time":"date",textOverride:e.textOverride})]})},pz=function(e){var t,n,i=lu(),r=a_(),o=r.textOverride,a=r.featureToggles,l=r.queryEngineConfig,u=e.onChange,d=e.filter,c=e.dataSets,p=e.showClearBtn,f=e.type,m=tB(d,c,o),v=cl(m,null==i||null==(t=i.forms)?void 0:t.select);return e.filter.hidden?null:h.jsx(uM,{minWidth:v,width:a.forceMobile?"100%":void 0,children:h.jsx(pM,{hasCustomPicker:!0,showClearBtn:p,fixedWidth:v,dateFilterOptions:null==e?void 0:e.dateFilterOptions,queryEngineConfig:l,data:pD(c,d.appliesToFields),onChange:function(e){"string"==typeof e?u({type:f,appliesToFields:d.appliesToFields,title:d.title,managedByConfiguration:d.managedByConfiguration,requiresValue:d.requiresValue,inclusiveDate:d.inclusiveDate,value:{type:"relative",value:e}}):e&&"endDate"in e&&e.endDate&&e.startDate?u({type:f,appliesToFields:d.appliesToFields,managedByConfiguration:d.managedByConfiguration,requiresValue:d.requiresValue,inclusiveDate:d.inclusiveDate,title:d.title,value:{type:"fixedRange",before:e.endDate,after:e.startDate}}):s.isArray(e)?u({type:f,appliesToFields:d.appliesToFields,managedByConfiguration:d.managedByConfiguration,requiresValue:d.requiresValue,inclusiveDate:d.inclusiveDate,title:d.title,value:{type:"relativeRange",filters:e}}):null===e&&u({type:f,managedByConfiguration:d.managedByConfiguration,requiresValue:d.requiresValue,inclusiveDate:d.inclusiveDate,appliesToFields:d.appliesToFields,title:d.title,value:null})},currentValue:d,placeholder:m,textOverride:o,id:ek(null!=(n=e.filter.title)?n:"")+"_"+e.filter.type})})},pq=function(e){var t=o.useState(e.value),n=t[0],i=t[1],r=o.useRef(null);o.useEffect(function(){e.shouldClear&&r.current&&(i(void 0),r.current.value="")},[e.shouldClear]),o.useEffect(function(){return i(e.value)},[null==e?void 0:e.value]);var a=o.useState(!1),l=a[0],s=a[1],u=o.useRef(null);return ls(u,function(){s(!1)}),h.jsxs("div",{ref:u,className:""+pV,children:[h.jsx("label",{htmlFor:e.name,"aria-hidden":e.hideLabel?"true":void 0,className:e.hideLabel?""+oi:void 0,children:e.label}),h.jsxs("div",{className:lr(null==e?void 0:e.classNameInputWrapper,""+pH),children:[h.jsx("input",{ref:r,type:"text",name:null==e?void 0:e.name,value:n,id:e.name,placeholder:null==e?void 0:e.label,"aria-label":null==e?void 0:e.label,autoComplete:"off",className:lr(""+pW({arrow:!e.hideArrow}),null==e?void 0:e.classNameInput),onChange:function(e){var t;i(t=e.currentTarget.value)},onClick:function(t){var n;s(!l),(null==e?void 0:e.onClick)&&(null==e||e.onClick(t))}}),!e.hideArrow&&h.jsx("div",{className:""+pB,children:h.jsx(dp,{label:"arrow",arrowStart:"up",onClick:function(){return s(!l)},expanded:l})})]}),h.jsx("div",{style:{maxWidth:80,minWidth:40},children:h.jsx(u6,{open:l,fixedHeight:!0,width:"calc(100% - 2px)",children:e.options.map(function(t,n){return h.jsx(u6.Option,{label:t.label,onChange:function(n){var r;null==n||n.stopPropagation(),i(r=t.value),null==e||e.onChange(r),s(!1)}},n)})})})]},null==e?void 0:e.name)},pB=rY({position:"absolute",right:0}),pV=rY({position:"relative",background:"transparent"}),pW=rY({background:"transparent",paddingLeft:4,height:24,width:"100%",variants:{arrow:{true:{paddingRight:16},false:{paddingRight:4}}}}),pH=rY({display:"flex",gap:"0.5rem",position:"relative"}),pY=function(e){var t,n=lu();return h.jsx(uM,{className:""+dy(null==n||null==(t=n.forms)?void 0:t.input),paddingTop:4,paddingBottom:4.5,paddingX:0,position:"relative",children:e.children})},pG=function(e){var t,n,i,r,a,l,s,u,d,c,p,f,m,v,g,b=o.useRef(null),x=lu(),y=e.filter,w=e.dataSets,C=a_(),j=C.textOverride,S=C.queryEngineConfig,F=C.featureToggles,k=tB(y,w,j),T=ca(""+(null==(t=e.filter.value)?void 0:t.value),"label",{fontSize:null==x||null==(n=x.forms)||null==(n=n.input)?void 0:n.fontSize,fontWeight:null==x||null==(i=x.forms)||null==(i=i.input)?void 0:i.fontWeight}),_=o.useState(48),I=_[0],A=_[1],D=o.useState(!1),O=D[0],E=D[1],L=function(){var e,t,n,i=null==(e=b.current)?void 0:e.value,r=ca(i||"","label",{fontSize:null==x||null==(t=x.forms)||null==(t=t.input)?void 0:t.fontSize,fontWeight:null==x||null==(n=x.forms)||null==(n=n.input)?void 0:n.fontWeight})+24+16;O||i?O&&(!i||r<48)&&(r=48):r=48,A(r)};if(o.useEffect(function(){L()},[null==(r=y.value)?void 0:r.value]),e.filter.hidden)return null;var P=ef({dataType:"number"},S).filter(function(e){return"is_one_of"!==e&&"is_not_one_of"!==e}).map(function(e){return{value:e,label:e}}),R=cl(k,null==x||null==(a=x.forms)?void 0:a.select);function N(t){var n;L(),e.onChange(en({},e.filter,""===t.target.value?{value:null}:{value:{op:(null==(n=e.filter.value)?void 0:n.op)||"=",value:parseFloat(t.target.value)}}))}var M=ca(k,"label",{fontSize:null==x||null==(l=x.forms)||null==(l=l.input)?void 0:l.fontSize,fontWeight:null==x||null==(s=x.forms)||null==(s=s.input)?void 0:s.fontWeight});return h.jsx(uM,{minWidth:R+36,"data-testid":"filter_"+e.filterIndex+"_type_number",width:F.forceMobile?"100%":void 0,"data-component":"number-filter",children:h.jsx(pY,{children:h.jsxs(uQ,{alignItems:"center",width:"100%",height:"100%",as:"fieldset",position:"relative",children:[h.jsxs(uM,{as:"label",className:""+cT.prefixStyle(),maxWidth:M+20,paddingLeft:"1rem",children:[null!=k?k:"Custom"," \xb7"]}),h.jsx(uM,{maxWidth:null!=(u=e.filter.value)&&u.op?48:80,paddingLeft:null!=(d=e.filter.value)&&d.op?0:"0.25rem",children:h.jsx(pq,{value:null==(c=e.filter.value)?void 0:c.op,options:P,onChange:function(t){var n;e.onChange(en({},e.filter,{value:{op:t,value:(null==(n=e.filter.value)?void 0:n.value)||0}}))},label:"Operator",name:"number_filter_"+e.filterIndex+"_select",hideLabel:!0,classNameInput:pK+" "+pU({selected:!(null==(p=e.filter.value)||!p.op)}),hideArrow:!0})}),h.jsxs(uM,{minWidth:I,maxWidth:T+32+12,paddingRight:20,flex:1,children:[h.jsx(dx,{htmlFor:"number_filter_"+e.filterIndex+"_value",labelHidden:!0,children:"Number"}),h.jsx(dk,{ref:b,type:"number",defaultValue:null==(f=e.filter.value)?void 0:f.value,onChange:L,onBlur:function(e){E(!1),L(),N(e)},onFocus:function(){E(!0),L()},onKeyDown:function(e){"Enter"===e.key&&N(e)},className:""+pK,placeholder:"Number",id:"number_filter_"+e.filterIndex+"_value"})]}),e.showClearBtn&&h.jsx(uM,{className:""+cT.clearContainer(),position:"absolute",right:0,children:h.jsx(ds,{onClear:function(){return e.onChange(en({},e.filter,{value:null}))},className:""+cT.clearButton(null==x||null==(m=x.forms)?void 0:m.dateTime),"aria-label":j?j("clear_filter","Clear Filter"):"Clear Filter",fill:null==x||null==(v=x.forms)||null==(v=v.select)?void 0:v.indicatorColor,stroke:null==x||null==(g=x.forms)||null==(g=g.select)?void 0:g.indicatorColor})})]})})})},pU=rY({variants:{selected:{true:{textAlign:"center"}}}}),pK=rY({outline:"2px solid transparent",borderWidth:0,height:20}),pX=function(e){var t=e.filter,n=e.filterIndex,i=e.onChange,r=e.shouldAlwaysHaveValue,o=a_().queryEngineConfig,a=function(e){var t=tQ(o,e.requiresValue).validate(e).error;t?eR("Invalid additional filter. Therefore ignoring the change",t,e):i(e)},l=function(n){r&&null==n.value?"dateFilter"!==t.type&&"dateAndTimeFilter"!==t.type||a({type:"dateFilter",appliesToFields:t.appliesToFields,title:t.title,value:{type:"relative",value:Object.keys(null==e?void 0:e.dateFilterOptions)[0]},requiresValue:t.requiresValue,managedByConfiguration:t.managedByConfiguration,inclusiveDate:t.inclusiveDate}):a(n)};return t.appliesToFields.length>0?"singleSelectFilter"==t.type?h.jsx(cu,{showClearBtn:!r,filter:t,filterIndex:n,onChange:l,dataSets:e.dataSets},"boolean"==typeof e.filter.value?void 0:JSON.stringify(e.filter.value)):"numericFilter"==t.type?h.jsx(pG,{showClearBtn:!r,filter:t,filterIndex:n,onChange:l,dataSets:e.dataSets},JSON.stringify(e.filter.value)):"multiSelectFilter"==t.type?h.jsx(cC,{showClearBtn:!r,filter:t,filterIndex:n,onChange:l,dataSets:e.dataSets}):"dateFilter"==t.type||"dateAndTimeFilter"==t.type?h.jsx(pz,{showClearBtn:!r,dateFilterOptions:null==e?void 0:e.dateFilterOptions,filter:t,onChange:l,dataSets:e.dataSets,type:t.type},JSON.stringify(e.filter.value)):null:null},pQ={name:"1gqeage",styles:"margin-right:0.75rem"},pJ=function(e){var t,n=uV(),i=n.ref,r=n.show,a=n.position,l=n.close,u=n.open,d=a_().dateFilterOptions;return h.jsxs(o.Fragment,{children:[(e.localFilters.length>0||e.zoomControl)&&h.jsxs("div",{ref:i,children:[e.zoomControl&&e.zoomControl.show&&h.jsx("button",{css:pQ,onClick:e.zoomControl.onReset,children:h.jsx(aV,{})}),e.localFilters.length>0&&h.jsx("button",{onClick:function(){return u()},"aria-label":"Show Local Filter",className:""+or.button,children:h.jsx(aM,{active:(t=e.localFilters,s.some(t,function(e){var t=e.value;return!(s.isArray(t)&&0===t.length||!t)}))})})]}),r&&h.jsx(uq,{onClose:function(){return l()},width:320,position:a,children:h.jsx(uq.Options,{padding:!0,children:h.jsx(uM,{padding:"0.5rem",children:h.jsx(uQ,{direction:"column",gap:"0.5rem","data-component":"filters",children:[].concat(e.localFilters).map(function(t,n){return h.jsx(uM,{children:h.jsx(pX,{dataSets:[e.dataSet],filterIndex:n,filter:t,onChange:function(t){var i=[].concat(e.localFilters);i[n]=t,e.setLocalFilters(i)},dateFilterOptions:d})},"local_filter_"+n)})})})})})]})},pZ=function(e){return h.jsx("h3",en({},e,{children:e.children}))},p$=function(e){return h.jsx("p",en({},e,{children:e.children}))},p0=function(e){return h.jsx("p",en({},e,{className:lr(g.css({name:"1xpc8ph",styles:"font-size:0.75rem;line-height:1rem;font-weight:500;text-transform:capitalize"}),g.css(2===(null==e?void 0:e.marginBottom)?{name:"1gok8e8",styles:"margin-bottom:0.5rem"}:{name:"1tlmwo2",styles:"margin-bottom:0px"})),children:e.children}))},p1=Object.assign(function(){return null},{title:function(e){var t,n,i,r,o,a,l,s,u;return rY({padding:0,fontSize:null==e||null==(t=e.title)?void 0:t.fontSize,color:null==e||null==(n=e.title)?void 0:n.color,fontWeight:null==e||null==(i=e.title)?void 0:i.fontWeight,fontFamily:null==e||null==(r=e.title)?void 0:r.fontFamily,margin:null!=(o=null==e||null==(a=e.title)?void 0:a.margin)?o:0,textAlign:null!=(l=null==e||null==(s=e.title)?void 0:s.textAlign)?l:"left",lineHeight:null==e||null==(u=e.title)?void 0:u.lineHeight,variants:{canFlex:{true:{flex:1},false:{flex:"none"}}}})},subject:function(e){var t,n,i,r,o,a,l,s,u;return rY({position:"relative",fontSize:null==e||null==(t=e.subject)?void 0:t.fontSize,color:null==e||null==(n=e.subject)?void 0:n.color,fontWeight:null==e||null==(i=e.subject)?void 0:i.fontWeight,fontFamily:null==e||null==(r=e.subject)?void 0:r.fontFamily,margin:null!=(o=null==e||null==(a=e.subject)?void 0:a.margin)?o:0,marginBottom:"0.3rem",textAlign:null!=(l=null==e||null==(s=e.subject)?void 0:s.textAlign)?l:"left",lineHeight:null==e||null==(u=e.subject)?void 0:u.lineHeight,padding:0,flex:1})},verified:function(e){var t;return rY({height:18,color:null==e||null==(t=e.verified)?void 0:t.color})}}),p2=function(e){var t,n=null!=(t=null==e?void 0:e.as)?t:"span";return h.jsx(n,{className:""+or.srOnly,htmlFor:null==e?void 0:e.htmlFor,children:null==e?void 0:e.children})},p5=function(e){var t=e.measures,n=a_();return h.jsx(o.Fragment,{children:t&&(null==e?void 0:e.activeMeasures)&&h.jsx(uQ,{direction:"column",gap:"1rem",children:Object.keys(t).map(function(i,r){var o,a,l,s=function(e,t,n,i,r,o,a){try{var l,s,u=eW(e,{supportedAggregates:t,supportedTimeTruncFunctions:void 0,supportedTransformationFunctions:void 0}),d=iP(n,u.field),c=null!=(l=rA(d.publicName,null==(s=t[u.function])?void 0:s.publicName))?l:"",p=r({fieldId:u.field,func:u.function,type:o,defaultLabel:c,viewId:a}),f=[{label:null!=p?p:c,value:u}];return i[e].map(function(e){var i,l=rA(iP(n,e.field).publicName,null==(i=t[e.function])?void 0:i.publicName),s=r({fieldId:e.field,func:e.function,type:o,defaultLabel:l,viewId:a});f.push({label:null!=s?s:l,value:e})}),f}catch(m){if(m instanceof t7)return[];throw m}}(i,n.queryEngineConfig.supportedAggregates,e.dataSet,t,n.labelFormat,e.componentType,e.viewId),d=(a=e.activeMeasures,(l=s.filter(function(e){return null==a?void 0:a.some(function(t){return u.isEqual(e.value,t)})})).length>0?l[0].value:null);return h.jsx(d_,{label:"Replace Parameter "+(r+1),labelHidden:!0,id:"replace-parameter-"+r,selected:d,onChange:function(t){return e.setMeasure(t,d)},options:s},i)})})})},p7=function(e,t){return"custom"!=e&&!!iA(e).supportedFeatures.parameters&&!(s.isEmpty(t)||!p3(t)&&!p4(t))},p4=function(e){return!s.isEmpty(null==e?void 0:e.group)},p3=function(e){return!s.isEmpty(null==e?void 0:e.measure)},p6=function(e){var t=e.activeDimensions,n=e.group,i=e.dataSet,r=a_().queryEngineConfig;return h.jsx(o.Fragment,{children:n&&t&&h.jsx(uQ,{direction:"column",gap:"1rem",children:Object.keys(n).map(function(t,o){var a=eZ(t,r.supportedTimeTruncFunctions),l=a?function(e,t,n,i){if(!t||!n[i])return[];var r=iP(e,t.field);if(!r)return[];var o=[{label:r.publicName+" ("+t.truncate+")",value:t}];return n[i].forEach(function(t){if(t&&"truncate"in t){var n=iP(e,t.field);n&&o.push({label:n.publicName+" ("+t.truncate+")",value:t})}}),o}(i,a,n,t):function(e,t,n){if(!t||null==e||!e.fields||!n[t])return[];var i,r=iP(e,t);if(!r)return[];var o=[{label:""+r.publicName,value:{field:t,function:"none"}}];return n[t].forEach(function(t){if(t&&"function"in t){var n,i=iP(e,t.field);i&&o.push({label:i.publicName,value:{field:t.field,function:null!=(n=t.function)?n:"none"}})}}),o}(i,t,n),s=a?p8(l,null==e?void 0:e.activeTimeDimension):p9(l,null==e?void 0:e.activeDimensions);return h.jsx(d_,{labelHidden:!0,label:"Replace Parameter "+(o+1),id:"replace-parameter-"+o,selected:s,onChange:function(t){return null==e?void 0:e.setDimension(t,s)},options:l},t)})})})},p8=function(e,t){var n;return null==(n=e.find(function(e){return u.isEqual(e.value,t)}))?void 0:n.value},p9=function(e,t){var n=e.filter(function(e){return null==t?void 0:t.some(function(t){return e.value.field===t.field&&e.value.function===t.function})});return n.length>0?n[0].value:null},fe=function(e){var t=uV(),n=t.ref,i=t.show,r=t.position,a=t.close,l=t.open,s=e.parameters;return p7(null==e?void 0:e.componentType,s)?h.jsxs(o.Fragment,{children:[h.jsx("div",{ref:n,children:h.jsxs("button",{onClick:function(){return l()},className:""+or.button,children:[h.jsx("span",{className:""+oi,children:"Change Parameters"}),h.jsx(cf,{tooltipContent:function(){return"Change Parameters"},children:h.jsx(aq,{})})]})}),i&&h.jsx(uq,{onClose:function(){return a()},width:320,position:r,children:h.jsx(uq.Options,{padding:!0,children:h.jsx(uM,{padding:"0.5rem",children:h.jsxs(uQ,{direction:"column",gap:"0.5rem","data-component":"parameters",children:[p4(s)&&p3(s)&&h.jsx(p0,{marginBottom:0,children:"Measures"}),h.jsx(p5,{measures:null==s?void 0:s.measure,dataSet:null==e?void 0:e.dataSet,activeMeasures:null==e?void 0:e.activeMeasures,setMeasure:function(t,n){var i,r,o;null==e||e.setParameterUpdate({updatedMeasures:null==(o=e.activeMeasures)?void 0:o.map(function(e){return u.isEqual(e,n)?t:e})})},componentType:null==e?void 0:e.componentType,viewId:null==e?void 0:e.viewId}),p4(s)&&p3(s)&&h.jsx(p0,{marginBottom:0,children:"Groups"}),h.jsx(p6,{group:null==s?void 0:s.group,dataSet:null==e?void 0:e.dataSet,activeDimensions:null==e?void 0:e.activeDimension,activeTimeDimension:null==e?void 0:e.activeTimeDimension,setDimension:function(t,n){var i,r,o;"truncate"in t||!n||"truncate"in n||null==e||e.setParameterUpdate({updatedDimension:null==(o=null==e?void 0:e.activeDimension)?o:null==o?void 0:o.map(function(e){return e.field===n.field&&e.function===n.function?en({},t):e})}),"truncate"in t&&(null==e||e.setParameterUpdate({updatedTimeDimension:t}))}})]})})})})]}):null},ft={name:"18pw007",styles:"position:absolute;top:0px;right:0px;z-index:2"},fn={name:"195ggdj",styles:"position:absolute;top:0.75rem;right:0.75rem;display:flex;flex-direction:row;gap:0.625rem"},fi=function(e){var t,n,i,r,a,l,u=lu(),d=a_(),c=d.organizationName,p=d.textOverride;if(!e.displayTitle&&!e.displaySubject&&s.isEmpty(e.localFilters)&&"custom"!==e.componentType&&!p7(null==e?void 0:e.componentType,e.parameters)&&(null==e||!e.verified))return h.jsx(uM,{paddingBottom:null!=(l=e.paddingBottom)?l:"0.75rem","data-component":"empty-titles"});var f,m=(f=0,s.isEmpty(e.localFilters)||(f+=1.25),p7(null==e?void 0:e.componentType,e.parameters)&&(f+=1.25),p7(null==e?void 0:e.componentType,e.parameters)&&!s.isEmpty(e.localFilters)&&(f+=.5),f+"rem"),v=c?p("verified_by_with_organization","Verified by [[organizationName]]",{organizationName:c}):p("verified","Verified");return h.jsxs(h.Fragment,{children:[h.jsxs(uQ,{direction:"column",gap:"0.25rem",paddingBottom:null!=(t=e.paddingBottom)?t:"0.75rem","data-component":"titles",children:[h.jsxs(uQ,{alignItems:"center",gap:"0.25rem",paddingRight:m,paddingLeft:"center"===(null==u||null==(n=u.charts)||null==(n=n.title)?void 0:n.textAlign)?m:void 0,children:[e.displayTitle&&h.jsx(pZ,{style:{fontFamily:null==u||null==(i=u.titles)?void 0:i.fontFamily},className:""+p1.title(null==u?void 0:u.charts)({canFlex:null!=e&&e.library?"false":"true"}),"data-themeapi":"charts.title",children:e.displayTitle}),(null==e?void 0:e.verified)&&(null==e?void 0:e.library)&&h.jsxs(cf,{tooltipContent:function(){return h.jsx(o.Fragment,{children:v})},children:[h.jsx(w.BadgeCheckIcon,{className:""+p1.verified(null==u?void 0:u.library),"data-testid":"badge","data-themeapi":"library.verified.icon"}),h.jsx(p2,{children:v})]})]}),e.displaySubject&&h.jsx(uQ,{alignItems:"center",gap:"0.25rem",paddingRight:m,paddingLeft:"center"===(null==u||null==(r=u.charts)||null==(r=r.subject)?void 0:r.textAlign)?m:void 0,children:h.jsx(p$,{style:{fontFamily:null==u||null==(a=u.baseFont)?void 0:a.fontFamily},className:""+p1.subject(null==u?void 0:u.charts),"data-themeapi":"charts.subject",children:e.displaySubject})})]}),e.dataSet&&!(null!=e&&e.library)&&"custom"!==e.componentType&&h.jsx("div",{css:ft,children:h.jsxs("div",{css:fn,children:[h.jsx(fe,{activeDimension:null==e?void 0:e.dimension,activeTimeDimension:e.timeDimension,activeMeasures:null==e?void 0:e.measure,parameters:null==e?void 0:e.parameters,componentType:null==e?void 0:e.componentType,dataSet:e.dataSet,setParameterUpdate:function(t){return e.setParameterUpdate&&e.setParameterUpdate(t)},viewId:e.viewId}),h.jsx(pJ,{setLocalFilters:e.setLocalFilters,localFilters:e.localFilters,zoomControl:e.zoomControl,dataSet:e.dataSet})]})})]})},fr=function(e){var t=e.children;return h.jsx("div",{id:e.id,className:""+fo({queriesAreChanging:e.queriesAreChanging,overflowScroll:e.overflowScroll,justifyCenter:e.justifyCenter}),"data-component":"view-wrapper","data-idfordownload":"true",children:t})},fo=rY({display:"flex",width:"100%",height:"100%",flexDirection:"column",variants:{queriesAreChanging:{false:{},true:{filter:"blur(1px)"}},overflowScroll:{false:{},true:en({overflow:"auto"},uY)},justifyCenter:{false:{},true:{justifyContent:"center"}}}}),fa=o.createContext({addToast:function(){throw"not implemented."}}),fl={name:"zjik7",styles:"display:flex"},fs={name:"1x3jg5i",styles:"margin-left:0.75rem"},fu=function(e){return h.jsxs("div",{css:fl,children:[h.jsx("span",{children:e.renderIcon()}),h.jsx("span",{css:fs,children:e.message})]})},fd={name:"bq473o",styles:"height:1.5rem;width:1.5rem"},fc=function(e){return h.jsx(fu,{message:e.message,renderIcon:function(){return h.jsx("svg",{css:fd,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})})}})},fp={name:"bq473o",styles:"height:1.5rem;width:1.5rem"},ff=function(e){return h.jsx(fu,{message:e.message,renderIcon:function(){return h.jsx("svg",{css:fp,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"#e86f7f",children:h.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}})},fm={name:"bq473o",styles:"height:1.5rem;width:1.5rem"},fh=function(e){return h.jsx(fu,{message:e.message,renderIcon:function(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",css:fm,viewBox:"0 0 20 20",fill:"#6fe8ba",children:h.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}})},fv={name:"6u431h",styles:"position:fixed;left:1.25rem;bottom:1.25rem"},fg={name:"yuw6vf",styles:"margin-top:0.75rem;border-radius:0.5rem;background-color:rgb(0 0 0 / 0.9);padding-top:0.75rem;padding-bottom:0.75rem;padding-left:1.5rem;padding-right:1.5rem;letter-spacing:0.025em;--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity));--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)"};function fb(e){var t=e.children,n=o.useState([]),i=n[0],r=n[1],a=o.useRef([]),l=o.useCallback(function(e,t){if(t){if(a.current.includes(t))return;a.current=[].concat(a.current,[t])}r(function(t){return[e].concat(t)}),setTimeout(function(){t&&s.remove(a.current),r(function(e){return e.slice(void 0,-1)})},7500)},[r]);return h.jsxs(fa.Provider,{value:{addToast:l},children:[h.jsx("div",{css:fv,style:{zIndex:2147483647},children:i.map(function(e,t){return h.jsx("div",{css:fg,children:e()},"toast_"+t)})}),t]})}function fx(){return o.useContext(fa)}var fy,fw=function(e){var t=a_(),n=t.textOverrides,i=t.developerTools,r=fx().addToast,o=("string"==typeof e.override?[e.override]:e.override).find(function(e){return!!n[e]}),a=h.jsx(h.Fragment,{children:o?n[o]:e.children});return!0===i||"object"==typeof i&&i.translationKeys?h.jsx("span",{onMouseEnter:function(){r(function(){return h.jsx(fc,{message:"Change the text with 'textOverride' property '"+e.override+"'"})},"unique-text-override-"+e.override)},children:a}):h.jsx(h.Fragment,{children:a})},fC=rY({display:"grid",height:"100%",width:"100%",alignContent:"center"}),fj=rY({margin:"auto",textAlign:"center"}),fS=rY(en({},oo.text,{fontSize:"1.5rem",lineHeight:"2rem",color:"inherit",variants:{textOpacity:((fy={})[60]={opacity:60},fy[40]={opacity:40},fy)}})),fF=rY({marginTop:"0.75rem",fontSize:"0.75rem",lineHeight:"1rem",fontWeight:500,letterSpacing:"0.1rem",opacity:.8}),fk=Object.assign(function(e){var t;return h.jsx("div",{className:""+fC,children:h.jsxs("div",{className:""+fj,children:[h.jsx("h1",{className:""+fS({opacity:e.opacity}),children:e.title}),null!=(t=null==e?void 0:e.children)?t:e.renderExtra&&e.renderExtra()]})})},{Extra:function(e){return h.jsx("div",{className:""+fF,children:null==e?void 0:e.children})}}),fT=function(e){return h.jsx(fk,{opacity:40,title:null==e?void 0:e.title,children:e.renderExtra&&e.renderExtra()})},f_={name:"13b3q89",styles:"margin-top:0.75rem;max-width:36rem;font-size:0.75rem;line-height:1rem;font-weight:500;letter-spacing:0.1em;opacity:0.5"},fI={name:"akdqam",styles:"margin-top:1rem"},fA=function(){return h.jsx(fk,{title:"We have failed to load your dashboard",renderExtra:function(){return h.jsxs(h.Fragment,{children:[h.jsx("p",{css:f_,className:""+or.text,children:"An internal error occurred, please try again soon."}),h.jsx("div",{css:fI,children:h.jsx(py,{secondary:!0,onClick:function(){return window.location.reload()},children:"Retry"})})]})}})},fD=function(){return h.jsx(fk,{title:"There is an issue with your configuration settings.",renderExtra:function(){return h.jsx("p",{className:""+or.text,children:"See logs for more details."})}})},fO={name:"13b3q89",styles:"margin-top:0.75rem;max-width:36rem;font-size:0.75rem;line-height:1rem;font-weight:500;letter-spacing:0.1em;opacity:0.5"},fE={name:"akdqam",styles:"margin-top:1rem"},fL=function(){return h.jsx(fk,{title:"We have failed to load your dashboard",renderExtra:function(){return h.jsxs(h.Fragment,{children:[h.jsx("p",{css:fO,className:""+or.text,children:"We were unable to verify your identity"}),h.jsx("div",{css:fE,children:h.jsx(py,{secondary:!0,onClick:function(){return window.location.reload()},children:"Retry"})})]})}})},fP={name:"12dms0z",styles:"margin-top:1rem;width:100%"},fR=function(e){return h.jsx(fk,{title:"This view has changed",renderExtra:function(){return h.jsx(fk.Extra,{children:h.jsxs(fw,{override:"view.data-set-changed",children:["A field this view was using has been removed.",h.jsx("div",{css:fP,children:h.jsx(py,{"data-component":"remove-missing-field",onClick:function(){return e.removeMissingField()},children:"Auto fix"})})]})})}})},fN=function(e){var t;return h.jsx(fk,{title:null!=(t=null==e?void 0:e.title)?t:"Query under construction \uD83C\uDFD7",renderExtra:function(){var t;return h.jsx(fk.Extra,{children:null!=(t=null==e?void 0:e.children)?t:"Not all required properties have been set to render this component"})}})},fM=function(){return h.jsx(fk,{title:h.jsx(fw,{override:"view.failed-to-fetch-results",children:"Failed to fetch the data \uD83E\uDD14"})})},fz=function(){return h.jsx(fk,{title:"This view is not available"})},fq=function(e){return h.jsxs(fr,{queriesAreChanging:!1,children:[h.jsx(fi,en({},e)),h.jsx(fk,{title:h.jsx(fw,{override:"view.empty-results",children:"No data to show"})}),e.children]})},fB={name:"1g0vxgi",styles:"margin-top:0.75rem"},fV=function(e){return h.jsx(fk,{title:"Something went wrong \uD83D\uDE1E",renderExtra:function(){return h.jsx(py,{onClick:e.onManualRetry,css:fB,children:"retry"})}})},fW={name:"1g0vxgi",styles:"margin-top:0.75rem"},fH=function(e){return h.jsx(fk,{title:"Something went wrong \uD83D\uDE1E",renderExtra:function(){return h.jsx(py,{onClick:e.onManualRetry,css:fW,children:"retry"})}})},fY=Object.assign(function(){return null},{button:function(e){return rY(en({},oo.button,{color:null==e?void 0:e.color,fontSize:null==e?void 0:e.fontSize,fontWeight:null==e?void 0:e.fontWeight}))},icon:function(e){return rY({"& > *":{fill:null==e?void 0:e.iconColor}})}}),fG=["sm"],fU={name:"1hl83va",styles:"margin-bottom:0.75rem"},fK={name:"jf4xqj",styles:"position:absolute;top:0px;right:2rem"},fX={name:"duftww",styles:"position:absolute;top:0.25rem;right:0px"},fQ={name:"1e4sizb",styles:"margin-top:0.5rem"},fJ=function(e){var t,n=o.useState(e.defaultOpen||!1),i=n[0],r=n[1],a=lu();return h.jsxs("div",{css:fU,className:lr(u9("accordion",e,fG)),children:[h.jsxs("button",{"data-testid":e.testId,type:"button",onClick:function(){if(e.showAccordionIcon){var t=!i;r(t),t&&e.onOpened&&e.onOpened()}},css:["position:relative;width:100%;cursor:pointer;border-radius:0.5rem;text-align:left;",!i&&{cursor:"pointer"},e.sm&&{marginBottom:"0px"},"",""],className:lr(""+fY.button(null==a||null==(t=a.accordion)?void 0:t.button)),"data-themeapi":"accordion.button","data-chipposition":"top.left",children:[h.jsx(uQ,{gap:"0.25rem",alignItems:"center",children:null==e?void 0:e.title}),e.renderAction&&h.jsx("div",{css:fK,children:e.renderAction(i)}),e.showAccordionIcon&&h.jsx("span",{css:fX,className:lr(""+fY.icon(null==a?void 0:a.accordion)),"data-themeapi":"accordion.iconColor",children:h.jsx(aJ,{isOpen:i})})]}),i&&h.jsx("div",{className:u8("accordion-content"),css:fQ,children:e.children})]})},fZ=function(e){return h.jsx(fJ,en({},e))},f$=function(e,t){var n=o.useRef(null),i=k.useDrop({accept:e.type,collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(i,r){var o;if(n.current){var a=i.index,l=e.index;if(a!==l){var s=null==(o=n.current)?void 0:o.getBoundingClientRect(),u=(s.bottom-s.top)/2,d=r.getClientOffset().y-s.top;a<l&&d<u||a>l&&d>u||(t(a,l),i.index=l)}}}})[1],r=k.useDrag({type:e.type,item:function(){return{id:e.id,index:e.index}},collect:function(e){return{isDragging:e.isDragging()}}}),a=r[0].isDragging,l=r[2];return(0,r[1])(i(n)),[n,l,a]},f0=o.forwardRef(function(e,t){var n=lu();return h.jsx("div",{className:lr(u8("listview-item"),""+u$.item(null==n?void 0:n.lists)({highlight:e.highlight?"on":"off",clickable:e.onClick&&"on",componentPadding:null!=e&&e.padding?"true":"false"})),ref:t,"data-themeapi":"lists",children:null==e?void 0:e.children})}),f1=rY(en({},rW,{opacity:0,cursor:"pointer",variants:{active:{true:en({},rW,{opacity:1})}}})),f2=rY({width:"100%",display:"flex",cursor:"pointer",height:16}),f5=rY(en({},rW,{width:12,color:"#1f293799",variants:{active:{true:en({},rW,{color:"rgba(93,103,119,0.6)"})}}})),f7=rY({position:"absolute",top:0,left:0,right:0,background:"transparent",variants:{active:{true:{"&:hover":{background:"rgb(229 231 235 / 0.2)",boxShadow:"0 0 #0000,0 0 #0000,0 1px 2px 0 rgb(0 0 0 / 0.05)",borderTopRightRadius:rQ.size.borderRadius,borderTopLeftRadius:rQ.size.borderRadius}}}}}),f4=function(e){var t,n,i,r,o,a;return rY(en({},rW,{cursor:"pointer",color:null==e||null==(t=e.icon)?void 0:t.color,background:null==e||null==(n=e.icon)?void 0:n.background,borderRadius:null==e||null==(i=e.icon)?void 0:i.borderRadius,padding:null==e||null==(r=e.icon)?void 0:r.padding,"&:hover":en({},null==e||null==(o=e.icon)?void 0:o["&:hover"]),"&:disabled":en({},null==e||null==(a=e.icon)?void 0:a["&:disabled"])}))},f3=function(e){return h.jsx("div",{ref:e.dragSource,className:""+f7({active:null!=e&&e.enabled?"true":"false"}),style:null!=e&&e.height?{height:null==e?void 0:e.height}:{},children:(null==e?void 0:e.enabled)&&h.jsx(f6,{active:null==e?void 0:e.active,top:null==e?void 0:e.top})})},f6=function(e){var t,n=a_().textOverride,i=o.useState(!1),r=i[0],a=i[1],l=lu();return h.jsx(cf,{tooltipContent:function(){return h.jsx(cf.Content,{children:n("drag_to_move","Drag to move")})},className:""+rY(en({},rW,{position:"absolute",left:1,top:null==e?void 0:e.top}))({active:null!=e&&e.active?"true":"false"}),tooltipMinWidth:110,children:h.jsx("div",{className:""+f1({active:null!=e&&e.active?"true":"false"}),children:h.jsxs("div",{className:""+f2,onMouseOver:function(){return a(!0)},onMouseLeave:function(){return a(!1)},"data-themeapi":"dashboard.icon",children:[h.jsx(w.DotsVerticalIcon,{className:f5({active:r?"true":"false"})+" "+f4(null==l?void 0:l.dashboard)}),h.jsx(w.DotsVerticalIcon,{className:f5({active:r?"true":"false"})+" "+f4(null==l?void 0:l.dashboard),style:{marginLeft:-8}})]})})})},f8=function(e){return h.jsx(null!=e&&e.onOrderChange?me:mt,en({},e))},f9=function(){},me=function(e){var t,n,i=(t=null==e?void 0:e.onOrderChange,n=f$({id:"re-order-drag-"+e.index,index:e.index,type:"list-view-drag"},e.onOrderChange||f9),t?[n[0],n[1]]:[null,null]);return h.jsx(mt,en({},e,{ref:i[0]}))},mt=o.forwardRef(function(e,t){var n,i,r,a,l,s,u,d,c,p,f,m,v,g,b,x=e.item,y=e.index,w=e.onDeleteItem,C=e.onOrderChange&&e.totalItemsCount>1,j=a_().textOverride,S=lu(),F=o.useState(!1),k=F[1];return h.jsx(uQ,{"data-component":"listview-item",role:"listitem","data-themeapi":"lists",children:h.jsxs("div",{style:{cursor:x.onClick?"pointer":void 0},onClick:function(){return x.onClick?x.onClick(y):void 0},className:""+u$.itemWrapper,onMouseOver:function(){return!!C&&k(!0)},onMouseLeave:function(){return!!C&&k(!1)},children:[h.jsx(f0,{clickable:!!x.onClick,highlight:x.highlight,ref:t,children:h.jsxs(uQ,{direction:"row","data-component":"list-cell-row",gap:"0.5rem",padding:null==S||null==(n=S.lists)||null==(n=n.row)?void 0:n.padding,alignItems:"center",position:"relative",children:[h.jsx("div",{className:""+u$.dragHandleContainer,children:!!C&&h.jsx(f6,{active:F[0],top:9})}),h.jsx(uM,{flex:1,paddingLeft:0,children:h.jsxs(uQ,{gap:"0.5rem",children:[(null==x?void 0:x.icon)&&h.jsx(u7,{icon:null==x?void 0:x.icon}),h.jsxs(uM,{flexGrow:1,paddingY:"5.5px","data-component":"list-title-subtext",children:["string"==typeof x.title?h.jsx("p",{className:""+u$.label(null==S?void 0:S.lists),children:x.title}):h.jsx(o.Fragment,{children:x.title}),x.subtext&&h.jsx("p",{className:""+u$.metadata(null==S?void 0:S.lists),children:x.subtext})]})]})}),x.select&&h.jsx("div",{className:""+u$.right,children:h.jsx(d_,{labelHidden:!0,label:j("function","Function"),subtle:!0,showClearBtn:x.select.showClearBtn,onChange:function(e){var t;return null==(t=x.select)?void 0:t.onChange(e,y)},options:x.select.options,selected:x.select.selected,rightAligned:!0,id:"function_"+y,controlClassName:u5({padding:null==S||null==(i=S.lists)||null==(i=i.select)?void 0:i.padding,fontSize:null==S||null==(r=S.lists)||null==(r=r.select)?void 0:r.fontSize,color:null==S||null==(a=S.lists)||null==(a=a.select)?void 0:a.color,fontWeight:null==S||null==(l=S.lists)||null==(l=l.select)?void 0:l.fontWeight,border:"0!important","&:hover":{padding:null==S||null==(s=S.lists)||null==(s=s.select)?void 0:s.padding,border:"0!important"}}),classNameInputComponent:u5({border:"0!important",fontSize:null==S||null==(u=S.lists)||null==(u=u.select)?void 0:u.fontSize,color:null==S||null==(d=S.lists)||null==(d=d.select)?void 0:d.color,fontWeight:null==S||null==(c=S.lists)||null==(c=c.select)?void 0:c.fontWeight,textAlign:"right","&:hover":{border:"0!important",background:null==S||null==(p=S.lists)||null==(p=p.select)||null==(p=p["&:hover"])?void 0:p.background}}),classNameInputControl:u5({padding:null==S||null==(f=S.lists)||null==(f=f.select)?void 0:f.padding}),classNameInputControlGrid:u5({padding:null==S||null==(m=S.lists)||null==(m=m.select)?void 0:m.padding,fontSize:null==S||null==(v=S.lists)||null==(v=v.select)?void 0:v.fontSize,color:null==S||null==(g=S.lists)||null==(g=g.select)?void 0:g.color,fontWeight:null==S||null==(b=S.lists)||null==(b=b.select)?void 0:b.fontWeight})})}),x.renderRight&&h.jsx("div",{className:""+u$.right,children:x.renderRight()}),x.editIcon&&h.jsx("div",{className:""+u$.edit,children:h.jsx(aG,{})}),x.preventDelete&&h.jsx("div",{className:""+u$.edit,children:h.jsx(aU,{})})]})}),w&&!x.preventDelete&&h.jsx("div",{className:""+u$.deleteWrapper(null==S?void 0:S.lists),children:h.jsxs("button",{type:"button",className:""+u$.deleteButton(null==S?void 0:S.lists),"data-testid":e.testId&&e.testId+"-"+y+"-remove",onClick:function(e){e.stopPropagation(),w&&w(y,x.context)},"aria-label":j("remove","Remove"),"data-themeapi":"lists.icon",children:[h.jsxs("span",{className:""+oi,children:[j("remove","Remove")," ",x.title]}),h.jsx(aB,{})]})})]})})}),mn=function(e){return h.jsx(uM,{paddingRight:null==e?void 0:e.paddingRight,as:null==e?void 0:e.as,children:h.jsx(la,{gap:"0.5rem",children:null==e?void 0:e.children})})},mi=function(e){var t,n,i,r,o,a,l,s,u,d,c,p,f,m,h,v,g,b,x;return rY({height:null!=(t=null==e?void 0:e.height)?t:"100%",width:"100%",transitionDuration:"250ms",transitionProperty:"all",transitionTimingFunction:"cubic-bezier(0.4,0,0.2,1)",WebkitFontSmoothing:"antialiased",justifyContent:null!=(n=null==e?void 0:e.align)?n:"center",alignItems:"center",display:"flex",cursor:"pointer",padding:"0 12px 1px 12px",background:null==(i=e.theme)?void 0:i.background,border:null==(r=e.theme)?void 0:r.border,boxShadow:null==(o=e.theme)?void 0:o.boxShadow,borderRadius:null==(a=e.theme)?void 0:a.borderRadius,color:null==(l=e.theme)?void 0:l.color,position:"relative","&:hover":mr(e.theme),variants:{size:{small:{fontSize:null==(s=e.theme)||null==(s=s.small)?void 0:s.fontSize,fontWeight:null==(u=e.theme)||null==(u=u.small)?void 0:u.fontWeight,padding:null!=(d=null==(c=e.theme)||null==(c=c.small)?void 0:c.padding)?d:"2px 8px 3px",height:"auto",width:"auto"},medium:{fontSize:null==(p=e.theme)||null==(p=p.medium)?void 0:p.fontSize,fontWeight:null==(f=e.theme)||null==(f=f.medium)?void 0:f.fontWeight,padding:null!=(m=null==(h=e.theme)||null==(h=h.medium)?void 0:h.padding)?m:"0 12px"},large:{fontSize:null==(v=e.theme)||null==(v=v.large)?void 0:v.fontSize,fontWeight:null==(g=e.theme)||null==(g=g.large)?void 0:g.fontWeight,padding:null!=(b=null==(x=e.theme)||null==(x=x.large)?void 0:x.padding)?b:"0 12px"}},isHovering:{true:mr(e.theme)}}})};function mr(e){var t,n,i,r;if(e)return{transitionDuration:"250ms",transitionProperty:"all",transitionTimingFunction:"cubic-bezier(0.4,0,0.2,1)",background:null==(t=e["&:hover"])?void 0:t.background,border:null==(n=e["&:hover"])?void 0:n.border,boxShadow:null==(i=e["&:hover"])?void 0:i.boxShadow,color:null==(r=e["&:hover"])?void 0:r.color}}var mo=function(e){var t,n,i,r=lu();return h.jsx("button",{onClick:function(t){e.disabled||(t.preventDefault(),(null==e?void 0:e.onChange)&&(null==e||e.onChange()))},"data-component":null==e?void 0:e["data-component"],"data-testid":null==e?void 0:e.testId,className:lr(mi({height:null==e?void 0:e.height,align:null==e?void 0:e.align,theme:null!=(t=null==e?void 0:e.addTheme)?t:null==r||null==(n=r.buttons)?void 0:n.add})({size:null!=(i=null==e?void 0:e.size)?i:"medium"}),e.className),"data-themeapi":"buttons.add",disabled:e.disabled,children:h.jsx("span",{children:null==e?void 0:e.children})})},ma=function(e){return h.jsx(uM,{children:h.jsx(mo,{testId:e.testId,onChange:function(){return null==e?void 0:e.onChange()},height:36,align:"left",disabled:e.disabled,className:u8("add-list-item"),children:h.jsxs(uQ,{children:["+ ",e.label]})})})},ml=function(e){return void 0===(null==e?void 0:e.children)?null:h.jsx(la,{gap:e.hasDeleteIcon?"0.9rem":"0.5rem",className:u8("listview"),columns:["repeat(1,minmax(0,1fr))"],"data-component":"list-view",role:"list",children:null==e?void 0:e.children})};function ms(e){var t,n=s.orderBy(e.initValues,function(e){return e.title}),i=a.useState(null!=(t=null==e?void 0:e.isOpen)&&t),r=i[0],o=i[1],l=uH(n,["title","subtext"]),u=l.setSearch,d=l.values,c=l.searchString,p=a.useRef(null);return ls(p,function(){return o(!1)}),e.hide?null:h.jsxs("div",{className:""+u$.addWrapper,ref:p,children:[h.jsx(uM,{marginTop:e.marginTop,"data-component":"new-item",children:h.jsx(ma,{testId:e.testId,onChange:function(){var t=!r;t&&e.onOpenDropdown&&e.onOpenDropdown(),o(t)},label:e.callToAction})}),h.jsxs(u6,{open:r,fixedHeight:!0,width:"calc(100% - 2px)",children:[h.jsx(uM,{padding:8,children:h.jsx(dS,{id:(null==e?void 0:e.id)+"-add-item",label:"Add Item",labelHidden:!0,autoFocus:!0,defaultValue:c,onChange:function(e){return u(e.target.value)}})}),d.map(function(t){return h.jsx(u6.Option,{testId:e.testId+"-option-"+t.refIndex,onChange:function(){var i;return(i=n[t.refIndex]).onSelected&&i.onSelected(i.value),e.onNew&&e.onNew(i.value),void o(!1)},label:t.item.title,subtext:t.item.subtext,icon:t.item.icon},"list_view_"+t.refIndex+"_option")})]})]})}function mu(e){var t,n;return h.jsxs(mn,{paddingRight:null!=(t=null==e?void 0:e.paddingRight)?t:"0.25rem",children:[e.items.length>0&&h.jsx(ml,{children:[].concat(e.items).map(function(t,n){return h.jsx(f8,{mode:null==e?void 0:e.mode,testId:e.testId,onDeleteItem:e.onDeleteItem,onOrderChange:e.onOrderChange,item:t,index:n,totalItemsCount:e.items.length},"list_view_item_"+n)})}),h.jsxs(o.Fragment,{children:[e.newItem&&h.jsx(ms,en({},e.newItem,{testId:e.testId,id:null==e?void 0:e.id,marginTop:e.items.length>0?"0.50rem":void 0})),e.newItemBtn&&h.jsx(ma,{testId:e.testId,onChange:null==(n=e.newItemBtn)?void 0:n.onClick,label:e.newItemBtn.callToAction,disabled:null==e?void 0:e.newItemBtn.disabled})]})]})}var md=function(e,t,n){return new T.HTML5BackendImpl(e,t,n)},mc=function(e){var t=e.children,n=e.id;return h.jsx("div",{id:n,children:h.jsx(k.DndProvider,{backend:function(e,t,i){var r=md(e,t,i);return r.setup=function(){var e=document.getElementById(n);e?e instanceof HTMLElement?r.addEventListeners(e):eR("DndProvider: Node with id "+n+" is not an HTMLElement."):eR("DndProvider: Node with id "+n+" not found.")},r.teardown=function(){var e=document.getElementById(n);e?e instanceof HTMLElement?e&&e instanceof HTMLElement&&r.removeEventListeners(e):eR("DndProvider: Node with id "+n+" is not an HTMLElement."):eR("DndProvider: Node with id "+n+" not found.")},r},options:{rootElement:document.getElementById(n)},children:t})})},mp=function(e){var t=e.children,n=o.useContext(k.DndContext);return h.jsx(k.DndProvider,{context:n,backend:md,options:{rootElement:document.getElementById(sy)},children:t})},mf=function(e){var t,n,i,r,o,a,l,s,u,d=e.title,c=e.hiddenUnlessEnabledInCss,p=e.className,f=e.show,m=e.hide,v=lu();return h.jsxs("div",{className:lr(u8("modal-header"),""+rY(en({width:"100%",lineHeight:"1.5rem"},null==v||null==(t=v.modals)?void 0:t.header,{"& h3":oo.text,variants:{hidden:{true:{position:"absolute",left:-1e4,top:"auto",width:1,height:1,overflow:"hidden"}}}}))({hidden:null!=(n=null!=(i=null==v||null==(r=v.modals)?void 0:r.header)?i:c)&&n})),"data-themeapi":"modals.header",style:m?{display:"none"}:f||null!=v&&null!=(o=v.modals)&&o.header?{display:"block"}:{display:"none"},"data-component":null!=(a=null==e?void 0:e["data-component"])?a:"modal-header",children:[h.jsx(uQ,{className:lr(null!=p?p:void 0),alignItems:"center",gap:"0.25rem",children:e.children||h.jsxs(h.Fragment,{children:[h.jsx(pZ,{className:u5({fontSize:null==v||null==(l=v.modals)||null==(l=l.header)?void 0:l.fontSize,fontWeight:null==v||null==(s=v.modals)||null==(s=s.header)?void 0:s.fontWeight}),children:d}),(null==e?void 0:e.tooltip)&&h.jsx(uM,{width:18,children:h.jsx(cf,{tooltipContent:function(){return h.jsx(cf.Content,{children:e.tooltip})},children:h.jsx(w.QuestionMarkCircleIcon,{"aria-label":"Help",color:rG(30)})})})]})}),null==e.titleExtra?void 0:e.titleExtra()]})},mm=function(e){var t,n,i,r,o,a=null!=(t=null==e?void 0:e.buttons)?t:"end",l=lu();return h.jsx("div","space-between"===(null==e?void 0:e.buttons)?{className:lr(u8("modal-footer"),""+cE(null==l||null==(r=l.modals)?void 0:r.footer)({buttons:a}),null==e?void 0:e.className),"data-themeapi":"modals.footer","data-component":null!=(o=null==e?void 0:e["data-component"])?o:"modal-footer","data-chipposition":"bottom.center",children:h.jsx(uQ,{gap:"0.75rem",justifyContent:"space-between",children:null==e?void 0:e.children})}:{className:lr(u8("modal-footer"),""+cE(null==l||null==(n=l.modals)?void 0:n.footer)({buttons:null==e?void 0:e.buttons}),null==e?void 0:e.className),"data-themeapi":"modals.footer","data-component":null!=(i=null==e?void 0:e["data-component"])?i:"modal-footer","data-chipposition":"bottom.center",children:null==e?void 0:e.children})},mh=function(e){var t,n,i,r=e.children,o=e.className,a=lu();return h.jsx("div",{className:lr(null!=e&&e.scrollable?""+cO:void 0,u8("modal-content"),""+rY({fontWeight:null==(i=null==a||null==(t=a.modals)?void 0:t.content)?void 0:i.fontWeight,fontSize:null==i?void 0:i.fontSize,padding:null==i?void 0:i.padding,background:null==i?void 0:i.background,variants:{scrollable:{true:en({background:null==i?void 0:i.alternativeBackground,paddingBottom:"0.75rem"},{"@media (max-height: 768px)":{height:420},"@media (min-height: 768px)":{height:600}})}}})({scrollable:null!=e&&e.scrollable?"true":"false"}),o),"data-themeapi":"modals.content","data-component":null!=(n=null==e?void 0:e["data-component"])?n:"modal-content",children:r})},mv={name:"1px9jck",styles:"min-height:100vh;padding-left:1rem;padding-right:1rem;text-align:center"},mg={name:"8pnu7z",styles:"display:inline-block;height:100vh;vertical-align:middle"},mb=function(e){var t,n,i,r,a,l,s,u,d,c=o.useRef();e.width&&(c.current=e.width);var p,f=null==(t=lu())?void 0:t.modals;return h.jsx("div",{style:{display:"inherit",zIndex:null!=(n=null==f||null==(i=f.base)?void 0:i.zIndex)?n:2147483147},children:h.jsx(uR,{appear:!0,show:e.isOpen,children:h.jsxs(sJ,{style:{zIndex:null!=(r=null==f||null==(a=f.base)?void 0:a.zIndex)?r:2147483147},"data-themeapi":"modals.base",className:lr("vizzly-modals",u5({position:"fixed",top:0,left:0,right:0,bottom:0,overflowY:null!=(l=e.options)&&l.disableModalScrolling?void 0:"auto",overflowX:null!=(s=e.options)&&s.disableModalScrolling?void 0:"hidden"})),onClose:function(){var t;return!(null!=f&&null!=(t=f.options)&&t.disableOutsideClick)&&e.onClose()},"data-testid":"modal",static:!(null!=f&&null!=(u=f.options)&&u.disableOutsideClick),children:[h.jsx(sJ.Overlay,{className:lr(u8("modal-overlay"),""+rY(en({position:"fixed",top:0,right:0,bottom:0,left:0},p=null==f?void 0:f.overlay,{variants:{dark:{true:{opacity:.7},false:{opacity:null==p?void 0:p.opacity}}}}))({dark:null!=(d=null==e?void 0:e.dark)&&d})),"data-themeapi":"modals.overlay"}),h.jsxs("div",{"data-testid":e["data-testid"],css:mv,children:[h.jsx("span",{css:mg,"aria-hidden":"true",children:"​"}),h.jsxs(uR.Child,{enter:"v_contentEnter",enterFrom:"v_contentEnterFrom",enterTo:"v_contentEnterTo",leave:"v_contentLeave",leaveFrom:"v_contentLeaveFrom",leaveTo:"v_contentLeaveTo",css:["margin-top:2rem;margin-bottom:2rem;display:inline-block;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));text-align:left;vertical-align:middle;transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;","sm"==c.current&&{width:"100%",maxWidth:"24rem"},"xl"==c.current&&{width:"100%",maxWidth:"36rem"},"2xl"==c.current&&{width:"100%",maxWidth:"42rem"},"4xl"==c.current&&{width:"100%",maxWidth:"56rem"},"7xl"==c.current&&{width:"100%",maxWidth:"80rem"},"",""],children:[!e.hideCloseIcon&&h.jsx(mC,{onClick:e.onClose}),h.jsx(my,{vizzlyPrefix:u8("modal-wrapper",e.namespace),children:e.children})]})]})]})})})},mx=o.createContext({isUsed:!1,setIsUsed:function(){}}),my=function(e){var t,n,i,r,a=lu(),l=o.useContext(mx),s=l.isUsed,u=l.setIsUsed;return s||u(!0),h.jsxs(mx.Provider,{value:{isUsed:!0,setIsUsed:u},children:[!s&&!e.disableDnD&&h.jsx(mp,{children:h.jsx("div",{className:lr(null==e?void 0:e.vizzlyPrefix,""+cD(null==a||null==(t=a.modals)?void 0:t.base),u8("modal-body")),"data-themeapi":"modals.base","data-component":null!=(n=null==e?void 0:e["data-component"])?n:"vizzly-modal-body","data-chipposition":"above.center","data-dndenabled":"true",children:null==e?void 0:e.children})}),(s||e.disableDnD)&&h.jsx("div",{className:lr(null==e?void 0:e.vizzlyPrefix,""+cD(null==a||null==(i=a.modals)?void 0:i.base),u8("modal-body")),"data-themeapi":"modals.base","data-component":null!=(r=null==e?void 0:e["data-component"])?r:"vizzly-modal-body","data-chipposition":"above.center","data-dndenabled":"false",children:null==e?void 0:e.children})]})},mw={name:"bq473o",styles:"height:1.5rem;width:1.5rem"},mC=function(e){var t,n,i,r,o=null==(t=lu())?void 0:t.modals;return"none"===(null==o||null==(n=o.options)?void 0:n.closeButton)?null:h.jsx("button",{type:"button","data-testid":"close-modal",onClick:function(){return e.onClick()},className:lr(u8("modal-close"),""+or.button,"inside"===(null==o||null==(i=o.options)?void 0:i.closeButton)?u5({position:"absolute",top:"0.5rem",right:"0.5rem"}):u5({position:"absolute",top:"-1.5rem",right:"-1.5rem"})),"data-themeapi":"modals.options.closeButton","data-component":"modal-close-button","aria-label":"Close modal button",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"inside"===(null==o||null==(r=o.options)?void 0:r.closeButton)?rG(5):"#FFF",css:mw,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})},mj=Object.assign(mb,{Header:mf,Footer:mm,Content:mh});function mS(e){var t=o.useState(!1),n=t[0],i=t[1];return o.useEffect(function(){return i(!1)},[n]),o.useImperativeHandle(e,function(){return{resetSize:function(){i(!0)}}}),n}var mF=o.memo(function(e){return h.jsx(h.Fragment,{children:e.annotations.map(function(t){return h.jsxs(I.Annotation,{dataKey:e.dataKey,datum:t.datum,dx:t.xOffset,dy:t.yOffset,children:[h.jsx(I.AnnotationConnector,{stroke:"#dedede"}),h.jsx(I.AnnotationLabel,{backgroundPadding:5,title:t.title,showAnchorLine:!1,titleFontSize:"10px",backgroundProps:{opacity:1}})]})})})},function(e,t){return JSON.stringify(e)==JSON.stringify(t)}),mk=function(e){var t=e.dataKey,n=e.data;if(!e.show||s.isEmpty(e.generateAnnotations))return null;var i,r,o,a,l,u=(r=n||[],o=s.minBy(r,function(e){return e[t]}),a=s.maxBy(r,function(e){return e[t]}),l=[],o&&l.push({title:"Low of "+o[t],datum:o,yOffset:15,xOffset:10}),a&&l.push({title:"High of "+a[t],datum:a,yOffset:-15,xOffset:10}),l);return h.jsx(mF,{dataKey:t,annotations:u})},mT=function(e){var t=function(t){var n,i,r,o,a=(n=t,n=n||{},i={variants:e.variants,compoundVariants:e.compoundVariants},r=en({},s.omit(e,["variants","compoundVariants"].concat(Object.keys(n)))),Object.keys(n).forEach(function(e){var t=n?n[e]:null;t&&(r=en({},r,i.variants&&i.variants[e][t]||{}))}),(i.compoundVariants||[]).forEach(function(e){var t=en({},e.css);s.every(Object.keys(s.omit(e,["css"])),function(t){var i;return e[t]==(null==(i=n)?void 0:i[t])})&&(r=en({},r,t))}),r);return g.css(a,"","")};return t.toString=t,t},m_="\n.visx-tooltip {\n  z-index: 14294967294; /* or whatever height is appropriate */\n}",mI=function(e,t){return t?e-40:e},mA=g.css({display:"inline-flex",position:"relative",flexDirection:"row",gap:24,padding:0,height:40},"",""),mD=g.css({name:"um88o8",styles:"color:inherit;margin:0 0 0 4px;flex:1;display:flex;justify-content:left;font-family:inherit;font-size:0.75rem;opacity:1;font-weight:400"}),mO=Object.assign(function(){return null},{icon:function(e){return mT({marginLeft:"2px",variants:{type:{lines:{width:8,paddingTop:3,maxHeight:1,backgroundColor:e},bar:{height:8,width:8,backgroundColor:e,borderRadius:2},area:{height:0,width:0,borderBottom:"8px solid "+e,borderLeft:"8px solid transparent"},scatter:{height:8,borderRadius:"50%",width:8,backgroundColor:e},pie:{height:8,borderRadius:"50%",width:8,backgroundColor:e}}}})},container:mA,label:mD,scrollbar:g.css({name:"1azakc",styles:"text-align:center"}),reason:function(e){return g.css(mD,{zIndex:999,pointerEvents:"none",overflow:"hidden",position:"absolute",marginLeft:"20px",marginTop:"-5px",padding:"3px 5px",boxShadow:"0 1px 3px 0 rgba(0,0,0,0.1),0 1px 2px 0 rgba(0,0,0,0.06)",borderRadius:"5px",paddingLeft:"12px",paddingRight:"8px",background:"linear-gradient(90deg, "+e+" 5px, rgba(255,255,255,1) 5px)"},"","")}}),mE=function(e){var t,n,i=o.useState(!1),r=i[1];return h.jsx("div",{className:(n=i[0],g.css(en({overflowX:n?"auto":"hidden",whiteSpace:"nowrap"},n?{"&::-webkit-scrollbar":{height:8,width:8,opacity:.6},"&:active::-webkit-scrollbar-thumb":{visibility:"visible"},"&:focus::-webkit-scrollbar-thumb":{visibility:"visible"},"&:hover::-webkit-scrollbar-thumb":{visibility:"visible"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(142, 139, 130, 0.8)",visibility:"hidden",borderRadius:4}}:{}),"","")+" "+(null!=(t=null==e?void 0:e.className)?t:"")),onMouseEnter:function(){return r(!0)},onMouseLeave:function(){return r(!1)},children:null==e?void 0:e.children})},mL=function(e){var t,n,i=o.useState(!1),r=i[0],a=i[1];return h.jsx(h.Fragment,{children:h.jsx("span",{onMouseLeave:function(){return a(!1)},onMouseEnter:function(){return a(!0)},className:mO.icon(null!=(t=e.color)?t:"#5d4e8c")({type:null==e?void 0:e.type}),children:r&&e.reason&&h.jsx("div",{className:mO.reason(null!=(n=e.color)?n:"#5d4e8c"),children:e.reason})})})},mP={natural:L.curveNatural,monotoneX:L.curveMonotoneX,monotoneY:L.curveMonotoneY,straight:L.curveLinear,step:L.curveStep,stepBefore:L.curveStepBefore,stepAfter:L.curveStepAfter},mR="-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif";function mN(e,t){return[].concat(null!=e&&e.areas?null==e?void 0:e.areas[t]:[],null!=e&&e.bars?null==e?void 0:e.bars[t]:[],null!=e&&e.lines?null==e?void 0:e.lines[t]:[])}function mM(e,t,n,i,r,o){var a={type:"linear",nice:!0},l={paddingOuter:.05,paddingInner:.3,type:n?"time":"band"};return"y"===e&&o&&(a=en({},a,{domain:o})),"x"===e?(r&&(l=en({},l,{type:"band"})),i&&(l=en({},l,{type:"pow"})),t?a:l):t?l:a}function mz(e,t,n,i){return function(r){var o;return null!=(o=t(r,e))?o:n[i]}}var mq,mB=function(e,t,n){return function(i){if(e){var r,o=(r=null==n?void 0:n.find(function(e){return e.x==i}))?Object.keys(r)[0]:null;return e(i,o)}return t?mW(i):i}},mV=function(e){return function(t){return null!=e&&e.formatYAxisLabel?null==e?void 0:e.formatYAxisLabel(t):t}},mW=function(e){return e?new Date(e).toLocaleDateString():""},mH=function(e){return h.jsx(mE,{className:null!=e&&e.alignCenter?""+mO.scrollbar:void 0,x:!0,children:h.jsx(E,{scale:O.scaleOrdinal({domain:null==e?void 0:e.keys,range:null==e?void 0:e.colors}),children:function(t){return h.jsx("div",{className:mO.container,children:t.map(function(t,n){var i,r=null==e||null==(i=e.typeIndex)?void 0:i.find(function(e){return e.index===t.index}),o=e.conditionalFormattingPossibilities?e.conditionalFormattingPossibilities(t.text):[],a=function(){var i=null!=e&&e.formatter&&null!=e&&e.colors&&e.data?mz(t.datum,null==e?void 0:e.formatter,null==e?void 0:e.colors,n)(e.data):t.value,r=o.filter(function(e){var n=e.conditionIsMet(t.datum);return e.isRuleOnDimension&&n});return e.replaceDimensionColorsIfPossible&&r[0]&&r[0].conditionIsMet(t.datum)?r[0].color:i},l=e.replaceDimensionColorsIfPossible?o.filter(function(e){return!e.isRuleOnDimension}):o;return h.jsx(mL,{type:null==r?void 0:r.type,color:a()}),h.jsxs(D.LegendItem,{margin:"0",children:[l.map(function(e,t){return h.jsx(mL,{type:null==r?void 0:r.type,color:e.color,reason:e.explanation},t)}),h.jsx(mL,{type:null==r?void 0:r.type,color:a(),reason:l.length>0?"Original color":void 0}),h.jsx(D.LegendLabel,{className:mO.label,style:{},children:null!=e&&e.formatSeriesName?null==e?void 0:e.formatSeriesName(null==t?void 0:t.text):t.text})]},"legend-quantile-"+n)})})}})})},mY=function(e){var t,n,i,r,o,a=[],l=0;return null!=e&&e.bars&&(null==e||e.bars.keys.forEach(function(){a.push({type:"bar",index:l}),l+=1})),null!=e&&e.areas&&(null==e||null==(i=e.areas)||i.keys.forEach(function(){a.push({type:"area",index:l}),l+=1})),null==e||!e.lines||null!=e&&null!=(t=e.lines)&&t.scatter||null==e||null==(r=e.lines)||r.keys.forEach(function(){a.push({type:"lines",index:l}),l+=1}),null!=e&&e.lines&&null!=e&&null!=(n=e.lines)&&n.scatter&&(null==e||null==(o=e.lines)||o.keys.forEach(function(){a.push({type:"scatter",index:l}),l+=1})),a},mG=function(e,t){var n=-1/0;if(t&&e)for(var i,r=ed(t);!(i=r()).done;)for(var o=i.value,a=0;a<e.length;a++)e[a][o]>n&&(n=e[a][o]);return n},mU=function(e,t){var n=1/0;if(t&&e)for(var i,r=ed(t);!(i=r()).done;)for(var o=i.value,a=0;a<e.length;a++)e[a][o]<n&&(n=e[a][o]);return 1/0===n?0:n},mK=mT({margin:0,fontSize:"0.9rem",padding:0}),mX=mT({borderBottom:"1px dotted rgba(0,0,0,0.025)"}),mQ=mT({display:"flex",alignItems:"center",gap:6}),mJ=mT({display:"block",padding:0,margin:0,textAlign:"right"}),mZ=mT({display:"grid",gridTemplateRows:"auto 1fr",gridRowGap:12,variants:{displayGrid:((mq={}).true={gridTemplateColumns:"1fr 1fr",gridColumnGap:48},mq.false={gridTemplateColumns:"1fr"},mq)}}),m$=mT({borderTop:"1px solid rgba(200, 200, 200, 0.4)"}),m0=mT({display:"grid",gridTemplateColumns:"auto 1fr",gap:12,fontSize:"0.75rem",fontWeight:500,color:"inherit",alignItems:"center"}),m1=mT({display:"block",padding:0,margin:0}),m2=Object.assign(function(){return null},{wrapper:function(e,t,n){var i=Array(n||1).fill("auto").join(" ");return t&&(i="20px "+i),e&&(i+=" 40px"),mT({display:"grid",gridTemplateRows:i,gap:12,padding:6})},heading:mK,total:m$,highlighted:mT({wordBreak:"break-all"}),row:mX,rowLabel:mQ,resultGrid:mZ,rowValue:mJ,tooltipRowContainer:m0,totalLabel:m1,sectionTitle:mT({color:"#7d838d",fontSize:12,marginTop:"0.25rem",marginBottom:0})}),m5=rY({fontSize:12}),m7=rY({color:rG(35)}),m4=rY({variants:{1:{true:{fontSize:22.652}},2:{true:{fontSize:19.416}},3:{true:{fontSize:18}},4:{true:{fontSize:16}}}}),m3=function(e){var t,n,i=e.chartProps,r=e.datumKey,o=e.tooltipNearestDatum.key,a=[].concat((n=s.sumBy([i.bars,i.areas,i.lines],function(e){return e?1:0})>=1,i.sharedTooltip||n?Object.keys(null!=(t=null==e?void 0:e.datumKey)?t:{}):[o]));a.sort(function(t,n){var i=e.formatSeriesName(t),r=e.formatSeriesName(n);return i?r?i<r?-1:1:-1:1});var l=[].concat(a).filter(function(e){return e&&void 0!==r[e].datum[e]}),u=e.formatValue?e.formatValue(r[o].datum[o]):r[o].datum[o];return h.jsxs(m6,{total:i.showTotalOnTooltip,title:!0,sections:void 0!==u&&l.length>1?2:1,children:[h.jsx("p",{className:""+m2.heading,children:null==e?void 0:e.heading}),void 0!==u&&h.jsxs("div",{className:""+m2.resultGrid({displayGrid:l.length>10?"true":"false"}),children:[l.length>1&&h.jsx("p",{className:m2.sectionTitle+" "+m7,children:"Active"}),h.jsx(m9,{datumKey:r,keyString:o,chartProps:i,chartTooltipProps:e})]}),l.length>1&&h.jsxs("div",{className:""+m2.resultGrid({displayGrid:l.length>10?"true":"false"}),children:[h.jsx("p",{className:m2.sectionTitle+" "+m7,children:"All"}),l.map(function(t){var n;return null!=i&&null!=(n=i.lines)&&n.scatter&&void 0===r[t].datum[t]?null:h.jsx(m9,{datumKey:r,keyString:t,chartProps:i,chartTooltipProps:e},"chart_"+t)})]}),i.showTotalOnTooltip&&h.jsxs("div",{className:m2.total+" "+m2.tooltipRowContainer,children:[h.jsx("p",{className:""+m2.totalLabel,children:"Rounded total: "}),h.jsx("p",{className:m2.row+" "+m2.rowValue,children:null==e?void 0:e.total})]})]})},m6=function(e){return h.jsx("div",{className:""+m2.wrapper(e.total,null==e?void 0:e.title,null==e?void 0:e.sections),"data-sections":null==e?void 0:e.sections,children:null==e?void 0:e.children})},m8=function(e){var t,n;return h.jsxs("div",{className:""+m2.tooltipRowContainer,children:[h.jsxs("span",{className:m2.row+" "+m2.rowLabel,children:[(null==e?void 0:e.icon)&&h.jsx(mL,{type:null==e||null==(t=e.icon)?void 0:t.type,color:null==e||null==(n=e.icon)?void 0:n.color}),h.jsx("span",{className:""+m2.highlighted,children:null==e?void 0:e.label})]}),h.jsx("p",{className:m2.row+" "+m2.rowValue,children:null==e?void 0:e.value})]})},m9=function(e){var t,n,i,r,o,a,l,s=e.datumKey,u=e.keyString,d=e.chartProps,c=e.chartTooltipProps,p=(t=s[u].key,null!=d&&d.bars&&null!=d&&null!=(i=d.bars.keys)&&i.find(function(e){return e===t})?"bar":null!=d&&d.lines&&(null==d||!d.lines.scatter)&&null!=d&&null!=(r=d.lines)&&null!=(r=r.keys)&&r.find(function(e){return e===t})?"lines":null!=d&&d.areas&&null!=d&&null!=(o=d.areas)&&null!=(o=o.keys)&&o.find(function(e){return e===t})?"area":null!=d&&d.lines&&null!=d&&d.lines.scatter&&null!=d&&null!=(a=d.lines)&&null!=(a=a.keys)&&a.find(function(e){return e===t})?"scatter":null);if(!p)return null;var f,m,v,g,b,x,y,w,C,j=null!=(g=s[u].datum,l="area"==p&&null!=d&&null!=(b=d.areas)&&b.formatter?d.areas.formatter(u):"bar"==p&&null!=d&&null!=(x=d.bars)&&x.formatter?null==d||null==(y=d.bars)?void 0:y.formatter(g,u):"lines"==p&&null!=d&&null!=(w=d.lines)&&w.formatter?d.lines.formatter(u):"scatter"==p&&null!=d&&null!=(C=d.lines)&&C.formatter?d.lines.formatter(g,u):void 0)?l:c.getColor(u),S=c.formatSeriesName(u),F=c.formatValue?c.formatValue(s[u].datum[u]):s[u].datum[u];return h.jsx("div",{style:{width:380},children:h.jsx(m8,{icon:{type:p,color:j},label:S,value:"undefined"===F?"-":F})})};function he(e,t,n,i,r,o){void 0===o&&(o=0);var a=document.createElement("canvas").getContext("2d");if(!a)return e;a.font=r+" "+i+" "+n;var l=t-o;if(a.measureText(e).width+.4*((null==e?void 0:e.length)-1)>l){for(var s=l-a.measureText("...").width,u="",d=0;d<e.length;d++){var c=e[d],p=a.measureText(c).width;if(!(s>=p))break;u+=c,s-=p+.4}return u+"..."}return e}function ht(e,t,n){if(1===e.length)return null==t?void 0:t.from.x;var i=e[n+1],r=e[n-1];return i&&r||i?i.from.x-t.from.x:r?t.from.x-r.from.x:0}var hn=function(e){if("string"==typeof e)return parseInt(e,10);if("number"==typeof e)return e;throw Error("Invalid font size type")},hi=function(e){if(void 0!==e){if("number"==typeof e)return e;switch(e){case"normal":return 400;case"bold":return 700;case"bolder":return 900;case"lighter":return 100;default:var t=parseInt(e,10);if(isNaN(t))throw Error("Invalid font weight type");return t}}};function hr(e,t,n){var i=(t-n)/3;return i*e+(n-9*i)}function ho(e,t,n,i){var r,o,a,l,s=0,u=(o=null==i?void 0:i.fontFamily,{fontFamily:null!=(a=null!=(l=null==n?void 0:n.fontFamily)?l:o)?a:mR,fontWeight:null!=n&&n.fontWeight?hi(n.fontWeight):"700",fontSize:null!=n&&n.fontSize?hn(n.fontSize):9,letterSpacing:"normal"}),d=u.fontFamily,c=u.fontWeight,p=u.fontSize,f=u.letterSpacing;return e.forEach(function(e){var n,i,r,o,a,l,u,m;s=Math.max(s,(n=t(e),l=document.createElementNS("http://www.w3.org/2000/svg","svg"),(u=document.createElementNS("http://www.w3.org/2000/svg","text")).textContent=n,u.setAttribute("font-family",d),u.setAttribute("font-weight",""+c),u.setAttribute("font-size",""+p),u.setAttribute("letter-spacing",f),l.appendChild(u),document.body.appendChild(l),m=u.getBBox().width,document.body.removeChild(l),m))}),s}var ha=function(e){var t,n,i,r,o,a,l={fontFamily:null!=(t=null==e||null==(n=e.theme)?void 0:n.fontFamily)?t:mR,fontWeight:null==e||null==(i=e.theme)?void 0:i.fontWeight,fontSize:null==e||null==(r=e.theme)?void 0:r.fontSize,style:{fill:null!=(o=null==(a=e.theme)?void 0:a.color)?o:rG(10)}};if("y"===(null==e?void 0:e.axis)){var s,u,d=-((null==e?void 0:e.axisFromPoint.y)+e.axisToPoint.y)/2;return h.jsx("svg",{x:"-1.25em",y:"0",fontSize:null==e||null==(s=e.theme)?void 0:s.fontSize,style:{overflow:"visible"},className:"vizzly-axis-title vizzly-axis-title-y",children:h.jsx("text",en({transform:"rotate(-90)",x:d,y:"-"+(e.horizontal?null!=(u=e.leftPanelWidth)?u:82:38)},l,{textAnchor:"middle",children:h.jsx("tspan",{x:d,dy:"0em",children:null==e?void 0:e.label})}))})}return h.jsx("g",{className:"vizzly-axis-title vizzly-axis-title-x",transform:"translate(0, 0)",children:h.jsx("text",en({x:((null==e?void 0:e.axisFromPoint.x)+e.axisToPoint.x)/2,y:"34",textAnchor:"middle",dominantBaseline:"middle"},l,{children:null==e?void 0:e.label}))})},hl=function(e){var t,n,i,r,a,l,s,u,d,c,p,f,v,g,b,x,y,w,C=e.ticks,j=e.xAxisIsTime,S=(t=e.chartWidth,r=e.axisFromPoint.x,a=e.axisToPoint.x,l=null==e?void 0:e.labelProps,s=null==e||null==(f=e.theme)?void 0:f.labels,void 0===(u=j&&C.length>10)&&(u=!1),c=(d=o.useState([]))[0],p=d[1],o.useEffect(function(){if(t&&C.length&&j){var e,n,i,o=ho(C,function(e){return e.formattedValue},s,l),d=C.find(function(e){return e.from.x+o/8>=r+o/2}),c=a-r-1.2*o;if(!(c<0)){for(var f=Math.floor((c-40)/(o+(u&&o>54?60:30))),m=Math.max(1,Math.floor(C.length/(f+1))),h=[d],v=(null==d?void 0:d.index)+m;v<C.length;v+=m)h.push(C[v]);p(h)}}},[t,C,j,l,s]),j?c:C);return"none"===e.type?null:e.horizontal?h.jsxs("g",{className:"visx-group visx-axis-tick vizzly-axis-v",transform:"translate(0, 0)",children:["end2end"===(null==e?void 0:e.type)&&(null==e||null==(v=e.ticks)?void 0:v.map(function(t,n,i){var r,o;return 0===n||n===(null==e?void 0:e.ticks.length)-1?m.createElement(hs,en({},t,{width:ht(i,t,n),labelProps:null==e?void 0:e.labelProps,left:null==e?void 0:e.axisFromPoint.x,right:null==e?void 0:e.axisToPoint.x,last:n+1===(null==e?void 0:e.ticks.length),key:t.index+"-"+(null==e?void 0:e.uniqueId),horizontal:e.horizontal,theme:null==e||null==(r=e.theme)?void 0:r.labels,type:null==e?void 0:e.type})):null})),"end2end"!==(null==e?void 0:e.type)&&(null==S?void 0:S.map(function(t,n,i){var r;return m.createElement(hs,en({},t,{width:ht(i,t,n),labelProps:null==e?void 0:e.labelProps,left:null==e?void 0:e.axisFromPoint.x,right:null==e?void 0:e.axisToPoint.x,last:n+1===(null==e?void 0:e.ticks.length),key:(null==t?void 0:t.index)+"-"+(null==e?void 0:e.uniqueId),horizontal:e.horizontal,theme:null==e||null==(r=e.theme)?void 0:r.labels,type:null==e?void 0:e.type,xAxisIsTime:null==e?void 0:e.xAxisIsTime}))})),!(null!=e&&e.hideAxisLine)&&h.jsx("line",{className:"visx-line",x1:e.axisFromPoint.x,y1:e.axisFromPoint.y,x2:e.axisToPoint.x,y2:e.axisToPoint.y,fill:"transparent",shapeRendering:"crispEdges",stroke:null==e?void 0:e.tickStroke,strokeWidth:null==e?void 0:e.strokeWidth,strokeLinecap:"square"}),(null==e?void 0:e.label)&&h.jsx(ha,en({},e,{theme:null==e||null==(g=e.theme)?void 0:g.axisTitles,axis:"x",horizontal:null!=(b=null==e?void 0:e.axisHorizontal)&&b,leftPanelWidth:e.leftPanelWidth}))]}):h.jsxs(o.Fragment,{children:[null==e||null==(x=e.ticks)?void 0:x.map(function(t,n){var i;return h.jsx("g",{className:"visx-group visx-axis-tick vizzly-axis-h",transform:"translate(0, 0)",children:h.jsx(hs,en({},t,{width:82,labelProps:null==e?void 0:e.labelProps,left:null==e?void 0:e.axisFromPoint.x,right:null==e?void 0:e.axisToPoint.x,last:n+1===(null==e?void 0:e.ticks.length),horizontal:e.horizontal,theme:null==e||null==(i=e.theme)?void 0:i.labels,type:null==e?void 0:e.type,xAxisIsTime:null==e?void 0:e.xAxisIsTime}))},t.index+"-"+(null==e?void 0:e.uniqueId))}),(null==e?void 0:e.label)&&h.jsx(ha,en({},e,{theme:null==e||null==(y=e.theme)?void 0:y.axisTitles,axis:"y",horizontal:null!=(w=e.axisHorizontal)&&w}))]})},hs=function(e){var t,n,i,r,a,l,s,u,d,c,p,f=e.type,m=null!=(t=e.theme)&&t.fontSize?hn(null==(n=e.theme)?void 0:n.fontSize):9,v=null!=(i=e.theme)&&i.fontWeight?""+hi(null==(r=e.theme)?void 0:r.fontWeight):"700",g=null!=(a=null==(l=e.theme)?void 0:l.fontFamily)?a:mR,b=e.width/6,x=he(e.formattedValue,e.horizontal&&e.last?e.width-hr(m,40,5):e.width-hr(m,4,0),g,""+m,v,b),y="end2end"===f?e.last?e.right:null==e?void 0:e.left:e.horizontal?null!=e&&e.last?(null==e||null==(s=e.from)?void 0:s.x)-5:null==e||null==(u=e.from)?void 0:u.x:-5,w=null==e||null==(d=e.from)?void 0:d.y;return h.jsxs(o.Fragment,{children:[!e.horizontal&&h.jsx("line",{className:"visx-line",x1:"0",y1:w,x2:"0",y2:w,fill:"transparent",shapeRendering:"crispEdges",stroke:"#eaeaea",strokeWidth:"1",strokeLinecap:"square"}),h.jsx("g",{x:"-0.25em",y:"0.25em",children:h.jsx("text",{transform:"",x:y,y:e.horizontal?"16":w,fontFamily:g,fontWeight:v,fontSize:""+m,letterSpacing:.4,stroke:"none",textAnchor:"end2end"===f?e.last?"end":"start":e.horizontal?"middle":"end",style:{fill:null!=(c=null==(p=e.theme)?void 0:p.color)?c:"rgba(0, 0, 0, 0.6)"},"data-horizontal":e.horizontal?"true":"false","data-axisistime":e.xAxisIsTime?"true":"false","data-type":"type-"+f,children:h.jsx("tspan",{x:y,dy:e.horizontal?0:2,children:"end2end"===f||e.xAxisIsTime?e.formattedValue:x})})})]})},hu=function(e){var t,n,i;return"none"===e.type?null:h.jsxs("g",{className:"visx-group visx-axis-tick vizzly-axis-v",transform:"translate(0, 0)",children:["end2end"===(null==e?void 0:e.type)&&(null==e||null==(t=e.ticks)?void 0:t.map(function(t,n,i){var r,a;return 0===n?h.jsxs(o.Fragment,{children:[h.jsx(hd,en({},t,{width:null!=e&&e.horizontal?ht(i,t,n):50,labelProps:null==e?void 0:e.labelProps,left:null==e?void 0:e.axisFromPoint.x,right:null==e?void 0:e.axisToPoint.x,last:!1,top:null==e?void 0:e.axisToPoint.y,horizontal:e.horizontal,theme:null==e||null==(r=e.theme)?void 0:r.labels,type:null==e?void 0:e.type})),h.jsx(hd,en({},t,{width:null!=e&&e.horizontal?ht(i,t,n):50,labelProps:null==e?void 0:e.labelProps,left:null==e?void 0:e.axisFromPoint.x,right:null==e?void 0:e.axisToPoint.x,top:null==e?void 0:e.axisToPoint.y,last:!0,horizontal:e.horizontal,theme:null==e||null==(a=e.theme)?void 0:a.labels,type:null==e?void 0:e.type,maxValueOfYAxis:null==e?void 0:e.maxValueOfYAxis}))]},t.index+"-"+(null==e?void 0:e.uniqueId)):null})),"end2end"!==(null==e?void 0:e.type)&&(null==e||null==(n=e.ticks)?void 0:n.map(function(t,n,i){var r;return m.createElement(hd,en({},t,{width:null!=e&&e.horizontal?ht(i,t,n):50,labelProps:null==e?void 0:e.labelProps,left:null==e?void 0:e.axisFromPoint.x,top:null==e?void 0:e.axisToPoint.y,right:null==e?void 0:e.axisToPoint.x,last:!1,key:t.index+"-"+(null==e?void 0:e.uniqueId),horizontal:e.horizontal,theme:null==e||null==(r=e.theme)?void 0:r.labels,type:null==e?void 0:e.type}))})),(null==e?void 0:e.label)&&h.jsx(ha,en({},e,{theme:null==e||null==(i=e.theme)?void 0:i.axisTitles,axis:null!=e&&e.horizontal?"x":"y",horizontal:null==e?void 0:e.horizontal}))]})},hd=function(e){var t,n,i,r,o,a,l,s,u,d=null!=(t=e.theme)&&t.fontSize?hn(null==(n=e.theme)?void 0:n.fontSize):"9",c=null!=(i=e.theme)&&i.fontWeight?""+hi(null==(r=e.theme)?void 0:r.fontWeight):"700",p=null!=(o=null==(a=e.theme)?void 0:a.fontFamily)?o:mR,f=he(null!=(l=null==e?void 0:e.maxValueOfYAxis)?l:e.formattedValue,e.width,p,""+d,c,5),m=e.horizontal?e.last?e.right:e.from.x:e.to.x;return h.jsx("g",{x:"-0.25em",y:"0.25em",children:h.jsx("text",{transform:"matrix(1, 0, 0, 1, 0, 0)",x:m,y:e.horizontal?"16":null!=e&&e.last?e.top:e.from.y,fontFamily:p,fontWeight:c,fontSize:d,letterSpacing:.4,stroke:"none",textAnchor:e.horizontal&&"end2end"===e.type?e.last?"end":"start":"middle",style:{fill:null!=(s=null==(u=e.theme)?void 0:u.color)?s:"rgba(0, 0, 0, 0.6)"},children:h.jsx("tspan",{x:m,dy:e.horizontal?0:2,children:f})})})},hc=o.memo(function(e){var t=null!=e&&e.formatYAxisLabel?null==e?void 0:e.formatYAxisLabel(e.value):e.value,n=e.goalLine,i=e.axisProps,r=e.toX,a=o.useState(0),l=a[0],s=a[1],u=o.useRef(null);o.useEffect(function(){u.current&&s(u.current.getBBox().width+16)},[t]);var d=o.useMemo(function(){return function(e,t){for(var n,i,r,o=0,a=ed(e);!(r=a()).done;){var l=r.value;if(l.value<=t.value&&(n=l),l.value>=t.value){i=l;break}}return n&&i&&(o=n.value===i.value?n.from.y:n.from.y+(i.from.y-n.from.y)/(i.value-n.value)*(t.value-n.value)),Math.round(o)}(i.ticks,n)},[i.ticks,n]);return h.jsxs("g",{children:[h.jsx(P.Line,{from:{x:0,y:d},to:{x:r,y:d},stroke:n.color,strokeDasharray:"dashed"==n.strokeStyle?"5,5":void 0,strokeWidth:2,strokeLinecap:"round",shapeRendering:"smooth"}),h.jsxs("g",{transform:"translate("+(r-l-8- -(null==e?void 0:e.marginRight))+","+(d+8)+")",children:[h.jsx("path",{d:"M 0,0\n        l -8,-8 \n        l 8,-8 \n        h "+l+" \n        a 3,3 0 0 1 3,3 \n        v 10 \n        a 3,3 0 0 1 -3,3 \n        h "+-l+" z",fill:n.color}),h.jsx("text",{ref:u,x:l/2,y:-1,dy:-4,textAnchor:"middle",fontFamily:mR,fontSize:9,fill:hp(n.color,["#fff",rG(0)]),children:t})]})]})}),hp=function(e,t){return s.maxBy(t,function(t){return v.contrast(t,e)})||e},hf=function(e,t,n){return(n+"_"+t+"_"+btoa(e.key+"_"+e.value+"_"+e.direction)).replace(/=/g,"")};function hm(e,t){return null==t?void 0:t.filter(function(t){return t.key===e})}function hh(e,t){return hf(e,t,">="===e.direction?"above":"below")}var hv=function(e){var t=o.useContext(I.DataContext)||{},n=t.yScale,i=t.width;if(!n||!i)return null;var r=e.height-e.margin.top;return h.jsxs(o.Fragment,{children:[h.jsx("g",{transform:"translate(50, 0)",children:e.threshold.map(function(t,r){var o,a,l=n(t.value);return h.jsx("g",{children:h.jsx("line",{x1:0,y1:l,x2:i-e.margin.right-e.margin.left,y2:l,stroke:null!=(o=null==(a=e.theme)?void 0:a.stroke)?o:"#F4F4F4",strokeWidth:"1",fill:"transparent","data-themeapi":"charts.threshold.stroke"})},"threshold-"+r)})}),h.jsx("defs",{children:e.threshold.map(function(t,i){var a=n(t.value);return h.jsxs(o.Fragment,{children:[h.jsx("clipPath",{id:hf(t,e.idPrefix,"above"),children:h.jsx("rect",{x:"0",y:"0",width:"100%",height:a})}),h.jsx("clipPath",{id:hf(t,e.idPrefix,"intermediate"),children:h.jsx("rect",{x:"0",y:a,width:"100%",height:0})}),h.jsx("clipPath",{id:hf(t,e.idPrefix,"below"),children:h.jsx("rect",{x:"0",y:a,width:"100%",height:r-a})})]},"threshold-"+i)})})]})};function hg(e,t){try{var n=getComputedStyle(document.documentElement).getPropertyValue(e).trim();return n?v(n).brighten(t).hex():void 0!==e?v(e).brighten(t).css():void 0}catch(i){return void console.error("Error in lightenColor:",i)}}var hb=function(e,t,n,i){return{xAccessor:function(r){return r?i?r[n]:e?new Date(r[t]):r[t]:void 0},yAccessor:function(r){return r?i?e?new Date(r[t]):r[t]:r[n]:void 0}}},hx=function(e){var t,n,i,r,a,l,u,d,c,p,f,v,g,b,x,y,w,C,j,S,F,k,T,_,D,O,E,L,P,R,N,M,z,q,B,V,W,H,Y,G,U,K,X,Q,J,Z,$,ee,et,ei,er,eo,ea,el,es,eu,ed,ec,ep,ef,em,eh,ev,eg=mI(null!=(L=null==e?void 0:e.height)?L:300,null==e?void 0:e.legend),eb=e.approxYAxisLabelCount,ex=void 0===eb?"auto":eb,ey=e.approxXAxisLabelCount,ew=void 0===ey?"auto":ey,eC=e.removeStroke,ej=void 0!==eC&&eC,eS=e.horizontal,eF=void 0!==eS&&eS,ek=e.theme,eT=e.x,e_=(el=e.x,es=e.bars,e.forceXAxisAsTime&&!es||s.isDate(null==(eu=mN({bars:es,lines:e.lines,areas:e.areas},"data")[0])?void 0:eu[el])),eI=mP["natural"===(i=(t=e.lineCurve)||"natural")&&(i=eF?"monotoneY":"monotoneX"),i],eA=function(e,t){var n,i,r,o;return{fill:null!=(n=null==t?void 0:t.color)?n:"rgba(0, 0, 0, 0.6)",fontSize:null!=(i=null==t?void 0:t.fontSize)?i:9,fontWeight:null!=(r=null==t?void 0:t.fontWeight)?r:700,fontFamily:null!=(o=null==t?void 0:t.fontFamily)?o:mR,textAnchor:e?"end":"middle",scaleToFit:"shrink-only"}},eD=(a=!(null!=e&&e.horizontal)&&(null==e?void 0:e.forceXAxisAsTime),l=o.useRef(null),d=(u=o.useState(0))[0],c=u[1],o.useEffect(function(){var e=s.throttle(function(){c(l.current?l.current.clientWidth:0)},100);return e(),window.addEventListener("resize",function(){return e}),function(){window.removeEventListener("resize",e)}}),p=Math.min(d<1e3?parseInt((""+d)[0]):12,12),"auto"!=ew?[l,ew]:[l,p*(a?4:1)]),eO=eD[0],eE=eD[1],eL=o.useState(void 0),eP=eL[0],eR=eL[1],eN=o.useState(void 0),eM=eN[0],ez=eN[1],eq=mN(e,"colors"),eB=I.buildChartTheme(en({},I.lightTheme,{colors:eq,tickLength:0,gridColor:"",gridColorDark:""})),eV=mN(e,"data"),eW=null!=(P=null==ek||null==(R=ek.axis)?void 0:R.stroke)?P:"#eaeaea",eH={xAxisType:g=0===ew?"none":2===ew?"end2end":"auto",xAxisAttributes:"end2end"===g?{left:0}:null,yAxisType:0===ex?"none":2===ex?"end2end":"auto"},eY=eH.xAxisType,eG=eH.xAxisAttributes,eU=eH.yAxisType,eK=null!=(N=null!=(M=null==e||null==(z=e.lines)?void 0:z.data.length)?M:null==e||null==(q=e.areas)||null==(q=q.data)?void 0:q.length)?N:null==(B=e.bars)?void 0:B.data.length,eX=o.useMemo(function(){for(var t=-1/0,n=1/0,i=0,r=["bars","lines","areas"];i<r.length;i++){var o,a,l=r[i],s=null==(o=e[l])?void 0:o.data,u=null==(a=e[l])?void 0:a.keys,d=mG(s,u),c=mU(s,u);d>t&&(t=d),c<n&&(n=c)}return{maxValue:t,minValue:n}},[null==(x=e.bars)?void 0:x.data,null==(y=e.bars)?void 0:y.keys,null==(w=e.lines)?void 0:w.data,null==(C=e.lines)?void 0:C.keys,null==(j=e.areas)?void 0:j.data,null==(S=e.areas)?void 0:S.keys]),eQ=eX.maxValue,eJ=eX.minValue,eZ=null!=(V=null==(W=e.lines)?void 0:W.threshold)?V:null==(H=e.areas)?void 0:H.threshold,e$=function(e,t,n,i,r,o){if(e&&t)return ho(r,function(e){return n.formatXAxisLabel?n.formatXAxisLabel(e[o]):String(e[o])},null==i?void 0:i.labels,void 0)}(eF,null!=(Y=e.forceXAxisAsTime)&&Y,e,ek,mN(e,"data"),e.x),e0=e.sparkline?{top:2,bottom:2,left:"right"!==e.yAxisOrientation?50:0,right:0}:(k="right"!==e.yAxisOrientation,O=Boolean(null==(_=null==e?void 0:e.axisTitles)?void 0:_.x),E=Boolean(null==_?void 0:_.y),{top:8,bottom:O?40:25,left:eF?("none"!==eY?e$?e$+10:82:25)+(E?24:0):k?50+(E?24:0):25,right:25});return h.jsxs("div",{ref:eO,style:{position:"relative",height:eg},className:"vizzly-xy-chart",children:[h.jsxs(I.XYChart,{theme:eB,margin:e0,height:eg,xScale:mM("x",eF,e_,null==e||null==(G=e.lines)?void 0:G.scatter,!(null==e||!e.lines)||!(null==e||!e.areas)),yScale:(eh=(ed=null==e?void 0:e.goalLine)?Math.max.apply(Math,ed.map(function(e){return e.value})):void 0,ev=ed?Math.min.apply(Math,ed.map(function(e){return e.value})):void 0,eh&&ev&&eh>eQ&&ev<eJ?mM("y",eF,e_,void 0,void 0,[1.0005*ev,1.0005*eh]):eh&&eh>eQ?mM("y",eF,e_,void 0,void 0,[eJ,1.0005*eh]):ev&&ev<eJ?mM("y",eF,e_,void 0,void 0,[1.0005*ev,eQ]):mM("y",eF,e_)),horizontal:eF,onPointerUp:function(t){return null==e?void 0:e.onClick(eP,eM,t)},children:[h.jsx(I.Grid,{columns:eF,rows:!eF,stroke:"black",strokeDasharray:"0.5 5",strokeWidth:ej?0:2,lineStyle:{strokeLinecap:"round",stroke:null!=(U=null==ek||null==(K=ek.grid)?void 0:K.stroke)?U:"rgba(200, 200, 200, 0.2)"}}),!(null!=e&&e.sparkline)&&h.jsxs(h.Fragment,{children:["none"!==eY&&h.jsx(I.Axis,en({},eG,{tickLabelProps:function(){var e=en({},eA(eF,null==ek?void 0:ek.labels));return eF||(e.y=15),e},numTicks:"end2end"===eY?eK:eE,strokeWidth:ej?0:1,tickStroke:"#eaeaea",stroke:eF?"transparent":eW,orientation:eF?"left":"bottom",tickFormat:mB(e.formatXAxisLabel,e.forceXAxisAsTime||e_,eV),label:eF?null==e||null==(X=e.axisTitles)?void 0:X.y:null==e||null==(Q=e.axisTitles)?void 0:Q.x,children:function(t){return h.jsx(hl,en({},t,{theme:ek,type:eY,uniqueId:null==e?void 0:e.uniqueId,chartWidth:null==e?void 0:e.width,xAxisIsTime:!!e.forceXAxisAsTime,leftPanelWidth:e$,axisHorizontal:null==e?void 0:e.horizontal}))}})),h.jsx(I.Axis,{labelOffset:50,tickLabelProps:function(){var t=en({},eA(eF,null==ek?void 0:ek.labels));return eF||"right"===e.yAxisOrientation||(t.width=50,t.textAnchor="middle"),t},hideAxisLine:!0,numTicks:"auto"===ex?5:ex,strokeWidth:ej?0:1,hideTicks:!0,tickLength:e.horizontal||"right"===e.yAxisOrientation?10:25,stroke:eW,orientation:eF?"bottom":e.yAxisOrientation||"left",tickFormat:mV(e),label:eF?null==e||null==(J=e.axisTitles)?void 0:J.x:null==e||null==(Z=e.axisTitles)?void 0:Z.y,children:function(t){return h.jsx(hu,en({},t,{theme:ek,type:eU,horizontal:eF,maxValueOfYAxis:null!=e&&e.formatYAxisLabel?null==e?void 0:e.formatYAxisLabel(eQ):eQ,uniqueId:null==e?void 0:e.uniqueId}))}})]}),eZ&&eZ.length>0&&h.jsx(hv,{threshold:eZ,height:eg,margin:e0,idPrefix:e.idPrefix,theme:null==ek?void 0:ek.threshold}),h.jsx("style",{children:"\n        .visx-bar-stack .visx-bar {\n          stroke: #fff;\n          stroke-width: 2px;\n        }\n        .visx-tooltip-glyph svg {\n          max-width: 10px\n          height: 10px;\n        }\n        "+m_+"\n        "}),(null==e?void 0:e.areas)&&h.jsx(h.Fragment,{children:[].concat(e.areas.keys).map(function(t,n){var i,r,a,l,s,u=(null==(i=e.areas)?void 0:i.formatter)&&(null==(r=e.areas)?void 0:r.formatter(t))||(null==(a=e.areas)?void 0:a.colors[n]);return h.jsxs(o.Fragment,{children:[h.jsx(A.LinearGradient,{id:"g"+e.uniqueId+n,from:u,to:u,fromOffset:.6,fromOpacity:.8,toOpacity:.6},"area_gradients_"+e.uniqueId+"_"+n),null==(l=hm(t,null==(s=e.areas)?void 0:s.threshold))?void 0:l.map(function(t,i){return h.jsx(A.LinearGradient,{id:"g"+e.uniqueId+n+"_"+i,from:t.color,to:t.color,clipPath:"url(#"+hh(t,e.idPrefix)+")",fromOffset:.6,fromOpacity:.8,toOpacity:.6},"area_gradients_"+e.uniqueId+"_"+n+"_"+i)})]})})}),(null==e?void 0:e.areas)&&!(null!=e&&null!=($=e.areas)&&$.stacked)&&[].concat(e.areas.keys).map(function(t,n){var i,r,a,l=en({curve:eI,dataKey:t,data:null==(i=e.areas)?void 0:i.data},hb(e_,eT,t,eF),{renderLine:!1});return h.jsxs(o.Fragment,{children:[m.createElement(I.AreaSeries,en({},l,{key:"grouped_area_"+e.uniqueId+"_"+n,fill:"url(#g"+e.uniqueId+n+")"})),null==(r=hm(t,null==(a=e.areas)?void 0:a.threshold))?void 0:r.map(function(t,i){return h.jsx(I.AreaSeries,en({},l,{clipPath:"url(#"+hh(t,e.idPrefix)+")",fill:"url(#g"+e.uniqueId+n+"_"+i+")"}),"grouped_area_"+e.uniqueId+"_"+n+"_threshold_"+i)})]})}),(null==e?void 0:e.areas)&&e.areas.stacked&&h.jsx(I.AreaStack,{curve:eI,renderLine:!0,children:[].concat(e.areas.keys).map(function(t,n){var i,r,a,l=en({dataKey:t,data:null==(i=e.areas)?void 0:i.data},hb(e_,eT,t,eF));return h.jsxs(o.Fragment,{children:[h.jsx(I.AreaSeries,en({fill:"url(#g"+e.uniqueId+n+")",lineProps:{strokeWidth:4,strokeLinecap:"round"}},l),"areas_stacked_"+e.uniqueId+"_"+n),null==(r=hm(t,null==(a=e.areas)?void 0:a.threshold))?void 0:r.map(function(t,i){return h.jsx(I.AreaSeries,en({},l,{clipPath:"url(#"+hh(t,e.idPrefix)+")",fill:"url(#g"+e.uniqueId+n+"_"+i+")"}),"grouped_area_"+e.uniqueId+"_"+n+"_threshold_"+i)})]})})}),(null==e?void 0:e.bars)&&!e.bars.stacked&&h.jsxs(o.Fragment,{children:[e.enableHover&&h.jsx("style",{children:"\n                /* We need to find a more accurate way to target the rect element. */\n                .vizzly-xy-chart > div > svg > rect {\n                cursor: pointer;\n              }"}),h.jsx(I.BarGroup,{children:e.bars.keys.map(function(t,n){var i,r,o;return h.jsx(I.BarSeries,en({radiusAll:!0,radius:null!=(i=null==(r=e.bars)||null==(r=r.styles)?void 0:r.cornerRadius)?i:3,dataKey:t,data:null==(o=e.bars)?void 0:o.data},hb(e_,eT,t,eF),{colorAccessor:function(i){var r,o,a,l,s=null!=(r=null==e||null==(o=e.bars)||null==o.formatter?void 0:o.formatter(i,t))?r:eq[n],u=function(e){return Object.values(e)[0]};return e.enableHover&&u(null!=(a=null==eP?void 0:eP.datum)?a:{})===u(i)&&(s=null!=(l=hg(s,.8))?l:s),s}}),"grouped_bar_"+e.uniqueId+"_"+n)})})]}),(null==e?void 0:e.bars)&&e.bars.stacked&&h.jsxs(o.Fragment,{children:[e.enableHover&&h.jsx("style",{children:"\n                /* We need to find a more accurate way to target the rect element. */\n                .vizzly-xy-chart > div > svg > rect {\n                cursor: pointer;\n              }"}),h.jsx(I.BarStack,{offset:"100%"==e.bars.stacked?"expand":"none",children:e.bars.keys.map(function(t,n){var i,r,o;return h.jsx(I.BarSeries,en({radiusAll:!0,radius:null!=(i=null==(r=e.bars)||null==(r=r.styles)?void 0:r.cornerRadius)?i:3,dataKey:t,data:null==(o=e.bars)?void 0:o.data,"data-testid":"stacked_bar_"+e.uniqueId+"_"+n},hb(e_,eT,t,eF),{colorAccessor:function(i){var r,o,a,l,s=null!=(r=null==e||null==(o=e.bars)||null==o.formatter?void 0:o.formatter(i,t))?r:eq[n],u=function(e){return Object.values(e)[0]};return e.enableHover&&u(null!=(a=null==eP?void 0:eP.datum)?a:{})===u(i)&&(s=null!=(l=hg(s,.8))?l:s),s}}),"stacked_bar_"+e.uniqueId+"_"+n)})})]}),(null==e?void 0:e.lines)&&!(null!=e&&null!=(ee=e.lines)&&ee.scatter)&&e.lines.keys.map(function(t,n){var i,r,a,l,s,u,d,c=en({strokeWidth:3,curve:eI,dataKey:t,data:null==(i=e.lines)?void 0:i.data},hb(e_,eT,t,eF));return h.jsxs(o.Fragment,{children:[h.jsx(I.LineSeries,en({},c,{colorAccessor:(null==e||null==(r=e.lines)?void 0:r.formatter)&&(s=null==e?void 0:e.lines.formatter,function(e){var t;return null!=(t=s(e))?t:eq[n]})})),null==(a=hm(t,null==(l=e.lines)?void 0:l.threshold))?void 0:a.map(function(t,i){return m.createElement(I.LineSeries,en({},c,{key:"line_on_line_chart_"+e.uniqueId+"_"+n+"_threshold_"+i,clipPath:"url(#"+hh(t,e.idPrefix)+")",stroke:t.color}))})]},"line_on_line_chart_"+e.uniqueId+"_"+n)}),e.lines&&(null==e||null==(et=e.lines)?void 0:et.scatter)&&e.lines.keys.map(function(t,n){var i,r;return h.jsx(I.GlyphSeries,en({dataKey:t,data:null==(i=e.lines)?void 0:i.data},hb(e_,eT,t,eF),{colorAccessor:(null==e||null==(r=e.lines)?void 0:r.formatter)&&mz(t,null==e?void 0:e.lines.formatter,eq,n)}),"scatter_chart_"+e.uniqueId+"_"+n)}),e.lines&&(null==e||null==(ei=e.lines)?void 0:ei.scatter)&&e.lines.keys.map(function(t,n){var i,r;return h.jsx(I.GlyphSeries,en({dataKey:t,data:null==(i=e.lines)?void 0:i.data},hb(e_,eT,t,eF),{colorAccessor:(null==e||null==(r=e.lines)?void 0:r.formatter)&&mz(t,null==e?void 0:e.lines.formatter,eq,n)}),"scatter_chart_"+e.uniqueId+"_"+n)}),["areas","lines"].map(function(t,n){return h.jsx(o.Fragment,{children:e[t]&&[].concat(e[t].keys).map(function(i,r){var o,a;return h.jsx(mk,{show:(null==eP?void 0:eP.key)==i,generateAnnotations:null==(o=e[t])?void 0:o.annotate,dataKey:i,data:null==(a=e[t])?void 0:a.data},"area_lines_"+e.uniqueId+"_"+n+"_"+r)})},"area_lines_"+e.uniqueId+"_"+n)}),h.jsx(I.Tooltip,{showVerticalCrosshair:!0,showSeriesGlyphs:null==e.bars,renderTooltip:function(t){var n=t.tooltipData,i=t.colorScale,r=null==n?void 0:n.datumByKey;ez(r);var a=null==n?void 0:n.nearestDatum,l=s.debounce(function(){var e,t=(null==a||null==(e=a.key)?void 0:e.key)!=(null==eP?void 0:eP.key);eP&&!t||eR(null==n?void 0:n.nearestDatum)});if(o.useEffect(function(){return l()}),!n||!i)return null;var u,d,c,p,f=Object.values(null!=r?r:{}),m=Math.round(s.sumBy(f,function(e){return Number(e.datum[e.key]||0)})),v=(u=e.formatXAxisLabel,null==(c=null==a?void 0:a.datum[eT])?"No value":mB(u,e_,eV)(c));return h.jsx(m3,{heading:v,total:m,chartProps:e,datumKey:r,tooltipNearestDatum:a,typeIndex:mY(e),getColor:function(e){return null==i?void 0:i(e)},formatSeriesName:e.formatSeriesName,formatValue:mV(e)})}}),e.goalLine&&(null==(er=e.goalLine)?void 0:er.length)>0&&!eF&&h.jsx(I.Axis,{orientation:"left",children:function(t){var n;return null==(n=e.goalLine)?void 0:n.map(function(n,i){var r;return h.jsx(hc,{axisProps:t,goalLine:n,value:n.value,toX:(null!=(r=null==e?void 0:e.width)?r:0)-e0.left-e0.right,marginRight:e0.right,maxValueOfYAxis:eQ,formatYAxisLabel:null==e?void 0:e.formatYAxisLabel},(null==e?void 0:e.uniqueId)+"-"+i)})}})]}),(null==e?void 0:e.legend)&&h.jsx(mH,{keys:mN(e,"keys"),colors:eq,typeIndex:mY(e),formatSeriesName:null==e?void 0:e.formatSeriesName,formatter:null==e||null==(eo=e.bars)?void 0:eo.formatter,data:null==(ea=e.bars)?void 0:ea.data,conditionalFormattingPossibilities:e.conditionalFormattingPossibilities})]})},hy=o.forwardRef(function(e,t){return mS(t)?null:h.jsx(_.ParentSize,{children:function(t){var n,i;return h.jsx(hx,{approxXAxisLabelCount:e.approxXAxisLabelCount,approxYAxisLabelCount:e.approxYAxisLabelCount,sparkline:e.sparkline,uniqueId:e.uniqueId,formatSeriesName:e.formatSeriesName,lineCurve:e.lineCurve,showTotalOnTooltip:e.showTotalOnTooltip,forceXAxisAsTime:e.forceXAxisAsTime,areas:{colors:e.colors,annotate:e.annotate||[],stacked:e.stacked||!1,data:e.data,keys:e.keys,formatter:e.formatter,threshold:e.threshold},x:e.x,legend:null==e?void 0:e.legend,removeStroke:null==e?void 0:e.removeStroke,formatXAxisLabel:null==e?void 0:e.formatXAxisLabel,formatYAxisLabel:null==e?void 0:e.formatYAxisLabel,horizontal:null==e?void 0:e.horizontal,height:null!=(n=null==e?void 0:e.height)?n:null==t?void 0:t.height,width:null!=(i=null==e?void 0:e.width)?i:null==t?void 0:t.width,theme:null==e?void 0:e.theme,onPointerUp:null==e?void 0:e.onPointerUp,onClick:function(t){return(null==e?void 0:e.onClick)&&(null==e?void 0:e.onClick(t))},goalLine:null==e?void 0:e.goalLine,axisTitles:null==e?void 0:e.axisTitles,idPrefix:null==e?void 0:e.idPrefix})}})}),hw=function(e){var t=[];return"dimension"in e&&(t=[].concat(t,e.dimension||[])),"lineDimension"in e&&(t=[].concat(t,e.lineDimension||[])),"barDimension"in e&&(t=[].concat(t,e.barDimension||[])),{x:(t=(t=[].concat(e.timeDimension?[{field:e.timeDimension.field,function:e.timeDimension.truncate,pivot:"x"}]:[],t)).map(function(e,t){return 0==t?(e.pivot=e.pivot||"x",e):(e.pivot=e.pivot||"y",e)})).filter(function(e){return"x"==e.pivot}).map(function(e){return eV(e)}),y:t.filter(function(e){return"y"==e.pivot}).map(function(e){return eV(e)})}};function hC(e){var t=e.title,n=e.subject,i=e.headline,r=o.useRef(null),a=o.useState(t),l=a[0],s=a[1],u=o.useState(null==i?void 0:i.func),d=u[0],c=u[1],p=o.useState(n),f=p[0],m=p[1];return o.useEffect(function(){var e;0===l.length&&t.length>=1&&r.current&&r.current.resetSize(),0===f.length&&n.length>=1&&r.current&&r.current.resetSize(),0===(null==d?void 0:d.length)&&null!=i&&i.func&&(null==i||null==(e=i.func)?void 0:e.length)>=1&&r.current&&r.current.resetSize(),s(t),m(n),c(null==i?void 0:i.func)},[t,n,i]),r}var hj=function(e,t){return!(!1!==e&&void 0!==e||!t)||!0===e};function hS(e){if(0===(null==e?void 0:e.measure.length))return"The Data settings are missing a Metric. Select from the list of Metrics to display the Chart."}var hF=rY({padding:"2px 6px",borderRadius:6,variants:{positive:{yes:{color:"rgb(4, 120, 87)",background:"#D1FAE5"},no:{color:"rgb(190, 18, 60)",background:"#FFE4E6"}}}}),hk=rY({fontSize:"12px",display:"flex",alignItems:"center",rowGap:"0.5rem",position:"relative",cursor:"pointer"}),hT=Object.assign(function(){return null},{deltaPill:hF,deltaText:rY({padding:0,borderRadius:6,variants:{positive:{yes:{color:"rgb(23, 171, 92)",background:"transparent"},no:{color:"rgb(190, 18, 60)",background:"transparent"}}}}),arrow:rY({height:"1rem",width:"1rem",variants:{percentageIncrease:{yes:{transform:"rotate(315deg)"},no:{transform:"rotate(45deg)"}},delteStyle:{pill:{},text:{position:"absolute",right:"-1rem"}}}}),delta:hk});function h_(e,t){var n;return null==e||null==(n=e.content)||null==(n=n[e.content.length-1])?void 0:n[t]}function hI(e,t,n,i,r,o){var a=e[eV(i)]||"_vizzly_to_2_dp",l=t[eV(i)]||"",s=n[eV(i)]||"";return{formattedValue:o[a].formatter(r),prefix:l,postfix:s}}var hA=function(e,t,n){var i="";return t&&(i=""+t),i=""+i+e,n&&(i=""+i+n),i},hD=function(e){var t=a_(),n=t.textOverride,i=hI(e.formatter,e.prefixes,e.postfixes,e.measure,e.value,t.numberFormatOptions),r=i.formattedValue,a=i.prefix,l=i.postfix;return r===n("single_stat.no_value","No value")?h.jsx(o.Fragment,{children:r}):h.jsx(o.Fragment,{children:hA(r,a,l)})},hO=function(e){var t,n,i,r=a_().textOverride,a=lu(),l=o.useState(!0),s=l[0],u=l[1],d="supporting"===e.viewFor||"text"===(null==a||null==(i=a.charts)||null==(i=i.singleStat)?void 0:i.delteStyle)?"text":"pill",c=e.result;if(!c||0===c.content.length||1===c.content.length)return null;var p,f=c.content[c.content.length-2][e.index],m=h_(c,e.index),v=0!==m?0!==f?(m-f)/f*100:100*m:-(100*f),g=(p={positive:v>=0?"yes":"no"},"text"===d?hT.deltaText(p):hT.deltaPill(p));return h.jsxs(o.Fragment,{children:[h.jsx(uM,{as:"hr",margin:0,border:0,borderTop:"1px solid "+rG(85)}),h.jsxs(la,{gap:"0.15rem",children:["standalone"===e.viewFor&&h.jsxs(uM,{as:"p",className:lr(""+or.textSize("xs"),or.opacity(.7)+"  "+or.align("left")),margin:0,children:[r("single_stat.current","Current")," ",null==e||null==(t=e.deltaTimeDimension)?void 0:t.truncate]}),h.jsxs(uQ,{gap:"0.5rem",alignItems:"end",children:["standalone"===e.viewFor&&h.jsx(uM,{as:"p",margin:0,nowrap:!0,children:h.jsx(hD,{formatter:null==e?void 0:e.formatter,postfixes:null==e?void 0:e.postfixes,prefixes:null==e?void 0:e.prefixes,value:m,measure:null==e?void 0:e.measure})}),h.jsx(uQ,{alignSelf:"supporting"===e.viewFor?"flex-end":"text"===(null==a||null==(n=a.charts)||null==(n=n.singleStat)?void 0:n.delteStyle)?"center":"flex-end",gap:"0.5rem",children:h.jsx(cf,{tooltipContent:function(){var t;return h.jsxs(cf.Content,{children:[r("single_stat.previous","Previous")," ",null==e||null==(t=e.deltaTimeDimension)?void 0:t.truncate,":"," ",h.jsx(hD,{formatter:null==e?void 0:e.formatter,postfixes:null==e?void 0:e.postfixes,prefixes:null==e?void 0:e.prefixes,value:f,measure:null==e?void 0:e.measure})]})},children:h.jsxs("button",{onClick:function(){return u(!s)},className:lr(g,""+or.bw(0),""+hT.delta),"aria-label":s?r("single_stat.show_as_value","Show as value"):r("single_stat.show_as_percentage","Show as percentage"),children:[s?ro(v,2)+"%":h.jsx(hD,{formatter:null==e?void 0:e.formatter,postfixes:null==e?void 0:e.postfixes,prefixes:null==e?void 0:e.prefixes,value:-1*(f-m),measure:null==e?void 0:e.measure}),h.jsx("svg",{className:""+hT.arrow({percentageIncrease:v>=0?"yes":"no",delteStyle:d}),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12h15m0 0l-6.75-6.75M19.5 12l-6.75 6.75"})})]})})})]})]})]})},hE=function(e){var t=o.useRef(null),n=o.useState(0),i=n[0],r=n[1];return o.useEffect(function(){var e,n=function(){t.current&&r(t.current.offsetWidth)},i=function(){clearTimeout(e),e=setTimeout(function(){n()},50)};requestAnimationFrame(function(){return n()});var o=new ResizeObserver(i);return t.current&&o.observe(t.current),window.addEventListener("resize",i),function(){window.removeEventListener("resize",i),o&&o.disconnect()}},[e]),[t,i]},hL=function(e){var t=a_().textOverride,n=null==e?void 0:e.results.some(function(e){return Array.isArray(null==e?void 0:e.content)&&(null==e?void 0:e.content)&&e.content.length>1});return null!==e.deltaTimeDimension&&!1===n?h.jsx("p",{className:lr(""+or.textSize("xs"),""+or.opacity(.5)),children:t("single_stat.no_data_for_delta_description","No data available for [[deltaTimeDimension]] comparison",{deltaTimeDimension:null==e?void 0:e.deltaTimeDimension.truncate})}):null===(null==e?void 0:e.deltaTimeDimension)||!1===n?null:h.jsx(uM,{margin:0,className:lr(""+or.textSize("xs"),""+or.opacity(.5)),children:t("single_stat.delta_description","Comparing [[deltaTimeDimension]] over [[deltaTimeDimension]]",{deltaTimeDimension:null==e?void 0:e.deltaTimeDimension.truncate})})},hP={standalone:{smallFonts:"sm",direction:"column",gap:"1rem",statGap:80},supporting:{smallFonts:"xs",direction:"row",gap:"0.25rem",statGap:40}},hR={name:"12ayaws",styles:"position:relative;display:flex;white-space:nowrap;padding-top:0.25rem;text-align:left;font-size:3rem;line-height:1;font-weight:600;letter-spacing:0.025em"},hN={name:"n294es",styles:"position:relative;display:flex;padding-top:0.25rem;text-align:left;font-size:3rem;line-height:1;font-weight:600;letter-spacing:0.1em"},hM=function(e){var t,n,i,r=a_(),a=r.textOverride,l=r.labelFormat,u=e.results[0],d=e.results[1],c=o.useState(null),p=c[0],f=c[1];if(o.useEffect(function(){if(u&&e.measure){var t=rv(u,eV(e.measure));-1!==t&&f(t)}},[u,e.measure]),null===p)return null;var m,v,g,b=e.displayCurrent?h_(d,p):null==u||null==(t=u.content)||null==(t=t[0])?void 0:t[p],x=(v=s.filter(e.conditionalFormattingRules,function(t){var n,i,r;return eV({field:null==(n=t.filters)?void 0:n[0][0].field,function:null!=(i=null==(r=t.filters)?void 0:r[0][0].function)?i:"none"})==eV(e.measure)}),g={},v.forEach(function(e){var t,n;if("fontColor"==e.ruleType&&r_({op:null==(t=e.filters)?void 0:t[0][0].op,value:null==(n=e.filters)?void 0:n[0][0].value},b))return g.color=e.ruleValue}),g),y=rA(null==u||null==(n=u.fields[p])?void 0:n.publicName,null==(i=e.supportedAggregates[e.measure.function])?void 0:i.publicName),w=l({fieldId:e.measure.field,func:e.measure.function,type:"singleStat",defaultLabel:y,viewId:e.viewId});return h.jsxs("div",{children:[h.jsx("div",{className:""+or.align("left"),children:(e.showAggregateText||"supporting"===e.viewFor)&&h.jsx("span",{className:or.textSize(hP[e.viewFor].smallFonts)+" "+or.nowrap,children:null!=w?w:y})}),h.jsxs(uQ,{gap:"0.35rem",direction:hP[e.viewFor].direction,children:[h.jsx(uM,{children:e.displayCurrent&&"supporting"===e.viewFor?h.jsx(cf,{tooltipContent:function(){var t;return h.jsxs(cf.Content,{children:[a("single_stat.current","Current")," ",null==e||null==(t=e.deltaTimeDimension)?void 0:t.truncate]})},children:h.jsx("p",{style:en({},x,{fontSize:e.fontSize}),css:hR,className:""+or.text,children:h.jsx(hD,{formatter:null==e?void 0:e.formatter,postfixes:null==e?void 0:e.postfixes,prefixes:null==e?void 0:e.prefixes,value:b,measure:null==e?void 0:e.measure})})}):h.jsx("p",{style:en({},x,{fontSize:e.fontSize}),css:hN,className:or.text+" "+or.align("left"),children:h.jsx(hD,{formatter:null==e?void 0:e.formatter,postfixes:null==e?void 0:e.postfixes,prefixes:null==e?void 0:e.prefixes,measure:null==e?void 0:e.measure,value:b})})}),h.jsx(hO,{index:p,result:d,deltaTimeDimension:null==e?void 0:e.deltaTimeDimension,formatter:null==e?void 0:e.formatter,postfixes:null==e?void 0:e.postfixes,prefixes:null==e?void 0:e.prefixes,measure:null==e?void 0:e.measure,viewFor:e.viewFor})]})]})},hz={type:"singleStat",prefixes:{},postfixes:{},fontSize:"30px",measure:[],displayTitle:"",displaySubject:"",formatter:{},filter:[],limit:500,conditionalFormattingRules:[],deltaTimeDimension:null,tags:[]},hq={name:"1kzq5ms",styles:"height:100%;width:100%"},hB=function(e){var t,n,i,r,a,l,s,u,d,c,p,f,m,v,g={displayTitle:e.displayTitle,displaySubject:e.displaySubject,verified:e.protectedByOrganisation,library:null!=(t=e.library)&&t,localFilters:e.localFilters,setLocalFilters:e.setLocalFilters,setParameterUpdate:e.setParameterUpdate,dataSet:e.dataSet,componentType:null==(n=e)?void 0:n.type,parameters:null==(i=e)?void 0:i.parameters,measure:null==(r=e)?void 0:r.measure,viewId:null!=(a=null==(l=e)?void 0:l.viewId)?a:""},b=hE(e.queriesAreChanging),x=b[0],y=b[1],w=hE(e.queriesAreChanging),C=w[0],j=w[1];if(!iA(e.type).isRunnable(e))return h.jsx(fN,{title:"Missing parameters",children:hS({measure:e.measure,order:[],dimension:[]})});var S=void 0!==e.results?e.results[0]:void 0;if(rb(S))return h.jsx(dr,{});if(rx(S))return h.jsx(fM,{});if(ry(S))return h.jsx(fq,en({},g));var F=(e=rE(e,{},hz)).measure.length,k=hP[e.viewFor].statGap,T=e.leftAlign?"flex-start":(F-1)*k+j*F<y-32?"center":void 0;return h.jsxs(fr,{queriesAreChanging:e.queriesAreChanging,overflowScroll:!0,id:e.id,children:[!e.hideHeader&&h.jsx(fi,en({},g,{paddingBottom:0})),F>1?h.jsxs(o.Fragment,{children:[h.jsx("div",{css:hq,ref:x,children:h.jsx(uQ,{direction:"row",height:"100%",gap:k,"data-component":"stat-container",alignItems:"center",justifyContent:T,paddingTop:"0.5rem",children:[].concat(e.measure).map(function(t,n){var i,r;return h.jsx("div",{ref:C,children:h.jsx(hM,{index:n,showAggregateText:F>1,supportedAggregates:e.supportedAggregates,measure:t,prefixes:e.prefixes,postfixes:e.postfixes,fontSize:e.fontSize,formatter:e.formatter,conditionalFormattingRules:e.conditionalFormattingRules,results:e.results,deltaTimeDimension:null==(i=e)?void 0:i.deltaTimeDimension,viewFor:e.viewFor,displayCurrent:e.displayCurrent,viewId:null!=(r=e.viewId)?r:""})},n)})})}),(null==(s=e)?void 0:s.deltaTimeDimension)&&h.jsx(uM,{marginTop:hP[e.viewFor].gap,children:h.jsx(hL,{deltaTimeDimension:null==(u=e)?void 0:u.deltaTimeDimension,results:null==(d=e)?void 0:d.results})})]}):h.jsxs(la,{placeContent:e.leftAlign?"left":"center","data-component":"stat-container",height:"100%",children:[h.jsx(hM,{index:1,showAggregateText:F>1,supportedAggregates:e.supportedAggregates,measure:e.measure[0],prefixes:e.prefixes,postfixes:e.postfixes,fontSize:e.fontSize,formatter:e.formatter,conditionalFormattingRules:e.conditionalFormattingRules,results:e.results,deltaTimeDimension:null==(c=e)?void 0:c.deltaTimeDimension,viewFor:e.viewFor,displayCurrent:e.displayCurrent,viewId:null!=(p=e.viewId)?p:""},1),(null==(f=e)?void 0:f.deltaTimeDimension)&&h.jsx(uM,{marginTop:hP[e.viewFor].gap,children:h.jsx(hL,{deltaTimeDimension:null==(m=e)?void 0:m.deltaTimeDimension,results:null==(v=e)?void 0:v.results})})]})]})};function hV(e,t){return e.reduce(function(e,n){return t&&"string"==typeof t&&(e[eV(n)]=t),e},{})}function hW(e,t){return(null===t||"object"!=typeof t||0!==Object.keys(t).length)&&e.length>0&&"asc"===e[0].direction&&!!t}function hH(e,t,n){return!(null==t||!t.func)&&hW(e,n)}hB.defaultProps=hz;var hY=function(e){var t,n,i,r,a,l,s,u,d=a_().queryEngineConfig,c=o.useState([]),p=c[0],f=c[1],m=0!==Object.keys(e.component.attributes.timeDimension||{}).length&&"current"===(null==(a=e.component.attributes.headline)?void 0:a.func),v=m&&e.component.attributes.timeDimension?en({},e.component.attributes.timeDimension,{bucketFill:!1}):null,g=(t=e.component.attributes.measure,n=d.supportedAggregates,i=e.dataSet,r=null==(l=e.component.attributes.headline)?void 0:l.func,t.map(function(e){var t;return en({},e,{function:(null==(t=eB(iP(i,e.field),n))?void 0:t.includes(r))?r:e.function})})),b=ie({queryEngineConfig:d}).init(e.dataSet.id,{prefixes:hV(g,e.component.attributes.yAxisPrefix),postfixes:hV(g,e.component.attributes.yAxisPostfix),formatter:hV(g,e.component.attributes.yAxisFormat),fontSize:"1.1rem",viewId:e.component.attributes.viewId+"-stats",deltaTimeDimension:v,measure:g}),x=cJ(b,e.runQueriesCallback,f,{localFilters:e.component.localFilters,globalFilters:e.globalFilters},e.dataSet);return h.jsx(uM,{minHeight:m?80:56,children:h.jsx(hB,en({},b,{id:null!=(s=b.viewId)?s:"",dataSet:e.dataSet,localFilters:e.component.localFilters,setLocalFilters:function(){},setParameterUpdate:function(){},results:p,queriesAreChanging:x.queriesAreChanging,supportedAggregates:e.dashboardBehaviour.queryEngineConfig.supportedAggregates,supportedTimeTruncFunctions:e.dashboardBehaviour.queryEngineConfig.supportedTimeTruncFunctions,supportedTransformationFunctions:null==e||null==(u=e.dashboardBehaviour)||null==(u=u.queryEngineConfig)?void 0:u.supportedTransformationFunctions,library:null==e?void 0:e.library,leftAlign:!0,viewFor:"supporting",displayCurrent:m}))})},hG=function(e){var t=[];return e&&e.forEach(function(e){var n;t.push({key:ru([],[],e.filters[0][0].field,null!=(n=e.filters[0][0].function)?n:"none"),value:e.filters[0][0].value,direction:e.filters[0][0].op,color:e.ruleValue})}),t},hU=function(e){var t,n,i,r,a=hC({title:null==e?void 0:e.displayTitle,subject:null==e?void 0:e.displaySubject,headline:null==e?void 0:e.headline}),l=a_(),s=l.textOverride,u=l.labelFormat,d=l.valueAlias,c=l.nullValueAlias,p=lu(),f={displayTitle:e.displayTitle,displaySubject:e.displaySubject,localFilters:e.localFilters,setLocalFilters:e.setLocalFilters,library:null!=(t=e.library)&&t,verified:e.protectedByOrganisation,dataSet:e.dataSet,parameters:null==e?void 0:e.parameters,componentType:null==e?void 0:e.type,measure:null==e?void 0:e.measure,dimension:null==e?void 0:e.dimension,timeDimension:e.timeDimension,setParameterUpdate:null==e?void 0:e.setParameterUpdate,viewId:null!=(n=null==e?void 0:e.viewId)?n:""};if(!iA(e.type).isRunnable(e))return h.jsx(fN,{title:"Missing parameters"});if(rb(e.result))return h.jsx(dr,{});if(rx(e.result))return h.jsx(fM,{});if(ry(e.result))return h.jsx(fq,en({},f));var m=hw(e),v=rh(m,e.measure,e.result),g=rm(e.result,e.measure,m,"100%"==e.stacked,eX(e.dataSetId,e.dimension,e.timeDimension,c,s)),b=hH(e.order,e.headline,e.timeDimension);return h.jsx(o.Suspense,{fallback:h.jsx(dr,{}),children:h.jsxs(fr,{id:e.id,queriesAreChanging:e.queriesAreChanging,children:[h.jsx(fi,en({},f,{paddingBottom:b?"0.5rem":void 0})),b&&h.jsx(hY,en({},e.propsForHeadline)),h.jsx(od,{disabledFeatures:null!=(i=null==e?void 0:e.library)&&i,children:h.jsx(hy,{approxXAxisLabelCount:e.approxXAxisLabelCount,approxYAxisLabelCount:e.approxYAxisLabelCount,ref:a,uniqueId:e.id,x:"x",keys:v,colors:rj(null==p?void 0:p.colors,v.length),data:g,legend:hj(null==e?void 0:e.legend,"verbose"===(null==p?void 0:p.detail)),horizontal:!1,removeStroke:!1,forceXAxisAsTime:!!e.timeDimension,showTotalOnTooltip:!!e.stacked,stacked:!!e.stacked,formatXAxisLabel:rM(e.timeDimension,e.supportedTimeTruncFunctions,{prefix:e.xAxisPrefix,postfix:e.xAxisPostfix,format:null==e?void 0:e.xAxisFormat,numberFormatOptions:e.numberFormatOptions,dateTimeFormatOptions:e.dateTimeFormatOptions},d),formatYAxisLabel:rz(s,{prefix:e.yAxisPrefix,postfix:e.yAxisPostfix,format:null==e?void 0:e.yAxisFormat,numberFormatOptions:e.numberFormatOptions,dateTimeFormatOptions:e.dateTimeFormatOptions}),annotate:"verbose"==(null==p?void 0:p.detail)?["high_and_low"]:[],lineCurve:e.lineCurve,theme:null==p?void 0:p.charts,formatSeriesName:rq(e.result,s,e.type,null!=(r=e.viewId)?r:"",u),formatter:function(t){var n=rN(e.dimension,e.conditionalFormattingRules,{},t,null==e?void 0:e.dataSet);if(n)return n.value},onPointerUp:null==e?void 0:e.onPointerUp,sparkline:e.sm,goalLine:null==e?void 0:e.goalLines,axisTitles:null==e?void 0:e.axisTitles,idPrefix:e.idPrefix,threshold:hG(e.conditionalFormattingRules)})})]})})};hU.defaultProps={type:"areaChart",measure:[],dimension:[],timeDimension:null,order:[],displayTitle:"",displaySubject:"",filter:[],limit:500,xAxisPostfix:"",xAxisPrefix:"",yAxisPostfix:"",yAxisPrefix:"",yAxisFormat:null,tags:[],xAxisFormat:null,lineCurve:"natural",conditionalFormattingRules:[],drilldown:[],legend:!1,approxXAxisLabelCount:"auto",approxYAxisLabelCount:"auto",goalLines:void 0,headline:{}};var hK=o.memo(hU,rL),hX=function(){return null},hQ=function(e){var t;return(null==e||null==(t=e.component)||null==(t=t.attributes)||null==(t=t.drilldown)?void 0:t.length)>0},hJ=function(e){var t,n=o.useState(null),i=n[0],r=n[1],a=e.component,l=a.results,s=a.attributes,u=a.localFilters,d=cJ(s,e.runQueriesCallback,e.setResults,{localFilters:e.component.localFilters,globalFilters:e.globalFilters},e.dataSet);return h.jsxs(o.Fragment,{children:[h.jsx(hK,en({id:e.id},s,{dataSet:e.dataSet,localFilters:u,setLocalFilters:e.setLocalFilters,setParameterUpdate:null==e?void 0:e.setParameterUpdate,result:l&&l[0],queriesAreChanging:d.queriesAreChanging,supportedAggregates:e.dashboardBehaviour.queryEngineConfig.supportedAggregates,supportedTransformationFunctions:null==e||null==(t=e.dashboardBehaviour)||null==(t=t.queryEngineConfig)?void 0:t.supportedTransformationFunctions,supportedTimeTruncFunctions:e.dashboardBehaviour.queryEngineConfig.supportedTimeTruncFunctions,onPointerUp:function(t){return hQ(e)&&r(t)},sm:e.sm,library:null==e?void 0:e.library,numberFormatOptions:e.dashboardBehaviour.numberFormatOptions,dateTimeFormatOptions:e.dashboardBehaviour.dateTimeFormatOptions,propsForHeadline:e,idPrefix:e.idPrefix})),i&&h.jsx(hX,{onDrilldown:i,onClose:function(){return r(null)},inputProps:e})]})},hZ=o.forwardRef(function(e,t){return mS(t)?null:h.jsx(_.ParentSize,{children:function(t){var n,i;return h.jsx(hx,{approxXAxisLabelCount:e.approxXAxisLabelCount,approxYAxisLabelCount:e.approxYAxisLabelCount,uniqueId:e.uniqueId,sparkline:e.sparkline,x:e.x,formatSeriesName:e.formatSeriesName,bars:{annotate:[],stacked:"stacked"===(null==e?void 0:e.type),colors:e.colors,data:e.data,keys:e.keys,formatter:e.formatter,styles:e.styles},legend:null==e?void 0:e.legend,removeStroke:null==e?void 0:e.removeStroke,forceXAxisAsTime:null==e?void 0:e.forceXAxisAsTime,formatXAxisLabel:null==e?void 0:e.formatXAxisLabel,formatYAxisLabel:null==e?void 0:e.formatYAxisLabel,horizontal:null==e?void 0:e.horizontal,height:null!=(n=null==e?void 0:e.height)?n:null==t?void 0:t.height,width:null!=(i=null==e?void 0:e.width)?i:null==t?void 0:t.width,showTotalOnTooltip:e.showTotalOnTooltip,theme:null==e?void 0:e.theme,conditionalFormattingPossibilities:e.conditionalFormattingPossibilities,onClick:function(t,n,i){return(null==e?void 0:e.onClick)&&(null==e?void 0:e.onClick(t,n,i))},goalLine:null==e?void 0:e.goalLine,axisTitles:null==e?void 0:e.axisTitles,idPrefix:e.idPrefix,enableHover:e.enableHover})}})});function h$(e,t,n,i,r){if(!Array.isArray(e)||!Array.isArray(n))throw Error("Invalid input: fields and row must be arrays");return e.map(function(e,o){if(rd(e.datumKey))return(s={})[e.datumKey]=null==(l=n[o])?void 0:l.value,s;var a={};if("string"==typeof e.id){var l,s,u,d,c=e.id;r&&null!=i&&i.some(function(e){return e.id===r.subsetDimension})&&(c=r.subsetDimension);var p=eW(c,t);(d={})[JSON.stringify(p)]=null==(u=n[o])?void 0:u.value,a=d}return a}).filter(function(e){return Object.keys(e).length>0})}var h0=function(e){var t;return!(!e||void 0===e||!(e.measure&&(null==(t=e.measure)?void 0:t.length)>0||null!=e&&e.dimension&&(null==e?void 0:e.dimension.length)>0))};function h1(e,t,n,i,r,o,a,l){var s,u,d,c,p,f,m,h,v,g,b,x,y,w,C,j=(null==(y=e.fields[n])?void 0:y.id)||"",S=eH(j,{supportedAggregates:l,supportedTimeTruncFunctions:void 0,supportedTransformationFunctions:void 0}),F=S.fieldId,k=S.function,T=(g=e.fields,b=(null==(w=e.content)?void 0:w[t])||[],x={},g.forEach(function(e,t){x[e.id]=b[t]}),x);if("dataTable"===i){C={grouping:(f=o,m=T,h=a,s=f,u=m,v=s.map(function(e){return e.field in u?{fieldId:e.field,function:e.function,aggregate:e.function,value:u[e.field]}:{fieldId:e.field,function:e.function,aggregate:e.function}}),null!=h&&h.grouping?(d=v,c=null==h?void 0:h.grouping,c.forEach(function(e){var t=d.findIndex(function(t){return t.fieldId===e.fieldId});t>-1?d[t]=en({},d[t],e):d.push(e)}),d):v),value:null!=(p=null==a?void 0:a.value)?p:{fieldId:F,function:k,value:r,aggregate:k}}}else C={fieldId:j,value:r,function:"none",aggregate:"none"};return{activeFieldsWithValues:T,cell:C}}var h2=function(e){return rY({padding:null==e?void 0:e.padding,display:"flex",alignItems:"center",borderRadius:null==e?void 0:e.borderRadius,gap:6,variants:{alertType:{warning:null==e?void 0:e.warning,info:null==e?void 0:e.info,critical:null==e?void 0:e.critical}}})},h5=rY({display:"block",alignSelf:"flex-start"}),h7=Object.assign(h2,{svg:function(e){var t,n,i;return rY({display:"block",width:"100%",position:"relative",variants:{alertType:{warning:{fill:null==e||null==(t=e.warning)?void 0:t.iconColor,transform:"rotate(180deg)"},info:{fill:null==e||null==(n=e.info)?void 0:n.iconColor,transform:"rotate(180deg)"},critical:{fill:null==e||null==(i=e.critical)?void 0:i.iconColor}}}})},icon:rY({paddingTop:3,display:"block",height:"1rem",width:"1rem"}),content:function(e){var t,n;return rY({display:"flex",flexDirection:"column",gap:6,fontSize:null==e||null==(t=e.content)?void 0:t.fontSize,fontWeight:null==e||null==(n=e.content)?void 0:n.fontWeight})},title:function(e){var t,n;return rY({fontWeight:null==e||null==(t=e.title)?void 0:t.fontWeight,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:null==e||null==(n=e.title)?void 0:n.fontSize,WebkitFontSmoothing:"antialiased"})},iconWrapper:h5}),h4=function(e){var t,n,i=lu();return h.jsxs("div",{role:"alert",className:""+h7(null==i?void 0:i.alerts)({alertType:null!=(t=null==e?void 0:e.type)?t:"info"}),"data-themeapi":"alerts",children:[h.jsxs("span",{className:""+h7.iconWrapper,children:[void 0!==(null==e?void 0:e.icon)&&h.jsx(o.Fragment,{children:null==e?void 0:e.icon}),void 0===(null==e?void 0:e.icon)&&h.jsx("span",{className:""+h7.icon,children:h.jsx("svg","critical"===(null==e?void 0:e.type)?{viewBox:"0 0 20 20",className:""+h7.svg(null==i?void 0:i.alerts)({alertType:"critical"}),focusable:"false","aria-hidden":"true",children:h.jsx("path",{d:"M11.768.768a2.5 2.5 0 0 0-3.536 0l-7.464 7.464a2.5 2.5 0 0 0 0 3.536l7.464 7.464a2.5 2.5 0 0 0 3.536 0l7.464-7.464a2.5 2.5 0 0 0 0-3.536l-7.464-7.464zm-2.768 5.232a1 1 0 1 1 2 0v4a1 1 0 1 1-2 0v-4zm2 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"})}:{viewBox:"0 0 20 20",focusable:"false","aria-hidden":"true",className:""+h7.svg(null==i?void 0:i.alerts)({alertType:null!=(n=null==e?void 0:e.type)?n:"info"}),children:h.jsx("path",{fillRule:"evenodd",d:"M10 20c5.514 0 10-4.486 10-10s-4.486-10-10-10-10 4.486-10 10 4.486 10 10 10zm1-6a1 1 0 1 1-2 0v-4a1 1 0 1 1 2 0v4zm-1-9a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"})})})]}),h.jsxs("div",{className:""+h7.content(null==i?void 0:i.alerts),children:[(null==e?void 0:e.title)&&h.jsx("div",{className:""+h7.title(null==i?void 0:i.alerts),children:null==e?void 0:e.title}),(null==e?void 0:e.children)&&h.jsx("div",{children:null==e?void 0:e.children})]})]})},h3=function(e){return e.positioning&&!1!==h8(e.options)?h.jsx(h6,en({},e,{positioning:e.positioning})):null},h6=function(e){var t,n=e.positioning,i=e.onClose,r=a_().queryEngineConfig,a=o.useRef(null);ls(a,function(){null!=n&&n.x&&null!=n&&n.y&&i(void 0)});var l=(t=[],e.options&&e.options.forEach(function(n,i){var o=iP(e.dataSet,n.field);"date_time"===o.dataType?o.allowedGranularities.forEach(function(e){t.push({testId:n.field+"-option-"+i+"-"+e,value:{field:n.field,function:e},label:o.publicName+" ("+r.supportedTimeTruncFunctions[e].publicName+")",icon:o.dataType})}):t.push({testId:n.field+"-option-"+i,value:n,label:o.publicName,icon:o.dataType})}),t),s=uH(l,["label"]),u=s.setSearch,d=s.values,c=s.searchString;return h.jsx(o.Fragment,{children:n.x&&n.y&&h.jsx(ly,{force:!0,children:h.jsx(sF,{children:h.jsx("div",{style:en({},uB(300,{left:n.x,top:n.y,width:300,height:200,topOverride:window.scrollY+n.y},"right"),{zIndex:4294966294}),ref:a,children:h.jsxs(u6,{open:!0,fixedHeight:!0,width:"calc(100% - 2px)",children:[h.jsxs(uQ,{className:""+m4({4:!0}),padding:"12px 8px 4px",alignItems:"center",gap:"0.5rem",children:[h.jsx(li,{width:16,height:16}),h.jsx(uM,{children:"Drilldown"})]}),e.disabled&&h.jsx(uM,{padding:8,children:h.jsx(h4,{title:"Sort is required when a Grouping is a Date"})}),!e.disabled&&h.jsxs(o.Fragment,{children:[h.jsx(uM,{padding:8,children:h.jsx(dS,{id:"dropdown-input",label:"Search for a field",placeholder:"Search for a field",labelHidden:!0,autoFocus:!0,defaultValue:c,onChange:function(e){return u(e.target.value)}})}),d.map(function(e){return h.jsx(u6.Option,{testId:"option-"+e.refIndex,onChange:function(){i(d[e.refIndex].item.value)},label:e.item.label,icon:e.item.icon},"list_view_"+e.refIndex+"_option")})]})]})})})})})},h8=function(e){return void 0!==e&&e&&(null==e?void 0:e.length)>0},h9=function(e){return 0===e.drilldownSelections.length?null:h.jsxs(uQ,{justifyContent:"flex-end",gap:"0.5rem",margin:"0 0 0.5rem 0",className:lr(""+m5,u5({color:rG(15)})),"data-component":"drilldown-breadcrumb",children:[h.jsx(uM,{height:"0.5rem",children:h.jsx(cf,{tooltipContent:function(){return"Reset drilldown"},children:h.jsx("button",{onClick:function(){return e.onReset()},className:""+or.button,"aria-label":"Reset drilldown",children:h.jsx(li,{})})})}),e.drilldownSelections.map(function(t,n){return h.jsxs(o.Fragment,{children:[t.existingField&&h.jsx(ve,{field:t.existingField,dataSet:e.dataSet}),h.jsxs(uM,{children:[" "," > "]}),h.jsx(vt,{option:t.newField,dataSet:e.dataSet})]},n)})]})},ve=function(e){var t,n=e.field,i=e.dataSet,r=a_(),o=r.queryEngineConfig,a=r.dateTimeFormatOptions,l=r.numberFormatOptions,s=iP(i,n.field),u="date_time"==s.dataType&&"function"in n?a[null==(t=o.supportedTimeTruncFunctions)||null==(t=t[n.function])?void 0:t.dateFormat].formatter(new Date(n.value)):rB(n.value,l,s.dataType);return h.jsxs(uM,{"data-component":"drilldown-breadcrumb-equals",children:[s.publicName," = '",u,"'"]})},vt=function(e){var t=e.option,n=iP(e.dataSet,t.field),i=a_();return h.jsxs(uM,{"data-component":"drilldown-breadcrumb-crumb",children:[n.publicName,"function"in t&&"date_time"==n.dataType?" ("+i.queryEngineConfig.supportedTimeTruncFunctions[t.function].publicName+")":""]})},vn=function(e,t,n,i){var r=[].concat(i);if(t){var o=r.filter(function(e){return e.field!==t.field});return"date_time"!==iP(e,n.field).dataType&&o.unshift({field:n.field,function:"none"}),o}return[]},vi=function(e,t,n,i,r){var o=[].concat(null!=e?e:[]);if(0===o.length&&o.push([]),n){if(i){var a,l={field:null!=(a=n.field)?a:"",op:">=",value:n.value},s=function(){if(n){var e,i=function(){var e=t.findIndex(function(e){return e[0]===(null==n?void 0:n.value)});if(e>=0){for(var i=t[e],r=e+1;r<t.length;r++)if(t[r][0]!==i[0])return t[r][0]}}();if(i)return{field:null!=(e=n.field)?e:"",op:"<",value:i}}}();o=o.map(s?function(e){return[l,s].concat(e)}:function(e){return[l].concat(e)})}else if(r&&r.length>0){var u,d={field:null!=(u=n.field)?u:"",op:"=",value:n.value};o=o.map(function(e){return[d].concat(e)})}}return o},vr=function(e){return 1===e.length},vo=function(e,t,n,i){var r=[].concat(e);return n&&(r=r.filter(function(e){return e.field!==n.field})),"date_time"===iP(t,i.field).dataType&&"function"in i&&(r=r.filter(function(e){return e.field!==i.field})).unshift({field:i.field,direction:"asc",function:i.function}),r},va={type:"barChart",measure:[],dimension:[],timeDimension:null,order:[],displayTitle:"",displaySubject:"",filter:[],limit:500,conditionalFormattingRules:[],protectedFields:void 0,xAxisPostfix:"",xAxisPrefix:"",yAxisPostfix:"",yAxisPrefix:"",tags:[],yAxisFormat:null,xAxisFormat:null,legend:!1,drilldown:[],approxXAxisLabelCount:"auto",approxYAxisLabelCount:"auto",drilldownOptions:void 0},vl=function(e){var t,n,i,r,a,l,s,u,d,c,p,f,m,v,g,b,x,y,w,C=e.displayTitle,j=e.displaySubject,S=a_(),F=S.textOverride,k=S.labelFormat,T=S.valueAlias,_=S.nullValueAlias,I=S.queryEngineConfig,A=hC({title:C,subject:j,headline:e.headline}),D=lu(),O={displayTitle:C,displaySubject:j,localFilters:(e=rE(e,{},va)).localFilters,setLocalFilters:e.setLocalFilters,setParameterUpdate:e.setParameterUpdate,library:null!=(t=null==(n=e)?void 0:n.library)&&t,verified:null==(i=e)?void 0:i.protectedByOrganisation,dataSet:e.dataSet,parameters:null==(r=e)?void 0:r.parameters,componentType:null==(a=e)?void 0:a.type,measure:null==(l=e)?void 0:l.measure,dimension:null==(s=e)?void 0:s.dimension,timeDimension:e.timeDimension,viewId:null!=(u=null==(d=e)?void 0:d.viewId)?u:""},E=iA(e.type),L=o.useState(),P=L[0],R=L[1];if(!E.isRunnable(e))return h.jsx(fN,{title:"Missing parameters"});if(rb(e.result))return h.jsx(dr,{});if(rx(e.result))return h.jsx(fM,{});if(ry(e.result))return h.jsx(fq,en({},O));var N=hw(e),M=rh(N,e.measure,e.result),z=rm(e.result,e.measure,N,"100%"==e.stacked,eX(e.dataSetId,e.dimension,e.timeDimension,_,F)),q=hH(e.order,e.headline,e.timeDimension);return h.jsxs(o.Suspense,{fallback:h.jsx(dr,{}),children:[h.jsx(h3,{positioning:P,onClose:function(t){R(void 0),t&&e.onDrilldownChange({newField:t,existingField:null==P?void 0:P.field})},options:e.drilldownOptions,dataSet:null==(c=e)?void 0:c.dataSet,disabled:!(!e.timeDimension||0!==e.order.length)}),h.jsxs(fr,{id:e.id,queriesAreChanging:e.queriesAreChanging,children:[h.jsx(fi,en({},O,{paddingBottom:q?"0.5rem":void 0})),q&&h.jsx(hY,en({},e.propsForHeadline)),h.jsx(h9,{onReset:function(){return e.onResetDrilldown()},drilldownSelections:e.drilldownSelections,dataSet:e.dataSet}),h.jsx(od,{disabledFeatures:null!=(p=null==(f=e)?void 0:f.library)&&p,children:h.jsx(hZ,{approxXAxisLabelCount:e.approxXAxisLabelCount,approxYAxisLabelCount:e.approxYAxisLabelCount,ref:A,sparkline:e.sm,uniqueId:e.id,x:"x",formatYAxisLabel:rz(F,{prefix:e.yAxisPrefix,postfix:e.yAxisPostfix,format:null==(m=e)?void 0:m.yAxisFormat,numberFormatOptions:e.numberFormatOptions,dateTimeFormatOptions:e.dateTimeFormatOptions}),formatXAxisLabel:rM(e.timeDimension,e.supportedTimeTruncFunctions,{prefix:e.xAxisPrefix,postfix:e.xAxisPostfix,format:null==(v=e)?void 0:v.xAxisFormat,numberFormatOptions:e.numberFormatOptions,dateTimeFormatOptions:e.dateTimeFormatOptions},T),formatter:function(t,n){var i,r=rN(e.dimension,e.conditionalFormattingRules,t,n,null==(i=e)?void 0:i.dataSet);if(r)return r.value},styles:null==D||null==(g=D.charts)?void 0:g.barChart,keys:M,colors:rj(null==D?void 0:D.colors,M.length),data:z,legend:hj(null==(b=e)?void 0:b.legend,"verbose"===(null==D?void 0:D.detail)),horizontal:"horizontalBarChart"==e.type,removeStroke:!1,type:e.stacked?"stacked":"grouped",showTotalOnTooltip:!!e.stacked,forceXAxisAsTime:!!e.timeDimension,theme:null==D?void 0:D.charts,axisTitles:null==(x=e)?void 0:x.axisTitles,formatSeriesName:rq(e.result,F,e.type,null!=(y=e.viewId)?y:"",k),conditionalFormattingPossibilities:function(t){return rR(e.dimension,e.conditionalFormattingRules,t,e.supportedAggregates,e.dataSet)},onClick:function(t,n,i){var r,o,a,l,s,u,d,c,p,f,m;!1===h8(e.drilldownOptions)||vr(e.drilldownSelections)?R(void 0):(t&&null!=i&&i.event&&"clientY"in(null==i?void 0:i.event.nativeEvent)&&R({x:null==i?void 0:i.event.nativeEvent.clientX,y:null==i?void 0:i.event.nativeEvent.clientY,field:{field:(l=eW((a=null==Object?void 0:Object.entries(null==t?void 0:t.datum)[0])[0],I)).field,value:a[1],function:l.function}}),f=(d=e).onViewClick,(null==t?void 0:t.distance)<3&&h0(null==d?void 0:d.protectedFields)&&f({viewId:null!=(c=null==d?void 0:d.viewId)?c:"",type:null!=(p=null==d?void 0:d.type)?p:"barChart",clicked:{grouping:function(){var e,i=[],r=Object.keys(null!=n?n:{}).map(function(e){return rc(e)});if(null!=d&&d.dimension&&(null==d||null==(e=d.dimension)?void 0:e.length)>0){if(r.length>1)r.map(function(e){var t,n;i.push({fieldId:""+e.dimensionKeys[0],function:e.function,aggregate:e.function,value:""+e.dimensionValues[0]})});else{var o,a=null!=(o=null==d?void 0:d.dimension[0].field)?o:"";i.push({fieldId:a,function:null==d?void 0:d.dimension[0].function,aggregate:null==d?void 0:d.dimension[0].function,value:null==t?void 0:t.datum[a]})}}if(d&&"timeDimension"in d&&null!==(null==d?void 0:d.timeDimension)){var l,s,u,c,p=null!=(l=null==(s=d.timeDimension)?void 0:s.field)?l:"";i.push({fieldId:p,function:null==(u=d.timeDimension)?void 0:u.truncate,aggregate:null==(c=d.timeDimension)?void 0:c.truncate,value:null==t?void 0:t.datum[p]})}return i}(),value:{fieldId:null!=d&&d.measure?null==d?void 0:d.measure[0].field:"",function:null!=d&&d.measure?null==d?void 0:d.measure[0].function:"",aggregate:null!=d&&d.measure?null==d?void 0:d.measure[0].function:"",value:null==t?void 0:t.datum[null==t?void 0:t.key]}}}))},goalLine:null==(w=e)?void 0:w.goalLines,idPrefix:e.idPrefix,enableHover:h8(e.drilldownOptions)&&!vr(e.drilldownSelections)})})]})]})};vl.defaultProps=va;var vs=o.memo(vl,rL),vu=function(e,t,n,i,r,a,l){var s,u,d,c,p=e;return t.preAggregated&&(p=[iH(t)]),o.useEffect(function(){var i=iA(e.type,{queryEngineConfig:n});t.preAggregated&&i.setDataAttributesFromPreAggregatedDataSet&&r(i.setDataAttributesFromPreAggregatedDataSet(e,t))},[JSON.stringify({dataSet:t,type:e.type})]),{queriesAreChanging:cJ(p,a,l,i,t,e.type).queriesAreChanging}},vd=function(e){var t,n=o.useState(null),i=n[0],r=n[1],a=o.useState([]),l=a[0],s=a[1],u=o.useState(e.component.attributes),d=u[0],c=u[1],p=o.useState(null),f=p[0],m=p[1],v=e.component,g=v.results,b=vu(d,e.dataSet,e.dashboardBehaviour.queryEngineConfig,{localFilters:v.localFilters,globalFilters:e.globalFilters},e.updateComponentAttributes,e.runQueriesCallback,e.setResults).queriesAreChanging;o.useEffect(function(){b||(c(e.component.attributes),s([]))},[JSON.stringify(e.component.attributes)]),o.useEffect(function(){var e;f&&null!=(e=g[0])&&e.content&&(x(f),m(null))},[f,g]);var x=function(t){var n,i,r,o=t.existingField,a=t.newField,l=en({},e.component.attributes,{filter:vi(d.filter,null!=(n=null==(i=g[0])?void 0:i.content)?n:[],o,d.timeDimension,d.dimension),dimension:vn(e.dataSet,o,a,d.dimension),timeDimension:(r=e.dataSet,"function"in a&&"date_time"==iP(r,a.field).dataType?{field:a.field,truncate:a.function}:null),order:vo(d.order,e.dataSet,o,a)});c(l),s(function(e){return[].concat(e,[{newField:a,existingField:o}])})};return aF(function(t){t.drilldown&&function(e,t){if(!t.existingField)throw Error("[[VIZZLY ERROR]]: `existingField` is undefined when validating the drilldown");if(!t.newField)throw Error("[[VIZZLY ERROR]]: `newField` is undefined when validating the drilldown");var n=t.newField.field;if(t.existingField){var i=e.fields.some(function(e){var n;return e.id===(null==(n=t.existingField)?void 0:n.field)}),r=e.fields.some(function(e){return e.id===n});if(i&&r)return!0}throw Error("[[VIZZLY ERROR]]: When validating the drilldown, properties passed in do not match those of your data set")}(e.dataSet,t.drilldown)&&!vr(l)&&t.drilldown.viewId===d.viewId&&m(t.drilldown)}),h.jsxs(o.Fragment,{children:[h.jsx(vs,en({id:e.id},d,{sm:e.sm,dataSet:e.dataSet,localFilters:e.component.localFilters,parameters:null==e?void 0:e.component.attributes.parameters,setLocalFilters:e.setLocalFilters,setParameterUpdate:null==e?void 0:e.setParameterUpdate,result:g&&g[0],queriesAreChanging:b,supportedAggregates:e.dashboardBehaviour.queryEngineConfig.supportedAggregates,supportedTimeTruncFunctions:e.dashboardBehaviour.queryEngineConfig.supportedTimeTruncFunctions,supportedTransformationFunctions:null==e||null==(t=e.dashboardBehaviour)||null==(t=t.queryEngineConfig)?void 0:t.supportedTransformationFunctions,library:null==e?void 0:e.library,numberFormatOptions:e.dashboardBehaviour.numberFormatOptions,dateTimeFormatOptions:e.dashboardBehaviour.dateTimeFormatOptions,onViewClick:function(t){return(null==e?void 0:e.onViewClick)&&(null==e?void 0:e.onViewClick(t))},goalLines:e.component.attributes.goalLines,axisTitles:null==e?void 0:e.component.attributes.axisTitles,propsForHeadline:e,idPrefix:e.idPrefix,onDrilldownChange:x,drilldownSelections:l,onResetDrilldown:function(){c(e.component.attributes),s([])}})),i&&h.jsx(hX,{onDrilldown:i,onClose:function(){return r(null)},inputProps:e})]})},vc=o.forwardRef(function(e,t){return mS(t)?null:h.jsx(_.ParentSize,{children:function(t){var n,i;return h.jsx(hx,{approxXAxisLabelCount:e.approxXAxisLabelCount,approxYAxisLabelCount:e.approxYAxisLabelCount,uniqueId:e.uniqueId,formatSeriesName:e.formatSeriesName,forceXAxisAsTime:e.forceXAxisAsTime,lineCurve:e.lineCurve,sparkline:e.sparkline,lines:{annotate:e.annotate||[],data:e.data,keys:e.keys,colors:e.colors,formatter:e.formatter,threshold:e.threshold},x:e.x,legend:null==e?void 0:e.legend,removeStroke:null==e?void 0:e.removeStroke,formatXAxisLabel:null==e?void 0:e.formatXAxisLabel,formatYAxisLabel:null==e?void 0:e.formatYAxisLabel,horizontal:null==e?void 0:e.horizontal,height:null!=(n=null==e?void 0:e.height)?n:null==t?void 0:t.height,width:null!=(i=null==e?void 0:e.width)?i:null==t?void 0:t.width,theme:null==e?void 0:e.theme,onPointerUp:null==e?void 0:e.onPointerUp,onClick:function(t){return(null==e?void 0:e.onClick)&&(null==e?void 0:e.onClick(t))},goalLine:null==e?void 0:e.goalLine,axisTitles:null==e?void 0:e.axisTitles,idPrefix:null==e?void 0:e.idPrefix})}})}),vp=function(e){var t,n,i,r,a=a_(),l=a.textOverride,s=a.labelFormat,u=a.valueAlias,d=a.nullValueAlias,c=e.displayTitle,p=e.displaySubject,f=hC({title:c,subject:p,headline:null==e?void 0:e.headline}),m={displayTitle:c,displaySubject:p,verified:e.protectedByOrganisation,library:null!=(t=e.library)&&t,localFilters:e.localFilters,setLocalFilters:e.setLocalFilters,dataSet:e.dataSet,parameters:null==e?void 0:e.parameters,componentType:null==e?void 0:e.type,measure:null==e?void 0:e.measure,dimension:null==e?void 0:e.dimension,timeDimension:e.timeDimension,setParameterUpdate:null==e?void 0:e.setParameterUpdate,viewId:null!=(n=null==e?void 0:e.viewId)?n:""},v=lu();if(!iA(e.type).isRunnable(e))return h.jsx(fN,{title:"Missing parameters"});if(rb(e.result))return h.jsx(dr,{});if(rx(e.result))return h.jsx(fM,{});if(ry(e.result))return h.jsx(fq,en({},m));var g=hw(e),b=rh(g,e.measure,e.result),x=rm(e.result,e.measure,g,"100%"==e.stacked,eX(e.dataSetId,e.dimension,e.timeDimension,d,l)),y=hH(e.order,e.headline,e.timeDimension);return h.jsx(o.Suspense,{fallback:h.jsx(dr,{}),children:h.jsxs(fr,{id:e.id,queriesAreChanging:e.queriesAreChanging,children:[h.jsx(fi,en({},m,{paddingBottom:y?"0.5rem":void 0})),y&&h.jsx(hY,en({},e.propsForHeadline)),h.jsx(od,{disabledFeatures:null!=(i=null==e?void 0:e.library)&&i,children:h.jsx(vc,{ref:f,uniqueId:e.id,x:"x",approxXAxisLabelCount:e.approxXAxisLabelCount,approxYAxisLabelCount:e.approxYAxisLabelCount,formatYAxisLabel:rz(l,{prefix:e.yAxisPrefix,postfix:e.yAxisPostfix,format:null==e?void 0:e.yAxisFormat,numberFormatOptions:e.numberFormatOptions,dateTimeFormatOptions:e.dateTimeFormatOptions}),formatXAxisLabel:rM(e.timeDimension,e.supportedTimeTruncFunctions,{prefix:e.xAxisPrefix,postfix:e.xAxisPostfix,format:null==e?void 0:e.xAxisFormat,numberFormatOptions:e.numberFormatOptions,dateTimeFormatOptions:e.dateTimeFormatOptions},u),keys:b,colors:rj(null==v?void 0:v.colors,b.length),data:x,sparkline:e.sm,legend:hj(null==e?void 0:e.legend,"verbose"===(null==v?void 0:v.detail)),horizontal:!1,annotate:"verbose"==(null==v?void 0:v.detail)?["high_and_low"]:[],forceXAxisAsTime:!!e.timeDimension,lineCurve:e.lineCurve,theme:null==v?void 0:v.charts,formatSeriesName:rq(e.result,l,e.type,null!=(r=e.viewId)?r:"",s),formatter:function(t){var n=rN(e.dimension,e.conditionalFormattingRules,{},t,null==e?void 0:e.dataSet);if(n)return n.value},onPointerUp:null==e?void 0:e.onPointerUp,goalLine:null==e?void 0:e.goalLines,axisTitles:null==e?void 0:e.axisTitles,threshold:hG(e.conditionalFormattingRules),idPrefix:e.idPrefix})})]})})};vp.defaultProps={type:"lineChart",measure:[],dimension:[],timeDimension:null,order:[],displayTitle:"",displaySubject:"",filter:[],limit:500,xAxisPostfix:"",xAxisPrefix:"",yAxisPostfix:"",yAxisPrefix:"",yAxisFormat:null,xAxisFormat:null,lineCurve:"natural",conditionalFormattingRules:[],drilldown:[],legend:!1,approxXAxisLabelCount:"auto",approxYAxisLabelCount:"auto",goalLines:void 0,headline:void 0,tags:[]};var vf=o.memo(vp,rL),vm=function(e){var t,n=o.useState(null),i=n[0],r=n[1],a=e.component,l=a.results,s=a.attributes,u=vu(s,e.dataSet,e.dashboardBehaviour.queryEngineConfig,{localFilters:a.localFilters,globalFilters:e.globalFilters},e.updateComponentAttributes,e.runQueriesCallback,e.setResults);return h.jsxs(o.Fragment,{children:[h.jsx(vf,en({id:e.id},s,{dataSet:e.dataSet,localFilters:e.component.localFilters,setLocalFilters:e.setLocalFilters,setParameterUpdate:e.setParameterUpdate,result:l&&l[0],queriesAreChanging:u.queriesAreChanging,supportedAggregates:e.dashboardBehaviour.queryEngineConfig.supportedAggregates,supportedTimeTruncFunctions:e.dashboardBehaviour.queryEngineConfig.supportedTimeTruncFunctions,supportedTransformationFunctions:null==e||null==(t=e.dashboardBehaviour)||null==(t=t.queryEngineConfig)?void 0:t.supportedTransformationFunctions,onPointerUp:function(t){return hQ(e)&&r(t)},sm:e.sm,library:null==e?void 0:e.library,numberFormatOptions:e.dashboardBehaviour.numberFormatOptions,dateTimeFormatOptions:e.dashboardBehaviour.dateTimeFormatOptions,propsForHeadline:e,idPrefix:e.idPrefix})),i&&h.jsx(hX,{onDrilldown:i,onClose:function(){return r(null)},inputProps:e})]})},vh=o.forwardRef(function(e,t){return mS(t)?null:h.jsx(_.ParentSize,{children:function(t){var n,i;return h.jsx(hx,{approxXAxisLabelCount:e.approxXAxisLabelCount,approxYAxisLabelCount:e.approxYAxisLabelCount,uniqueId:e.uniqueId,formatSeriesName:e.formatSeriesName,forceXAxisAsTime:e.forceXAxisAsTime,sparkline:e.sparkline,lines:{annotate:e.annotate||[],data:e.data,keys:e.keys,colors:e.colors,scatter:!0},x:e.x,sharedTooltip:!0,legend:null==e?void 0:e.legend,removeStroke:null==e?void 0:e.removeStroke,formatXAxisLabel:null==e?void 0:e.formatXAxisLabel,formatYAxisLabel:null==e?void 0:e.formatYAxisLabel,horizontal:null==e?void 0:e.horizontal,height:null!=(n=null==e?void 0:e.height)?n:null==t?void 0:t.height,width:null!=(i=null==e?void 0:e.width)?i:null==t?void 0:t.width,theme:null==e?void 0:e.theme,onClick:function(t){return(null==e?void 0:e.onClick)&&(null==e?void 0:e.onClick(t))},goalLine:null==e?void 0:e.goalLine,axisTitles:null==e?void 0:e.axisTitles,idPrefix:null==e?void 0:e.idPrefix})}})}),vv={type:"scatterChart",xMeasure:null,yMeasure:null,dimension:[],timeDimension:null,order:[],displayTitle:"",displaySubject:"",xAxisPostfix:"",xAxisPrefix:"",yAxisPostfix:"",yAxisPrefix:"",yAxisFormat:null,xAxisFormat:null,filter:[],limit:500,legend:!1,approxXAxisLabelCount:"auto",approxYAxisLabelCount:"auto",tags:[]},vg=function(e){var t,n,i,r,a,l,s,u,d,c,p,f,m=e.displayTitle,v=e.displaySubject,g=a_(),b=g.textOverride,x=g.labelFormat,y=hC({title:m,subject:v}),w={displayTitle:m,displaySubject:v,library:null!=(t=e.library)&&t,verified:e.protectedByOrganisation,localFilters:e.localFilters,setLocalFilters:e.setLocalFilters,dataSet:e.dataSet,componentType:null==(n=e)?void 0:n.type,viewId:null!=(i=null==(r=e)?void 0:r.viewId)?i:""},C=lu();if(!iA(e.type).isRunnable(e))return h.jsx(fN,{title:"Missing parameters",children:function(e){if(e.xMeasure&&e.yMeasure||e.dimension.length>0)return"The Data settings are missing a parameter. Select from the list of parameters to display the Chart."}(e)});if(rb(e.result))return h.jsx(dr,{});if(rx(e.result))return h.jsx(fM,{});if(ry(e.result))return h.jsx(fq,en({},w));var j,S,F,k,T=(e=rE(e,{},vv)).result&&e.xMeasure?(j=e.dimension,S=e.xMeasure,F=e.result,k={},rf(F).forEach(function(e){var t=[].concat(j).map(function(t){return e[t.field]}),n=[].concat(j).map(function(e){return e.field});k[ru(n,t,S.field,S.function)]=!0}),Object.keys(k)):[];if(!e.xMeasure||!e.yMeasure)return null;var _=[];e.xMeasure&&_.push(e.xMeasure),e.yMeasure&&_.push(e.yMeasure);var I=hw(e),A=e.result?rm(e.result,_,I):[],D=ru([],[],e.xMeasure.field,e.xMeasure.function);return A.map(function(t){var n=[].concat(e.dimension.map(function(e){return t[e.field]})),i=e.yMeasure,r=e.xMeasure;if(!i||!r)return!1;var o=ru([],[],i.field,i.function);return t[ru(e.dimension.map(function(e){return e.field}),n,r.field,r.function)]=t[o],t}),h.jsx(o.Suspense,{fallback:h.jsx(dr,{}),children:h.jsxs(fr,{queriesAreChanging:e.queriesAreChanging,children:[h.jsx(fi,en({},w)),h.jsx(od,{disabledFeatures:null!=(a=null==(l=e)?void 0:l.library)&&a,children:h.jsx(vh,{ref:y,approxXAxisLabelCount:e.approxXAxisLabelCount,approxYAxisLabelCount:e.approxYAxisLabelCount,uniqueId:e.id,x:D,keys:T,colors:rj(null==C?void 0:C.colors,T.length),data:A,legend:hj(null==(s=e)?void 0:s.legend,"verbose"===(null==C?void 0:C.detail)),horizontal:!1,removeStroke:!1,forceXAxisAsTime:!1,sparkline:!1,formatYAxisLabel:rz(b,{prefix:e.yAxisPrefix,postfix:e.yAxisPostfix,format:null==(u=e)?void 0:u.yAxisFormat,numberFormatOptions:e.numberFormatOptions,dateTimeFormatOptions:e.dateTimeFormatOptions}),formatXAxisLabel:rM(null,e.supportedTimeTruncFunctions,{prefix:e.xAxisPrefix,postfix:e.xAxisPostfix,format:null==(d=e)?void 0:d.xAxisFormat,numberFormatOptions:e.numberFormatOptions,dateTimeFormatOptions:e.dateTimeFormatOptions}),theme:null==C?void 0:C.charts,formatSeriesName:rq(e.result,b,e.type,null!=(c=e.viewId)?c:"",x),goalLine:null==(p=e)?void 0:p.goalLines,axisTitles:null==(f=e)?void 0:f.axisTitles,idPrefix:e.idPrefix})})]})})};vg.defaultProps=vv;var vb=o.memo(vg,rL),vx=function(e){var t,n=e.component,i=n.results,r=n.attributes,o=n.localFilters,a=cJ(r,e.runQueriesCallback,e.setResults,{localFilters:o,globalFilters:e.globalFilters},e.dataSet);return h.jsx(vb,en({id:e.id},r,{dataSet:e.dataSet,localFilters:o,setLocalFilters:e.setLocalFilters,setParameterUpdate:function(){},result:i&&i[0],queriesAreChanging:a.queriesAreChanging,supportedAggregates:e.dashboardBehaviour.queryEngineConfig.supportedAggregates,supportedTimeTruncFunctions:e.dashboardBehaviour.queryEngineConfig.supportedTimeTruncFunctions,sm:e.sm,library:null==e?void 0:e.library,supportedTransformationFunctions:null==e||null==(t=e.dashboardBehaviour)||null==(t=t.queryEngineConfig)?void 0:t.supportedTransformationFunctions,numberFormatOptions:e.dashboardBehaviour.numberFormatOptions,dateTimeFormatOptions:e.dashboardBehaviour.dateTimeFormatOptions,idPrefix:e.idPrefix}))},vy=function(e){return[].concat(e.content).map(function(t){return s.reduce(t,function(t,n,i){return t[e.fields[i].id]=n,t},{})})},vw=o.forwardRef(function(e,t){return mS(t)?null:h.jsx(_.ParentSize,{children:function(t){var n,i;return h.jsx(hx,en({},e,{height:null!=(n=null==e?void 0:e.height)?n:null==t?void 0:t.height,width:null!=(i=null==e?void 0:e.width)?i:null==t?void 0:t.width}))}})}),vC=function(e){var t=e.endAngle;return{startAngle:t>Math.PI?2*Math.PI:0,endAngle:t>Math.PI?2*Math.PI:0,opacity:0}},vj=function(e){return{startAngle:e.startAngle,endAngle:e.endAngle,opacity:1}};function vS(e){var t=e.animate,n=e.path,i=e.getColor,r=e.onClickDatum,o=e.onMouseOver,a=e.onMouseOut,l=e.showLabel,s=e.valueKey,u=e.formatValue;return M.useTransition(e.arcs,{from:t?vC:vj,enter:vj,update:vj,leave:t?vC:vj,keys:e.getKey})(function(e,t,d){var c=d.key,p=n.centroid(t),f=p[0],m=p[1],v=t.endAngle-t.startAngle>=.1,g=JSON.parse(c);return h.jsxs("g",{children:[h.jsx(M.animated.path,{d:M.interpolate([e.startAngle,e.endAngle],function(e,i){return n(en({},t,{startAngle:e,endAngle:i}))}),fill:i(t),onClick:function(){return r(g)},onTouchStart:function(){return r(g)},onMouseOver:function(){return o({arc:t,coords:{x:f,y:m}})},onMouseOut:function(){return a()}}),l&&v&&h.jsx(M.animated.g,{style:{opacity:e.opacity},children:h.jsx("text",{fill:"white",x:f,y:m,dy:".33em",fontSize:9,textAnchor:"middle",pointerEvents:"none",children:u(g[s])})})]},c)})}var vF,vk=o.forwardRef(function(e,t){return mS(t)?null:h.jsx(_.ParentSize,{children:function(t){return h.jsx(vT,en({width:null==t?void 0:t.width,height:null==t?void 0:t.height},e))}})}),vT=function(e){var t,n,i,r,a,l=e.width,s=e.labelKey,u=e.valueKey,d=e.formatValue,p=e.formatLabel,f=mI(null!=(t=null==e?void 0:e.height)?t:300,null==e?void 0:e.legend),m=z.useTooltip({tooltipOpen:!1,tooltipLeft:l/2,tooltipTop:f,tooltipData:"Move me with your mouse or finger"}),v=m.showTooltip,g=m.hideTooltip,b=m.tooltipOpen,x=m.tooltipData,y=m.tooltipLeft,w=m.tooltipTop,C=z.useTooltipInPortal({scroll:!0,detectBounds:!0}),j=C.containerRef,S=C.TooltipInPortal,F=v_(null==e?void 0:e.data,s,p),k=O.scaleOrdinal({domain:F,range:null==e?void 0:e.colors}),T=l-25-25,_=f-8-25,I=Math.min(T,_)/2,A=o.useCallback(function(e){var t,n,i;v({tooltipLeft:(null==e||null==(t=e.coords)?void 0:t.x)+l/2,tooltipTop:(null==e||null==(n=e.coords)?void 0:n.y)+f/2,tooltipData:JSON.stringify(e.arc.data)})},[v,f,l]);if(l<10)return null;var D=function(){if(x){var e=JSON.parse(x);return{label:p?p(e[s]):e[s],value:d(e[u])}}return{label:"",value:""}};return h.jsxs("div",{ref:j,style:{position:"relative",height:f,width:l},children:[h.jsx("style",{children:""+m_}),h.jsx("svg",{width:l,height:f,children:h.jsxs(R.Group,{top:_/2+8,left:T/2+25,children:[h.jsx(N,{data:null==e?void 0:e.data,pieValue:function(e){return e[u]},outerRadius:I,innerRadius:null!=(n=e.styles)&&n.hole?I-f/5.5:void 0,cornerRadius:null!=(i=null==(r=e.styles)?void 0:r.cornerRadius)?i:5,padAngle:null!=(a=e.styles)&&a.gap?.005:void 0,pieSort:null,pieSortValues:null,children:function(t){return h.jsx(vS,en({},t,{animate:!0,getKey:function(e){return JSON.stringify(e.data)},onClickDatum:function(t){return(null==e?void 0:e.onClick)&&(null==e?void 0:e.onClick(t))},getColor:function(t){return e.formatColor&&e.formatColor(t.data,u)||k(t.data[s])},onMouseOver:A,onMouseOut:function(){return g()},showLabel:null==e?void 0:e.showLabel,valueKey:u,formatValue:function(e){return d(e)}}))}}),b&&h.jsx(S,{top:void 0===w?0:w,left:void 0===y?0:y,children:h.jsx(m6,{sections:1,children:h.jsx(m8,{label:D().label,value:D().value.toString()})})},c.v4())]})}),(null==e?void 0:e.legend)&&h.jsx(mH,{colors:null==e?void 0:e.colors,keys:F,typeIndex:vI(null==e?void 0:e.data),alignCenter:!0,replaceDimensionColorsIfPossible:!0,conditionalFormattingPossibilities:function(t){return e.conditionalFormattingPossibilities?e.conditionalFormattingPossibilities(u):[]}})]})},v_=function(e,t,n){return e.map(function(e){return n?n(e[t]):e[t]})},vI=function(e){return e.map(function(e,t){return{index:t,type:"pie"}})},vA={Afghanistan:"AFG",Angola:"AGO",Albania:"ALB","United Arab Emirates":"ARE",Argentina:"ARG",Armenia:"ARM",Antarctica:"ATA","French Southern and Antarctic Lands":"ATF",Australia:"AUS",Austria:"AUT",Azerbaijan:"AZE",Burundi:"BDI",Belgium:"BEL",Benin:"BEN","Burkina Faso":"BFA",Bangladesh:"BGD",Bulgaria:"BGR","The Bahamas":"BHS","Bosnia and Herzegovina":"BIH",Belarus:"BLR",Belize:"BLZ",Bermuda:"BMU",Bolivia:"BOL",Brazil:"BRA",Brunei:"BRN",Bhutan:"BTN",Botswana:"BWA","Central African Republic":"CAF",Canada:"CAN",Switzerland:"CHE",Chile:"CHL",China:"CHN","Ivory Coast":"CIV",Cameroon:"CMR","Democratic Republic of the Congo":"COD","Republic of the Congo":"COG",Colombia:"COL","Costa Rica":"CRI",Kosovo:"CS-KM",Cuba:"CUB",Cyprus:"CYP","Czech Republic":"CZE",Germany:"DEU",Djibouti:"DJI",Denmark:"DNK","Dominican Republic":"DOM",Algeria:"DZA",Ecuador:"ECU",Egypt:"EGY",Eritrea:"ERI","Western Sahara":"ESH",Spain:"ESP",Estonia:"EST",Ethiopia:"ETH",Finland:"FIN",Fiji:"FJI","Falkland Islands":"FLK",France:"FRA",Gabon:"GAB","United Kingdom":"GBR",Georgia:"GEO",Ghana:"GHA",Guinea:"GIN",Gambia:"GMB","Guinea Bissau":"GNB","Equatorial Guinea":"GNQ",Greece:"GRC",Greenland:"GRL",Guatemala:"GTM","French Guiana":"GUF",Guyana:"GUY",Honduras:"HND",Croatia:"HRV",Haiti:"HTI",Hungary:"HUN",Indonesia:"IDN",India:"IND",Ireland:"IRL",Iran:"IRN",Iraq:"IRQ",Iceland:"ISL",Israel:"ISR",Italy:"ITA",Jamaica:"JAM",Jordan:"JOR",Japan:"JPN",Kazakhstan:"KAZ",Kenya:"KEN",Kyrgyzstan:"KGZ",Cambodia:"KHM","South Korea":"KOR",Kuwait:"KWT",Laos:"LAO",Lebanon:"LBN",Liberia:"LBR",Libya:"LBY","Sri Lanka":"LKA",Lesotho:"LSO",Lithuania:"LTU",Luxembourg:"LUX",Latvia:"LVA",Morocco:"MAR",Moldova:"MDA",Madagascar:"MDG",Mexico:"MEX",Macedonia:"MKD",Mali:"MLI",Malta:"MLT",Myanmar:"MMR",Montenegro:"MNE",Mongolia:"MNG",Mozambique:"MOZ",Mauritania:"MRT",Malawi:"MWI",Malaysia:"MYS",Namibia:"NAM","New Caledonia":"NCL",Niger:"NER",Nigeria:"NGA",Nicaragua:"NIC",Netherlands:"NLD",Norway:"NOR",Nepal:"NPL","New Zealand":"NZL",Oman:"OMN",Pakistan:"PAK",Panama:"PAN",Peru:"PER",Philippines:"PHL","Papua New Guinea":"PNG",Poland:"POL","Puerto Rico":"PRI","North Korea":"PRK",Portugal:"PRT",Paraguay:"PRY","West Bank":"PSE",Qatar:"QAT",Romania:"ROU",Russia:"RUS",Rwanda:"RWA","Saudi Arabia":"SAU",Sudan:"SDN",Senegal:"SEN","Solomon Islands":"SLB","Sierra Leone":"SLE","El Salvador":"SLV",Somalia:"SOM","Republic of Serbia":"SRB","South Sudan":"SSD",Suriname:"SUR",Slovakia:"SVK",Slovenia:"SVN",Sweden:"SWE",Swaziland:"SWZ",Syria:"SYR",Chad:"TCD",Togo:"TGO",Thailand:"THA",Tajikistan:"TJK",Turkmenistan:"TKM","East Timor":"TLS","Trinidad and Tobago":"TTO",Tunisia:"TUN",Turkey:"TUR",Taiwan:"TWN","United Republic of Tanzania":"TZA",Uganda:"UGA",Ukraine:"UKR",Uruguay:"URY","United States of America":"USA",Uzbekistan:"UZB",Venezuela:"VEN",Vietnam:"VNM",Vanuatu:"VUT",Yemen:"YEM","South Africa":"ZAF",Zambia:"ZMB",Zimbabwe:"ZWE"},vD={worldCountries:{id:"worldCountries",fetchTopoJSON:(vF=et($().mark(function e(){var t;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H("https://static.app.vizzly.co/topojson/world-countries.json",{mode:"cors"});case 2:if(!(t=e.sent).ok){e.next=8;break}return e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}},e)})),function(){return vF.apply(this,arguments)}),geographicAreaId:function(e){return"id"in e&&"string"==typeof e.id?e.id:""},geographicAreaPublicName:function(e){return s.get(e,"properties.name","Name not found.")},allGeographicAreas:function(e){var t,n=this,i=(null==e||null==(t=e.objects)||null==(t=t.countries1)?void 0:t.geometries)||[];return s.reduce(i,function(e,t){return e[n.geographicAreaId(t)]={publicName:n.geographicAreaPublicName(t)},e},{})},resolveUserDataToVizzlyAreaCode:function(e){var t={};return Object.keys(e).forEach(function(n){t[vA[n]||n]=e[n]}),t}}},vO=function(e){var t,n,i,r,a,l,u,d,c,p,f,m,v,g,b,x,y,w=e.width,C=e.height,j=e.data,S=e.background,F=e.colorRange,k=e.gridColor,T=e.missingDataColor,_=e.formatValue,I=e.onPositionChange,A=e.position||{centerX:w/2,centerY:C/2,scale:w/630*100},D=A.centerX,E=A.centerY,L=A.scale,P=(t=e.topology,i=(n=o.useState(null))[0],r=n[1],a=vD[t],o.useEffect(function(){var e;(e=et($().mark(function e(){var t;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.fetchTopoJSON();case 2:(t=e.sent)&&r(t);case 5:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})()},[t]),{topologyJSON:i,topology:a}),R=P.topology,N=P.topologyJSON,M=(c=(d=z.useTooltip({tooltipOpen:!1,tooltipLeft:w/2,tooltipTop:C,tooltipData:void 0})).showTooltip,p=d.hideTooltip,f=d.tooltipOpen,m=d.tooltipData,v=d.tooltipLeft,g=d.tooltipTop,{showTooltip:c,hideTooltip:p,tooltipOpen:f,tooltipData:m,tooltipLeft:void 0===v?0:v,tooltipTop:void 0===g?0:g,containerRef:(b=z.useTooltipInPortal({scroll:!0,detectBounds:!0})).containerRef,containerBounds:b.containerBounds,TooltipInPortal:b.TooltipInPortal}),V=M.showTooltip,H=M.containerRef,Y=M.tooltipData,G=M.containerBounds,U=M.tooltipOpen,K=M.TooltipInPortal,X=M.tooltipTop,Q=M.tooltipLeft,J=M.hideTooltip;if(!N)return null;var Z=R.resolveUserDataToVizzlyAreaCode(j),ee=B.feature(N,N.objects.countries1),en=Object.values(j),ei=O.scaleQuantize({domain:[null!=(x=s.min(en))?x:0,null!=(y=s.max(en))?y:1],range:F});return w<10?null:h.jsxs("div",{ref:H,children:[h.jsx("style",{children:""+m_}),h.jsx(W.Zoom,{width:w,height:C,initialTransformMatrix:{scaleX:L,scaleY:L,translateX:D,translateY:E,skewX:0,skewY:0},children:function(e){return h.jsxs("div",{onMouseLeave:function(){I&&I({scale:e.transformMatrix.scaleX,centerX:e.transformMatrix.translateX,centerY:e.transformMatrix.translateY})},children:[h.jsxs("svg",{"data-component":"mercator-map",width:w,height:C,onDoubleClick:function(){e.scale({scaleX:1.3,scaleY:1.3})},onTouchStart:e.dragStart,onMouseDown:e.dragStart,onTouchMove:e.dragMove,onTouchEnd:e.dragEnd,onMouseMove:e.dragMove,onMouseUp:e.dragEnd,onMouseLeave:function(){J(),e.isDragging&&e.dragEnd()},children:[h.jsx("rect",{x:0,y:0,width:w,height:C,fill:S,rx:14}),h.jsx(q.Mercator,{data:ee.features,scale:e.transformMatrix.scaleX,translate:[e.transformMatrix.translateX,e.transformMatrix.translateY],children:function(e){return h.jsxs("g",{children:[h.jsx(q.Graticule,{graticule:function(t){return e.path(t)||""},stroke:null!=k?k:"none"}),e.features.map(function(e,t){var n,i=e.feature;return h.jsx("path",{"data-testid":"map-feature-"+i.id,d:e.path||"",fill:Z[n=R.geographicAreaId(i)]?ei(Z[n]):T,stroke:S,strokeWidth:.5,onMouseEnter:function(e){i.id!=(null==Y?void 0:Y.areaId)&&V({tooltipLeft:e.clientX-G.left,tooltipTop:e.clientY-G.top,tooltipData:{areaId:i.id,publicName:R.geographicAreaPublicName(i),value:Z[i.id]}})}},"map-feature-"+t)})]})}}),U&&h.jsx(K,{top:X,left:Q,children:h.jsx(m6,{sections:1,children:h.jsx(m8,{label:null==Y?void 0:Y.publicName,value:null!=Y&&Y.value?""+_(Y.value):"No data"})})},Math.random())]}),h.jsxs("div",{style:{position:"absolute",bottom:20,right:30,display:"flex",flexDirection:"column"},children:[h.jsx("button",{style:{background:"#fff",borderRadius:"5px",opacity:.6,padding:"1px 6px",marginBottom:5,border:0},onClick:function(){e.scale({scaleX:1.4,scaleY:1.4})},"aria-label":"zoom in",children:"+"}),h.jsx("button",{style:{background:"#fff",borderRadius:"5px",opacity:.6,padding:"1px 6px",border:0},onClick:function(){return e.scale({scaleX:.8,scaleY:.8})},"aria-label":"zoom out",children:"-"})]})]})}})]})},vE=o.forwardRef(function(e,t){return mS(t)?null:h.jsx(V,{children:function(t){return h.jsx(vO,en({},e,{width:t.width,height:t.height}))}})}),vL=function(e){var t,n,i,r,a=e.displayTitle,l=e.displaySubject,u=lu(),d=hC({title:a,subject:l}),c={displayTitle:a,displaySubject:l,verified:null==e?void 0:e.protectedByOrganisation,library:null!=(t=null==e?void 0:e.library)&&t,localFilters:e.localFilters,setLocalFilters:e.setLocalFilters,setParameterUpdate:e.setParameterUpdate,dataSet:e.dataSet,parameters:null==e?void 0:e.parameters,componentType:null==e?void 0:e.type,measure:null==e?void 0:e.measure,dimension:null==e?void 0:e.dimension,viewId:null!=(n=null==e?void 0:e.viewId)?n:""},p={dataSetId:e.dataSetId,measure:e.measure,dimension:e.dimension,timeDimension:null,order:e.order,filter:e.filter},f=e.measure.length>0&&e.dimension.length>0;if(rb(e.result))return h.jsx(dr,{});if(!f)return h.jsx(fN,{title:"Missing parameters",children:hS(p)});if(rx(e.result))return h.jsx(fM,{});if(ry(e.result))return h.jsx(fq,en({},c));var m,v,g,b,x,y,w,C,j,S,F,k,T,_,I,A=hw({dimension:e.dimension}),D=(m=e.result,void 0===b&&(b=!1),x=[].concat(vy(m)).map(function(e){var t,n,i,r=(i=s.reject([].concat(A.x),function(e){var t;return e==(null==(t=p.timeDimension)?void 0:t.field)}),p.timeDimension?[p.timeDimension.field]:i),o=r.map(function(t){return ez(e[t])}),a={},l=A.y.includes("measures")?[].concat(A.y).slice(0,A.y.length-1):[].concat(A.y),u=[].concat(l).map(function(t){return e[t]});p.measure.forEach(function(t){var n=eV(t);a[ru(l,u,t.field,t.function)]=e[n]});var d={};return r.forEach(function(t){d[t]=e[t]}),en({},d,{x:o.join(", ")},a,{xValues:o})}),y=[],w={},x.forEach(function(e){var t=w[e.x];w[e.x]||y.push(e.x),w[e.x]=s.merge({},t,e)}),C=y.map(function(e){return w[e]}),b?(S=["x","xValues"],C.map(function(e){var t=en({},e),n=s.sumBy(Object.entries(t),function(e){var t=e[1];return S.includes(e[0])?0:s.isNumber(t)?t:0});return t=s.mapValues(t,function(e,i){return S.includes(i)?e:s.isNumber(e)?rr(t[i],n):e})})):C),O=(_=vy(k=e.result),I={},_.forEach(function(e){var t=[].concat(A.y).map(function(t){return e[t]});p.measure.forEach(function(e){var n=eV(e),i=ru(A.y,t,e.field,e.function);I[i]={key:i,yValues:[].concat(t,[n]),name:[].concat(t,[n]).join(", ")}})}),Object.values(I)).map(function(t){return{data:D.map(function(n){var i;return(i={})[e.dimension[0].field]=n.x,i[t.key]=Number(n[t.key]),i}),valueKey:t.key,labelKey:e.dimension[0].field}});return h.jsx(o.Suspense,{fallback:h.jsx(dr,{}),children:h.jsxs(fr,{queriesAreChanging:e.queriesAreChanging,id:e.id,children:[h.jsx(fi,en({},c)),h.jsx(od,{disabledFeatures:null!=(i=null==e?void 0:e.library)&&i,children:h.jsx(vk,{ref:d,data:O[0].data,labelKey:O[0].labelKey,valueKey:O[0].valueKey,colors:rj(null==u?void 0:u.colors,D.length),styles:null==u||null==(r=u.charts)?void 0:r.pie,conditionalFormattingPossibilities:function(t){return rR(e.dimension,e.conditionalFormattingRules,t,e.supportedAggregates,e.dataSet)},formatColor:function(t,n){var i=rN(e.dimension,e.conditionalFormattingRules,t,n,null==e?void 0:e.dataSet);if(i)return i.value},showLabel:"verbose"===(null==u?void 0:u.detail),legend:hj(null==e?void 0:e.legend,"verbose"===(null==u?void 0:u.detail)),formatValue:function(t){return rB(ro(t,2),null==e?void 0:e.numberFormatOptions,null==e?void 0:e.labelFormat)}})})]})})};vL.defaultProps={type:"pieChart",measure:[],dimension:[],timeDimension:null,order:[],displayTitle:"",displaySubject:"",filter:[],limit:500,conditionalFormattingRules:[],labelsAsPercentage:!1,legend:!1,labelFormat:null,tags:[]};var vP=o.memo(vL,rL),vR=function(e){var t,n=e.component,i=n.results,r=n.attributes,o=cJ(r,e.runQueriesCallback,e.setResults,{localFilters:n.localFilters,globalFilters:e.globalFilters},e.dataSet);return h.jsx(vP,en({id:e.id},r,{dataSet:e.dataSet,localFilters:e.component.localFilters,setParameterUpdate:e.setParameterUpdate,setLocalFilters:e.setLocalFilters,result:i&&i[0],queriesAreChanging:o.queriesAreChanging,supportedAggregates:e.dashboardBehaviour.queryEngineConfig.supportedAggregates,supportedTimeTruncFunctions:e.dashboardBehaviour.queryEngineConfig.supportedTimeTruncFunctions,supportedTransformationFunctions:null==e||null==(t=e.dashboardBehaviour)||null==(t=t.queryEngineConfig)?void 0:t.supportedTransformationFunctions,library:null==e?void 0:e.library,numberFormatOptions:e.dashboardBehaviour.numberFormatOptions}))},vN=Object.assign(function(){},{wrapper:function(e){return rY({position:"relative",border:null==e?void 0:e.border,background:null==e?void 0:e.background,borderRadius:null==e?void 0:e.borderRadius})},input:function(e){var t,n,i;return rY(en({color:"inherit",width:"100%",border:0,height:null==e?void 0:e.height,background:"transparent",padding:null==e?void 0:e.padding,fontSize:null==e?void 0:e.fontSize,borderRadius:null==e?void 0:e.borderRadius,fontWeight:null==e?void 0:e.fontWeight,boxSizing:"border-box"},rW,{"&:hover":en({},rW,{outline:0,boxShadow:e?null==(t=e["&:hover"])?void 0:t.boxShadow:void 0,background:e?null==(n=e["&:hover"])?void 0:n.background:void 0}),"&:focus":en({},rW,{outline:0,boxShadow:e?null==(i=e["&:focus"])?void 0:i.boxShadow:void 0})}))},icon:function(e){var t,n;return rY({color:null==e||null==(t=e.icons)?void 0:t.color,height:18,width:18,"> * svg":{fill:null==e||null==(n=e.icons)?void 0:n.color}})},iconWrapper:rY({top:8,right:12,position:"absolute",display:"flex",gap:"0.5rem"})}),vM=o.forwardRef(function(e,t){var n,i,r,a,l=e.placeholder,s=e.onChange,u=e.initialValue,d=e.inputRef,c=o.useState(null!=u?u:""),p=c[0],f=c[1],m=(r=(i=o.useState(p))[0],a=i[1],o.useEffect(function(){var e=setTimeout(function(){a(p)},500);return function(){return clearTimeout(e)}},[p,500]),r);o.useEffect(function(){s(m)},[s,m]);var v=function(){return f("")},g=lu();return h.jsx("form",{autoComplete:"off",children:h.jsxs("div",{role:"search",className:""+vN.wrapper(null==g?void 0:g.search),"data-themeapi":"search","data-chipposition":"top.left",children:[h.jsx(p2,{as:"label",htmlFor:"fuzzy-search-input",children:"Search"}),h.jsx("input",{value:p,onChange:function(e){return f(e.target.value)},id:"fuzzy-search-input",name:"fuzzy-search-input",className:""+vN.input(null==g?void 0:g.search),placeholder:l,ref:d,"data-testid":"fuzzy-search-input"}),h.jsxs("span",{className:""+vN.iconWrapper,children:[p&&h.jsx(ds,{onClear:function(){return v&&v()},className:""+vN.icon(null==g?void 0:g.search),"data-themeapi":"search.icon"}),h.jsx(C.SearchIcon,{className:""+vN.icon(null==g?void 0:g.search),"data-themeapi":"search.icon"})]})]})})}),vz=function(e){var t,n=null!=(t=null==e?void 0:e.percentage)?t:50;return h.jsx("div",{style:{height:e.height*(n/100)+"px"},children:h.jsx("div",{style:{width:e.width+"px",height:e.height+"px"},css:[50==n&&{"--tw-translate-y":"-25%",transform:"translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))","--tw-translate-x":"-25%","--tw-scale-x":".5","--tw-scale-y":".5"},""],children:e.children})})},vq=a.forwardRef(function(e,t){var n,i,r,o,a,l=e.transform,s=lu();return h.jsx("div",{role:null==e?void 0:e.role,"data-testid":null==e?void 0:e.testId,className:lr(null==e?void 0:e.vizzlyPrefix,""+(r=en({},null==s?void 0:s.panels,{padding:null!=(n=null==e?void 0:e.padding)?n:null==s||null==(i=s.panels)?void 0:i.padding}),o=void 0===l||l,rY(en({transform:o?"translate3d(0, 0, 0)":void 0,position:"relative",height:"100%",width:null!=(a=null==e?void 0:e.width)?a:"100%"},r)))),ref:t,"data-themeapi":"panels","data-chipposition":"top.left",onMouseOver:function(){return(null==e?void 0:e.onHover)&&(null==e?void 0:e.onHover(!0))},onMouseLeave:function(){return(null==e?void 0:e.onHover)&&(null==e?void 0:e.onHover(!1))},children:null==e?void 0:e.children})}),vB=function(e,t,n){try{if(!iE(t,e.attributes.dataSetId))throw new na(t,e.attributes.dataSetId);var i=iA(e.attributes.type,{queryEngineConfig:n.queryEngineConfig}).validate(e.attributes,t);return i.length>0&&eP(i),i[0]}catch(r){if(r instanceof t7||r instanceof na||r instanceof no)return r;throw r}},vV=Object.assign(function(){return null},{label:function(e){return rY({color:null==e?void 0:e.color,fontSize:null==e?void 0:e.fontSize,fontWeight:null==e?void 0:e.fontWeight,margin:0,padding:0})},description:function(e){return rY({color:null==e?void 0:e.color,fontSize:null==e?void 0:e.fontSize,fontWeight:null==e?void 0:e.fontWeight})},input:rY({margin:0,padding:0,alignSelf:"flex-start",marginTop:2}),fieldset:function(e){return void 0===e&&(e=!1),rY({border:"none",margin:0,padding:0,width:"auto",opacity:e?.6:1,cursor:e?"not-allowed":"pointer"})}});function vW(e){var t=e.options,n=e.name,i=e.onChange,r=e.selected,o=e.label,a=e.labelHidden,l=e.locked,s=e.direction,u=e.maxWidth;return h.jsxs("fieldset",{className:""+vV.fieldset(l),children:[!a&&h.jsx(dx,{as:"legend",children:o}),h.jsx(uQ,{direction:s||"column",gap:"0.5rem","data-component":"radio-group",maxWidth:u||"100%",children:t.map(function(e,t){return h.jsx(vH,{option:e,name:n,onChange:function(e){return i&&!l&&i(e.target.value)},selected:r},t)})})]})}function vH(e){return h.jsx(vY,en({},e,{type:"radio"}))}function vY(e){var t,n,i=e.name,r=e.option,o=e.selected,a=e.onChange,l=e.type,s=lu();return h.jsxs(uQ,{as:"label",gap:"0.5rem",alignItems:"self-start","data-component":"input",cursor:"inherit",className:""+vU,children:[h.jsx("input",{type:l,name:i,value:r.value,checked:JSON.stringify(o)===JSON.stringify(r.value),onChange:a,className:lr("checkbox"===l?cc()+" "+vG:""+vV.input)}),h.jsxs(uQ,{direction:"column","data-component":"label",children:[h.jsx("p",{className:""+vV.label(null==s||null==(t=s.radioGroup)?void 0:t.label),"data-themeapi":"radioGroup.label",children:r.label}),(null==r?void 0:r.description)&&h.jsx("span",{className:""+vV.description(null==s||null==(n=s.radioGroup)?void 0:n.description),children:null==r?void 0:r.description})]})]})}var vG=rY({marginRight:0,marginTop:1}),vU=rY({userSelect:"none"}),vK=function(e){var t,n=a_(),i=n.maxCSVDownloadLimit,r=n.textOverride,a=n.featureToggles,l=o.useState(a.canDownloadDataSet&&a.canDownloadViewData?"data-set-download-type":a.canDownloadViewData&&!a.canDownloadDataSet?"view-download-type":a.canDownloadDataSet&&!a.canDownloadViewData?"data-set-download-type":a.canDownloadDataSet||a.canDownloadViewData||!a.canDownloadViewAsPNG?void 0:"view-as-png"),s=l[0],u=l[1],d=[];if(a.canDownloadDataSet){var c=i&&"number"==typeof i?r("full_data_set_desription","Download the underlying data that this view has used. Up to [[maxCSVDownloadLimit]] rows.",{maxCSVDownloadLimit:i.toLocaleString()}):"";d.push({label:r("full_data_set","Full data set"),value:"data-set-download-type",description:c})}return a.canDownloadViewData&&d.push({label:r("view_data_set","View data set"),value:"view-download-type",description:r("view_data_set_description","Download the data that you see in this view.")}),a.canDownloadViewAsPNG&&d.push({label:r("view_as_png","View as PNG"),value:"view-as-png",description:r("view_as_png_description","Download the view as an image.")}),h.jsxs(mj,{width:"sm",isOpen:null==e?void 0:e.show,onClose:function(){return null==e?void 0:e.onClose(!1)},children:[h.jsx(mj.Header,{title:r("data_download","View download"),show:!0}),h.jsxs(mj.Content,{children:[d.length>1?h.jsx(vW,{options:d,name:"download-type",label:r("select_download_type","Select Download Type"),selected:s,labelHidden:!0,onChange:function(e){return u(e)}}):1===d.length&&h.jsx("p",{className:""+or.my(0),children:d[0].description}),0===d.length&&h.jsx(h4,{children:r("data_download.not_enabled","Downloads for this view have not been made available")})]}),h.jsx(mj.Footer,{buttons:"end",children:h.jsxs(cM,{children:[h.jsx(cq,{onClick:function(){return null==e?void 0:e.onClose(!1)},children:r("cancel","Cancel")}),h.jsx(cq,{primary:!0,onClick:function(){s&&e.onDownload(s),null==e||e.onClose(!0)},disabled:0===d.length,testId:"download-button",children:r("download","Download")})]})})]})},vX=aP(function(e){var t=a_().textOverride,n=e.onClose,i={editComponentsOnDashboard:t("edit_components_on_dashboard","Edit"),editComponentsOnLibrary:t("edit_components_on_library","Edit"),downloadComponentData:t("download","Download"),increaseColSpan:t("merge","Merge"),decreaseColSpan:t("unmerge","Unmerge"),removeComponentFromLibrary:t("remove_component_from_library","Remove"),removeComponentFromGlobalLibrary:t("remove_component_from_global_library","Delete"),removeComponentFromDashboard:t("remove_component_from_dashboard","Remove"),removeCellFromDashboard:t("remove_cell_from_dashboard","Remove"),manageReport:t("manage_reports","Reports"),parameters:t("add_parameters","Add Parameters"),localFilter:t("add_local_filters","Add Local Filters"),addComponentToLibrary:t("add_to_library","Add to Library"),clickSettings:t("click_settings","Click Settings"),viewRawResults:t("view_raw_results","JSON Results"),viewRawAttributes:t("view_view_attributes","JSON Attributes"),addTags:t("view_add_tags","Add Tags")};return h.jsx(uq.Options,{children:h.jsx("div",{children:e.cellOptions.map(function(e,t){return h.jsxs(uq.Option,{"data-testid":e.testId,onChange:function(){e.onClick(),n()},children:[e.renderIcon&&e.renderIcon(),h.jsx("span",{children:i[e.purpose]||""})]},"option_"+t+"_"+e.purpose+e.testId)})})})},"renderComponentOptions"),vQ={name:"1v3ivpe",styles:"position:absolute;right:-1.25rem;top:0px"},vJ=function(e){var t=a_().textOverride,n=uV(),i=n.ref,r=n.open,o=n.position,a=n.show,l=n.close,s=lu();return h.jsxs("div",{css:vQ,ref:i,children:[h.jsx("button",{"data-testid":"open-component-options","aria-label":null!=e&&e.chartLabel?t("cell_options","Options")+": "+(null==e?void 0:e.chartLabel):t("cell_options","Options"),onClick:function(){r()},className:f4(null==s?void 0:s.dashboard)+" "+or.button,"data-themeapi":"dashboard.icon",children:h.jsx(aX,{})}),a&&h.jsx(uq,{onClose:function(){return l()},position:o,children:h.jsx(vX,{onClose:function(){return r()},cellOptions:e.cellOptions})})]})},vZ=function(e){var t,n=o.useState(!1),i=n[0],r=n[1],a=cn().dashboard,l=(null==e?void 0:e.component.attributes).type,u=a_(),d=iA(e.component.attributes.type),c=vB(e.component,a.dataSets,u),p=iE(a.dataSets,e.component.attributes.dataSetId),f=[],m="custom"===e.component.attributes.type;return!e.canEditComponentsOnDashboard||c instanceof t7||f.push({purpose:"editComponentsOnDashboard",renderIcon:function(){return h.jsx(v1,{})},onClick:function(){return e.onEdit()},testId:"edit"}),e.canSetupReportSchedule&&"basicTable"==l&&f.push({purpose:"manageReport",renderIcon:function(){return h.jsx(az,{})},onClick:function(){return e.onManageReport()},testId:"manage-report"}),"admin"!==u.mode||"basicTable"!=l&&"dataTable"!=l&&"barChart"!=l&&"horizontalBarChart"!=l||f.push({purpose:"clickSettings",renderIcon:function(){return h.jsx(uQ,{width:20,justifyContent:"center",as:"span",children:h.jsx(C.CogIcon,{})})},onClick:function(){return e.onClickSettings()},testId:"click-settings"}),e.canDownloadComponentData&&!m&&f.push({purpose:"downloadComponentData",renderIcon:function(){return h.jsx(aK,{})},onClick:function(){return r(!0)},testId:"download"}),u.featureToggles.canConfigureLocalFilters&&!m&&f.push({purpose:"localFilter",renderIcon:function(){return h.jsx(uQ,{width:20,justifyContent:"center",as:"span",children:h.jsx(aM,{active:!1})})},onClick:function(){return e.onAddFilter()},testId:"filterBy"}),!u.featureToggles.parameters||null==(t=d.supportedFeatures)||!t.parameters||"read_write"!==u.scope||null!=p&&p.preAggregated||m||f.push({purpose:"parameters",renderIcon:function(){return h.jsx(uQ,{width:20,justifyContent:"center",as:"span",children:h.jsx(aq,{})})},onClick:function(){return e.onSetParameters()},testId:"parameters"}),e.canViewRawJSONResults&&!m&&f.push({purpose:"viewRawResults",renderIcon:function(){return h.jsx(uQ,{width:20,justifyContent:"center",as:"span",children:h.jsx(C.CodeIcon,{})})},onClick:function(){return e.onViewRawJSONResults()},testId:"view-raw-results"}),e.canViewRawViewAttributes&&!m&&f.push({purpose:"viewRawAttributes",renderIcon:function(){return h.jsx(uQ,{width:20,justifyContent:"center",as:"span",children:h.jsx(C.CodeIcon,{})})},onClick:function(){return e.onViewRawAttributes()},testId:"view-view-attributes"}),"read_write"===u.scope&&u.featureToggles.canEditComponentLibrary&&!m&&f.push({purpose:"addComponentToLibrary",renderIcon:function(){return h.jsx(v2,{})},onClick:function(){return e.onAddToLibrary()},testId:"add-to-library"}),e.canRemoveComponentsFromDashboard&&f.push({purpose:"removeComponentFromDashboard",renderIcon:function(){return h.jsx(v0,{})},onClick:function(){return e.onRemove()},testId:"remove"}),s.isEmpty(f)?null:h.jsxs(h.Fragment,{children:[h.jsx(vJ,{cellOptions:f,chartLabel:null==e?void 0:e.chartLabel}),h.jsx(vK,{onDownload:e.onDownload,show:i,onClose:function(){return r(!1)}})]})},v$=function(e){var t=[];return a_().featureToggles.canRemoveComponentsFromDashboard&&(t=[].concat(t,[{purpose:"removeCellFromDashboard",renderIcon:function(){return h.jsx(aH,{purpose:"removeCellFromDashboard"})},onClick:function(){return e.onRemoveCell()},testId:"deleteCell"}])),s.isEmpty(t)?null:h.jsx(vJ,{chartLabel:e.chartLabel,cellOptions:t})},v0=function(){return h.jsx(aH,{purpose:"removeComponentFromDashboard"})},v1=function(){return h.jsx(aG,{})},v2=function(){return h.jsx(aY,{fill:"currentColor"})},v5={group:void 0,measure:void 0},v7=function(e,t){if(!e.group&&!e.measure&&!t)return!0},v4=function(e,t,n){var i,r=null==(i=n[e])?void 0:i[0];if(!r)return t;var o=t.findIndex(function(e){return e.field===r.field});return -1!==o&&(t[o]={field:e,function:"none"}),t},v3=function(e){var t,n,i,r,o,a,l=e.dataSets,s=e.setDataSet,u=a_().textOverride;return h.jsxs(h.Fragment,{children:[l.length>1&&h.jsx(dI,{children:h.jsx(d_,{label:u("dataset","Dataset"),labelHidden:!0,id:"select-data-set",testId:"select-data-set",anchorLeft:!0,placeholder:u("dataset","Dataset"),onChange:s,selected:e.dataSet.id,options:(i=[],r=[],o=!1,a=!1,l.forEach(function(e){var t={value:e.id,label:e.name,subText:e.description};e.preAggregated?(o=!0,r.push(t)):(a=!0,i.push(t))}),o&&a?(i.unshift({label:u("dataSets.data","Data"),title:!0,value:""}),r.unshift({label:u("dataSets.defined_views","Defined views"),title:!0,value:""})):o&&r.unshift({label:u("dataSets.defined_views","Defined views"),title:!0,value:""}),[].concat(i,r)),dynamicWidth:!0})}),e.dataSet.preAggregated&&h.jsx(uM,{paddingX:0,paddingTop:16,children:h.jsx(h4,{icon:h.jsx(h.Fragment,{}),type:"info",children:u("pre-aggregated_data_set_description","Please note; this data set is pre-aggregated, therefore customization options on the data panel are limited.")})})]})},v6=function(e,t,n,i){var r,o=[].concat(n);return o.splice(i,1),(r={})[e]=t(o),r},v8=function(e,t,n){var i=[].concat(e),r=e[t];return i[t]=e[n],i[n]=r,i},v9=function(e){var t=a_(),n=t.textOverride,i=t.organizationName;return h.jsxs(mj,{width:"sm","data-testid":"cannot-delete-modal",isOpen:!0,onClose:function(){return null==e?void 0:e.onClose()},children:[h.jsx(mj.Header,{title:n("field_protected","Field Protected"),show:!0}),h.jsx(mj.Content,{children:h.jsx("p",{children:i?n("cannot_delete_modal_content_with_org_name","This field has been protected by [[organizationName]] and cannot be removed.",{organizationName:i}):n("cannot_delete_modal_content_without_org_name","This field has been protected by the administrator and cannot be removed.")})}),h.jsx(mj.Footer,{buttons:"end",children:h.jsx(cM,{children:h.jsx(cq,{secondary:!0,onClick:function(){return null==e?void 0:e.onClose()},children:n("close","Close")})})})]})},ge=["barChart","dataTable","basicTable"],gt=function(e,t){if(!t||!(e&&"type"in e&&e.type&&ge.includes(e.type))||!("protectedFields"in e)||!e.protectedFields)return!1;var n,i=!1,r=!1;return"measure"in e.protectedFields&&"function"in t&&(i=((null==e||null==(n=e.protectedFields)?void 0:n.measure)||[]).some(function(e){return e.function==t.function&&e.field==t.field})),"dimension"in e.protectedFields&&(r=(e.protectedFields.dimension||[]).some(function(e){return"function"in e&&"function"in t?e.field==t.field&&e.function==t.function:"truncate"in e&&"truncate"in t&&e.field==t.field&&e.truncate==t.truncate})),i||r},gn=function(e){var t,n,i,r=o.useState(!1),a=r[0],l=r[1],u=e.propKey||"dimension",d=e.dataSet,c=e.attributes,p=e.attributes[u]||[],f=[].concat(p).map(function(e){var t=iP(d,e.field);return{title:t.publicName,icon:t.dataType}}),m=[].concat(iD(d.fields,null!=(t=e.filterFieldOptions)?t:{onlyFieldTypes:["boolean","number","string"],removePercentage:!0,removeSimpleMaths:!0,removeAggregateMaths:!0})),v=eY(m,[].concat(p)),g=[].concat(v).map(function(e){return{title:e.publicName,icon:e.dataType,value:e.id}}),b=a_();return h.jsxs(o.Fragment,{children:[h.jsx(mu,{mode:b.mode,testId:null!=(n=null==e?void 0:e.testId)?n:"add-dimension",onDeleteItem:e.dataSet.preAggregated?void 0:function(t){if(gt(c,p[t]))l(!0);else{var n,i=[].concat(p);i.splice(t,1),e.setPartialAttributes(((n={})[u]=i,n))}},onOrderChange:e.allowsMultiple?function(t,n){var i=v8([].concat(p),t,n);e.setPartialAttributes({dimension:i})}:void 0,newItem:{callToAction:null!=(i=null==e?void 0:e.label)?i:(0,b.textOverride)("add_comparison","Add comparison"),onNew:function(t){var n,i=[].concat(p,[{field:t,function:"none"}]);e.setPartialAttributes(((n={})[u]=i,n))},initValues:g,hide:!!e.dataSet.preAggregated||s.isEmpty(v)||!e.allowsMultiple&&!s.isEmpty(e.attributes[u])},items:e.filterOptions?e.filterOptions(f):f}),a&&h.jsx(v9,{onClose:function(){return l(!1)}})]})},gi=function(e){var t,n,i,r=e.dataSet,o=e.setPartialAttributes,a=e.allow,l=s.isArray(n=(null==e?void 0:e.attributes).timeDimensions)?n:n?[n]:[],u=(i=[],[].concat(l).map(function(t){var n,a,s,u,d,c=iP(r,t.field),p=null!=e&&e.onNewMeasureFilterTruncFunctions?e.onNewMeasureFilterTruncFunctions(c):e.supportedTimeDimensions,f="date_time"==c.dataType?(s=c.allowedGranularities,[].concat(Object.keys(u=e.supportedTimeDimensions)).flatMap(function(e){return s.includes(e)?[{value:e,label:u[e].publicName}]:[]})):void 0,m=f?{onChange:function(e,t){var n,i,r;(r=[].concat(l))[t]=en({},r[t],{truncate:e}),o({timeDimensions:r})},options:(n=f,a=p,n.filter(function(e){return a.hasOwnProperty(e.value)})),selected:t.truncate}:void 0;i.push({title:iP(r,t.field).publicName,icon:"date_time",value:t.field,select:m})}),i),d=iD(r.fields,{onlyFieldTypes:["date_time"]}).map(function(e){return{title:e.publicName,icon:e.dataType,value:e}}),c=!!a&&l.length===a,p=a_();return h.jsx(mu,{mode:p.mode,testId:"time-dimension",onOrderChange:a?void 0:function(e,t){var n=v8([].concat(l),e,t);o({timeDimensions:n})},onDeleteItem:function(e){var t=[].concat(l);t.splice(e,1),o({timeDimensions:t})},newItem:{callToAction:null!=(t=null==e?void 0:e.label)?t:(0,p.textOverride)("add_time_dimension","Add time dimension"),onNew:function(e){var t=[].concat(l,[{field:e.id,truncate:Object.keys(eQ)[0]}]);o({timeDimensions:t})},initValues:d,hide:c},items:e.filterOptions?e.filterOptions(u):u})},gr=function(e){var t,n,i,r,a,l,u,d=o.useState(!1),c=d[0],p=d[1],f=e.propKey||"measure",m=(l=!!e.allowsMultiple,function(e){var t;return l?e:null!=(t=e[0])?t:null}),v=e.attributes,g=e.setPartialAttributes,b=e.dataSet,x=e.supportedAggregates,y=s.isArray(u=v[f])?u:u?[u]:[],w=[].concat(y).map(function(e){var t,n,i=iP(b,e.field),r={onChange:function(e,t){var n,i,r,o,a,l,s;(s=[].concat(y))[t]=en({},s[t],((a={}).function=e,a)),g(((l={})[f]=m(s),l))},options:[].concat(eB(i,x)).map(function(e){return{value:e,label:x[e].publicName}}),selected:e.function};return{title:i.publicName,icon:i.dataType,value:e.field,select:e4(i)||"none"===e.function?void 0:r}}),C=[].concat(iD(b.fields,e.fieldFilterOptions)).map(function(e){return{title:e.publicName,icon:e.dataType,subtext:e.description,value:e}}),j=a_(),S=j.mode,F=j.textOverride,k=!1;return e.allowsMultiple||(k=!e.allowsMultiple&&!!v[f]),s.isArray(v[f])&&e.maxAllowed&&e.maxAllowed<=v[f].length&&(k=!0),e.dataSet.preAggregated&&(k=!0),h.jsxs(o.Fragment,{children:[h.jsx(mu,{mode:S,onOrderChange:e.allowsMultiple?function(e,t){var n,i=v8([].concat(y),e,t);g(((n={})[f]=m(i),n))}:void 0,onDeleteItem:e.disableRemove||e.dataSet.preAggregated?void 0:function(e){gt(v,y[e])?p(!0):g(v6(f,m,y,e))},items:e.filterOptions?e.filterOptions(w):w,newItem:{callToAction:null!=(r=null==e?void 0:e.label)?r:F("add_metric","Add metric"),onNew:function(t){var n,i=null!=e&&e.onNewMeasureFilterAggregate?e.onNewMeasureFilterAggregate(t):e.supportedAggregates,r=eq(t,i),o=[].concat(y,[{field:t.id,function:e4(t)?t.denominatorAggregate:r}]);g(((n={})[f]=m(o),n))},initValues:C,hide:k},id:null==e?void 0:e.id,testId:null!=(a=null==e?void 0:e.testId)?a:"metric-input"}),c&&h.jsx(v9,{onClose:function(){return p(!1)}})]})},go=function(e){var t=e.attributes,n=e.setPartialAttributes,i=e.dataSet,r=o.useState(!1),a=r[0],l=r[1],s=a_(),u=t.measure,d=[].concat(u).map(function(e){var t=iP(i,e.field);return{title:t.publicName,icon:t.dataType}}),c=[].concat(iD(i.fields,{removeAggregateMaths:!0,removePercentage:!0})).map(function(e){return{title:e.publicName,icon:e.dataType,subtext:e.description,value:e}});return h.jsxs(o.Fragment,{children:[h.jsx(mu,{mode:s.mode,onOrderChange:function(e,t){var i=v8([].concat(u),e,t);n({measure:i})},onDeleteItem:function(e){gt(t,t.measure[e])?l(!0):n(v6("measure",function(e){return e},u,e))},items:d,newItem:{callToAction:s.textOverride("add_field","Add field"),onNew:function(e){var t=[].concat(u,[{field:e.id,function:"none"}]);n({measure:t})},initValues:c}}),a&&h.jsx(v9,{onClose:function(){return l(!1)}})]})},ga=function(e,t){return t?e+" ("+t+")":e},gl=function(e){var t=e.attributes,n=e.setPartialAttributes,i=e.dataSet,r=a_().textOverride,o=[].concat(t.order).map(function(e){var t={onChange:function(e,t){a(e,t)},options:[{label:r("asc","Asc"),value:"asc"},{label:r("desc","Desc"),value:"desc"}],selected:e.direction},n=iP(i,e.field);return{title:ga(n.publicName,e.function&&"none"!=e.function&&em(e.function,r)),icon:n.dataType,select:t}}),a=function(e,i){var r=[].concat(t.order);r[i].direction=e,n({order:r})},l=a_().mode,s=function(e,t,n,i,r,o){var a=[];if(a=a.concat([].concat(i||[]).flatMap(function(t){var n=iP(e,t.field);return eU(n)?[]:[{title:n.publicName,icon:n.dataType,value:n,onSelected:function(e){r(e.id,t.function)}}]})),t){var l=iP(e,t.field);a.push({title:l.publicName,icon:l.dataType,value:l,onSelected:function(e){r(e.id,t.truncate)}})}return a.concat([].concat(n||[]).flatMap(function(t){var n=iP(e,t.field);return eU(n)?[]:[{title:ga(n.publicName,t4(t)&&em(t.function,o)),icon:n.dataType,value:t,onSelected:function(e){return r(e.field,e.function)}}]}))}(e.dataSet,e.timeDimension||null,e.measure,e.dimension,function(e,i){n({order:[].concat(t.order,[{field:e,direction:"asc",function:i}])})},r);return h.jsx(mu,{mode:l,onOrderChange:function(e,i){var r=v8([].concat(t.order),e,i);n({order:r})},onDeleteItem:function(e){var i=[].concat(t.order);i.splice(e,1),n({order:i})},items:o,newItem:{callToAction:r("add_sort","Add sort"),initValues:s},testId:"sort-input"})},gs=rY({borderWidth:0,padding:0,marginLeft:0,marginRight:0}),gu=function(e){var t,n;return h.jsx(uM,{className:lr(u8("panel-property"),""+gs),marginBottom:null!=(t=e.marginBottom)?t:"0.75rem",as:null!=(n=null==e?void 0:e.as)?n:"div",children:e.children})},gd=function(e){var t,n,i,r=null!=(t=null==e?void 0:e.as)?t:"span",o=lu();return h.jsx(r,{className:lr(""+u$.title(null!=(n=e.themeClassName)?n:null==o||null==(i=o.lists)?void 0:i.title),e.className),"data-themeapi":"list.title",id:e.id,children:null==e?void 0:e.children})},gc=Object.assign(function(){return null},{wrapper:rY({position:"relative","&:hover .help-icon":{opacity:1}}),fadeIn:function(e){return rY(en({opacity:0,maxWidth:18,color:e},rW))}}),gp=function(e){var t,n,i=lu();return h.jsx("span",{children:h.jsx(gd,{as:"legend",themeClassName:null==i||null==(t=i.section)?void 0:t.title,children:h.jsxs(uQ,{gap:"0.25rem",alignItems:"center",as:"span",children:[null==e?void 0:e.title,(null==e?void 0:e.tooltip)&&h.jsx(uM,{width:"18px",children:h.jsx(cf,{tooltipContent:function(){return h.jsx(cf.Content,{children:null==e?void 0:e.tooltip})},children:h.jsx(w.QuestionMarkCircleIcon,{"aria-label":"Help",className:"help-icon "+gc.fadeIn(null==i||null==(n=i.dashboard)||null==(n=n.icon)?void 0:n.color)})})})]})})})},gf=Object.assign(function(e){var t,n=lu();return h.jsxs("fieldset",{className:lr(""+gc.wrapper,""+or.bw(0),""+or.m(0),""+or.p(0),null!=n&&null!=(t=n.section)&&t.panel?u5(n.section.panel):void 0),children:[(null==e?void 0:e.title)&&h.jsx(gp,en({},e)),h.jsx(uM,{marginTop:"0.25rem",children:e.children})]})},{Grid:function(e){return h.jsx(la,{gap:"0.75rem",columns:2===(null==e?void 0:e.columns)?["repeat(2, minmax(0px, 1fr))"]:void 0,"data-component":null==e?void 0:e["data-component"],children:null==e?void 0:e.children})},Panel:function(e){var t,n,i=lu();return h.jsx(uM,{as:null!=(t=null==e?void 0:e.as)?t:"fieldset","data-component":"list-panel",children:h.jsxs(f0,{padding:!0,children:[(null==e?void 0:e.title)&&h.jsx(uM,{"data-component":"section-panel",children:h.jsx(dx,{as:"legend",classNameOverride:""+dg(null==i||null==(n=i.lists)?void 0:n.subTitle),children:null==e?void 0:e.title})}),h.jsx(la,{gap:"0.5rem",children:null==e?void 0:e.children})]})})},Container:function(e){return h.jsx(uQ,{direction:"column",gap:"0.75rem","data-component":null==e?void 0:e["data-component"],children:null==e?void 0:e.children})},Title:gp}),gm={publicName:"",numerator:null,numeratorFilter:!1,denominatorFilter:!1,denominator:null,denominatorScope:"all"};function gh(e,t){return({math:{title:t("custom_metric_title.math","Math"),subtext:t("custom_metric_description.math","Calculate from multiple values")},date_difference:{title:t("custom_metric_title.date_difference","Date Difference"),subtext:t("custom_metric_description.date_difference","Find the difference between dates")},"rules-based_groups":{title:t("custom_metric_title.rules_based_groups","Rules-based Groups"),subtext:t("custom_metric_description.rules_based_group","Create groups based on conditions")},percentage:{title:t("custom_metric_title.percentage","Percentage"),subtext:t("custom_metric_description.percentage","Calculate a percentage in a field")},number_formatting:{title:t("custom_metric_title.number_formatting","Rounded Number"),subtext:t("custom_metric_description.number_formatting","Round a number field")},conditional:{title:t("custom_metric_title.conditional","Conditional"),subtext:t("custom_metric_description.conditional","Create a conditional field")}})[e]}function gv(e,t){return t("custom_metric_modal_title","[[custom_metric_title]] Custom Metric",{custom_metric_title:gh(e,t).title})}var gg={publicName:"",mathType:"simple",left:void 0,right:void 0,rightFieldId:void 0,leftFieldId:void 0,operator:void 0},gb=function(e){switch(e.mathType){case"simple":return void 0===e.publicName||void 0===e.operator||void 0===e.leftFieldId||void 0===e.rightFieldId;case"aggregate":return void 0===e.left||void 0===e.right||void 0===e.operator;default:return!0}},gx=function(e){var t,n,i,r,o=void 0,a=void 0,l=void 0;return e&&(gw(e)&&e.operator&&e.right&&(o=null==(t=e.left)?void 0:t.field,a=null==(n=e.left)?void 0:n.function,l={operator:e.operator,fieldId:null==(i=e.right)?void 0:i.field,function:null==(r=e.right)?void 0:r.function}),gC(e)&&(o=e.field,a=e.function)),{fieldId:o,function:a,nested:l}};function gy(e){return{field:e.fieldId,function:e.function}}var gw=function(e){return"left"in e||"operator"in e||"right"in e},gC=function(e){return"field"in e&&"function"in e};function gj(e,t){var n={};return n[t]=e&&gw(e)?e.left:{operator:"+",left:null!=e?e:void 0},n}var gS=function(e){var t=e.state,n=e.onClick,i=a_().textOverride,r=i("agg_maths_add_remove_button","[[add|remove]] nested calculation",{add:"add"===t?i("add","Add"):"",remove:"remove"===t?i("remove","Remove"):""});return h.jsx(cf,{tooltipContent:function(){return r},classNameTrigger:""+g_,children:h.jsxs(py,{secondary:!0,onClick:n,children:[h.jsx("span",{className:""+oi,children:r}),h.jsx("remove"===t?w.MinusSmIcon:w.PlusSmIcon,{width:16})]})})},gF=function(e){var t=e.left,n=e.right,i=e.operator,r=e.dataSet,a=a_().textOverride,l=gb({mathType:"aggregate",left:t,right:n,operator:i,publicName:""});return h.jsx("code",{className:""+gI,children:l?h.jsx(o.Fragment,{children:a("metrics_operators_need_defined","Metrics and operator need to be defined")}):h.jsxs(o.Fragment,{children:[t&&h.jsx(uM,{flex:1,as:"span","data-component":"calculation-left",textAlign:"right",children:h.jsx(gT,{side:t,dataSet:r})}),h.jsx(uM,{as:"strong",width:8,"data-component":"calculation-operator",className:""+or.bold,children:i}),n&&h.jsx(uM,{flex:1,as:"span","data-component":"calculation-right",children:h.jsx(gT,{side:n,dataSet:r})})]})})},gk=function(e){return h.jsx("code",{className:""+gI,children:e.children})},gT=function(e){var t,n,i,r,a,l,s=e.side,u=e.dataSet;return h.jsx(o.Fragment,{children:s&&gw(s)?h.jsxs("span",{children:[h.jsx("span",{className:""+or.bold,children:"("}),(null==(t=s.left)?void 0:t.field)&&iP(u,null==(n=s.left)?void 0:n.field).publicName," (",null==s||null==(i=s.left)?void 0:i.function,")"," ",s.operator," ",(null==(r=s.right)?void 0:r.field)&&iP(u,null==(a=s.right)?void 0:a.field).publicName," (",null==(l=s.right)?void 0:l.function,")",h.jsx("span",{className:""+or.bold,children:")"})]}):h.jsxs("span",{children:[s&&iP(u,s.field).publicName," ",(null==s?void 0:s.function)&&h.jsxs(o.Fragment,{children:["(",null==s?void 0:s.function,")"]})]})})},g_=rY({display:"block"}),gI=rY({backgroundColor:rG(80),color:rG(0),borderRadius:8,padding:"16px 8px",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",gap:"0.5rem",fontSize:11});function gA(e,t,n){var i=t.map(function(t){return t.map(function(t){var i=iP(e,t.field),r=t.value;return r=rO(r,n,{fieldId:t.field}),i.publicName+" "+t.op+" “"+r+"“"}).join(", ")}),r=t.length>1,o=i.join(" | ");return r?"("+o+")":o}var gD=function(e){var t,n,i,r,a,l,s,u,d,c,p,f,m,v,g,b,x,y,w,C,j,S,F=e.dataSet,k=a_(),T=k.textOverride,_=k.queryEngineConfig,I=(t=e.queryEngineConfig,n=e.initialValue,r=e.onNewCustomField,a=!!n,s=(l=o.useState(gm))[0],u=l[1],c=(d=pA(n&&"numeratorFilter"in n&&n.numeratorFilter?n.numeratorFilter:[],F,t.supportedAggregates)).completedFilters,p=d.wipFilters,f=d.deleteWipFilter,m=d.updateWipFilter,v=d.addOrFilter,b=(g=pA(n&&"denominatorFilter"in n&&n.denominatorFilter?n.denominatorFilter:[],F,t.supportedAggregates)).completedFilters,x=g.wipFilters,y=g.deleteWipFilter,w=g.updateWipFilter,C=g.addOrFilter,o.useEffect(function(){u(n?{publicName:n.publicName,numeratorFilter:!(!n||!("numeratorFilter"in n)),denominatorFilter:!(!n||!("denominatorFilter"in n)),numerator:n.numeratorFieldId&&n.numeratorAggregate?{function:n.numeratorAggregate,field:n.numeratorFieldId}:null,denominator:{function:n.denominatorAggregate,field:n.denominatorFieldId},denominatorScope:n.denominatorScope}:gm)},[JSON.stringify(n)]),{onChange:function(e){u(en({},s,e))},denominatorScope:s.denominatorScope,fieldPublicName:s.publicName,denominatorMeasure:s.denominator,numeratorMeasure:s.numerator,completedNumeratorFilter:c,wipNumeratorFilters:p,deleteWipNumeratorFilter:f,updateWipNumeratorFilter:m,addOrNumeratorFilter:v,completedDenominatorFilter:b,wipDenominatorFilters:x,deleteWipDenominatorFilter:y,updateWipDenominatorFilter:w,addOrDenominatorFilter:C,isEditing:a,handleUpsertPercentageField:function(){if(s.denominator&&s.publicName){var e,i,o,l,u,d,p,f,m,h=(e=s.publicName,i=s.denominator.field,o=s.denominator.function,l=s.numerator?s.numerator.field:null,u=s.numerator?s.numerator.function:null,m=s.denominatorScope,{version:2,id:e0(),publicName:e,numeratorFilter:null!=c?c:[],denominatorFieldId:i,numeratorFieldId:null!=l?l:null,numeratorAggregate:null!=u?u:null,denominatorAggregate:o,denominatorFilter:null!=b?b:[],canBeDimension:!1,canBeMeasure:!0,dataType:"number",denominatorScope:m||"all",allowedOperators:ef({dataType:"number"},t)});r(en({},h,{id:a?n.id:h.id}))}},numeratorFilter:s.numeratorFilter,denominatorFilter:s.denominatorFilter,saveDisabled:!(s.denominator&&s.publicName&&(c[0]&&c[0].length>0||s.numerator))}),A=I.onChange,D=I.numeratorFilter,O=I.denominatorFilter,E=I.denominatorScope,L={onlyFieldTypes:["number","string","boolean"],onlyMeasures:!0,forComponent:e.componentType,removePercentage:!0,removeSimpleMaths:!0,removeRuleGrouping:!0,removeAggregateMaths:!0,removeDateCalculations:!0,removeConditional:!0};return h.jsxs(mj,{width:"4xl",isOpen:e.isOpen,onClose:e.onClose,children:[h.jsx(mj.Header,{title:gv("percentage",T)}),h.jsxs(mj.Content,{children:[h.jsx(gu,{children:h.jsx(dS,{id:"percentage-name",placeholder:T("metric_name","Metric name"),label:T("metric_name","Metric name"),value:I.fieldPublicName,onChange:function(e){return A({publicName:e.target.value})}})}),h.jsxs(la,{gap:"1rem",children:[h.jsxs(gf.Panel,{children:[h.jsxs(gu,{as:"fieldset",marginBottom:D?void 0:0,children:[h.jsx(dx,{as:"legend",children:T("numerator","Numerator")}),h.jsx(gr,{componentType:e.componentType,maxAllowed:1,allowsMultiple:!0,setPartialAttributes:function(e){A({numerator:e.measure[0]})},supportedAggregates:e.queryEngineConfig.supportedAggregates,attributes:{measure:I.numeratorMeasure?[I.numeratorMeasure]:[]},dataSet:e.dataSet,fieldFilterOptions:L})]}),D&&h.jsxs(gu,{as:"fieldset",marginBottom:0,children:[h.jsx(dx,{as:"legend",children:T("Filters","Filters")}),h.jsx(pk,{fieldHeadingOverride:T("metric","Metric"),queryEngineConfig:e.queryEngineConfig,dataSet:F,completedFilters:I.completedNumeratorFilter,wipFilters:I.wipNumeratorFilters,updateWipFilter:function(e,t,n){I.updateWipNumeratorFilter(e,t,n)},deleteWipFilter:function(e,t){0===I.deleteWipNumeratorFilter(e,t).length&&A({numeratorFilter:!1})},removeLastEnabled:!0,removeHeadings:!0,textOverride:T,onAddOrFilter:function(){return I.addOrNumeratorFilter()}})]}),!1===D&&h.jsx(gE,{onChange:function(){A({numeratorFilter:!0})}})]}),h.jsxs(gf.Panel,{children:[h.jsxs(gu,{as:"fieldset",marginBottom:O?void 0:0,children:[h.jsx(dx,{as:"legend",children:T("denominator","Denominator")}),h.jsx(gr,{componentType:e.componentType,maxAllowed:1,allowsMultiple:!0,setPartialAttributes:function(e){A({denominator:e.measure[0]})},supportedAggregates:e.queryEngineConfig.supportedAggregates,attributes:{measure:I.denominatorMeasure?[I.denominatorMeasure]:[]},dataSet:e.dataSet,fieldFilterOptions:L})]}),O&&h.jsxs(gu,{as:"fieldset",marginBottom:0,children:[h.jsx(dx,{as:"legend",children:T("Filters","Filters")}),h.jsx(pk,{fieldHeadingOverride:T("metric","Metric"),queryEngineConfig:e.queryEngineConfig,dataSet:F,completedFilters:I.completedDenominatorFilter,wipFilters:I.wipDenominatorFilters,updateWipFilter:function(e,t,n){I.updateWipDenominatorFilter(e,t,n)},deleteWipFilter:function(e,t){0===I.deleteWipDenominatorFilter(e,t).length&&A({denominatorFilter:!1})},removeLastEnabled:!0,removeHeadings:!0,textOverride:T,onAddOrFilter:function(){return I.addOrDenominatorFilter()}})]}),!1===O&&h.jsx(gE,{onChange:function(){A({denominatorFilter:!0})}}),h.jsx(fZ,{testId:"percentage-advanced-options",showAccordionIcon:!0,title:T("advanced_options","Advanced Options"),children:h.jsx(gu,{as:"fieldset",children:h.jsx(uM,{marginY:5,children:h.jsx(vW,{options:[{value:"all",label:T("denominator_scope_all_title","Across all groups"),description:T("denominator_scope_all_description","Denominator is calculated using all your data")},{value:"withinGrouping",label:T("denominator_scope_all_title","Within each group"),description:T("denominator_scope_within_group_description","Denominator is calculated using the data within each grouping")}],name:"start-check",label:T("denominator_scope_title","Scope"),selected:E||"all",direction:"row",onChange:function(e){return A({denominatorScope:e})}})})})})]})]}),h.jsx(uM,{marginTop:20,children:h.jsx(gk,{children:h.jsxs(la,{justifyContent:"center",children:[h.jsx(gO,en({},I,{position:"numerator",dataSet:F,supportedAggregates:_.supportedAggregates})),h.jsx(uM,{children:h.jsx(uM,{as:"hr",border:"1px solid "+rG(15),height:1})}),h.jsx(gO,en({},I,{position:"denominator",dataSet:F,supportedAggregates:_.supportedAggregates}))]})})})]}),h.jsx(mj.Footer,{buttons:"end",children:h.jsxs(cM,{children:[h.jsx(py,{onClick:function(){return e.onClose()},secondary:!0,children:T("cancel","Cancel")}),h.jsx(py,{onClick:function(){return I.handleUpsertPercentageField()},disabled:I.saveDisabled,children:I.isEditing?T("update","Update"):T("create","Create")})]})})]})},gO=function(e){var t,n,i,r=e.numeratorMeasure,o=e.denominatorMeasure,a=e.position,l=e.dataSet,s=e.supportedAggregates,u=e.completedDenominatorFilter,d=e.completedNumeratorFilter,c=a_(),p=c.textOverride,f=c.valueAlias,m="",v="",g="",b="numerator"===a&&tc(d)&&d[0].length>0;return o||"denominator"!==a?"numerator"!==a||b||r?("numerator"===a&&!r&&o&&(m=null==(t=s[o.function])?void 0:t.publicName,v=iP(l,o.field).publicName),"numerator"===a&&r&&(m=null==(n=s[r.function])?void 0:n.publicName,v=iP(l,r.field).publicName),"denominator"===a&&o&&(m=null==(i=s[o.function])?void 0:i.publicName,v=iP(l,o.field).publicName),b?g=gA(l,d,f):"denominator"===a&&tc(u)&&u.length>0&&(g=gA(l,u,f)),h.jsxs(uM,{textAlign:"center",children:[m,"(",v,g.length?" | "+g:"",")"]})):h.jsx(uM,{textAlign:"center",children:p("percentage_modal.numerator_required","Numerator required")}):h.jsx(uM,{textAlign:"center",children:p("percentage_modal.denominator_required","Denominator required")})},gE=function(e){var t=a_();return h.jsx(uQ,{justifyContent:"space-between",children:h.jsx(py,{secondary:!0,onClick:function(){return e.onChange()},children:(0,t.textOverride)("add_filter_by","+ Filter by")})})},gL=function(e){var t,n=a_().textOverride;return h.jsxs(mj,{width:"sm",isOpen:null==e?void 0:e.show,onClose:function(){return null==e?void 0:e.onClose(!1)},children:[h.jsx(mj.Header,{title:n("are_you_sure","Are you sure?"),show:!0}),h.jsx(mj.Content,{children:h.jsx(uM,{paddingY:8,children:e.message})}),h.jsx(mj.Footer,{buttons:"end",children:h.jsxs(cM,{children:[h.jsx(cq,{testId:"modal-cancel-delete-btn",onClick:function(){return null==e?void 0:e.onClose(!1)},children:n("cancel","Cancel")}),h.jsx(cq,{testId:"modal-confirm-delete-btn",primary:!0,onClick:function(){return null==e?void 0:e.onClose(!0)},disabled:null==e?void 0:e.disabledDelete,children:null!=(t=e.deleteButtonLabel)?t:n("delete","Delete")})]})})]})};function gP(e){var t=e.label,n=o.useState(e.value),i=n[0],r=n[1],a=[];return[].concat(e.dataSetFields).forEach(function(t,n){a.push({label:t.publicName,value:t,testId:e.testId+"-pick-field-"+n})}),h.jsx(d_,{label:void 0===t?"Metric":t,labelHidden:null==e?void 0:e.labelHidden,id:null==e?void 0:e.id,testId:e?e.testId+"-pick-field":void 0,onChange:function(t){r(t),null==e||e.onChange(t)},options:a,selected:i})}var gR=function(e){var t,n=a_().textOverride,i=[{label:n("add","Add"),value:"+",testId:"simple-math-operator-add"},{label:n("subtract","Subtract"),value:"-"},{label:n("multiply","Multiply"),value:"*"},{label:n("divide","Divide"),value:"/"}];return h.jsx(d_,{placeholder:n("select_operator","Operator..."),id:null!=(t=null==e?void 0:e.id)?t:"simple-math-operator",label:n("operator","Operator"),labelHidden:!0,onChange:function(t){null==e||e.onChange(t)},options:i,selected:e.mathOperator})},gN=function(e){var t,n,i,r,a,l,s,u,d,c,p,f=a_().textOverride,m=(t=e.queryEngineConfig,n=e.initialValue||void 0,i=e.onNewCustomField,r=!!n,l=(a=o.useState(gg))[0],s=a[1],u=function(){s(gg)},o.useEffect(function(){if(n){if(e7(n)){var e,t,i,r,o,a,l,d=(t=n.rightFieldId,i=n.rightFunction,r=n.leftNested,o=n.rightNested,a=gy({fieldId:n.leftFieldId,function:n.leftFunction}),l=gy({fieldId:t,function:i}),r&&(a={left:a,operator:r.operator,right:gy({fieldId:r.fieldId,function:r.function})}),o&&(l={left:l,operator:o.operator,right:gy({fieldId:o.fieldId,function:o.function})}),{left:a,right:l});s({publicName:n.publicName,left:d.left,right:d.right,leftFieldId:void 0,rightFieldId:void 0,operator:n.operator,mathType:"aggregate"})}else e2(n)&&s({publicName:n.publicName,rightFieldId:n.rightFieldId,leftFieldId:n.leftFieldId,operator:n.operator,right:void 0,left:void 0,mathType:"simple"})}else u()},[JSON.stringify(n)]),en({reset:u},l,{handleUpsertMathField:function(){if("simple"===l.mathType&&null!=l&&l.leftFieldId&&null!=l&&l.operator&&null!=l&&l.rightFieldId){var e,o,a,s,u,d=(e=l.publicName,o=null==l?void 0:l.leftFieldId,a=null==l?void 0:l.operator,s=null==l?void 0:l.rightFieldId,{id:e0(),publicName:e,rightFieldId:s,operator:a,leftFieldId:o,dataType:"number",canBeDimension:!1,canBeMeasure:!0,allowedOperators:ef({dataType:"number"},t)});i(en({},d,{id:r?n.id:d.id}))}if("aggregate"===l.mathType&&l.left&&l.right&&l.operator){var c,p,f,m,h,v,g,b,x,y,w,C,j,S,F,k,T=(p=l.right,m=(f=gx(l.left)).fieldId,h=f.function,v=f.nested,g=gx(p),{nestedLeft:v,nestedRight:g.nested,leftField:m,rightField:g.fieldId,leftFunction:h,rightFunction:g.function}),_=(b=l.publicName,x=T.leftField,y=T.leftFunction,w=l.operator,C=T.rightField,j=T.rightFunction,F=T.nestedLeft,k=T.nestedRight,{id:e0(),publicName:b,rightFieldId:C,rightFunction:j,operator:w,leftFieldId:x,leftFunction:y,dataType:"number",canBeDimension:!1,canBeMeasure:!0,allowedOperators:ef({dataType:"number"},t),leftNested:F,rightNested:k});i(en({},_,{id:r?n.id:_.id}))}},onChange:function(e){s(void 0!==e.mathType&&e.mathType!==l.mathType?en({},l,e,{left:void 0,leftFieldId:void 0,right:void 0,rightFieldId:void 0}):en({},l,e))},isEditing:!!n,disabled:gb(l)})),v=m.leftFieldId,g=m.rightFieldId,b=m.operator,x=m.publicName,y=m.handleUpsertMathField,w=m.onChange,C=m.isEditing,j=m.mathType,S=m.right,F=m.left,k=m.disabled,T=m.reset,_={onlyFieldTypes:["number"],removePercentage:!0,removeSimpleMaths:!0,removeAggregateMaths:!0,removeDateCalculations:!0,removeConditional:!0},I=iD(e.dataSet.fields,_),A=(d=e.componentType,c=[],(p=iA(d)).supportedCustomFields.simpleMaths&&(c=[].concat(c,[{value:"simple",label:"Simple",description:"Math calculation with simple metrics"}])),p.supportedCustomFields.aggregateMaths&&(c=[].concat(c,[{value:"aggregate",label:"Aggregate",description:"Math calculation with a aggregate metric"}])),c),D=function(t){return t?iP(e.dataSet,t):void 0};return o.useEffect(function(){null!=e&&e.open&&!e.initialValue&&T()},[null==e?void 0:e.open]),h.jsxs(mj,{width:"4xl",isOpen:e.open,onClose:e.onClose,children:[h.jsx(mj.Header,{title:gv("math",f)}),h.jsxs(mj.Content,{children:[h.jsx(gu,{children:h.jsx(dS,{label:f("metric_name","Metric name"),id:"metric-name",placeholder:f("metric_name","Metric name"),value:x,onChange:function(e){return w({publicName:e.target.value})}})}),h.jsxs(gu,{as:"fieldset",children:[h.jsx(dx,{as:"legend",children:"Calculation"}),e.allowAggregateMathsCustomField&&h.jsx(uM,{marginBottom:"1rem",children:h.jsx(vW,{options:A,name:"math-check",label:f("select_math_type","Select Math Type"),selected:j,locked:C,labelHidden:!0,onChange:function(e){return w({mathType:e})}})}),"simple"===j&&h.jsx(gf.Panel,{children:h.jsxs(uQ,{direction:"row",gap:"0.5rem",children:[h.jsx(uM,{flex:1,children:h.jsx(gP,{id:"metric-1",testId:"metric-1",label:f("metric_number","Metric [[metricNumber]]",{metricNumber:"1"}),onChange:function(e){return w({leftFieldId:null==e?void 0:e.id})},dataSetFields:I,value:D(v),labelHidden:!0})}),h.jsx(uM,{width:170,children:h.jsx(gR,{mathOperator:b,onChange:function(e){return w({operator:e})}})}),h.jsx(uM,{flex:1,children:h.jsx(gP,{id:"metric-2",testId:"metric-2",label:f("metric_number","Metric [[metricNumber]]",{metricNumber:"2"}),onChange:function(e){return w({rightFieldId:null==e?void 0:e.id})},dataSetFields:I.filter(function(e){return e.id!==v}),value:D(g),labelHidden:!0})})]})}),"aggregate"===j&&h.jsxs(o.Fragment,{children:[h.jsx(gf.Panel,{children:h.jsxs(uQ,{direction:"column",gap:"1rem",paddingY:"0.5rem",children:[h.jsxs(uQ,{direction:"row",gap:"0.5rem",children:[h.jsx(uM,{flex:1,children:h.jsx(gr,{id:"left-1",testId:"left-1",componentType:e.componentType,maxAllowed:1,allowsMultiple:!0,setPartialAttributes:function(e){var t=e.measure;return w(F&&gw(F)?{left:en({},F,{left:t[0]})}:{left:t[0]})},supportedAggregates:e.queryEngineConfig.supportedAggregates,attributes:{measure:F&&gC(F)?[F]:null!=F&&F.left?[null==F?void 0:F.left]:[]},dataSet:e.dataSet,fieldFilterOptions:_},""+F)}),F&&!!gw(F)&&h.jsxs(o.Fragment,{children:[h.jsx(uM,{width:120,children:h.jsx(gR,{mathOperator:F.operator,onChange:function(e){return w({left:en({},F,{operator:e})})}})}),h.jsx(uM,{flex:1,children:h.jsx(gr,{id:"right-1",testId:"right-1",componentType:e.componentType,maxAllowed:1,allowsMultiple:!0,setPartialAttributes:function(e){return w({left:en({},F,{right:e.measure[0]})})},supportedAggregates:e.queryEngineConfig.supportedAggregates,attributes:{measure:null!=F&&F.right?[null==F?void 0:F.right]:[]},dataSet:e.dataSet,fieldFilterOptions:_})})]}),h.jsx(uM,{children:h.jsx(gS,{onClick:function(){return w(gj(F,"left"))},state:F&&gw(F)?"remove":"add"})})]}),h.jsx(uQ,{justifyContent:"center",children:h.jsx(uM,{flex:1,marginRight:60,children:h.jsx(gR,{mathOperator:b,onChange:function(e){return w({operator:e})},id:"operator-2"})})}),h.jsxs(uQ,{direction:"row",gap:"0.5rem",children:[h.jsx(uM,{flex:1,children:h.jsx(gr,{id:"left-2",testId:"left-2",componentType:e.componentType,maxAllowed:1,allowsMultiple:!0,setPartialAttributes:function(e){var t=e.measure;return w(S&&gw(S)?{right:en({},S,{left:t[0]})}:{right:t[0]})},supportedAggregates:e.queryEngineConfig.supportedAggregates,attributes:{measure:S&&gC(S)?[S]:null!=S&&S.left?[null==S?void 0:S.left]:[]},dataSet:e.dataSet,fieldFilterOptions:_},""+S)}),S&&gw(S)&&h.jsxs(o.Fragment,{children:[h.jsx(uM,{width:120,children:h.jsx(gR,{mathOperator:S.operator,onChange:function(e){return w({right:en({},S,{operator:e})})},id:"operator-2"})}),h.jsx(uM,{flex:1,children:h.jsx(gr,{id:"right-2",testId:"right-2",componentType:e.componentType,maxAllowed:1,allowsMultiple:!0,setPartialAttributes:function(e){return w({right:en({},S,{right:e.measure[0]})})},supportedAggregates:e.queryEngineConfig.supportedAggregates,attributes:{measure:S.right?[S.right]:[]},dataSet:e.dataSet,fieldFilterOptions:_})})]}),h.jsx(uM,{children:h.jsx(gS,{onClick:function(){w(gj(S,"right"))},state:S&&gw(S)?"remove":"add"})})]})]})}),h.jsx(uM,{marginTop:20,children:h.jsx(gF,{left:F,right:S,operator:b,dataSet:null==e?void 0:e.dataSet})})]})]})]}),h.jsx(mj.Footer,{buttons:"end",children:h.jsxs(cM,{children:[h.jsx(py,{onClick:function(){return e.onClose()},secondary:!0,children:f("cancel","Cancel")}),h.jsx(py,{onClick:function(){return y()},disabled:k,children:C?f("update","Update"):f("create","Create")})]})})]})},gM=["round_to_0_dp","round_to_2_dp"],gz=function(e){var t,n,i,r,a,l,u,d,c,p,f,m,v,g,b=a_(),x=b.mode,y=b.textOverride,w=(t=e.initialValue,n=e.queryEngineConfig,i=e.dataSet,r=e.onNewCustomField,a=!!t,l=s.intersection(gM,Object.keys(n.supportedTransformationFunctions)),d=(u=o.useState(""))[0],c=u[1],f=(p=o.useState({dataSetField:void 0,transformationFunctionKey:void 0}))[0],m=p[1],v=iD(i.fields,{onlyFieldTypes:["number"],removeDateCalculations:!0}).map(function(e){return{title:e.publicName,value:e}}),g=f.dataSetField?[{title:f.dataSetField.publicName,select:{selected:f.transformationFunctionKey,onChange:function(e){m(en({},f,{transformationFunctionKey:e}))},options:[].concat(l).map(function(e){return{label:n.supportedTransformationFunctions[e].publicName,value:e}})}}]:[],o.useEffect(function(){if(t&&e5(t)){c(t.publicName);var e=iP(i,t.fieldId);m({dataSetField:e,transformationFunctionKey:2==t.roundToDecimalPlaces?"round_to_2_dp":"round_to_0_dp"})}else c(""),m({dataSetField:void 0,transformationFunctionKey:void 0})},[JSON.stringify(t)]),{onCreateNewRoundedNumber:function(){if(f&&f.dataSetField){var e,i,o,l,s,u=(i=null==(s=f.dataSetField)?void 0:s.id,o="round_to_0_dp"==f.transformationFunctionKey?0:2,{id:e0(),publicName:d,fieldId:i,roundToDecimalPlaces:o,dataType:"number",canBeDimension:!0,canBeMeasure:!0,allowedOperators:ef({dataType:"number"},n)});r(en({},u,{id:a?t.id:u.id}))}},isEditing:a,metricName:d,setMetricName:c,items:g,initValues:v,selected:f,setSelected:m,transformationFunctions:l}),C=w.isEditing,j=w.metricName,S=w.setMetricName,F=w.items,k=w.initValues,T=w.selected,_=w.setSelected,I=w.transformationFunctions,A=w.onCreateNewRoundedNumber;return h.jsxs(mj,{width:"xl",isOpen:e.open,onClose:e.onClose,children:[h.jsx(mj.Header,{title:gv("number_formatting",y)}),h.jsxs(mj.Content,{children:[h.jsx(gu,{children:h.jsx(dS,{id:"rounded-number-name",placeholder:y("metric_name","Metric name"),label:y("metric_name","Metric name"),value:j,onChange:function(e){return S(e.target.value)}})}),h.jsx(gu,{children:h.jsx(mu,{testId:"select-rounded-number-field",mode:x,items:F,onDeleteItem:function(){return _({dataSetField:void 0,transformationFunctionKey:I[0]})},newItem:{callToAction:y("select_field_to_transform","Select field to transform"),onNew:function(e){return _({dataSetField:e,transformationFunctionKey:I[0]})},initValues:k,hide:!!T.dataSetField}})})]}),h.jsx(mj.Footer,{buttons:"end",children:h.jsxs(cM,{children:[h.jsx(py,{onClick:function(){return e.onClose()},secondary:!0,children:y("cancel","Cancel")}),h.jsx(py,{onClick:function(){T.dataSetField&&A()},children:C?y("update","Update"):y("create","Create")})]})})]})},gq={publicName:""},gB=function(e){var t,n,i,r,a,l,s,u=a_().textOverride,d=(t=e.initialValue,n=e.dataSet,r=(i=o.useState(gq))[0],a=i[1],o.useEffect(function(){a(t||gq)},[JSON.stringify(t)]),s=(l=iD(n.fields,{onlyFieldTypes:["date_time"]})).map(function(e){return{label:e.publicName,value:e.id}}),{isEditing:!!t,dateTimeFields:l,dateFieldOptions:s,dateCalculationFunctions:f.DATE_MATHS_OPERATORS.map(function(e){return{label:eN(e),value:e}}),wipDateCalculationField:r,updateWipDateCalculation:function(e){a(en({},r,e))}}),c=d.dateCalculationFunctions,p=d.isEditing,m=d.dateFieldOptions,v=d.wipDateCalculationField,g=d.updateWipDateCalculation;return h.jsxs(mj,{width:"2xl",isOpen:e.open,onClose:e.onClose,children:[h.jsx(mj.Header,{title:gv("date_difference",u)}),h.jsxs(mj.Content,{children:[h.jsx(gu,{children:h.jsx(dS,{id:"date-calculation-name",placeholder:u("metric_name","Metric name"),label:u("metric_name","Metric name"),value:v.publicName,onChange:function(e){return g({publicName:e.target.value})}})}),h.jsx(gf.Panel,{children:h.jsx(gu,{as:"fieldset",children:h.jsxs(uQ,{direction:"row",gap:"0.5rem",children:[h.jsx(uM,{width:170,children:h.jsx(d_,{testId:"date-calc-calculation",label:"Calculation",onChange:function(e){g({dateCalculationFunction:e})},options:c,selected:v.dateCalculationFunction})}),h.jsx(uM,{flex:1,children:h.jsx(d_,{testId:"date-calc-date-one",label:"Date one",onChange:function(e){g({leftFieldId:e})},options:m,selected:v.leftFieldId})}),h.jsx(uM,{flex:1,children:h.jsx(d_,{testId:"date-calc-date-two",label:"Date two",onChange:function(e){g({rightFieldId:e})},options:m,selected:v.rightFieldId})})]})})})]}),h.jsx(mj.Footer,{buttons:"end",children:h.jsxs(cM,{children:[h.jsx(py,{onClick:function(){return e.onClose()},secondary:!0,children:u("cancel","Cancel")}),h.jsx(py,{onClick:function(){if(v.leftFieldId&&v.rightFieldId&&v.publicName&&v.dateCalculationFunction){var t,n,i,r,o,a=(t=v.publicName,n=v.leftFieldId,i=v.dateCalculationFunction,r=v.rightFieldId,o=e.queryEngineConfig,{id:e0(),publicName:t,leftFieldId:n,rightFieldId:r,dateCalculationFunction:i,dataType:"number",canBeDimension:!0,canBeMeasure:!0,allowedOperators:ef({dataType:"number"},o)});e.onNewCustomField(en({},a,{id:p&&e.initialValue?e.initialValue.id:a.id}))}},children:p?u("update","Update"):u("create","Create")})]})})]})},gV=function(e,t,n,i){var r=[],o=iA(t);return e.allowSimpleMathsCustomField&&o.supportedCustomFields.simpleMaths||e.allowAggregateMathsCustomField&&o.supportedCustomFields.aggregateMaths?r.push(en({},gh("math",i),{value:"math"})):(e.allowSimpleMathsCustomField||e.allowAggregateMathsCustomField||eO("Simple math custom field not made available, because of a feature toggle."),o.supportedCustomFields.simpleMaths&&!o.supportedCustomFields.aggregateMaths||eO("Simple math custom field not made available, because it is not supported for the view "+o.title+".")),e.allowRoundedNumberCustomField&&o.supportedCustomFields.roundedNumbers?r.push(en({},gh("number_formatting",i),{value:"roundedNumber"})):(e.allowRoundedNumberCustomField||eO("Rounded number custom field not made available, because of a feature toggle."),o.supportedCustomFields.roundedNumbers||eO("Rounded number custom field not made available, because it is not supported for the view "+o.title+".")),e.allowPercentagesCustomField&&o.supportedCustomFields.percentages?r.push(en({},gh("percentage",i),{value:"percentage"})):(e.allowPercentagesCustomField||eO("Percentage custom field not made available, because of a feature toggle."),o.supportedCustomFields.percentages||eO("Percentage custom field not made available, because it is not supported for the view "+o.title+".")),e.allowRulesCustomField&&o.supportedCustomFields.rules&&t0(n,"switchField")?r.push(en({},gh("rules-based_groups",i),{value:"rules"})):(e.allowRulesCustomField||eO("Custom rules field not made available, because of a feature toggle."),o.supportedCustomFields.rules||eO("Custom rules field not made available, because it is not supported for the view "+o.title+"."),t0(n,"switchField")||eO("Custom rules field not made available, because it is not supported by the current query engine.")),e.allowDateCalculationsCustomField&&o.supportedCustomFields.dateCalculations?r.push(en({},gh("date_difference",i),{value:"dateCalculation"})):(e.allowDateCalculationsCustomField||eO("Date maths custom field not made available, because of a feature toggle."),o.supportedCustomFields.dateCalculations||eO("Date maths custom field not made available, because it is not supported for the view "+o.title+".")),e.allowConditionalCustomField&&o.supportedCustomFields.conditional?r.push(en({},gh("conditional",i),{value:"conditional"})):(e.allowConditionalCustomField||eO("Conditional custom field not made available, because of a feature toggle."),o.supportedCustomFields.conditional||eO("Conditional custom field not made available, because it is not supported for the view "+o.title+".")),r},gW=function(e){var t=e.index,n=e.rules,i=e.data,r=e.queryEngineConfig,a=e.updateDraft,l=e.removeDraft,s=o.useState(n.name),d=s[0],c=s[1],p=a_().textOverride,f=pA(n.rule,i,r.supportedAggregates),m=f.completedFilters,v=f.wipFilters,g=f.addOrFilter,b=f.deleteWipFilter,x=f.updateWipFilter;o.useEffect(function(){var e={name:d,rule:m};u.isEqual(n,e)||a(e)},[m,d]);var y=p("rule_title","Rule [[ruleNumber]]",{ruleNumber:t+1})+(n.name?": "+n.name:"");return h.jsx(uM,{as:"fieldset",children:h.jsxs(uQ,{gap:"0.5rem",paddingBottom:"0.1rem",paddingRight:"0.1rem",paddingLeft:"0.1rem",direction:"column",children:[h.jsx(gf.Title,{title:y}),h.jsx(uM,{children:h.jsx(dS,{id:"rules-name-"+t,label:p("field_value","Field Value"),value:d,onChange:function(e){return c(e.target.value)}})}),h.jsx(uM,{children:h.jsxs(uQ,{direction:"column",gap:"0.5rem",children:[h.jsx(uM,{children:h.jsx(pk,{wipFilters:v,completedFilters:m,dataSet:i,updateWipFilter:x,queryEngineConfig:r,deleteWipFilter:b,textOverride:p})}),h.jsx(uM,{children:h.jsxs(uQ,{justifyContent:"space-between",children:[h.jsx(py,{secondary:!0,onClick:function(){return g()},children:p("add_or_filter","Add `OR`")}),0!==t&&h.jsx(py,{secondary:!0,onClick:function(){return l()},children:p("delete_rule","Delete Rule")})]})})]})})]})})},gH=function(e){var t,n=gU(e.initialValue),i=n.draft,r=n.updateDraftTitle,o=n.addNewRule,a=n.updateDraftRules,l=n.removeDraftRule,s=a_().textOverride;return h.jsxs(mj,{width:"4xl",isOpen:e.open,onClose:e.onClose,children:[h.jsx(mj.Header,{title:gv("rules-based_groups",s)}),h.jsxs(mj.Content,{scrollable:!0,children:[h.jsx(gu,{children:h.jsx(dS,{id:"rules-name",label:s("metric_name","Metric name"),value:null==i?void 0:i.publicName,onChange:function(e){return r(e.target.value)}})}),h.jsx(gu,{children:h.jsx(la,{gap:"0.75rem",role:"list",children:null==i||null==(t=i.rules)?void 0:t.map(function(t,n){return h.jsx(vq,{transform:!1,children:h.jsx(gW,{rules:t,index:n,data:null==e?void 0:e.data,queryEngineConfig:e.queryEngineConfig,updateDraft:function(e){return a(e,n)},removeDraft:function(){return l(n)}})},"rules_modal_key_"+n)})})})]}),h.jsxs(mj.Footer,{buttons:"space-between",children:[h.jsx(cM,{children:h.jsx(py,{onClick:function(){return o()},secondary:!0,children:s("add_rule","Add Rule")})}),h.jsxs(cM,{buttons:"end",children:[h.jsx(py,{secondary:!0,onClick:function(){return null==e?void 0:e.onClose()},children:s("cancel","Cancel")}),h.jsx(py,{onClick:function(){return function(){if(i.publicName&&i.rules){var t,n,r,o=(t=i.publicName,n=i.rules,r=e.queryEngineConfig,{id:e0(),publicName:t,rules:n,dataType:"string",canBeDimension:!0,canBeMeasure:!0,allowedOperators:ef({dataType:"string"},r)});e.onCreateNewRules(e.initialValue?en({},o,{id:e.initialValue.id}):o)}}()},children:e.initialValue?s("update","Update"):s("create","Create")})]})]})]})},gY={name:"",rule:[]},gG={publicName:"",rules:[gY]},gU=function(e){var t=o.useState(gG),n=t[0],i=t[1];return o.useEffect(function(){i(e||gG)},[JSON.stringify(e)]),{draft:n,updateDraftTitle:function(e){i(en({},n,{publicName:e}))},addNewRule:function(){var e,t=[].concat(null!=(e=null==n?void 0:n.rules)?e:[]);t.push(gY),i(en({},n,{rules:t}))},updateDraftRules:function(e,t){var r,o=[].concat(null!=(r=null==n?void 0:n.rules)?r:[]);t>=0&&t<o.length&&(o[t]=e),i(en({},n,{rules:o}))},removeDraftRule:function(e){var t,r=[].concat(null!=(t=null==n?void 0:n.rules)?t:[]);e>=0&&e<r.length+1&&r.splice(e,1),i(en({},n,{rules:r}))}}},gK=function(e,t){setTimeout(function(){try{var n=t?document.getElementById(t):window;n&&n.scrollBy&&n.scrollBy({top:"bottom"===e?99999999:e,behavior:"smooth"})}catch(i){eO("Failed to auto-scroll.")}},50)},gX=function(e){var t,n=null==(t=e.customFields)?void 0:t.filter(function(t){var n;return null==(n=e.fieldsUsedModal)?void 0:n.includes(t.id)}),i=a_().textOverride;return h.jsxs(mj,{width:"sm",isOpen:null==e?void 0:e.show,onClose:function(){return null==e?void 0:e.onClose(!1)},children:[h.jsx(mj.Header,{title:i("fields_being_used","Fields Being Used"),show:!0}),h.jsx(mj.Content,{children:h.jsxs(uM,{paddingY:8,children:[i("fields_being_used_description","The following fields are being used in this custom metric. You need to delete the Custom metric before you can delete this fields."),h.jsx("ul",{children:null==n?void 0:n.map(function(e){return h.jsx("li",{children:e.publicName},e.id)})})]})}),h.jsx(mj.Footer,{buttons:"end",children:h.jsx(cM,{children:h.jsx(py,{secondary:!0,onClick:function(){return null==e?void 0:e.onClose(!0)},children:i("close","Close")})})})]})},gQ={publicName:"",measure:null},gJ=function(e){var t,n,i,r,a,l,s,u,d,c,p,f,m,v,g,b=e.dataSet,x=a_().textOverride,y=(t=e.queryEngineConfig,n=e.initialValue,r=e.onNewCustomField,l=(a=o.useState(gQ))[0],s=a[1],d=(u=pA(null!=n&&n.rule?n.rule:[],b,t.supportedAggregates)).completedFilters,c=u.wipFilters,p=u.deleteWipFilter,f=u.updateWipFilter,m=u.addOrFilter,o.useEffect(function(){s(n?{publicName:n.publicName,measure:{field:n.fieldId,function:n.function}}:gQ)},[JSON.stringify(n)]),{onChange:function(e){s(en({},l,e))},fieldPublicName:l.publicName,measure:l.measure,completedFilters:d,wipFilters:c,deleteWipFilter:p,updateWipFilter:f,addOrFilter:m,isEditing:!!n,handleUpsertConditionalField:function(){if(l.measure&&l.publicName){var e,i,o,a,s,u,c=(e=l.publicName,i=l.measure.field,o=l.measure.function,{id:e0(),publicName:e,fieldId:i,function:o,rule:d,dataType:"number",canBeDimension:!1,canBeMeasure:!0,allowedOperators:ef({dataType:"number"},t)});r(en({},c,{id:null!=(u=null==n?void 0:n.id)?u:c.id}))}},saveDisabled:!(l.measure&&l.publicName&&d[0]&&d[0].length>0)}),w={onlyFieldTypes:["number","string","boolean"],onlyMeasures:!0,forComponent:e.componentType,removePercentage:!0,removeSimpleMaths:!0,removeRuleGrouping:!0,removeAggregateMaths:!0,removeDateCalculations:!0,removeConditional:!0};return h.jsxs(mj,{width:"4xl",isOpen:e.isOpen,onClose:e.onClose,children:[h.jsx(mj.Header,{title:gv("conditional",x)}),h.jsxs(mj.Content,{children:[h.jsx(gu,{children:h.jsx(dS,{id:"conditional-name",placeholder:x("metric_name","Metric name"),label:x("metric_name","Metric name"),value:y.fieldPublicName,onChange:function(e){return y.onChange({publicName:e.target.value})}})}),h.jsxs(gf.Panel,{children:[h.jsxs(gu,{as:"fieldset",children:[h.jsx(dx,{as:"legend",children:x("base_metric","Base Metric")}),h.jsx(gr,{componentType:e.componentType,maxAllowed:1,allowsMultiple:!0,setPartialAttributes:function(e){y.onChange({measure:e.measure[0]})},supportedAggregates:e.queryEngineConfig.supportedAggregates,attributes:{measure:y.measure?[y.measure]:[]},dataSet:e.dataSet,fieldFilterOptions:w})]}),h.jsxs(gu,{as:"fieldset",marginBottom:0,children:[h.jsx(dx,{as:"legend",children:x("Filters","Filters")}),h.jsx(pk,{fieldHeadingOverride:x("metric","Metric"),queryEngineConfig:e.queryEngineConfig,dataSet:b,completedFilters:y.completedFilters,wipFilters:y.wipFilters,updateWipFilter:function(e,t,n){y.updateWipFilter(e,t,n)},deleteWipFilter:function(e,t){y.deleteWipFilter(e,t)},removeLastEnabled:!0,removeHeadings:!0,textOverride:x,onAddOrFilter:function(){return y.addOrFilter()}})]})]})]}),h.jsx(mj.Footer,{buttons:"end",children:h.jsxs(cM,{children:[h.jsx(py,{onClick:function(){return e.onClose()},secondary:!0,children:x("cancel","Cancel")}),h.jsx(py,{onClick:function(){return y.handleUpsertConditionalField()},disabled:y.saveDisabled,children:y.isEditing?x("update","Update"):x("create","Create")})]})})]})},gZ=function(e){var t,n=a_(),i=n.mode,r=n.featureToggles,a=n.textOverride,l=iE(e.dataSets,e.dataSetId);if(!l)return console.warn("Data set must be found for custom field input to render."),null;var s=o.useState(null),u=s[0],d=s[1],c=o.useState(void 0),p=c[0],f=c[1],m=o.useState(null),v=m[0],g=m[1],b=gV(r,e.componentType,null==e?void 0:e.queryEngineConfig,a),x=iz(l,e.componentType),y=iz(l),w=[].concat(x).map(function(e){var t,n;return{title:e.publicName,subtext:(t=e,n=a,e2(t)||e7(t)?gh("math",n).title:e4(t)?gh("percentage",n).title:e3(t)?gh("rules-based_groups",n).title:e6(t)?gh("conditional",n).title:e8(t)?gh("date_difference",n).title:""),onClick:function(){return d({customFieldCategory:e9(e),customField:e})}}}),C=function(t){var n=iE(e.dataSets,e.dataSetId);if(!n)throw a("cannot_find_data_set","Cannot find data set.");var i,r,o,l,s=(o=!1,l=[].concat(n.fields).map(function(e){return e.id==t.id?(o=!0,t):e}),en({},n,{fields:o?l:[].concat(l,[t])})),u=iB(e.dataSets,s);e.setDataSets(u),d(null)};return h.jsxs(h.Fragment,{children:[h.jsx(mu,{mode:i,newItem:{callToAction:a("add_custom_metric","Add custom metric"),onNew:function(e){d({customFieldCategory:e,customField:void 0})},initValues:b,onOpenDropdown:function(){gK("bottom","editor-panel")}},items:w,onDeleteItem:function(e){var t,n,i=x[e],r=y.reduce(function(e,t){var n,r;return"rules"in t&&t.rules.some(function(e){return e.rule.some(function(e){return e.some(function(e){return e.field===i.id})})})&&e.push(t.id),"numeratorFilter"in t&&(null==(n=t.numeratorFilter)?void 0:n.some(function(e){return e.some(function(e){return e.field===i.id})}))&&e.push(t.id),"denominatorFilter"in t&&(null==(r=t.denominatorFilter)?void 0:r.some(function(e){return e.some(function(e){return e.field===i.id})}))&&e.push(t.id),e},[]);r.length>0?f(r):g(i)},testId:"custom-metric-input"}),h.jsx(gD,{dataSet:l,onNewCustomField:C,isOpen:"percentage"===(null==u?void 0:u.customFieldCategory),onClose:function(){return d(null)},queryEngineConfig:e.queryEngineConfig,componentType:e.componentType,initialValue:null==u?void 0:u.customField}),h.jsx(gJ,{dataSet:l,onNewCustomField:C,isOpen:"conditional"===(null==u?void 0:u.customFieldCategory),onClose:function(){return d(null)},queryEngineConfig:e.queryEngineConfig,componentType:e.componentType,initialValue:null==u?void 0:u.customField}),h.jsx(gN,{open:"math"===(null==u?void 0:u.customFieldCategory),onClose:function(){return d(null)},dataSet:l,onNewCustomField:C,queryEngineConfig:e.queryEngineConfig,componentType:e.componentType,initialValue:null==u?void 0:u.customField,allowAggregateMathsCustomField:r.allowAggregateMathsCustomField}),h.jsx(gH,{open:"rules"===(null==u?void 0:u.customFieldCategory),onClose:function(){return d(null)},data:l,queryEngineConfig:e.queryEngineConfig,onCreateNewRules:C,initialValue:null==u?void 0:u.customField}),h.jsx(gz,{open:"roundedNumber"===(null==u?void 0:u.customFieldCategory),onClose:function(){return d(null)},dataSet:l,queryEngineConfig:e.queryEngineConfig,onNewCustomField:C,initialValue:null==u?void 0:u.customField}),h.jsx(gB,{open:"dateCalculation"===(null==u?void 0:u.customFieldCategory),onClose:function(){return d(null)},dataSet:l,queryEngineConfig:e.queryEngineConfig,onNewCustomField:C,initialValue:null==u?void 0:u.customField}),h.jsx(gL,{message:a("delete_custom_metric","This will permanently remove the custom field [[nameOfCustomMetric]] from all views on the dashboard, not just this view. Are you sure you want to continue?",{nameOfCustomMetric:null!=(t=null==v?void 0:v.publicName)?t:""}),onClose:function(t){if(t&&v){var n,i,r,o,a=(i=v.id,r=l.fields.findIndex(function(e){return e.id==i}),o=[].concat(l.fields),r>=0&&o.splice(r,1),en({},l,{fields:o})),s=iB(e.dataSets,a);e.setDataSets(s)}g(null)},show:null!=v}),h.jsx(gX,{onClose:function(){return f(void 0)},show:null!=p&&p.length>0,fieldsUsedModal:p,customFields:y})]})},g$=function(e){var t,n=e.dataSet,i=e.queryEngineConfig,r=e.fieldFilterOptions,a=e.attributes,l=e.preSetPartialAttributes,s=e.setPartialAttributes,u=e.callToAction,d=e.maxAllowed,c=e.preventDuplicates,p=null!=r&&r.onlyDimensions?"grouping":"metric",f=(0,e.getValues)(a),m=function(e){var t=l(e,n,a);"order"in a&&e.forEach(function(e){"date_time"==iP(n,e.field).dataType&&"grouping"==p&&(t.order=[{function:e.function,field:e.field,direction:"asc"}])}),s(t)},v=o.useState(!1),g=v[0],b=v[1],x=a_(),y=g0(f,p,i,m),w=g5(f,n,p,i,m),C=g2(n,r,c,f);return h.jsxs(o.Fragment,{children:[h.jsx(mu,{testId:null!=(t=null==e?void 0:e.testId)?t:"field-collector-input",mode:x.mode,onOrderChange:function(e,t){var n=v8([].concat(f),e,t);m(n)},onDeleteItem:n.preAggregated?void 0:function(e){var t=f[e],i=iP(n,f[e].field);gt(a,"date_time"===i.dataType&&"function"in t?{field:t.field,truncate:t.function}:t)?b(!0):m(rs(f,e))},items:w,newItem:{callToAction:u||x.textOverride("add_field","Add field"),onNew:y,initValues:C,hide:!!e.dataSet.preAggregated||!!d&&f.length>=d}}),g&&h.jsx(v9,{onClose:function(){return b(!1)}})]})};function g0(e,t,n,i){return function(r){var o=[].concat(e),a=g1(t,r,n);i([].concat(o,[a]))}}function g1(e,t,n){return"grouping"==e&&"date_time"==t.dataType?{field:t.id,function:t.allowedGranularities[0]}:"grouping"==e||e4(t)||e7(t)?{field:t.id,function:"none"}:{field:t.id,function:eB(t,n.supportedAggregates)[0]}}function g2(e,t,n,i){var r=iD(e.fields,t);return n&&(r=eY(r,[].concat(i))),r.map(function(e){return{title:e.publicName,icon:e.dataType,subtext:e.description,value:e}})}function g5(e,t,n,i,r){return[].concat(e).map(function(o,a){var l,u=iP(t,o.field),d=[];"metric"==n?d=eB(u,i.supportedAggregates).map(function(e){return{label:i.supportedAggregates[e].publicName,value:e}}):"grouping"===n&&"date_time"===u.dataType&&(l=i.supportedTimeTruncFunctions,d=u.allowedGranularities.filter(function(e){return void 0!==l[e]}).map(function(e){return{label:l[e].publicName,value:e}}));var c=!e4(u),p=!e7(u);return{title:u.publicName,icon:u.dataType,select:!t.preAggregated&&"none"!=o.function&&c&&p?{options:d,selected:o.function,onChange:function(t){var n=s.cloneDeep(e);"function"in o&&(n[a]={field:o.field,function:t}),r(n)}}:void 0}})}var g7={name:"iaoxbn",styles:"display:grid;width:100%;grid-template-columns:repeat(2, minmax(0, 1fr))"},g4={name:"1flj9lk",styles:"text-align:left"},g3={name:"gdaplf",styles:"width:100%;text-align:right"},g6={name:"1gqeage",styles:"margin-right:0.75rem"},g8=function(e){var t,n,i,r=a_(),a=r.mode,l=r.queryEngineConfig,u=e.textOverride,d=e.dataSet,c=o.useState(e.defaultOpen||!1),p=c[0],f=c[1],m=(i=(t=e.attributes.filter).flatMap(function(e){return e.map(function(e){return iP(d,e.field).publicName})}),s.uniq(i)),v=s.isEmpty(e.attributes.filter)?[]:[{title:u("filter_list_title","[[filterCount]] {{condition}}",{condition:{plural:"conditions",singular:"condition",count:e.attributes.filter.length},filterCount:e.attributes.filter.length}),subtext:u("filter_list_subtext","{{acrossFields}} [[fields]].",{acrossFields:{count:m.length,singular:"On the field",plural:"Across fields"},fields:eC(m)}),onClick:function(){return f(!0)}}],g={callToAction:u("add_filter","Add filter"),onClick:function(){f(!0)}},b=pA(e.attributes.filter,d,l.supportedAggregates),x=b.completedFilters,y=b.addOrFilter,w=b.wipFilters,C=b.updateWipFilter,j=b.deleteWipFilter;return h.jsxs(h.Fragment,{children:[h.jsx(mu,{mode:a,newItemBtn:s.isEmpty(v)?g:void 0,onDeleteItem:function(){e.setPartialAttributes({filter:[]})},items:v}),h.jsxs(mj,{width:"4xl",isOpen:p,onClose:function(){return f(!1)},children:[h.jsx(mj.Header,{title:u("advanced_filters","Advanced Filters")}),h.jsx(mj.Content,{children:h.jsx(pk,{queryEngineConfig:l,updateWipFilter:C,deleteWipFilter:j,wipFilters:w,completedFilters:x,dataSet:d,textOverride:u})}),h.jsx(mj.Footer,{children:h.jsxs("div",{css:g7,children:[h.jsx("div",{css:g4,children:h.jsx(py,{testId:"add-rule-btn",secondary:!0,onClick:function(){y()},children:0==x.length?u("add_filter","Add filter"):u("add_or_filter","Add `OR`")})}),h.jsx("div",{children:h.jsxs("div",{css:g3,children:[h.jsx("span",{css:g6,children:h.jsx(py,{secondary:!0,onClick:function(){f(!1)},children:u("advanced_filters.cancel","Cancel")})}),h.jsx(py,{testId:"save-filter-btn",onClick:function(){e.setPartialAttributes({filter:x}),f(!1)},children:u("advanced_filters.save","Save")})]})})]})})]})]})},g9={name:"12vm4ss",styles:"margin-left:0.75rem;opacity:0.4;:hover{opacity:0.8;}"},be=function(e){return h.jsxs("div",{children:[h.jsxs("div",{children:[h.jsx(dx,{htmlFor:null==e?void 0:e.id,labelHidden:null==e?void 0:e.labelHidden,children:null==e?void 0:e.label}),e.secondaryAction&&h.jsx("span",{css:g9,children:h.jsx("button",{onClick:function(){var t;return null==(t=e.secondaryAction)?void 0:t.onClick()},children:e.secondaryAction.label})})]}),h.jsx(dS,{id:null==e?void 0:e.id,type:"number",min:e.min,max:e.max,onChange:function(t){e.setNumber(parseFloat(t.target.value))},defaultValue:e.currentValue||void 0,"data-testid":e.testId})]})},bt=function(e){var t,n,i,r,o=e.component,a=e.definedMetric,l=e.measure,s=eV(a),u=iP(null==e?void 0:e.dataSet,a.field),d=a_(),c=d.queryEngineConfig,p=d.textOverride,f=d.labelFormat,m=rA(u.publicName,null==(t=c.supportedAggregates[a.function])?void 0:t.publicName),v=f({fieldId:a.field,func:a.function,type:o.attributes.type,defaultLabel:m,viewId:null!=(n=o.attributes.viewId)?n:""});return h.jsxs(uQ,{direction:"column",gap:"0.5rem",children:[h.jsx(dx,{as:"p",margin:0,children:h.jsxs(uQ,{as:"span",direction:"row",gap:"0.5rem",alignItems:"end",children:[h.jsx(u7,{icon:u.dataType})," ",h.jsx("span",{children:null!=v?v:m})]})}),h.jsx(gr,en({},e,{attributes:{measure:l?l[s]:[]},dataSet:null==e?void 0:e.dataSet,componentType:o.attributes.type,allowsMultiple:!0,onNewMeasureFilterAggregate:(i=e.definedMetrics,r=c,function(e){var t=i.filter(function(t){return t.field===e.id}),n=en({},r.supportedAggregates);return t.forEach(function(e){delete n[e.function]}),n}),setPartialAttributes:function(t){var n;e.setAttributes(((n={})[s]=t.measure,n))},supportedAggregates:c.supportedAggregates,id:"metric-input",propKey:"measure",filterOptions:function(t){return bn(t,null==e?void 0:e.definedMetrics)},label:p("add_alternative_metric","Add alternative metric")}))]})},bn=function(e,t){return e.map(function(e){var n=t.filter(function(t){return t.field===e.value}),i=e.select.options.filter(function(e){return!n.map(function(e){return e.function}).includes(e.value)}),r=e.select.selected;return i.some(function(e){return e.value===r})||(r=i.length>0?i[0].value:null),en({},e,{select:en({},e.select,{options:i,selected:r})})})},bi=function(e){return null!=e&&e.function&&"none"!=(null==e?void 0:e.function)?e.field+"_"+e.function:null==e?void 0:e.field},br=function(e,t,n){var i=eW(t,n);return e.filter(function(e){return e.field===(null==i?void 0:i.field)&&e.function===i.function})[0]},bo=function(e){var t=e.group,n=e.definedDimension,i=bi(n),r=iP(null==e?void 0:e.dataSet,n.field),o=t?t[i]:null,a=a_(),l=a.queryEngineConfig,s=a.textOverride;return h.jsxs(uQ,{direction:"column",gap:"0.5rem",children:[h.jsx(dx,{as:"p",margin:0,children:h.jsxs(uQ,{as:"span",direction:"row",gap:"0.5rem",alignItems:"end",children:[h.jsx(u7,{icon:r.dataType})," ",h.jsx("span",{children:r.publicName})]})}),h.jsx(gn,en({},e,{allowsMultiple:!0,attributes:{dimension:o||void 0},setPartialAttributes:function(t){var n,r;e.setAttributes(((r={})[i]=null!=(n=t.dimension)?n:[],r))},supportedTransformationFunctions:l.supportedTransformationFunctions,filterOptions:function(e){return e},label:s("add_alternative_group","Add alternative group")}))]})},ba=function(e){var t=e.group,n=e.definedDimension,i=eJ(n),r=iP(null==e?void 0:e.dataSet,null==e?void 0:e.definedDimension.field),o=a_(),a=o.queryEngineConfig,l=o.textOverride,s=t?t[i]:null;return h.jsxs(uQ,{direction:"column",gap:"0.5rem",children:[h.jsx(dx,{as:"p",margin:0,children:h.jsxs(uQ,{as:"span",direction:"row",gap:"0.5rem",alignItems:"end",children:[h.jsx(u7,{icon:r.dataType})," ",h.jsxs("span",{children:[r.publicName," (",n.truncate,")"]})]})}),h.jsx(gi,en({},e,{attributes:{timeDimensions:s||null},supportedTimeDimensions:a.supportedTimeTruncFunctions,setPartialAttributes:function(t){var n;t.timeDimensions&&e.setAttributes(((n={})[i]=t.timeDimensions,n))},onNewMeasureFilterTruncFunctions:function(t){var i=en({},a.supportedTimeTruncFunctions);return t.id===(null==e?void 0:e.definedDimension.field)&&delete i[n.truncate],i},label:l("add_alternative_time_group","Add alternative time group")}))]})},bl=function(e){var t,n,i,r,o=(null==e?void 0:e.component).attributes,a=a_().featureToggles,l=cn().dispatch;return null!=e&&e.show?0==(n=o.type,i=[],r=iA(n),a.parameters&&r.supportedFeatures.parameters?i.push({title:"Parameter",subtext:"Set customisable Parameters on Views"}):(a.parameters||eO("Parameters not made available, because of a feature toggle."),r.supportedFeatures.parameters||eO("Parameters not made available, because it is not supported for the view "+r.title+".")),i).length?null:h.jsx(bs,en({},e,{onAddingParameters:function(t){var n=en({},o,{parameters:t});"parameters"in o&&void 0!==e.cellIndex&&void 0!==e.rowIndex&&l({type:"setAttributes",attributes:n,cellIndex:e.cellIndex,rowIndex:e.rowIndex}),"parameters"in o&&void 0!==e.libraryIndex&&l({type:"updateComponentLibraryAttributes",attributes:n,libraryIndex:null==e?void 0:e.libraryIndex}),null==e||e.onClose()}})):null},bs=function(e){var t=(null==e?void 0:e.component).attributes,n=a_().textOverride,i=cn(),r=dM(i.dashboard,e.component.attributes.dataSetId);if(!r)return null;var a,l,s,d,c,p,f,m,v,g,b,x,y,w,C,j,S,F,k,T,_,I,A,D,O,E=(l=null==e?void 0:e.onAddingParameters,s=e.setParameterUpdate,d=a_().queryEngineConfig,p=(c=o.useState(v5))[0],f=c[1],m=function(){f(v5)},v="parameters"in t?t.parameters:void 0,o.useEffect(function(){v?f(v):m()},[JSON.stringify(v)]),A="measure"in t&&"parameters"in t&&u.isEmpty(null==(x=t.parameters)?void 0:x.measure)?t.measure:"parameters"in t&&!u.isEmpty(null==(y=t.parameters)?void 0:y.measure)&&null!=(w=t.parameters)&&w.measure?(C=d.supportedAggregates,j=t.parameters,t.measure.map(function(e){var t,n=Object.keys(null!=(t=null==j?void 0:j.measure)?t:{}).find(function(t){var n,i;return(null!=(n=null==j||null==(i=j.measure)?void 0:i[t])?n:[]).some(function(t){return t.field===e.field&&t.function===e.function})});return n?eW(n,{supportedAggregates:C,supportedTimeTruncFunctions:void 0,supportedTransformationFunctions:void 0}):e})):[],D="dimension"in t&&"parameters"in t&&u.isEmpty(null==(S=t.parameters)?void 0:S.group)?t.dimension:"dimension"in t&&"parameters"in t&&!u.isEmpty(null==(F=t.parameters)?void 0:F.group)&&null!=(k=t.parameters)&&k.group?(g=t.dimension,b=t.parameters,g?null==g?void 0:g.map(function(e){var t,n=Object.keys(null!=(t=null==b?void 0:b.group)?t:{}).find(function(t){var n,i;return(null!=(n=null==b||null==(i=b.group)?void 0:i[t])?n:[]).some(function(t){return(null==t?void 0:t.field)===e.field&&"function"in t&&t.function===("function"in e&&e.function)})});return n?{field:n,function:"none"}:e}):[]):[],O="timeDimension"in t&&t.timeDimension&&"parameters"in t&&u.isEmpty(null==(T=t.parameters)?void 0:T.group)?t.timeDimension:"timeDimension"in t&&"parameters"in t&&!u.isEmpty(null==(_=t.parameters)?void 0:_.group)&&null!=(I=t.parameters)&&I.group?function(e,t,n){var i,r=Object.keys(null!=(i=null==n?void 0:n.group)?i:{}).find(function(e){var i,r;return(null!=(i=null==n||null==(r=n.group)?void 0:r[e])?i:[]).some(function(e){if(e)return e.field===(null==t?void 0:t.field)&&("truncate"in e&&e.truncate)===t.truncate})});if(r){var o=eZ(r,e);return null!=o?o:t}return t}(d.supportedTimeTruncFunctions,t.timeDimension,t.parameters):void 0,en({},p,{definedMetrics:A,definedDimensions:D,definedTimeDimension:O,onChange:function(e){if("measure"in e&&e.measure){var n,i,r,o,a,l=(n=en({},p),r=Object.keys(i=e.measure)[0],n.measure||(n.measure={}),o=en({},n.measure),a=void 0,Array.isArray(i[r])&&0===i[r].length?(delete o[r],a=r):o[r]=i[r],{updatedMetrics:en({},n,{measure:o}),metricKeyToDelete:a}),u=l.updatedMetrics,c=l.metricKeyToDelete;c&&function(e){if("measure"in t&&e&&p.measure){var n=eW(e,d),i=function(e,t,n,i){var r,o=null==(r=i[e])?void 0:r[0];if(!o)return t;var a=t.findIndex(function(e){return e.field===o.field&&e.function===o.function});return -1!==a&&n&&(t[a]=n),t}(e,t.measure,n,p.measure);s({updatedMeasures:i})}}(c),f(u)}if("group"in e&&e.group){var m,h,v,g,b,x=(m=en({},p),v=Object.keys(h=e.group)[0],m.group||(m.group={}),g=en({},m.group),b=void 0,Array.isArray(h[v])&&0===h[v].length?(delete g[v],b=v):g[v]=h[v],{updatedMetrics:en({},m,{group:g}),metricKeyToDelete:b}),y=x.updatedMetrics,w=x.metricKeyToDelete;w&&function(e){if("parameters"in t&&e&&p.group){var n=eZ(e,d.supportedTimeTruncFunctions);n&&s({updatedTimeDimension:n}),"dimension"in t&&!n&&s({updatedDimension:v4(e,t.dimension,p.group)})}}(w),f(y)}},handleUpsert:function(){l(p)},reset:m,disabled:v7(p,v)})),L=E.definedMetrics,P=E.onChange,R=E.measure,N=E.handleUpsert,M=E.definedDimensions,z=E.definedTimeDimension,q=E.group;return h.jsxs(mj,{width:"xl","data-testid":"parameters-modal",isOpen:null==e?void 0:e.show,onClose:function(){return null==e?void 0:e.onClose()},children:[h.jsx(mj.Header,{title:n("add_parameters","Add Parameters"),show:!0,tooltip:n("add_parameters_tooltip","Set alternate metrics and groups for the view.")}),h.jsx(mj.Content,{children:h.jsx(uQ,{width:"100%",children:h.jsx(uM,{flex:1,children:h.jsxs(cU.Group,{defaultIndex:0,children:[(z||0!==M.length)&&h.jsxs(cU.List,{columns:"1fr 1fr",padding:0,children:[h.jsx(cU.Button,{children:n("add_parameter_metrics","Metrics")}),h.jsx(cU.Button,{children:n("add_parameter_groups","Groups")})]}),h.jsxs(cU.Panels,{children:[h.jsxs(cU.Panel,{paddingLeft:0,paddingRight:0,children:[h.jsx(p0,{marginBottom:2,children:n("current_active_metrics","Current active metrics")}),h.jsx(uQ,{direction:"column",gap:"1.5rem",children:null==L?void 0:L.map(function(t){return h.jsx(bt,{component:null==e?void 0:e.component,definedMetric:t,definedMetrics:L,dataSet:r,setAttributes:function(e){return P({measure:e})},measure:R},t.field+"-"+t.function)})})]}),h.jsxs(cU.Panel,{paddingLeft:0,paddingRight:0,children:[h.jsx(p0,{marginBottom:2,children:n("current_active_groups","Current active groups")}),h.jsxs(uQ,{direction:"column",gap:"1.5rem",children:[M.map(function(t){return h.jsx(bo,{setAttributes:function(e){return P({group:e})},component:null==e?void 0:e.component,definedDimension:t,dataSet:r,group:q},""+t.field)}),z&&h.jsx(ba,{definedDimension:z,setAttributes:function(e){return P({group:e})},dataSet:r,group:q})]})]})]})]})})})}),h.jsx(mj.Footer,{buttons:"end",children:h.jsxs(cM,{children:[h.jsx(cq,{onClick:function(){return null==e?void 0:e.onClose()},secondary:!0,children:n("close","Close")}),h.jsx(cq,{onClick:function(){return N()},primary:!0,children:n("update","Update")})]})})]})},bu=function(e){var t=e.component.attributes,n=a_(),i=n.customViews,r=n.dateFilterOptions,o=cn().dashboard,a=null;try{a=function(e,t){var n=e.find(function(e){return e.id==t});if(!n)throw"Failed to find custom component.";return n}(i,t.customViewId)}catch(l){return h.jsx(fz,{})}return h.jsxs(fr,{id:t.viewId,queriesAreChanging:!1,children:[h.jsx(fi,{displaySubject:t.displaySubject,displayTitle:t.displayTitle,viewId:t.viewId,componentType:"custom",localFilters:[],library:!1,setLocalFilters:function(){}}),function(){if(!a)return null;var e=a.Component({attributes:t,dashboardFilters:t1(o.dataSets,o.globalFilters,r)});return h.jsx("div","string"==typeof e?{dangerouslySetInnerHTML:{__html:e},className:bd,"data-customviewid":t.customViewId}:{className:bd,"data-customviewid":t.customViewId,children:e})}()]})},bd=lr(u8("custom-view"),u5({position:"relative",height:"100%"})),bc=o.memo(function(e){var t,n,i,r,a,l=a_(),s=l.textOverride,u=l.labelFormat,d=l.valueAlias,c=l.nullValueAlias,p=e.displayTitle,f=e.displaySubject,m=hC({title:p,subject:f}),g=lu(),b={displayTitle:p,displaySubject:f,localFilters:e.localFilters,setLocalFilters:e.setLocalFilters,verified:null==e?void 0:e.protectedByOrganisation,library:null!=(t=null==e?void 0:e.library)&&t,dataSet:e.dataSet,componentType:null==e?void 0:e.type,viewId:null!=(n=e.viewId)?n:""};if(!iA(e.type).isRunnable(e))return h.jsx(fN,{title:"Missing parameters"});if(rb(e.lineResult)||rb(e.barResult))return h.jsx(dr,{});if(rx(e.lineResult)&&rx(e.barResult))return h.jsx(fM,{});var x,y,w=hw({dimension:e.barDimension,timeDimension:e.timeDimension}),C=e.barResult?rh(w,e.barMeasure,e.barResult):[],j=e.barResult?rm(e.barResult,e.barMeasure,w,"100%"==e.stacked,eX(e.dataSetId,e.barDimension,e.timeDimension,c,s)):[],S=hw({dimension:e.lineDimension,timeDimension:e.timeDimension}),F=e.lineResult?rh(S,e.lineMeasure,e.lineResult):[],k=e.lineResult?rm(e.lineResult,e.lineMeasure,S,"100%"==e.stacked,eX(e.dataSetId,e.lineDimension,e.timeDimension,c,s)):[];return h.jsx(o.Suspense,{fallback:h.jsx(dr,{}),children:h.jsxs(fr,{id:e.id,queriesAreChanging:e.queriesAreChanging,children:[h.jsx(fi,en({},b)),h.jsx(od,{disabledFeatures:null!=(i=null==e?void 0:e.library)&&i,children:h.jsx(vw,{ref:m,approxXAxisLabelCount:e.approxXAxisLabelCount,approxYAxisLabelCount:e.approxYAxisLabelCount,uniqueId:e.id,formatYAxisLabel:rz(s,{prefix:e.yAxisPrefix,postfix:e.yAxisPostfix,format:null==e?void 0:e.yAxisFormat,numberFormatOptions:e.numberFormatOptions,dateTimeFormatOptions:e.dateTimeFormatOptions}),formatXAxisLabel:rM(e.timeDimension,e.supportedTimeTruncFunctions,{prefix:e.xAxisPrefix,postfix:e.xAxisPostfix,format:null==e?void 0:e.xAxisFormat,numberFormatOptions:e.numberFormatOptions,dateTimeFormatOptions:e.dateTimeFormatOptions},d),forceXAxisAsTime:!!e.timeDimension,legend:hj(null==e?void 0:e.legend,"verbose"===(null==g?void 0:g.detail)),x:"x",bars:{colors:rj(null==g?void 0:g.colors,C.length),data:j,annotate:[],stacked:!!e.stacked,keys:C,styles:null==g||null==(r=g.charts)?void 0:r.barChart,formatter:function(t,n){if(e.conditionalFormattingRules&&e.conditionalFormattingRules.bar){var i=rN(e.barDimension,e.conditionalFormattingRules.bar,t,n,null==e?void 0:e.dataSet);return i?i.value:void 0}}},lines:{colors:(x=rj(null==g?void 0:g.colors,F.length),void 0===y&&(y=1),[].concat(x).map(function(e){var t,n;return n=y,v(e).darken(n).hex()})),data:k,annotate:[],keys:F,threshold:hG(null==(a=e.conditionalFormattingRules)?void 0:a.line)},removeStroke:!1,theme:null==g?void 0:g.charts,formatSeriesName:function(t){var n,i,r=e.barResult&&rq(e.barResult,s,e.type,null!=(n=e.viewId)?n:"",u)(t),o=e.lineResult&&rq(e.lineResult,s,e.type,null!=(i=e.viewId)?i:"",u)(t);return r||o||""},sparkline:e.sm,onClick:function(){},goalLine:null==e?void 0:e.goalLines,axisTitles:null==e?void 0:e.axisTitles,idPrefix:e.idPrefix})})]})})},rL),bp=function(e){var t=e.component,n=t.results,i=t.attributes,r=t.localFilters,o=cn().dashboard,a=cJ(i,e.runQueriesCallback,e.setResults,{localFilters:r,globalFilters:e.globalFilters},e.dataSet);return h.jsx(bc,en({id:e.id},i,{dataSet:e.dataSet,localFilters:e.component.localFilters,setLocalFilters:e.setLocalFilters,lineResult:n&&n[0],barResult:n&&n[1],queriesAreChanging:a.queriesAreChanging,setParameterUpdate:function(){},supportedAggregates:e.dashboardBehaviour.queryEngineConfig.supportedAggregates,supportedTimeTruncFunctions:e.dashboardBehaviour.queryEngineConfig.supportedTimeTruncFunctions,dashboard:o,sm:e.sm,library:null==e?void 0:e.library,numberFormatOptions:e.dashboardBehaviour.numberFormatOptions,dateTimeFormatOptions:e.dashboardBehaviour.dateTimeFormatOptions,goalLines:null==e?void 0:e.component.attributes.goalLines,idPrefix:e.idPrefix}))},bf=function(e){var t,n=e.result,i=e.minValueColor,r=e.maxValueColor,a=e.noDataColor,l={displayTitle:e.displayTitle,displaySubject:e.displaySubject,localFilters:e.localFilters,setLocalFilters:e.setLocalFilters,library:null!=(t=null==e?void 0:e.library)&&t,verified:null==e?void 0:e.protectedByOrganisation,dataSet:e.dataSet,componentType:null==e?void 0:e.type,viewId:e.id},s=hC({title:e.displayTitle,subject:e.displaySubject});if(!iA("mercatorMap").isRunnable(e))return h.jsx(fN,{title:"Missing parameters"});if(rb(n))return h.jsx(dr,{});if(rx(n))return h.jsx(fM,{});var u={};if(n){var d=e.dimension[0].field,c=e.measure[0],p=n.fields.findIndex(function(e){return e.id==d}),f=n.fields.findIndex(function(e){return e.id==eV(c)});n.content.forEach(function(e){u[e[p]]=e[f]})}var m=rC([i,r],((null==n?void 0:n.content.length)||100)/4);return h.jsx(o.Suspense,{fallback:h.jsx(dr,{}),children:h.jsxs(fr,{id:e.id,queriesAreChanging:e.queriesAreChanging,children:[h.jsx(fi,en({},l)),h.jsx(vE,{ref:s,formatValue:function(t){return rB(ro(t,2),e.numberFormatOptions,e.labelFormat)},topology:"worldCountries",data:u,background:e.backgroundColor,colorRange:m,missingDataColor:a,position:e.position,onPositionChange:e.onPositionChange})]})})},bm=function(e){var t=e.component,n=t.results,i=t.attributes,r=cJ(i,e.runQueriesCallback,e.setResults,{localFilters:t.localFilters,globalFilters:e.globalFilters},e.dataSet);return h.jsx(bf,en({},i,{id:e.id,result:n&&n[0],queriesAreChanging:r.queriesAreChanging,dataSet:e.dataSet,supportedAggregates:e.dashboardBehaviour.queryEngineConfig.supportedAggregates,supportedTimeTruncFunctions:e.dashboardBehaviour.queryEngineConfig.supportedTimeTruncFunctions,supportedTransformationFunctions:e.dashboardBehaviour.queryEngineConfig.supportedTransformationFunctions,localFilters:e.component.localFilters,setLocalFilters:e.setLocalFilters,setParameterUpdate:function(){},onPositionChange:e.onPositionChange,numberFormatOptions:e.dashboardBehaviour.numberFormatOptions}))},bh=function(e){var t,n=e.component,i=n.results,r=n.attributes,o=vu(r,e.dataSet,e.dashboardBehaviour.queryEngineConfig,{localFilters:n.localFilters,globalFilters:e.globalFilters},e.updateComponentAttributes,e.runQueriesCallback,e.setResults);return h.jsx(hB,en({},r,{id:e.id,dataSet:e.dataSet,localFilters:e.component.localFilters,setLocalFilters:e.setLocalFilters,setParameterUpdate:null==e?void 0:e.setParameterUpdate,results:i,queriesAreChanging:o.queriesAreChanging,supportedAggregates:e.dashboardBehaviour.queryEngineConfig.supportedAggregates,supportedTimeTruncFunctions:e.dashboardBehaviour.queryEngineConfig.supportedTimeTruncFunctions,supportedTransformationFunctions:null==e||null==(t=e.dashboardBehaviour)||null==(t=t.queryEngineConfig)?void 0:t.supportedTransformationFunctions,library:null==e?void 0:e.library,viewFor:"standalone"}))},bv={type:"dataTable",measure:[],dimension:[],timeDimension:null,order:[],displayTitle:"",displaySubject:"",filter:[],limit:10,conditionalFormattingRules:[],prefixes:[],dateTimeFormat:"DD MMMM YYYY, hh:mm",exportNames:{},numberFormat:{},sizing:{},tableDrilldown:[],tags:[]};function bg(e){return e.total>=e.limit}function bb(e,t){return(e||0)+(t||bv.limit)}function bx(e,t){if(void 0!==e||void 0!==t)return(e||0)-(t||bv.limit)}var by=rY(en({minWidth:"100%",overflow:"overlay"},uY)),bw=Object.assign(function(){return null},{table:rY({textIndent:"0",borderColor:"inherit",borderCollapse:"collapse",tableLayout:"fixed"}),wrapper:by,th:function(e){var t,n,i,r,o,a,l,s;return rY({padding:null==e?void 0:e.padding,display:"table-cell",position:"relative",fontSize:null==e?void 0:e.fontSize,fontWeight:null==e?void 0:e.fontWeight,background:null==e?void 0:e.background,color:null==e?void 0:e.color,whiteSpace:"nowrap",textAlign:"left",borderTop:null==e?void 0:e.borderTop,borderRight:null==e?void 0:e.borderRight,borderBottom:null==e?void 0:e.borderBottom,variants:{lastGroupColumn:{true:{borderRight:null!=(t=null==e||null==(n=e.row)?void 0:n.borderRight)?t:null==e?void 0:e.borderRight}},firstGroupColumn:{true:{borderLeft:null==e||null==(i=e.row)?void 0:i.borderLeft}},first:{true:{borderLeft:null==e||null==(r=e.first)?void 0:r.borderLeft}},last:{true:{borderRight:null==e||null==(o=e.last)?void 0:o.borderRight}},rowScope:{true:{background:null==e||null==(a=e.column)?void 0:a.background}},hover:{true:{"&:hover":{color:null==e||null==(l=e["&:hover"])?void 0:l.color,background:null==e||null==(s=e["&:hover"])?void 0:s.background}}}}})},td:function(e){var t,n,i,r,o,a,l;return rY({verticalAlign:"top",overflow:"hidden",position:"relative",whiteSpace:"nowrap",borderLeft:null==e||null==(t=e.body)||null==(t=t.cells)?void 0:t.borderLeft,borderRight:null==e||null==(n=e.body)||null==(n=n.cells)?void 0:n.borderRight,borderBottom:null==e||null==(i=e.body)||null==(i=i.cells)?void 0:i.borderBottom,fontSize:null==e||null==(r=e.body)||null==(r=r.cells)?void 0:r.fontSize,padding:null==e||null==(o=e.body)||null==(o=o.cells)?void 0:o.padding,variants:{first:{true:{borderLeft:null==e||null==(a=e.body)?void 0:a.borderLeft}},last:{true:{borderRight:null==e||null==(l=e.body)?void 0:l.borderRight}},align:{alignLeft:{textAlign:"left"},alignRight:{textAlign:"right"}}}})},tr:function(e){var t,n,i,r,o,a,l,s;return rY({position:"relative",cursor:"default",variants:{even:{true:{background:null==e||null==(t=e.body)||null==(t=t.even)?void 0:t.background,color:null==e||null==(n=e.body)||null==(n=n.even)?void 0:n.color,"&:hover":{background:null==e||null==(i=e.body)||null==(i=i.even)||null==(i=i["&:hover"])?void 0:i.background,color:null==e||null==(r=e.body)||null==(r=r.even)||null==(r=r["&:hover"])?void 0:r.color}}},odd:{true:{background:null==e||null==(o=e.body)||null==(o=o.odd)?void 0:o.background,color:null==e||null==(a=e.body)||null==(a=a.odd)?void 0:a.color,"&:hover":{background:null==e||null==(l=e.body)||null==(l=l.odd)||null==(l=l["&:hover"])?void 0:l.background,color:null==e||null==(s=e.body)||null==(s=s.odd)||null==(s=s["&:hover"])?void 0:s.color}}}}})},showMoreButton:function(e){var t;return rY(en({color:null==e||null==(t=e.odd)?void 0:t.color,background:"transparent",padding:"0 4px 0 4px",minWidth:20,fontSize:"100%",border:0,fontWeight:300,alignSelf:"flex-end",position:"absolute",right:0,top:"40%",marginBottom:1},rW,{"&:hover":en({},rW,{opacity:.5}),"> svg":{marginTop:-2},"> span":{height:10,lineHeight:"1px",display:"block"}}))},tdContentWrapper:function(e){return rY({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"clip","> span":{fontSize:null!=e?e:"inherit"}})},thInner:function(e){var t,n;return rY({position:"relative",textOverflow:"ellipsis",whiteSpace:"nowrap",padding:null==e||null==(t=e.inner)?void 0:t.padding,borderBottomWidth:null==e||null==(n=e.inner)?void 0:n.borderBottomWidth})},thLabel:function(e){return rY({textTransform:null==e?void 0:e.textTransform})},thButton:function(){return rY({marginTop:1,WebkitLineClamp:1,width:"calc(100% - 20px)",textTransform:"inherit",fontWeight:"inherit"})},thGroupRow:function(e){var t,n,i,r,o,a,l,s,u,d,c,p,f,m;return rY(en({display:"table-cell",position:"relative",fontWeight:null==e||null==(t=e.th)||null==(t=t.group)?void 0:t.fontWeight,fontSize:null==e||null==(n=e.th)||null==(n=n.group)?void 0:n.fontSize,background:null==e||null==(i=e.th)||null==(i=i.column)?void 0:i.background,textTransform:null==e||null==(r=e.th)||null==(r=r.group)?void 0:r.textTransform,color:null==e||null==(o=e.th)||null==(o=o.column)?void 0:o.color,whiteSpace:"nowrap",textAlign:"left",borderRight:null==e||null==(a=e.th)||null==(a=a.column)?void 0:a.borderRight,borderLeft:null==e||null==(l=e.th)||null==(l=l.column)?void 0:l.borderLeft,borderBottom:null==e||null==(s=e.body)||null==(s=s.cells)?void 0:s.borderBottom,padding:null==e||null==(u=e.th)||null==(u=u.column)?void 0:u.padding},rW,{variants:{first:{true:{borderLeft:null==e||null==(d=e.body)?void 0:d.borderLeft}},last:{true:{borderRight:null==e||null==(c=e.body)?void 0:c.borderRight}},deadSpace:{true:{borderBottom:null==e||null==(p=e.th)||null==(p=p.row)?void 0:p.borderBottom,borderRight:0,borderLeft:null==e||null==(f=e.th)||null==(f=f.column)?void 0:f.borderLeft}},level:{2:{background:null==e||null==(m=e.th)||null==(m=m.level)?void 0:m[2].background}}}}))},thGroupColumn:function(e,t){var n,i,r,o,a,l,s,u,d,c,p;return rY(en({display:"table-cell",position:"relative",fontWeight:null==e||null==(n=e.group)?void 0:n.fontWeight,fontSize:null==e||null==(i=e.group)?void 0:i.fontSize,textTransform:null==e||null==(r=e.group)?void 0:r.textTransform,background:null==e?void 0:e.background,color:null==e?void 0:e.color,whiteSpace:"nowrap",textAlign:"left",borderTop:null==e?void 0:e.borderTop,borderRight:t?null==e?void 0:e.borderRight:null!=(o=null==e||null==(a=e.row)?void 0:a.borderRight)?o:null==e?void 0:e.borderRight,borderLeft:null==e?void 0:e.borderRight,borderBottom:null==e||null==(l=e.row)?void 0:l.borderBottom,padding:null==e||null==(s=e.row)?void 0:s.padding},rW,{variants:{first:{true:{borderLeft:null==e||null==(u=e.first)?void 0:u.borderLeft}},last:{true:{borderRight:null==e||null==(d=e.last)?void 0:d.borderRight}},hover:{true:{"&:hover":en({},rW,{color:null==e||null==(c=e["&:hover"])?void 0:c.color,background:null==e||null==(p=e["&:hover"])?void 0:p.background})}}}}))}}),bC=rY({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),bj=function(e){var t=e.columnIndex,n=e.type,i=e.fieldKey,r=e.onResized,a=e.width,l=o.useState(!1),s=l[0],u=l[1],d=k.useDrag({type:n,item:{columnIndex:t,fieldKey:i,width:a},collect:function(e){return{isDragging:e.isDragging()}},end:function(e,t){var n=t.getDifferenceFromInitialOffset();n&&r({columnIndex:e.columnIndex,fieldKey:i,width:e.width+n.x})}}),c=d[0],p=d[1],f=d[2];return o.useEffect(function(){if(f){var e,t,n=new Image;n.src=((e=document.createElement("canvas")).width=1,e.height=1,(t=e.getContext("2d"))&&(t.fillStyle="transparent",t.fillRect(0,0,1,1)),e.toDataURL()),n.onload=function(){return f(n)}}},[f]),h.jsx("div",{className:""+bS,ref:p,onMouseEnter:function(){return u(!0)},onMouseLeave:function(){return u(!1)},children:h.jsx("span",{className:""+bF({onHover:c.isDragging||s?"true":"false"})})})},bS=rY({position:"absolute",right:-8,top:0,bottom:0,width:16,zIndex:1,cursor:"ew-resize"}),bF=rY({position:"absolute",top:4,bottom:4,right:6,transitionDuration:"100ms",transitionProperty:"all",transitionTimingFunction:"cubic-bezier(0.4,0,0.2,1)",borderRightWidth:3,borderRightStyle:"solid",variants:{onHover:{true:{borderRightColor:rQ.colors.blue},false:{borderRightColor:"transparent"}}}}),bk=o.forwardRef(function(e,t){return h.jsx("div",{ref:t,className:"vizzly-data-table "+bw.wrapper,children:h.jsx("table",{className:""+bw.table,children:e.children})})}),bT={name:"1pghby6",styles:"position:relative;box-sizing:border-box"},b_=o.forwardRef(function(e,t){var n,i,r=e.clickEnabled,a=lu(),l={first:e.first&&"true",last:e.last&&"true",hover:e.hover&&"true",level:null==e?void 0:e.level},s=o.useMemo(function(){return null!=e&&e.deadSpace||"row"===(null==e?void 0:e.scope)?"tables.th.column":null!=e&&e.group?"tables.th.row":e.level?"tables.th.level."+e.level:"tables.th"},[null==e?void 0:e.deadSpace,null==e?void 0:e.scope,null==e?void 0:e.group]),u=o.useMemo(function(){var t,n;return e.group?"row"===e.scope?bw.thGroupRow(null==a?void 0:a.tables)(en({},l,{deadSpace:null!=e&&e.deadSpace?"true":void 0})):bw.thGroupColumn(null==a||null==(t=a.tables)?void 0:t.th,!(null!=e&&e.lastGroupColumn)&&(null==e?void 0:e.deadSpace))(l):bw.th(null==a||null==(n=a.tables)?void 0:n.th)(en({},l,{rowScope:"row"===(null==e?void 0:e.scope)?"true":void 0,lastGroupColumn:null!=e&&e.lastGroupColumn&&!e.last?"true":void 0,firstGroupColumn:null==e||!e.firstGroupColumn||e.last||e.first?void 0:"true"}))},[e.group,e.scope,null==e?void 0:e.deadSpace,null==e?void 0:e.level]);return h.jsxs("th",{scope:null!=(n=null==e?void 0:e.scope)?n:"column",className:u,style:e.cellStyles,"data-themeapi":s,"data-chipposition":"top.left","data-group":e.group?"true":"false","data-first":e.first?"true":"false","data-last":e.last?"true":"false","data-hover":e.hover?"true":"false","data-deadspace":e.deadSpace?"true":"false","data-lastgroupcolumn":e.lastGroupColumn?"true":"false","data-firstgroupcolumn":e.firstGroupColumn?"true":"false",colSpan:e.colSpan,role:r?"button":void 0,tabIndex:r?0:void 0,"data-clickenabled":r?"true":"false",onClick:null==e?void 0:e.onClick,onKeyDown:function(t){null!=e&&e.onClick&&"Enter"===t.key&&(null==e||e.onClick())},children:[(null==e?void 0:e.dragSettings)&&h.jsx(bj,en({},null==e?void 0:e.dragSettings)),h.jsx("div",{css:bT,style:e.columnStyles,children:h.jsx("div",{className:""+bw.thInner(null==a||null==(i=a.tables)?void 0:i.th),ref:t,"data-themeapi":"tables.th.inner",children:h.jsxs(uQ,{as:"span",overflow:"hidden",alignItems:"center",gap:"0.5rem","data-component":"th-inner",paddingLeft:null!=e&&e.level&&1!==(null==e?void 0:e.level)?20*(null==e?void 0:e.level):void 0,children:[(null==e?void 0:e.expand)&&h.jsx(dp,en({},e.expand,{label:null!=e&&e.expand.expanded?"Collapse "+(null==e?void 0:e.expand.label):"Expand "+e.expand.label,arrowStart:"side"})),e.children]})})})]})}),bI={name:"1flj9lk",styles:"text-align:left"},bA={name:"6r56vi",styles:"height:1rem;width:1rem"},bD=o.forwardRef(function(e,t){var n,i,r,a,l,s,u=o.useRef(null),d=e.label,c=(a=(r=o.useState(!1))[0],l=r[1],o.useEffect(function(){var e,t=u.current;d&&t&&((t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&l(!0),u.current&&(e=u.current).offsetWidth<e.scrollWidth&&l(!0))},[u.current]),a),p=o.useCallback(function(e){"function"==typeof t?t(e):null!=t&&(t.current=e),u.current=e},[t,u]);return lu(),h.jsxs(o.Fragment,{children:[h.jsx("button",{onClick:function(){return e.onChange&&e.onChange()},css:bI,ref:p,className:lr(c?""+bC:void 0,""+or.button,""+bw.thButton()),"data-testid":e.testIdPrefix+"-title",children:c?h.jsx(cf,{placement:"bottom-start",tooltipContent:function(){return h.jsx(cf.Content,{children:d})},className:""+bC,modifiers:[{name:"offset",options:{offset:[-50,10]}}],showTooltip:e.showTooltip,children:h.jsx(bO,{children:d})}):h.jsx(bO,{children:d})}),e.onSort&&h.jsxs("button",{type:"button",onClick:function(){return e.onSort&&e.onSort()},className:""+or.button,"aria-label":null!=(s=e.sortLabel)?s:"Sort",css:bA,"data-testid":e.testIdPrefix+"-sort",children:[!e.direction&&h.jsx(w.SelectorIcon,{}),"asc"===e.direction&&h.jsx(w.ChevronUpIcon,{}),"desc"===e.direction&&h.jsx(w.ChevronDownIcon,{})]})]})}),bO=function(e){var t,n=lu();return h.jsx("span",{className:""+bw.thLabel(null==n||null==(t=n.tables)?void 0:t.th),children:e.children})},bE={name:"agbev0",styles:"min-width:100%;overflow:scroll;border-bottom-width:1px"},bL=Object.assign(function(){return null},{Wrapper:bk,Head:function(e){return h.jsx("thead",{children:e.children})},Body:function(e){return h.jsx("tbody",{css:bE,children:e.children})},TR:function(e){var t,n=lu();return h.jsx("tr",{"data-themeapi":e.odd?"tables.body.odd":"tables.body.even",className:""+bw.tr(null==n?void 0:n.tables)({odd:e.odd&&"true",even:e.even&&"true"}),"data-chipposition":"top.left","aria-expanded":!0===e.expanded?"true":!1===(null==e?void 0:e.expanded)?"false":void 0,"aria-level":null!=(t=e.level)?t:void 0,children:e.children})},TD:function(e){var t,n,i,r,l,s,u,d,c,p,f=lu(),m=a.useState(!1),v=m[0],g=m[1],b=e.clickEnabled,x=e.first,y=o.useRef(null),C=null!=(t=e.showMoreLabel)?t:"Show more";return o.useEffect(function(){var t,n,i=y.current;"number"==typeof(null==(t=e.style)?void 0:t.width)&&i&&g((null==(n=e.style)?void 0:n.width)<i.offsetWidth+16)},[y.current,null==(n=e.style)?void 0:n.width]),h.jsx("td",{style:en({},e.style),className:""+bw.td(null==f?void 0:f.tables)({first:e.first&&"true",last:e.last&&"true",align:null!=(i=e.align)?i:"alignRight"}),role:b?"button":void 0,tabIndex:b?0:void 0,"data-clickenabled":b?"true":"false",onClick:null==e?void 0:e.onClick,onKeyDown:function(t){null!=e&&e.onClick&&"Enter"===t.key&&(null==e||e.onClick())},"data-themeapi":"tables.body.cells","data-first":x?"true":"false","data-last":e.last?"true":"false",children:e.customRender?h.jsx(o.Fragment,{children:e.children}):h.jsxs(o.Fragment,{children:[h.jsx("div",{className:""+bw.tdContentWrapper(null==f||null==(r=f.tables)||null==(r=r.body)||null==(r=r.cells)?void 0:r.fontSize),style:{width:p="number"==typeof(null==(u=e.style)?void 0:u.width)?(null==(d=e.style)?void 0:d.width)-(v?36:16):null==(c=e.style)?void 0:c.width,minWidth:p},children:h.jsx("span",{ref:y,children:e.children})}),v&&h.jsx("button",{"aria-label":"string"==typeof e.children?C+": "+e.children:C,onClick:function(){return e.onShowMore&&e.onShowMore()},className:""+bw.showMoreButton(null==f||null==(l=f.tables)?void 0:l.body),children:h.jsx(w.DotsHorizontalIcon,{})})]})})},TH:b_,THButton:bD,THLabel:bO,HeadTR:function(e){return h.jsx("tr",{children:e.children})}}),bP=Object.assign(bL.Wrapper,{Wrapper:bL.Wrapper,Head:bL.Head,Body:bL.Body,TR:bL.TR,TD:bL.TD,TH:bL.TH,THLabel:bL.THLabel,THButton:bL.THButton,HeadTR:bL.HeadTR}),bR=function(e){return h.jsx(uQ,{direction:"column",children:null==e?void 0:e.children})},bN=function(e){var t=s.debounce(e.onSetExportName),n=a_().textOverride,i=Object.entries(e.numberFormatOptions).map(function(e){return{label:e[1].description,value:e[0]}});return h.jsx(o.Fragment,{children:e.open&&h.jsx(uq,{onClose:function(){return null==e?void 0:e.close()},width:220,position:null==e?void 0:e.triggerPosition,align:"right",children:h.jsxs(uq.Options,{padding:!0,children:[h.jsx(uq.Option,{children:h.jsx(bR,{children:h.jsx(dS,{label:n("table_settings.title","Title"),id:"table-header-title","data-testid":"table-header-title",defaultValue:e.exportName,placeholder:e.originalPublicName,onChange:function(n){t(e.fieldId,n.target.value?n.target.value:void 0)}})})}),"number"==e.dataType&&h.jsx(uq.Option,{children:h.jsx(bR,{children:h.jsx(d_,{label:n("table_settings.format","Format"),id:"table-header-format",testId:"table-header-format",showClearBtn:!0,selected:e.currentNumberFormat,options:i,onChange:function(t){e.onSetNumberFormat(t)},textOverride:n})})})]})})})},bM=function(e){var t=a_().textOverride,n=e.fieldIndex,i=e.currentOrder,r=e.exportName,o=e.currentNumberFormat,a=e.fields[n],l={width:e.width,maxWidth:e.width,minWidth:e.width},s=uV(),u=s.ref,d=s.show,c=s.position,p=s.close,f=s.open,m={fontFamily:l.fontFamily,translate:e.columnOffset+"px"};return e.isImpactedColumn&&(m.opacity=.1),h.jsxs(bP.TH,{cellStyles:l,columnStyles:m,first:0===n,last:null==e?void 0:e.last,hover:!0,group:!1,dragSettings:{columnIndex:n,type:e.id,fieldKey:a.datumKey,onResized:null==e?void 0:e.onResizedColumn,width:e.width},lastGroupColumn:e.isLastGroupColumn,firstGroupColumn:e.isFirstGroupColumn,children:[h.jsx(bP.THButton,{onChange:function(){return f()},direction:i?null==i?void 0:i.direction:void 0,label:r||a.publicName,onSort:eU(a)?void 0:function(){var t,n,r=eW(a.id,{supportedAggregates:e.supportedAggregates,supportedTimeTruncFunctions:e.supportedTimeTruncFunctions,supportedTransformationFunctions:void 0});null==e.onOrderChange||e.onOrderChange({fieldId:r.field,function:r.function,direction:null===(n=null!=(t=null==i?void 0:i.direction)?t:null)?"asc":"asc"===n?"desc":null})},ref:u,testIdPrefix:"column-"+(null==a?void 0:a.id),sortLabel:t("table_settings.sort","Sort")}),h.jsx(bN,{open:d,triggerPosition:c,close:p,exportName:e.exportName||a.publicName,fieldId:a.datumKey,originalPublicName:a.publicName,onSetExportName:e.onSetExportName,onSetNumberFormat:function(t){return e.onSetNumberFormat(a.datumKey,t)},currentNumberFormat:o,numberFormatOptions:e.numberFormatOptions,dataType:a.dataType})]})},bz=Object.assign(function(e){var t=e.content,n=e.textOverride,i=e.children,r=o.useState(!1),a=r[0],l=r[1],s=fx().addToast;return h.jsxs(uQ,{gap:"0.5rem",children:[h.jsx(uM,{textWrap:!0,flex:1,hyphens:"none",children:h.jsx("span",{style:{userSelect:"none"},children:i||t})}),h.jsx(bz.Button,{onClick:function(e){e.preventDefault(),e.stopPropagation(),"string"==typeof t&&(G(t),l(!0),s(function(){return h.jsx(fh,{message:"Copied to clipboard"})}),setTimeout(function(){return l(!1)},2e3))},copied:a,textOverride:n})]})},{Button:function(e){return h.jsxs("button",{onClick:function(t){return null==e?void 0:e.onClick(t)},"aria-label":e.textOverride?e.textOverride("copy_content","Copy content"):"Copy content",className:""+or.button,children:[!(null!=e&&e.copied)&&h.jsx("svg",{height:22,width:22,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:null==e?void 0:e.iconStyles,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z"})}),(null==e?void 0:e.copied)&&h.jsx("svg",{height:22,width:22,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:null==e?void 0:e.iconStyles,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m8.9-4.414c.376.023.75.05 1.124.08 1.131.094 1.976 1.057 1.976 2.192V16.5A2.25 2.25 0 0118 18.75h-2.25m-7.5-10.5H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V18.75m-7.5-10.5h6.375c.621 0 1.125.504 1.125 1.125v9.375m-8.25-3l1.5 1.5 3-3.75"})})]})}}),bq=function(e){return h.jsxs(mj,{onClose:function(){return null==e?void 0:e.onCloseModal()},isOpen:null==e?void 0:e.open,width:"sm",children:[h.jsx(mj.Content,{children:h.jsx(gf.Container,{children:h.jsx(gf.Panel,{as:"div",children:h.jsx(bz,{content:null==e?void 0:e.content})})})}),h.jsx(mj.Footer,{buttons:"end",children:h.jsx(cq,{secondary:!0,onClick:function(){return null==e?void 0:e.onCloseModal()},children:"Close"})})]})},bB=rY({height:"1.25rem",width:"1.25rem","&:disabled":{opacity:.4}}),bV=rY({fontSize:13,fontWeight:"normal"}),bW=function(e){var t,n,i=e.textOverride;return h.jsxs(uQ,{justifyContent:"flex-end",alignItems:"center",margin:"0.5rem 0 0 0",children:[h.jsxs("span",{className:""+bV,children:[i?i("pagination.page","Page"):"Page"," ",(null!=(t=e.offset)?t:0)/(null!=(n=e.limit)?n:1)+1]}),e.onPrevious&&h.jsx("button",{disabled:null==e?void 0:e.previousDisabled,onClick:e.onPrevious,"aria-label":"Previous",className:or.button+" "+bB,children:h.jsx(w.ChevronLeftIcon,{})}),e.onNext&&h.jsx("button",{"aria-label":"Next",disabled:null==e?void 0:e.nextDisabled,className:or.button+" "+bB,onClick:e.onNext,children:h.jsx(w.ChevronRightIcon,{})})]})},bH=function(e,t){return t[e]?t[e]:rd(e)?t[rp(e)]:void 0},bY=function(e){for(var t,n=[],i=ed(e);!(t=i()).done;)!function(){var e=t.value,i=n.find(function(t){return t.content===e.formatted});i?i.colSpan+=1:n.push({content:e.formatted,colSpan:1,unformatted:e.unformatted})}();return n};function bG(e,t){return e.dimensionValues.map(function(n,i){return t(n,e.dimensionKeys[i])}).join(", ")}var bU=function(e,t){if((null==t?void 0:t.length)>0&&rd(e.datumKey)){var n=(rc(e.datumKey).dimensionValues||[]).join(", ");return t.some(function(e){return e.unformatted===n})}return!1},bK=function(e,t,n,i,r,o,a,l,u,d,c,p,f,m,h,v,g){if(!t)return null;var b=[],x=[],y=void 0,w=function(t,n,i,r,o){var a=t;n&&"none"!=n&&(a=rA(t,u[n].publicName));var l=c({fieldId:i,func:n,type:e,defaultLabel:a,viewId:null!=g?g:"",values:rD(r,o)});return null!=l?l:a};if(t&&"dataTable"==e){var C,j,S,F,k,T,_,I,A,D,O=nl({measure:f,xMeasure:m,yMeasure:h}),E=ns({dimension:v}),L=(T={x:((k=s.groupBy(E,function(e){return e.pivot||"x"})).x||[]).map(function(e){return eV(e)}),y:(k.y||[]).map(function(e){return eV(e)})},_=rm(t,O,T,void 0,p),I=[].concat(T.x).map(function(e){return en({},rg(t,e),{datumKey:e})}),A=[],D=rh(T,O,t),_.forEach(function(e){A.push([].concat(e.xValues,s.cloneDeep(D).map(function(t){return void 0===e[t]?null:e[t]})))}),D.forEach(function(e){var n=rc(e),i=eV({field:n.fieldId,function:n.function}),r=rg(t,i),o=ru(n.dimensionKeys,n.dimensionValues,n.fieldId,n.function);I.push({id:i,datumKey:o,publicName:null==r?void 0:r.publicName,dataType:"number"})}),{fields:I,content:A});y=function(e,t,n,i,r){if(!s.some(t,function(e){return"y"==e.pivot})||!e)return!1;var o=n.flatMap(function(t){if(rd(t.datumKey)){var n=rc(t.datumKey);return[{formatted:bG(n,function(t,n){return function(e,t,n,i,r){var o=eZ(t,r);if(e&&o){var a=rg(e,t),l=r[o.truncate].dateFormat,s="date_time"==(null==a?void 0:a.dataType)?new Date(n):n;return eM(s,i[l].formatter)||""+n}return""+n}(e,n,t,i,r)}),unformatted:bG(n,function(e){return e})}]}return[]}),a=s.cloneDeep(t).flatMap(function(e){return"y"==e.pivot?[]:[{colSpan:1,content:"",rowGroup:!0,unformatted:""}]});return{consolidated:[].concat(a,bY(o)),unconsolidated:[].concat(a,o.map(function(e){return{colSpan:1,content:e.formatted,unformatted:e.unformatted}}))}}(t,E,L.fields,o,d),x=L.content,b=L.fields}else t&&t.fields.forEach(function(e){b.push(en({},e,{datumKey:ru([],[],e.id,"none")}))});return b=b.map(function(e){var t,i,r=e.publicName,o=e.id,a="none",l=void 0,s=void 0,u=(t=e.datumKey,(i=n||{})[t]?i[t]:rd(t)?i[rp(t)]:void 0);if(rd(e.datumKey)){var d=rc(e.datumKey);o=d.fieldId,l=d.dimensionKeys,s=d.dimensionValues}return u?r=u:rd(e.datumKey)&&(a=rc(e.datumKey).function),en({},e,{publicName:u||w(r,a,o,l,s)})}),x=bX(b,"dataTable"==e?x:t.content,i,r,o,a,l,p),{groupTitles:y,fields:b,content:x}},bX=function(e,t,n,i,r,o,a,l){return t.map(function(t){return t.map(function(t,s){var u,d,c,p,f=e[s],m=n?(d=e[s],null==(c=n.find(function(e){var t=d.id;return rd(t)?rp(t)==e.field:t==e.field}))?void 0:c.prefix):"",h=i?r[i].formatter:function(e){return e.toISOString()},v=a[(o?bH(null!=(p=f.datumKey)?p:"",o):"")||""];return{value:t,displayValue:""+(null!=m?m:"")+(v&&"number"==f.dataType?v.formatter(t,l):eM(function(e,t){if(null===e)return null;switch(t){case"boolean":return!!e;case"date_time":return new Date(e);case"number":return Number(e);case"string[]":return""+(Array.isArray(e)?eC(e,!1):""+e);case"string":return""+e}}(t,f.dataType),h,l))}})})};function bQ(e,t,n,i){var r,o;return i&&i.hasOwnProperty(e)?i[e]:null!=(r=null==(o=t[e])?void 0:o.width)?r:n}var bJ=function(e){var t=e.row,n=e.rowIndex,i=e.tableRepresentation,r=e.dimension,a=e.conditionalFormattingRules,l=e.dataSet,u=e.protectedFields,d=e.drilldownAction,c=a_(),p=c.queryEngineConfig,f=c.textOverride;return h.jsx(o.Fragment,{children:t.map(function(o,c){if(null!=i&&i.fields[c].hidden||null==i)return null;var m,g=i.fields[c],b=e.drilldown.length>0&&0===c,x=bQ(g.datumKey,null==e?void 0:e.sizing,null==e?void 0:e.defaultColumnWidth,null==e?void 0:e.alternativeColumnSizing);if(rd(g.datumKey)){var y=rc(g.datumKey),w={};null==i||i.fields.forEach(function(e,n){var i,r;w[y.fieldId]=null==(i=t[n])?void 0:i.value,w[e.datumKey]=null==(r=t[n])?void 0:r.value}),y.dimensionKeys.forEach(function(e,t){w[e]=y.dimensionValues[t]});var C=rN(r,a,w,g.datumKey,l);C&&(m=function(e){var t,n=e.type,i=e.value,r=(t=null!=i?i:"",s.maxBy(["white","black"],function(e){return v.contrast(e,t)})||t);switch(n){case"fontColor":return{color:i};case"backgroundColor":return{backgroundColor:i,color:r}}return{}}(C))}var j,S=e.renderTableCell(n,c,o.value,g.datumKey);return br(r,g.id,{supportedAggregates:p.supportedAggregates,supportedTimeTruncFunctions:p.supportedTimeTruncFunctions,supportedTransformationFunctions:void 0})?h.jsx(bP.TH,{first:0===c,last:c+1===t.length,group:!0,scope:"row",onClick:function(){return e.onViewClick(n,c,o.value,g.datumKey)},clickEnabled:h0(u),expand:d&&b?{expanded:null==d?void 0:d.expanded,onClick:function(){return null==d?void 0:d.onExpanded(null!=d&&d.expanded?void 0:n)},label:""+o.displayValue}:void 0,level:null!=(j=null==e?void 0:e.level)?j:void 0,children:S?h.jsx(bZ,{component:S}):"undefined"!==o.displayValue?o.displayValue:""},"table_row_"+n+"_cell_"+c):h.jsx(bP.TD,{first:0===c,last:c+1===t.length,onClick:function(){return e.onViewClick(n,c,o.value,g.datumKey)},align:"number"==g.dataType?"alignRight":"alignLeft",clickEnabled:h0(u),style:en({},null==e?void 0:e.cellStyles,m||{},{width:x,maxWidth:x,minWidth:x}),onShowMore:function(){return null==e?void 0:e.setShowMore(o.displayValue)},showMoreLabel:f("table_settings.show_more","Show more"),customRender:!!S,children:S?h.jsx(bZ,{component:S}):void 0!==o.displayValue?o.displayValue:""},"table_row_"+n+"_cell_"+c+"_"+JSON.stringify(o.displayValue)+"}")})})},bZ=function(e){var t=e.component;return"string"==typeof t?h.jsx("div",{dangerouslySetInnerHTML:{__html:t}}):h.jsx(o.Fragment,{children:t})},b$=function(e){var t=a.useState(void 0),n=t[0],i=t[1],r=e.rowIndex,l=e.dataSet,s=e.drilldown;o.useEffect(function(){return i(void 0)},[e.queriesAreChanging]);var u=o.useState(),d=u[0],c=u[1],p=void 0!==n,f=s&&(null==s?void 0:s.length)>0,m=a_().queryEngineConfig;return h.jsxs(o.Fragment,{children:[h.jsx(bP.TR,{odd:r%2!=0,even:r%2==0,level:s?1:void 0,expanded:s?p:void 0,children:h.jsx(bJ,en({},e,{drilldownAction:f?{onExpanded:function(t){if(void 0!==t){var n,r,o,a=(n=e.tableRepresentation,b1(r=e.dimension).map(function(e){var i,r,o,a=(o=bi(e),n.fields.findIndex(function(e){return e.id===o}));return(r={})[e.field]=null==(i=n.content[t][a])?void 0:i.value,r}));null!==a&&i(a)}else i(void 0)},expanded:p}:void 0,onViewClick:function(t,n,i){e.handleOnChange(t,n,i,h$(null==e?void 0:e.tableRepresentation.fields,m,e.row))},renderTableCell:function(t,n,i){return e.handleTableCellRender(t,n,i,h$(null==e?void 0:e.tableRepresentation.fields,m,e.row))}}))}),(null==e?void 0:e.drilldownInputProps)&&p&&f&&h.jsx(b0,{setResults:function(e){return c({results:e})},dataSet:l,result:null==d?void 0:d.results[0],drilldownInputProps:null==e?void 0:e.drilldownInputProps,drilldown:s,selectedRow:n,tableRowProps:e,parentFields:e.tableRepresentation.fields,handleOnChange:e.handleOnChange,dimension:e.dimension,handleTableCellRender:e.handleTableCellRender})]})},b0=function(e){var t,n,i=o.useState(0),r=i[0],a=i[1],l=e.drilldownInputProps,s=l.component,u=l.runQueriesCallback,d=s.attributes.limit,c=a_(),p=c.queryEngineConfig,f=c.numberFormatOptions,m=c.dateTimeFormatOptions,v=c.labelFormat,g=c.textOverride,b=function(e,t,n,i,r){var o,a,l,s,u,d,c,p=(l=[].concat((s=i.map(function(e){return Object.keys(e)}).flat(),e.filter.filter(function(e){return e.every(function(e){return!s.includes(e.field)})}))),tu(l,[].concat(i).map(function(e){var t,i=Object.keys(e)[0];return{field:i,op:"=",value:e[i],function:(null==(t=n.find(function(e){return e.field===i}))?void 0:t.function)||"none"}})));return en({},e,{dimension:[].concat((0,e.dimension).filter(function(e){return"x"!==e.pivot}),[en({},t)]),order:[{field:t.field,direction:"asc",function:t.function||"none"}],filter:p,offset:r})}(s.attributes,eW(e.drilldown[0].subsetDimension,p),e.dimension,e.selectedRow,r);cJ(b,u,null==e?void 0:e.setResults,{localFilters:s.localFilters,globalFilters:e.drilldownInputProps.globalFilters},e.dataSet);var x=o.useMemo(function(){return bK(b.type,e.result,b.exportNames,b.prefixes,b.dateTimeFormat,m,b.numberFormat,f,p.supportedAggregates,p.supportedTimeTruncFunctions,v,g("table_cell.no_value_replacement","No value"),b.measure,b.xMeasure,b.yMeasure,b.dimension)},[b.type,e.result,b.exportNames,b.prefixes,b.dateTimeFormat,m,b.numberFormat,f,p.supportedAggregates,p.supportedTimeTruncFunctions,void 0,b.measure,b.xMeasure,b.yMeasure,b.dimension]),y=o.useMemo(function(){var t;return h.jsx(h.Fragment,{children:e.result&&h.jsx(bW,{offset:r,limit:d,onNext:function(){var e;return a(null!=(e=bb(r,d))?e:0)},onPrevious:function(){var e;return a(null!=(e=bx(r,d))?e:0)},previousDisabled:!((t=null!=r?r:0)>0),nextDisabled:!bg({offset:null!=r?r:0,limit:null!=d?d:0,total:x?x.content.length:0}),textOverride:g})})},[r,d,null==(t=e.result)?void 0:t.content.length,a,null==x?void 0:x.content.length]),w=0===r&&(null!=(n=null==x?void 0:x.content.length)?n:0)<(null!=d?d:0),C=null==e?void 0:e.tableRowProps.row.length;return rb(e.result)?h.jsx(bP.TR,{level:2,children:h.jsx(bP.TH,{colSpan:C,children:h.jsx(dr,{minHeight:30})})}):rx(e.result)?h.jsx(fM,{}):h.jsxs(o.Fragment,{children:[(null==x?void 0:x.content)&&h.jsx(o.Fragment,{children:(null==x?void 0:x.content.length)>0?h.jsx(o.Fragment,{children:null==x?void 0:x.content.map(function(t,n){var i,r,o,a,l,s,u=(i=e.parentFields,l=b1(e.dimension),0===i.length?[{value:t[0].value,displayValue:t[0].displayValue}]:i.map(function(e,i){if(0===i)return t[0];var r=x.fields.findIndex(function(t){return t.datumKey===e.datumKey}),o=l.find(function(t){return t.field===e.id});return -1!==r?x.content[n][r]:o?{value:null,displayValue:""}:{value:null,displayValue:g("table_parent.no_value_replacement","No value")}}));return h.jsx(bP.TR,{level:2,odd:n%2!=0,even:n%2==0,children:h.jsx(bJ,en({},null==e?void 0:e.tableRowProps,{row:u,rowIndex:n,drilldownAction:void 0,level:2,subsetTableRepresentation:x,onViewClick:function(t,n,i,r){e.handleOnChange(t,n,i,h$(e.parentFields,p,u,x.fields,e.drilldown[0]),b2(null==e?void 0:e.drilldown[0],p,e.selectedRow,x.content[t][0].value,u[n].value,r,e.dimension))},renderTableCell:function(t,n,i,r){e.handleTableCellRender(t,n,i,h$(e.parentFields,p,u,x.fields,e.drilldown[0]),b2(null==e?void 0:e.drilldown[0],p,e.selectedRow,x.content[t][0].value,u[n].value,r,e.dimension))}}))},"table_row_level_2_"+n)})}):h.jsx(bP.TR,{level:2,children:h.jsx(bP.TH,{colSpan:C,children:"No Results"})})}),!w&&h.jsx(bP.TR,{level:2,children:h.jsx(bP.TH,{colSpan:C,children:y})})]})};function b1(e){return e.filter(function(e){return"x"===e.pivot})}function b2(e,t,n,i,r,o,a){var l,s=eW(e.subsetDimension,t),u=(l=[{fieldId:s.field,function:s.function,aggregate:s.function,value:i}],a.forEach(function(e){var t;"x"===e.pivot&&l.push({fieldId:e.field,function:e.function,aggregate:e.function,value:(null==n||null==(t=n.find(function(t){return Object.keys(t)[0]===e.field}))?void 0:t[e.field])||""})}),l);return{value:function(){if(rd(o)){var n=rc(o);return{fieldId:n.fieldId,value:r,function:n.function,aggregate:n.function,datum:o}}var i=eW(e.subsetDimension,t);return{fieldId:i.field,value:r,function:i.function,aggregate:i.function,datum:o}}(),grouping:u}}var b5=function(e,t,n){if(!n)return[];var i=[],r=new Map;return n.fields.forEach(function(e,t){r.set(e.id,t)}),e.forEach(function(e){var o,a,l,s,u=ns(t),d=eV({field:null==(o=e.filters)?void 0:o[0][0].field,function:null!=(a=null==(l=e.filters)?void 0:l[0][0].function)?a:"none"}),c=r.get(d);if(void 0!==c){if(u.some(function(t){var n;return t.field===(null==(n=e.filters)?void 0:n[0][0].field)})||"number"!=typeof(null==(s=e.filters)?void 0:s[0][0].value))i.push(en({},e,{boundaries:void 0}));else{var p=1/0,f=-1/0;n.content.forEach(function(t){var n,i,r=Number(t[c]);isNaN(r)||r_({op:null==(n=e.filters)?void 0:n[0][0].op,value:null==(i=e.filters)?void 0:i[0][0].value},r)&&(p=Math.min(p,r),f=Math.max(f,r))}),1/0!==p&&-1/0!==f&&i.push(en({},e,{boundaries:[p,f]}))}}}),i},b7=function(e){var t,n,i,r,a,l,u,d,c,p,f,m,v,g,b,x={displayTitle:e.displayTitle,displaySubject:e.displaySubject,verified:null==e?void 0:e.protectedByOrganisation,library:null!=(c=null==e?void 0:e.library)&&c,localFilters:e.localFilters,setLocalFilters:e.setLocalFilters,dataSet:e.dataSet,componentType:null==e?void 0:e.type,viewId:null!=(p=null==e?void 0:e.viewId)?p:""},y=e.sizing,w=a_(),C=w.labelFormat,j=w.textOverride,S=(t=JSON.stringify(e),n=o.useRef(null),r=(i=o.useState(0))[0],a=i[1],o.useEffect(function(){var e=s.throttle(function(){a(n.current?n.current.offsetWidth:0)},100);return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e),e.cancel()}},[t]),[n,r]),F=S[0],T=(l=S[1],u=((null==(f=e.result)?void 0:f.fields)||[]).length,(d=l/u)<200&&(d=200),d>300&&(d=300),d),_=k.useDragLayer(function(e){if(e.isDragging()){var t,n=e.getItem(),i=e.getDifferenceFromInitialOffset();if(null!==i&&n)return(t={})[null==n?void 0:n.fieldKey]=(null==n?void 0:n.width)+(null==i?void 0:i.x),t}}),I=function(t){var n;return null==e?void 0:e.onSizingUpdate(en({},y,((n={})[t.fieldKey]={width:t.width},n)))},A=o.useState(null),D=A[0],O=A[1],E=o.useMemo(function(){return bK(e.type,e.result,e.exportNames,e.prefixes,e.dateTimeFormat,e.dateTimeFormatOptions,e.numberFormat,e.numberFormatOptions,e.supportedAggregates,e.supportedTimeTruncFunctions,C,j("table.no_value_replacement","No value"),e.measure,e.xMeasure,e.yMeasure,null==e?void 0:e.dimension,null==e?void 0:e.viewId)},[e.measure,e.xMeasure,e.yMeasure,e.result,e.dateTimeFormat,e.numberFormat,e.prefixes,e.dateTimeFormatOptions,e.numberFormatOptions,e.supportedAggregates,e.supportedTimeTruncFunctions,null==e?void 0:e.dimension]),L=(null!=(m=e.result)&&m.content?null==(v=e.result)?void 0:v.content.length:0)>(E?E.content.length:0),P=o.useMemo(function(){var t,n,i,r;return h.jsx(h.Fragment,{children:e.result&&!L&&h.jsx(bW,{offset:null==e?void 0:e.offset,limit:null==e?void 0:e.limit,onNext:null==e?void 0:e.onNext,onPrevious:null==e?void 0:e.onPrevious,previousDisabled:!((r=null!=(t=e.offset)?t:0)>0),nextDisabled:!bg({offset:null!=(n=e.offset)?n:0,limit:null!=(i=e.limit)?i:0,total:E?E.content.length:0}),textOverride:j})})},[e.offset,e.limit,e.onPrevious,e.onNext,null==(g=e.result)?void 0:g.content.length,L]),R=o.useMemo(function(){var t,n,i,r,o,a,l,s,u;return E?(n=e.dimension,i=e.supportedAggregates,r=e.supportedTimeTruncFunctions,(u=E.fields.filter(function(e){return!!br(n,e.id,{supportedAggregates:i,supportedTimeTruncFunctions:r,supportedTransformationFunctions:void 0})})).length>0?u[u.length-1].id:null):null},[E,e.dimension,e.supportedAggregates,e.supportedTimeTruncFunctions]),N=o.useMemo(function(){var e,t;return E?(t=-1,E.groupTitles&&E.groupTitles.consolidated.forEach(function(e,n){""===e.content&&!0===e.rowGroup&&(t=n)}),t):null},[E]),M=lu();if(null===E)return null;if(ry(e.result))return h.jsx(fq,en({},x,{children:P}));if(!iA(e.type).isRunnable(e))return h.jsx(fN,{title:"Missing parameters",children:hS(e)});if(rb(e.result))return h.jsx(dr,{});if(rx(e.result))return h.jsx(fM,{});var z={fontFamily:null==M?void 0:M.fontFamily},q=function(t,n,i,r,o){return function(e,t,n,i,r,o){var a=e.result,l=e.onViewClick,s=e.type;if(null!=a&&a.fields&&l){var u,d=h1(a,n,t,s,i,e.dimension,o,e.supportedAggregates),c=d.activeFieldsWithValues,p=d.cell;h0(null==e?void 0:e.protectedFields)&&l({viewId:null!=(u=null==e?void 0:e.viewId)?u:"",type:s,fields:c,clicked:p,fieldsV2:r})}}(e,n,t,i,r,o)},B=function(t,n,i,r,o){return function(e,t,n,i,r,o){var a=e.result,l=e.renderTableCell,s=e.type;if(null!=a&&a.fields&&l){var u,d=h1(a,n,t,s,i,e.dimension,o,e.supportedAggregates);return l({viewId:null!=(u=null==e?void 0:e.viewId)?u:"",type:s,cell:d.cell,fields:r})}}(e,n,t,i,r,o)};return h.jsxs(fr,{queriesAreChanging:e.queriesAreChanging,id:e.id,children:[h.jsx(uM,{marginBottom:null!=e&&e.displayTitle&&(null==e?void 0:e.displayTitle.length)>0?"0.4rem":void 0,children:h.jsx(fi,en({},x,{paddingBottom:0}))}),h.jsxs(oc,{disabledFeatures:null!=(b=null==e?void 0:e.library)&&b,children:[h.jsxs(bP.Wrapper,{ref:F,children:[h.jsxs(bP.Head,{children:[E.groupTitles&&h.jsx(bP.HeadTR,{children:E.groupTitles.consolidated.map(function(e,t){var n;return h.jsx(bP.TH,{colSpan:e.colSpan,group:!0,last:t+1===((null==E?void 0:E.groupTitles)&&(null==E||null==(n=E.groupTitles)||null==(n=n.consolidated)?void 0:n.length)),deadSpace:e.rowGroup,lastGroupColumn:t===N,children:e.content},e+"_"+t)})}),h.jsx(bP.HeadTR,{children:E.fields.map(function(t,n){if(t.hidden)return null;var i,r,o,a,l,s,u,d,c,p=e.order.find(function(n){var i=eW(t.id,{supportedAggregates:e.supportedAggregates,supportedTimeTruncFunctions:e.supportedTimeTruncFunctions,supportedTransformationFunctions:void 0});return n.field===i.field&&i.function==n.function}),f=(s=E.groupTitles?E.groupTitles.consolidated:[],d=(u=E.fields.filter(function(e){return bU(e,s)})).length>0?u[u.length-1]:void 0,o=E.fields,a=E.groupTitles?E.groupTitles.consolidated:[],c=(l=o.filter(function(e){return bU(e,a)})).length>0?l[0]:void 0,{isLastGroupColumn:t.id===(null==d?void 0:d.id),isFirstGroupColumn:t.id===(null==c?void 0:c.id)}),m=f.isLastGroupColumn,v=f.isFirstGroupColumn,g=br(null==e?void 0:e.dimension,t.id,{supportedAggregates:e.supportedAggregates,supportedTimeTruncFunctions:e.supportedTimeTruncFunctions,supportedTransformationFunctions:void 0}),b=bQ(t.datumKey,y,T,_),x=!(!E.groupTitles||t.id!==R);return h.jsx(bM,{exportName:t.publicName,onSetExportName:e.onSetExportName,supportedAggregates:e.supportedAggregates,supportedTimeTruncFunctions:e.supportedTimeTruncFunctions,id:e.id,isImpactedColumn:!1,width:b,columnOffset:0,currentOrder:p,onOrderChange:e.onOrderChange,fieldIndex:n,numberFormatOptions:e.numberFormatOptions,currentNumberFormat:bH(t.datumKey,e.numberFormat),onSetNumberFormat:e.onSetNumberFormat,fields:null==E?void 0:E.fields,last:n+1===(null==E?void 0:E.fields.length),scope:g?"row":void 0,onResizedColumn:I,isLastGroupColumn:m||x,isFirstGroupColumn:v},"table_column_"+n)})})]}),h.jsx(bP.Body,{children:E.content.map(function(t,n){return h.jsx(b$,{protectedFields:null==e?void 0:e.protectedFields,dataSet:null==e?void 0:e.dataSet,conditionalFormattingRules:b5(null==e?void 0:e.conditionalFormattingRules,e,e.result),dimension:null==e?void 0:e.dimension,rowIndex:n,row:t,tableRepresentation:E,sizing:y,defaultColumnWidth:T,alternativeColumnSizing:_,handleOnChange:q,handleTableCellRender:B,cellStyles:z,setShowMore:O,drilldown:e.tableDrilldown,drilldownInputProps:null==e?void 0:e.drilldownInputProps,queriesAreChanging:e.queriesAreChanging},n)})})]}),P]}),h.jsx(bq,{open:!!D,onCloseModal:function(){return O(null)},content:D})]})};b7.defaultProps=bv;var b4=function(e){return h.jsx(b7,en({},e))},b3=function(e){var t=e.component,n=t.results,i=t.attributes,r=cJ(i,e.runQueriesCallback,e.setResults,{localFilters:t.localFilters,globalFilters:e.globalFilters},e.dataSet).queriesAreChanging,o=n[0];if(o&&o.fields.length!=i.dimension.length+i.measure.length)return null;var a=i.measure.map(function(e){return eV(e)}),l=i.dimension.map(function(e){return eV({function:e.function,field:e.field})});return s.every(null==o?void 0:o.fields,function(e){return l.includes(e.id)||a.includes(e.id)})?h.jsx(b4,en({},i,{dataSet:e.dataSet,onSetExportName:function(t,n){var r;e.updateComponentAttributes(en({},i,{exportNames:en({},i.exportNames,((r={})[t]=n,r))}))},id:e.id,localFilters:e.component.localFilters,setLocalFilters:e.setLocalFilters,setParameterUpdate:function(){},result:o,onNext:function(){var t,r,o,a;bg({limit:null!=(t=i.limit)?t:0,offset:null!=(r=i.offset)?r:0,total:null!=(o=null==(a=n[0])?void 0:a.content.length)?o:0})&&e.updateComponentAttributes(en({},i,{offset:bb(i.offset,i.limit)}))},onPrevious:function(){var t,n;(n=null!=(t=i.offset)?t:0)>0&&e.updateComponentAttributes(en({},i,{offset:bx(i.offset,i.limit)}))},queriesAreChanging:r,onOrderChange:function(t){var n=t.fieldId,r=t.function,o=t.direction,a=s.cloneDeep(i.order),l=a.findIndex(function(e){return e.field===n&&e.function==r});null===o?a.splice(l,1):l>-1?a[l].direction=o:a.push({field:n,direction:o,function:r}),e.updateComponentAttributes(en({},i,{order:a}))},numberFormatOptions:e.dashboardBehaviour.numberFormatOptions,dateTimeFormatOptions:e.dashboardBehaviour.dateTimeFormatOptions,onSetNumberFormat:function(t,n){var r=en({},i.numberFormat);n?r[t]=n:delete r[t],e.updateComponentAttributes(en({},i,{numberFormat:r}))},supportedAggregates:e.dashboardBehaviour.queryEngineConfig.supportedAggregates,supportedTimeTruncFunctions:e.dashboardBehaviour.queryEngineConfig.supportedTimeTruncFunctions,library:null==e?void 0:e.library,onViewClick:null==e?void 0:e.onViewClick,renderTableCell:e.renderTableCell,onSizingUpdate:function(t){e.updateComponentAttributes(en({},i,{sizing:t}))},drilldownInputProps:{component:e.component,runQueriesCallback:e.runQueriesCallback,globalFilters:e.globalFilters}})):null},b6=function(e){var t;return e&&0!==e.length?null==(t=e[0])?void 0:t.value:iu.Linear},b8=Object.assign(function(e){var t=e.children,n=e.view,i=e.onWidthChange,r=o.useRef(null),a=o.useState(0),l=a[0],s=a[1];return o.useEffect(function(){var e=new ResizeObserver(function(e){for(var t,n=ed(e);!(t=n()).done;){var r=t.value.contentRect.width;s(r),i(r)}});return r.current&&e.observe(r.current),function(){e.disconnect()}},[]),h.jsx("div",{className:""+b9({fullHeight:n===iu.Linear?"true":"false"}),ref:r,children:h.jsx("div",{children:h.jsxs(uQ,{direction:n!==iu.Linear?"row":"column",height:"100%",gap:n!==iu.Linear?l/16.8:"1.5rem","data-component":"stat-container",alignItems:n!==iu.Linear?"center":"normal",justifyContent:n!==iu.Linear?"flex-start":"normal",children:[n===iu.Circular&&h.jsx(uQ,{justifyContent:"center",alignItems:"center",width:"fit-content",grow:1,gap:l/17,children:t}),n===iu.Linear&&t]})})})},{Individual:o.forwardRef(function(e,t){return h.jsx("div",{ref:t,children:e.children})}),Single:function(e){return h.jsx(la,{placeContent:"center","data-component":"stat-single-container",height:"100%",justifyContent:"normal",children:e.children})}}),b9=rY({width:"100%",variants:{fullHeight:{true:{height:"100%"}}}}),xe=function(e){var t,n=a_(),i=n.numberFormatOptions,r=n.labelFormat,a=e.results[0],l=o.useState(null),s=l[0],u=l[1];if(o.useEffect(function(){if(a&&e.measure){var t=rv(a,eV(e.measure));-1!==t&&u(t)}},[a,e.measure]),null===s)return null;var d,c,p,f,m,v,g=null==a?void 0:a.content[0][s],b=(p=e.measure,f=e.supportedAggregates,rA(null==a||null==(m=a.fields[s])?void 0:m.publicName,null==(v=f[p.function])?void 0:v.publicName)),x=hI(e.formatter,e.prefixes,e.postfixes,e.measure,g,i),y=x.formattedValue,w=x.prefix,C=x.postfix,j=r({fieldId:e.measure.field,func:e.measure.function,type:"progress",defaultLabel:b,viewId:e.viewId});return h.jsx(c9,{valueNow:g,title:null!=j?j:b,displayValueNow:hA(y,w,C),type:e.progressType,color:["#7F7FD5","#86A8E7"],valueMax:null!=(t=e.valueMax)?t:2*g,showValue:!0,showTitle:e.showTitle,radius:e.progressType===iu.Linear?void 0:e.radius})},xt={type:"progress",measure:[],displayTitle:"",displaySubject:"",filter:[],limit:500,conditionalFormattingRules:[],parameters:{},formatter:{},goals:[],progressType:[],postfixes:{},prefixes:{},tags:[]},xn=function(e){var t,n,i,r,a,l,s,u,d,c={displayTitle:e.displayTitle,displaySubject:e.displaySubject,verified:e.protectedByOrganisation,library:null!=(t=e.library)&&t,localFilters:e.localFilters,setLocalFilters:e.setLocalFilters,setParameterUpdate:e.setParameterUpdate,dataSet:e.dataSet,componentType:null==(n=e)?void 0:n.type,measure:null==(i=e)?void 0:i.measure,viewId:null!=(r=null==(a=e)?void 0:a.viewId)?r:""};if(!iA(e.type).isRunnable(e))return h.jsx(fN,{title:"Missing parameters",children:hS({measure:e.measure,order:[],dimension:[]})});var p=void 0!==e.results?e.results[0]:void 0;if(rb(p))return h.jsx(dr,{});if(rx(p))return h.jsx(fM,{});if(ry(p))return h.jsx(fq,en({},c));var f=(e=rE(e,{},xt)).measure.length,m=b6(e.progressType),v=o.useState(0),g=v[0],b=v[1],x=(null!=(l=e.height)?l:350)/2.1;return h.jsxs(fr,{queriesAreChanging:e.queriesAreChanging,overflowScroll:!0,id:e.id,children:[h.jsx(fi,en({},c,{paddingBottom:0})),f>1?h.jsx(uM,{marginY:"0.5rem",children:h.jsx(b8,{noOfValues:f,view:m,onWidthChange:function(e){return b(e)},children:[].concat(e.measure).map(function(t,n){var i,r,o,a,l=e.goals?null==(i=e.goals.filter(function(e){return e.field===eV(t)})[0])?void 0:i.value:null;return h.jsx(b8.Individual,{children:h.jsx(xe,{index:n,supportedAggregates:e.supportedAggregates,measure:t,results:e.results,valueMax:l,showTitle:!0,progressType:m,formatter:null==(r=e)?void 0:r.formatter,postfixes:null==(o=e)?void 0:o.postfixes,prefixes:e.prefixes,radius:m===iu.Linear?void 0:x<g?x:g,viewId:null!=(a=e.viewId)?a:""})},n)})})}):h.jsx(b8.Single,{children:h.jsx(xe,{index:1,supportedAggregates:e.supportedAggregates,measure:e.measure[0],results:e.results,valueMax:e.goals&&e.goals.length>0?e.goals[0].value:null,showTitle:!1,progressType:m,formatter:null==(s=e)?void 0:s.formatter,postfixes:null==(u=e)?void 0:u.postfixes,prefixes:e.prefixes,radius:x+20,viewId:null!=(d=e.viewId)?d:""},1)})]})};xn.defaultProps=xt;var xi=function(e){var t,n=e.component,i=n.results,r=n.attributes,o=cJ(r,e.runQueriesCallback,e.setResults,{localFilters:n.localFilters,globalFilters:e.globalFilters},e.dataSet);return h.jsx(xn,en({},r,{id:e.id,dataSet:e.dataSet,localFilters:e.component.localFilters,setLocalFilters:e.setLocalFilters,setParameterUpdate:null==e?void 0:e.setParameterUpdate,results:i,queriesAreChanging:o.queriesAreChanging,supportedAggregates:e.dashboardBehaviour.queryEngineConfig.supportedAggregates,supportedTimeTruncFunctions:e.dashboardBehaviour.queryEngineConfig.supportedTimeTruncFunctions,supportedTransformationFunctions:null==e||null==(t=e.dashboardBehaviour)||null==(t=t.queryEngineConfig)?void 0:t.supportedTransformationFunctions,library:null==e?void 0:e.library,height:null==e?void 0:e.height}))},xr=function(e){var t=cn().dashboard,n=a_();if(!e.component.attributes)return null;var i=vB(e.component,t.dataSets,n);if(i){if(i instanceof na)return h.jsx(fT,{title:"Data set not available."});if(i instanceof no)return h.jsx(fT,{title:"This view is no-longer supported."});if(i instanceof t7)return h.jsx(fR,{removeMissingField:function(){var t=iA(e.component.attributes.type,{queryEngineConfig:n.queryEngineConfig});if(i instanceof t7){var r=t.removeField(e.component.attributes,i.getMissingFieldId());e.updateComponentAttributes(r)}}})}var r=dM(t,e.component.attributes.dataSetId);if(e.isBeingSizeAdjusted)return h.jsx(fT,{title:h.jsx(dn,{color:"#e5e5e5"})});var o=null!=e&&e.editor||null!=e&&e.library?void 0:e.component.colSpan<=2,a=function(i){(0,iA(i.type,n).validate)(i,t.dataSets),e.updateComponentAttributes(i)},l=e.editor?"editor":e.library?"library":"dashboard";if("scatterChart"==e.component.attributes.type)return h.jsx(ec,{renderOnError:function(e){return h.jsx(fV,{onManualRetry:e})},onError:n.onError,children:h.jsx(vx,{id:e.id,setLocalFilters:e.setLocalFilters,dataSet:r,runQueriesCallback:e.runQueriesCallback,component:e.component,setResults:e.setResults,globalFilters:t.globalFilters,dashboardBehaviour:n,sm:o,library:null==e?void 0:e.library,idPrefix:l})});if(["horizontalBarChart","barChart"].includes(e.component.attributes.type))return h.jsx(ec,{renderOnError:function(e){return h.jsx(fV,{onManualRetry:e})},onError:n.onError,children:h.jsx(vd,{id:e.id,dataSet:r,setLocalFilters:e.setLocalFilters,setParameterUpdate:e.setParameterUpdate,runQueriesCallback:e.runQueriesCallback,updateComponentAttributes:function(e){return a(e)},component:e.component,setResults:e.setResults,globalFilters:t.globalFilters,dashboardBehaviour:n,sm:o,library:null==e?void 0:e.library,onViewClick:n.onViewClick,idPrefix:l})});if("areaChart"==e.component.attributes.type)return h.jsx(ec,{renderOnError:function(e){return h.jsx(fV,{onManualRetry:e})},onError:n.onError,children:h.jsx(hJ,{id:e.id,setLocalFilters:e.setLocalFilters,setParameterUpdate:e.setParameterUpdate,dataSet:r,runQueriesCallback:e.runQueriesCallback,component:e.component,setResults:e.setResults,globalFilters:t.globalFilters,dashboardBehaviour:n,sm:o,library:null==e?void 0:e.library,idPrefix:l})});if("lineChart"==e.component.attributes.type)return h.jsx(ec,{renderOnError:function(e){return h.jsx(fV,{onManualRetry:e})},onError:n.onError,children:h.jsx(vm,{id:e.id,setLocalFilters:e.setLocalFilters,setParameterUpdate:e.setParameterUpdate,dataSet:r,updateComponentAttributes:function(e){return a(e)},runQueriesCallback:e.runQueriesCallback,component:e.component,setResults:e.setResults,globalFilters:t.globalFilters,dashboardBehaviour:n,sm:o,library:null==e?void 0:e.library,idPrefix:l})});if("pieChart"==e.component.attributes.type)return h.jsx(ec,{renderOnError:function(e){return h.jsx(fV,{onManualRetry:e})},onError:n.onError,children:h.jsx(vR,{id:e.id,setLocalFilters:e.setLocalFilters,setParameterUpdate:e.setParameterUpdate,dataSet:r,runQueriesCallback:e.runQueriesCallback,component:e.component,setResults:e.setResults,globalFilters:t.globalFilters,dashboardBehaviour:n,library:null==e?void 0:e.library})});if("singleStat"==e.component.attributes.type)return h.jsx(ec,{renderOnError:function(e){return h.jsx(fV,{onManualRetry:e})},onError:n.onError,children:h.jsx(bh,{id:e.id,setLocalFilters:e.setLocalFilters,setParameterUpdate:e.setParameterUpdate,dataSet:r,runQueriesCallback:e.runQueriesCallback,component:e.component,setResults:e.setResults,globalFilters:t.globalFilters,dashboardBehaviour:n,library:null==e?void 0:e.library,updateComponentAttributes:function(e){return a(e)}})});if("progress"==e.component.attributes.type)return h.jsx(ec,{renderOnError:function(e){return h.jsx(fV,{onManualRetry:e})},onError:n.onError,children:h.jsx(xi,{id:e.id,setLocalFilters:e.setLocalFilters,setParameterUpdate:e.setParameterUpdate,dataSet:r,runQueriesCallback:e.runQueriesCallback,component:e.component,setResults:e.setResults,globalFilters:t.globalFilters,dashboardBehaviour:n,library:null==e?void 0:e.library,height:e.height})});if("dataTable"==e.component.attributes.type||"basicTable"==e.component.attributes.type)return h.jsx(ec,{renderOnError:function(e){return h.jsx(fV,{onManualRetry:e})},onError:n.onError,children:h.jsx(b3,{id:e.id,setLocalFilters:e.setLocalFilters,dataSet:r,runQueriesCallback:e.runQueriesCallback,component:e.component,setResults:e.setResults,globalFilters:t.globalFilters,updateComponentAttributes:function(e){return a(e)},dashboardBehaviour:n,library:null==e?void 0:e.library,onViewClick:n.onViewClick,renderTableCell:n.renderTableCell})});if("comboChart"==e.component.attributes.type)return h.jsx(ec,{renderOnError:function(e){return h.jsx(fV,{onManualRetry:e})},onError:n.onError,children:h.jsx(bp,{id:e.id,setLocalFilters:e.setLocalFilters,dataSet:r,runQueriesCallback:e.runQueriesCallback,component:e.component,setResults:e.setResults,globalFilters:t.globalFilters,dashboardBehaviour:n,sm:o,library:null==e?void 0:e.library,idPrefix:l})});if("custom"==e.component.attributes.type)return h.jsx(ec,{renderOnError:function(e){return h.jsx(fV,{onManualRetry:e})},onError:n.onError,children:h.jsx(bu,{component:e.component})});if("mercatorMap"==e.component.attributes.type)return h.jsx(ec,{renderOnError:function(e){return h.jsx(fV,{onManualRetry:e})},onError:n.onError,children:h.jsx(bm,{id:e.id,setLocalFilters:e.setLocalFilters,onPositionChange:function(t){var i=(0,iA("mercatorMap",n).setAttributes)(e.component.attributes,{position:t});e.updateComponentAttributes(i)},dataSet:r,runQueriesCallback:e.runQueriesCallback,component:e.component,setResults:e.setResults,globalFilters:t.globalFilters,dashboardBehaviour:n})});throw"Unsupported component in generic component wrapper. "+e.component.attributes.type},xo=function(e,t,n){return[].concat(t).flatMap(function(t,i){var r,o=!n.includes(i);return[].concat([].concat(t.fields).filter(function(e){return!te(e)})).filter(function(t){return("dateFilter"==e||"dateAndTimeFilter"==e||"dateTimeFilter"==e?["date_time"]:"numericFilter"===e?["number"]:["number","string","boolean","string[]"]).includes(t.dataType)}).map(function(e){return{label:t.name+" \xb7 "+e.publicName,value:{dataSetId:t.id,field:e},hide:o}})})},xa=function(e,t){var n,i,r,o,a,l,u,d,c,p,f,m,h,v;switch(t.type){case"setSelectedFields":return en({},e,{selectedFieldIndexes:t.selectedFieldIndexes});case"setSelectedDataSets":return a=t.selectedDataSetIndexes,l=e.dataSets,u=e.selectedFieldIndexes,d=xo(e.type,l,e.selectedDataSetIndexes),u=s.remove(u,function(e){var t=iN(l,d[e].value.dataSetId);return a.includes(t[1])}),en({},e,{selectedDataSetIndexes:a,selectedFieldIndexes:u});case"setTitle":return en({},e,{title:t.title});case"setType":return en({},e,{selectedFieldIndexes:[],type:t.filterType});case"setAdvancedOptions":return t.options.inclusiveDate&&"dateFilter"!==e.type&&"dateAndTimeFilter"!==e.type?e:en({},e,{options:t.options});default:return en({},e)}},xl=function(e){return h.jsxs(uQ,{alignItems:"center",children:[h.jsx(cd,{onChange:function(t){e.onChange(t.target.checked)},defaultChecked:e.currentValue||void 0,id:null==e?void 0:e.id}),h.jsx(dx,{htmlFor:null==e?void 0:e.id,margin:0,fontWeight:"inherit",children:e.label})]})},xs={type:"singleSelectFilter",appliesToFields:[],title:"",value:null,requiresValue:!1,managedByConfiguration:!1},xu=function(e){var t,n,i,r,l,u,d,c,p,f,m,v,g,b,x,y=(t=e.current||xs,n=e.dataSets,r=s.uniq([].concat(t.appliesToFields).map(function(e){return n.findIndex(function(t){return t.id==e.dataSetId})})),l=[].concat(t.appliesToFields).flatMap(function(e){var i=xo(t.type,n,r).findIndex(function(t){return t.value.dataSetId==e.dataSetId&&e.fieldId==t.value.field.id});return -1==i?[]:[i]}),u=function(){if("dateFilter"===t.type||"dateAndTimeFilter"===t.type)return{inclusiveDate:t.inclusiveDate}}(),c=(d=a.useReducer(xa,{title:t.title,type:t.type,selectedDataSetIndexes:r,dataSets:n,selectedFieldIndexes:l,options:u}))[0],p=d[1],!function(e){if(null==e)throw TypeError("Cannot destructure "+e)}(c),m=[].concat(n).filter(function(e){return!e.hide}).map(function(e){return{label:e.name,value:e.id}}),v=xo(c.type,n,c.selectedDataSetIndexes),g=[].concat(c.selectedFieldIndexes).map(function(e){var t=v[e].value;return{dataSetId:t.dataSetId,fieldId:t.field.id}}),b={type:c.type,appliesToFields:g,title:c.title,value:null,managedByConfiguration:!1,requiresValue:!1},(null!=(i=c.options)&&i.inclusiveDate&&"dateFilter"===c.type||"dateAndTimeFilter"===c.type)&&(b=en({},b,{inclusiveDate:null==(f=c.options)?void 0:f.inclusiveDate})),{selectedFieldIndexes:c.selectedFieldIndexes,selectedDataSetIndexes:c.selectedDataSetIndexes,dataSetOptions:m,fieldOptions:v,dispatch:p,globalFilter:b}),w=y.fieldOptions,C=y.dataSetOptions,j=y.globalFilter,S=y.dispatch,F=y.selectedDataSetIndexes,k=y.selectedFieldIndexes,T=a_(),_=T.featureToggles,I=T.textOverride;return o.useEffect(function(){1===e.dataSets.length&&S({type:"setSelectedDataSets",selectedDataSetIndexes:[0]})},[]),h.jsxs(h.Fragment,{children:[h.jsx(mj.Header,{title:I("new_filter","New filter"),show:!0}),h.jsxs(mj.Content,{children:[h.jsx(gu,{children:h.jsx(dS,{label:I("title","Title"),id:"title",placeholder:I("title","Title"),value:j.title,onChange:function(e){S({type:"setTitle",title:e.target.value})}})}),C.length>1&&h.jsx(gu,{children:h.jsx(cw,{id:"data-set",label:I("data_sets","Data sets"),placeholder:I("data_sets_placeholder","Which data sets will this filter impact?"),options:C,selected:F,setSelected:function(e){S({type:"setSelectedDataSets",selectedDataSetIndexes:e})},textOverride:I})}),h.jsx(gu,{children:h.jsx(d_,{id:"filter-type",label:I("filter_type","Filter type"),anchorLeft:!0,selected:j.type,onChange:function(e){S({type:"setType",filterType:e})},options:(x=[{label:I("single_select","Single select"),value:"singleSelectFilter"},{label:I("multi_select","Multi select"),value:"multiSelectFilter"},{label:I("numeric_filter","Number comparison"),value:"numericFilter"}],_.showDateFilter&&x.push({label:I("date_picker","Date picker"),value:"dateFilter"}),_.showDateAndTimeFilter&&x.push({label:I("date_time_picker","Date Time picker"),value:"dateAndTimeFilter"}),x),textOverride:I})}),h.jsx(gu,{children:h.jsx(cw,{label:I("fields","Fields"),id:"data-set-fields",placeholder:I("fields_placeholder","Which fields will this filter impact?"),options:w,selected:k,setSelected:function(e){S({type:"setSelectedFields",selectedFieldIndexes:e})},textOverride:I})}),("dateFilter"===j.type||"dateAndTimeFilter"===j.type)&&h.jsx(gu,{children:h.jsx(fZ,{testId:"percentage-advanced-options",showAccordionIcon:!0,title:I("advanced_options","Advanced Options"),children:h.jsx(gu,{as:"fieldset",children:h.jsx(uM,{marginY:5,children:h.jsx(xl,{id:"inclusive-of-current-date",label:I("filter.include_time_range","Include time range"),onChange:function(e){var t;S({type:"setAdvancedOptions",options:t={inclusiveDate:e}})},currentValue:j.inclusiveDate})})})})})]}),h.jsx(mj.Footer,{buttons:"end",children:h.jsxs(cM,{children:[h.jsx(py,{secondary:!0,onClick:function(){return e.onCancel()},children:I("cancel","Cancel")}),h.jsx(py,{onClick:function(){e.setFilter(j)},children:I("confirm","Confirm")})]})})]})},xd=Object.assign(function(){},{svg:function(e){var t,n,i;return rY({display:"block",width:"100%",position:"relative",variants:{alertType:{warning:{fill:null==e||null==(t=e.warning)?void 0:t.iconColor,transform:"rotate(180deg)"},info:{fill:null==e||null==(n=e.info)?void 0:n.iconColor,transform:"rotate(180deg)"},critical:{fill:null==e||null==(i=e.critical)?void 0:i.iconColor}}}})},icon:rY({paddingTop:0,display:"block",height:"1rem",width:"1rem"})}),xc=function(e){var t,n=lu();return h.jsxs("div",{className:lr(""+xd.icon,null==e?void 0:e.className),role:"alert",children:[h.jsx("span",{className:""+oi,children:null==e?void 0:e.title}),h.jsx("svg","critical"===(null==e?void 0:e.type)?{viewBox:"0 0 20 20",className:""+xd.svg(null==n?void 0:n.alerts)({alertType:"critical"}),focusable:"false","aria-hidden":"true",children:h.jsx("path",{d:"M11.768.768a2.5 2.5 0 0 0-3.536 0l-7.464 7.464a2.5 2.5 0 0 0 0 3.536l7.464 7.464a2.5 2.5 0 0 0 3.536 0l7.464-7.464a2.5 2.5 0 0 0 0-3.536l-7.464-7.464zm-2.768 5.232a1 1 0 1 1 2 0v4a1 1 0 1 1-2 0v-4zm2 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"})}:{viewBox:"0 0 20 20",focusable:"false","aria-hidden":"true",className:""+xd.svg(null==n?void 0:n.alerts)({alertType:null!=(t=null==e?void 0:e.type)?t:"info"}),children:h.jsx("path",{fillRule:"evenodd",d:"M10 20c5.514 0 10-4.486 10-10s-4.486-10-10-10-10 4.486-10 10 4.486 10 10 10zm1-6a1 1 0 1 1-2 0v-4a1 1 0 1 1 2 0v4zm-1-9a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"})})]})},xp=function(e){var t=e.filters,n=e.show,i=e.onClose,r=e.source,l=e.onDeleteItem,s=e.onUpdate,u=e.dataSets.filter(function(e){return!e.preAggregated}),d=o.useState([])[1],c=a_(),p=c.textOverride,f=c.mode,m=a.useState(null),v=m[0],g=m[1],b=Array.isArray(t)?[].concat(t).map(function(e,t){var n={},i=e.hidden;0!==e.appliesToFields.length||i||(n={renderRight:function(){return h.jsx(cf,{tooltipContent:function(){return h.jsx(cf.Content,{children:p("warning_no_field_on_this_filter","There are no fields on this Filter. It should be deleted or a field added.")})},children:h.jsx(xc,{title:p("warning_no_field_on_this_filter","There are no fields on this Filter. It should be deleted or a field added."),type:"warning",className:""+xm})})}});var r=i?"This filter is hidden.":p("additional_filters.filter_type_subtext","[[filterType]] for [[numberOfFields]] {{field}} [[listOfFields]]",{field:{count:e.appliesToFields.length,singular:"field",plural:"fields"},listOfFields:eC([].concat(e.appliesToFields).map(function(e){var t=iE(u,e.dataSetId);return t?iP(t,e.fieldId).publicName:""}),!0,p),numberOfFields:e.appliesToFields.length,filterType:tP(e.type,p)});return en({isHiddenFilter:i,preventDelete:e.managedByConfiguration,title:tB(e,u,p),subtext:r},n,{editIcon:!e.managedByConfiguration,onClick:e.managedByConfiguration?function(){}:function(){return g({draftFilter:e,filterIndex:t})}})}).filter(function(e){return!e.isHiddenFilter}):[];return h.jsxs(h.Fragment,{children:[h.jsxs(mj,{width:"xl","data-testid":"manage-filters-modal",isOpen:n,onClose:function(){return i()},children:[h.jsx(mj.Header,{title:""+("global"===r?p("dashboard_filters","Dashboard filters"):p("add_local_filters","Add Local filters")),show:!0}),h.jsx(mj.Content,{children:h.jsx(mu,{mode:f,onDeleteItem:l,newItemBtn:{callToAction:"global"===r?p("new_dashboard_filter","New dashboard filter"):p("new_local_filter","New local filter"),onClick:function(){g({filterIndex:void 0,draftFilter:xs}),d(t)}},items:b})}),h.jsx(mj.Footer,{buttons:"end",children:h.jsx(py,{onClick:function(){return i()},secondary:!0,children:p("close","Close")})})]}),h.jsx(mj,{width:"xl","data-testid":"edit-filter",isOpen:null!=v,onClose:function(){},hideCloseIcon:!0,children:h.jsx(xu,{onCancel:function(){return g(null)},current:(null==v?void 0:v.draftFilter)||null,setFilter:function(e){d(t),s({filter:e,index:null==v?void 0:v.filterIndex}),g(null)},dataSets:u})})]})};function xf(e,t){var n=t.filter,i=t.index,r=[].concat(e);return void 0===i?r=[].concat(r,[n]):i>=0&&i<r.length&&(r[i]=n),r}var xm=rY({paddingTop:0}),xh=function(e){var t=e.component.localFilters||[],n=cn().dashboard,i=dM(n,e.component.attributes.dataSetId);return i?(i.preAggregated&&(i=dM(n,i.preAggregated[0])),h.jsx(xp,{dataSets:[i],filters:t,show:null==e?void 0:e.show,onUpdate:function(n){var i=xf(t,n);null==e||e.setLocalFilters(i)},source:"local",onDeleteItem:function(n){var i=[].concat(t);i.splice(n,1),null==e||e.setLocalFilters(i)},onClose:function(){return null==e?void 0:e.onClose()}})):null},xv=function(e){var t=a_();return h.jsxs(mj,{width:"xl","data-testid":"add-tags-modal",isOpen:e.show,onClose:function(){return e.onClose()},hideCloseIcon:!0,children:[h.jsx(mj.Header,{title:(0,t.textOverride)("tags.modal_title","Add Tags"),show:!0}),e.show&&h.jsx(xg,en({},e))]})},xg=function(e){var t,n,i,r,a=(i=cn().dashboard,r=new Set,i.componentLibrary.forEach(function(e){var t;[].concat(null!=(t=e.attributes.tags)?t:[]).forEach(function(e){r.add(e)})}),Array.from(r)),l=function(){var e,t,n;return t=new Set,n=[],a.forEach(function(e){t.has(e.key)||(t.add(e.key),n.push({value:e.key,label:e.key}))}),n},s=o.useState((t=l(),n=[],t.map(function(t,i){e.component.attributes.tags.map(function(e){t.value===e.key&&n.push(i)})}),n)),u=s[0],d=s[1],c=o.useState(!1),p=c[0],f=c[1],m=o.useState(""),v=m[0],g=m[1],b=a_().textOverride,x=o.useState(l()),y=x[0],w=x[1];return h.jsxs(o.Fragment,{children:[h.jsx(mj.Content,{children:h.jsxs(uQ,{width:"100%",children:[!p&&h.jsx(uM,{flex:1,children:h.jsx(cw,{label:b("tags.select_label","Tags"),setSelected:function(e){d(e)},id:"multi-tenancy-filter-guard",options:y,selected:u,onFreeTextSelected:function(){return f(!0)},freeTextOptions:{label:b("tags.select_add_new_tag","Add New Tag")}})}),p&&h.jsxs(uQ,{flex:1,gap:"0.5rem",children:[h.jsx(uM,{flex:1,width:"100%",children:h.jsx(dS,{type:"string",onChange:function(e){g(e.target.value)},id:"free-text-tag",autoFocus:!0,value:v,label:b("tags.select_new_tag","New Tag")})}),h.jsx(uM,{paddingTop:24,children:h.jsxs(cM,{children:[h.jsx(cf,{tooltipContent:function(){return v.trim()?b("tags.model_add","Add Tag"):b("tags.invalid","Enter value to add")},children:h.jsxs(cq,{onClick:function(){""!==v.trim()&&(y.find(function(e){return e.value===v})||(w(function(e){return[].concat(e,[{value:v,label:v}])}),d(function(e){return[].concat(e,[y.length])})),g(""),f(!1))},disabled:!v.trim(),className:u5({lineHeight:"1.4rem",paddingBottom:0,paddingLeft:"0.75rem",paddingRight:"0.75rem"}),children:[h.jsx("span",{className:""+oi,children:b("tags.model_add","Add Tag")}),h.jsx(le,{})]})}),h.jsx(cf,{tooltipContent:function(){return b("tags.model_add","Cancel")},children:h.jsxs(cq,{className:u5({lineHeight:"1.4rem",paddingBottom:"0.25rem",paddingLeft:"0.75rem",paddingRight:"0.75rem"}),onClick:function(){g(""),f(!1)},children:[h.jsx("span",{className:""+oi,children:b("tags.model_cancel","Cancel")}),h.jsx(aB,{})]})})]})})]})]})}),h.jsx(mj.Footer,{buttons:"end",children:h.jsxs(cM,{children:[h.jsx(cq,{onClick:function(){return null==e?void 0:e.onClose()},secondary:!0,children:b("close","Close")}),h.jsx(cq,{onClick:function(){var t;return t=u.map(function(e){return{key:y[e].value}}),e.setTags(t),void e.onClose()},primary:!0,disabled:p,children:b("update","Update")})]})})]})},xb=function(e){var t=o.useState(!1),n=t[0],i=t[1],r=o.useState(!1),l=r[0],s=r[1],u=o.useState(!1),d=u[0],c=u[1],p=cn().dispatch,f=e.component,m=e.libraryIndex,v=a.useState(!1),g=v[0],b=v[1],x=a_().mode,y=window.disableViewCheck||g,w=lu(),C="admin"===x||!f.attributes.protectedByOrganisation&&"endUser"===x;return h.jsx(o.Fragment,{children:h.jsx(Y,{active:!g,partialVisibility:!0,onChange:b,children:h.jsxs("button",{onClick:function(){return e.onSelectComponent(m)},className:""+ol.selectedComponent(null==w?void 0:w.panels)({componentSelect:m===(null==e?void 0:e.selectedIndex)&&"true"}),"aria-selected":m===(null==e?void 0:e.selectedIndex),children:[h.jsxs(p2,{children:["View ",m+1,f.attributes.displayTitle?": "+f.attributes.displayTitle:""]}),!y&&h.jsx("div",{style:{height:"170px"},children:h.jsx(dr,{})}),y&&h.jsx(vq,{children:h.jsxs(vz,{width:340,height:306,percentage:100,children:[C&&h.jsx(xy,{label:"View "+(m+1)+" Options",onEdit:function(){return null==e?void 0:e.onEdit(m)},onDelete:function(){return null==e?void 0:e.onDelete(m)},onSetParameters:function(){return i(!0)},onAddFilter:function(){return s(!0)},onAddTags:function(){return c(!0)},attributes:f.attributes}),h.jsx(xr,{isBeingSizeAdjusted:!1,id:"library_"+m+"_"+Math.floor(1e11*Math.random()),setLocalFilters:function(){},setParameterUpdate:function(){},runQueriesCallback:e.runQueriesCallback,component:f,setResults:function(t){return e.setResults(t,m)},updateComponentAttributes:e.updateComponentAttributes,library:!0})]})},"select_component_preview_"+m),h.jsx(bl,{setParameterUpdate:function(){},libraryIndex:e.libraryIndex,show:n,component:e.component,onClose:function(){return i(!1)}}),h.jsx(xh,{component:e.component,onClose:function(){return s(!1)},show:l,setLocalFilters:function(e){p({type:"setLocalFilters",localFilters:e,libraryIndex:m})}}),h.jsx(xv,{component:e.component,onClose:function(){return c(!1)},show:d,setTags:function(e){p({type:"updateComponentLibraryAttributes",attributes:en({},f.attributes,{tags:e}),libraryIndex:m})}})]})})})},xx={name:"1v3ivpe",styles:"position:absolute;right:-1.25rem;top:0px"},xy=function(e){var t,n=a.useRef(null),i=a_(),r=iA(null==e?void 0:e.attributes.type),l=o.useState(!1),s=l[0],u=l[1],d=o.useState(void 0),c=d[0],p=d[1],f=[{purpose:"editComponentsOnLibrary",renderIcon:function(){return h.jsx(aG,{})},onClick:function(){return e.onEdit()}},{purpose:"removeComponentFromLibrary",renderIcon:function(){return h.jsx(aH,{purpose:"removeComponentFromDashboard"})},onClick:function(){return e.onDelete()}}];i.featureToggles.parameters&&null!=(t=r.supportedFeatures)&&t.parameters&&"read_write"===i.scope&&f.push({purpose:"parameters",renderIcon:function(){return h.jsx(uQ,{width:20,justifyContent:"center",as:"span",children:h.jsx(aq,{})})},onClick:function(){return e.onSetParameters()}}),"read_write"===i.scope&&i.featureToggles.canAddTags&&f.push({purpose:"addTags",renderIcon:function(){return h.jsx(uQ,{width:20,justifyContent:"center",as:"span",children:h.jsx(a9,{})})},onClick:function(){return e.onAddTags()}}),i.featureToggles.canConfigureLocalFilters&&f.push({purpose:"localFilter",renderIcon:function(){return h.jsx(uQ,{width:20,justifyContent:"center",as:"span",children:h.jsx(aM,{active:!1})})},onClick:function(){return e.onAddFilter()}});var m=lu();return h.jsxs("div",{css:xx,ref:n,children:[h.jsxs("button",{"data-testid":"open-component-options",onClick:function(e){e.stopPropagation(),u(!s),n.current&&p(n.current.getBoundingClientRect())},"data-themeapi":"dashboard.icon",className:f4(null==m?void 0:m.dashboard)+" "+or.button+" open-component-options",children:[h.jsx(p2,{children:null==e?void 0:e.label}),h.jsx(aX,{})]}),s&&h.jsx(uq,{onClose:function(){return u(!1)},position:c,children:h.jsx(vX,{onClose:function(){return u(!1)},cellOptions:f})})]})},xw=function(){},xC=Object.assign(mn,{Cell:f0,Add:ma,Container:ml,Item:Object.assign(function(e){var t,n=e.index,i=e.onOrderChange,r=i&&e.totalItemsCount>1,o=i?f$({id:"re-order-drag-"+e.index,index:e.index,type:"list-view-drag"},e.onOrderChange||xw):[null,null];return h.jsx(uQ,{cursor:r?"ns-resize":void 0,"data-component":"listview-item",role:"listitem",as:null!=(t=e.as)?t:"fieldset",children:h.jsx("div",{onClick:function(){return e.onChange?e.onChange(n):void 0},className:""+u$.itemWrapper,children:h.jsxs(f0,{clickable:!!e.onChange,highlight:e.highlight,ref:o[0],children:[(null==e?void 0:e.title)&&h.jsx(uQ,{"data-component":"list-cell-row-title",paddingY:"0.5rem",paddingRight:"0.5rem",paddingLeft:"0.5rem",className:""+u$.titleContainer()({hasBorder:null!=e&&e.children?"true":"false"}),children:h.jsx(gf.Title,{title:null==e?void 0:e.title})}),(null==e?void 0:e.children)&&h.jsx(uQ,{direction:"row","data-component":"list-cell-row",gap:"0.5rem",paddingY:"0.1rem",paddingRight:"0.5rem",paddingLeft:"0.5rem",alignItems:"center",children:null==e?void 0:e.children})]})})})}),Heading:gd}),xj=function(e){var t=a_().textOverride;return h.jsxs(la,{gap:"0.5rem",children:[h.jsx(xC.Heading,{id:"filter-list",className:u5({padding:"0.5rem",margin:0,borderBottom:"2px solid #ccc"}),children:t("library.filter","Filters")}),h.jsx(uQ,{direction:"column",as:"ul",className:""+or.ulReset,"aria-labelledby":"filter-list",children:e.tags.map(function(t){var n=function(){if(e.selected.length>0&&e.selected.map(function(e){return e.key}).includes(t.key))return t.key}();return h.jsx(uM,{paddingY:"0.25rem",flex:1,as:"li",className:""+or.liReset,children:h.jsx(vY,{type:"checkbox",name:t.key,selected:n,onChange:function(){var n;[].concat(e.selected).includes(t)?e.onTagSelected([].concat(e.selected).filter(function(e){return e!==t})):e.onTagSelected([].concat(e.selected,[t]))},option:{value:t.key,label:t.key}})},t.key)})})]})},xS=function(e){var t=o.useState({tags:[]}),n=t[0],i=t[1],r=a_().textOverride;if(s.isEmpty(e.components))return h.jsx(fT,{title:r("library.no_results","Your library is empty")});var a,l,u,d,c,p=(a=o.useRef(null),o.useEffect(function(){a.current&&a.current.focus()},[]),a),f=uH([].concat(e.components).map(function(e){return{displayTitle:e.attributes.displayTitle,displaySubject:e.attributes.displaySubject,component:e}}),["displayTitle","displaySubject"]),m=f.values,v=f.setSearch;o.useEffect(function(){var t;null==e||e.onSelectComponent(null==(t=m[0])?void 0:t.refIndex)},[f.searchString]);var g=(l=e.components,u=new Set,d=new Set,l.forEach(function(e){var t;[].concat(null!=(t=e.attributes.tags)?t:[]).forEach(function(e){u.has(e.key)||(u.add(e.key),d.add(e))})}),Array.from(d)),b=[].concat(m).filter(function(e){return 0===n.tags.length||n.tags.every(function(t){return e.item.component.attributes.tags.some(function(e){return e.key===t.key})})});return h.jsxs(uQ,{children:[h.jsx(uM,{padding:"1.5rem",flex:4,paddingLeft:g.length>0?0:void 0,children:h.jsxs(la,{gap:"1.5rem",rows:["48px","1fr"],children:[h.jsx(uM,{children:h.jsx(vM,{placeholder:r("library.search_library","Search Library"),onChange:v,inputRef:p})}),h.jsx(uM,{children:h.jsxs(la,{columns:g.length>0?["repeat(2, 1fr)"]:["repeat(3, 1fr)"],gap:"1.5rem",children:[0===b.length&&h.jsx(fT,{title:r("library.search_returned_no_results","Your search returned no results")}),[].concat(b).map(function(t){var n=t.refIndex;return h.jsx(xb,{updateComponentAttributes:e.updateComponentAttributes,setResults:e.setResults,component:t.item.component,libraryIndex:n,onSelectComponent:null==e?void 0:e.onSelectComponent,runQueriesCallback:e.runQueriesCallback,selectedIndex:null==e?void 0:e.selectedIndex,onDelete:null==e?void 0:e.onDelete,onEdit:null==e?void 0:e.onEdit},n)})]})})]})}),g.length>0&&h.jsx(uM,{flex:1,minWidth:304,paddingRight:0,padding:"1.5rem",children:h.jsx(xj,{onTagSelected:function(e){i({tags:e})},tags:g,selected:n.tags})})]})},xF={name:"om9tn6",styles:"margin:auto;height:24rem"},xk={name:"1g0vxgi",styles:"margin-top:0.75rem"},xT=function(){var e=cn(),t=e.dispatch,n=e.dashboard,i=e.trackEvent,r=e.runQueriesCallback,a=o.useState(0),l=a[0],u=a[1],d=o.useState(null),c=d[0],p=d[1],f=a_(),m=f.featureToggles,v=f.textOverride,g=m.canEditComponentLibrary,b=function(){var e=n.componentLibrary.length;i("library.startCreatingNew"),t({type:"startEditingComponent",libraryIndex:e,displayTarget:null,component:null})};return s.isEmpty(n.componentLibrary)?h.jsx("div",{className:u8("modal-empty-library"),css:xF,children:h.jsx(fT,{title:v("library.no_view_in_library","There are no Views in your template library"),renderExtra:function(){return m.canEditComponentLibrary&&h.jsx("div",{css:xk,children:h.jsx(py,{onClick:b,children:v("library.create_new","Create New")})})}})}):h.jsxs(h.Fragment,{children:[h.jsx(x_,{runQueriesCallback:r,onClose:function(){i("library.close"),t({type:"clearModal"})},onSelect:function(){t({type:"pickComponentFromLibraryForDisplay",libraryIndex:l})},updateComponentAttributes:function(e){t({type:"updateComponentLibraryAttributes",attributes:e,libraryIndex:l})},setFocussedComponentResults:function(e){t({type:"setResultsForComponentInLibrary",results:e,libraryIndex:l})},dashboard:n,selectedLibraryIndex:l,setResults:function(e,n){t({type:"setResultsForComponentInLibrary",results:e,libraryIndex:n})},canEditComponentLibrary:g,onEdit:function(e){var r=en({},n.componentLibrary[e]);i("library.startEditing"),t({type:"startEditingComponent",libraryIndex:e,displayTarget:null,component:r})},onDelete:p,onCreate:b,onSelectComponent:function(e){i("library.switchSelectedComponent"),u(e)}}),h.jsx(xI,{open:null!==c,onClose:function(){return p(null)},onDelete:function(){null!==c&&t({type:"removeComponentFromLibrary",libraryIndex:c}),p(null),u(0)}})]})},x_=function(e){var t,n,i=lu(),r=a_().textOverride,a="boolean"==typeof(null==i||null==(t=i.modals)||null==(t=t.options)||null==(t=t.showTitle)?void 0:t.library)&&!(null!=i&&null!=(n=i.modals)&&null!=(n=n.options)&&null!=(n=n.showTitle)&&n.library);return h.jsxs(o.Fragment,{children:[h.jsx(mj.Header,{title:r("library.select_template","Select Template"),"data-component":"library-header",hide:a}),h.jsx(mj.Content,{scrollable:!0,"data-component":"library-content",children:h.jsx(xS,{runQueriesCallback:null==e?void 0:e.runQueriesCallback,setResults:null==e?void 0:e.setResults,components:e.dashboard.componentLibrary,onSelectComponent:function(t){return null==e?void 0:e.onSelectComponent(t)},updateComponentAttributes:null==e?void 0:e.updateComponentAttributes,selectedIndex:null==e?void 0:e.selectedLibraryIndex,onDelete:null==e?void 0:e.onDelete,onEdit:null==e?void 0:e.onEdit})}),h.jsxs(mj.Footer,{buttons:"space-between","data-component":"library-footer",children:[h.jsx(cM,{"data-component":"library-footer-left",children:(null==e?void 0:e.canEditComponentLibrary)&&h.jsx(py,{testId:"library-create-new",onClick:function(){return null==e?void 0:e.onCreate()},secondary:!0,children:r("library.create_new","Create New")})}),h.jsxs(cM,{buttons:"end","data-component":"library-footer-right",children:[h.jsx(py,{secondary:!0,onClick:function(){return null==e?void 0:e.onClose()},children:r("close","Close")}),h.jsx(py,{testId:"add-view-from-library-to-dashboard",onClick:function(){return null==e?void 0:e.onSelect()},children:r("library.add_to_dashboard","Add to Dashboard")})]})]})]})},xI=function(e){return h.jsxs(mj,{width:"sm",isOpen:null==e?void 0:e.open,onClose:function(){return null==e?void 0:e.onClose()},children:[h.jsx(mj.Header,{title:"Are you sure?"}),h.jsx(mj.Content,{children:h.jsx("p",{className:""+or.text,children:"Are you sure you want to delete this component from your library?"})}),h.jsx(mj.Footer,{buttons:"end",children:h.jsxs(cM,{children:[h.jsx(py,{onClick:function(){return null==e?void 0:e.onClose()},secondary:!0,children:"Cancel"}),h.jsx(py,{onClick:function(){return null==e?void 0:e.onDelete()},children:"Delete"})]})})]})},xA=function(){var e=cn(),t=e.dashboard,n=e.dispatch,i=e.trackEvent,r=a.useState(!1),o=r[0],l=r[1];if(!t)return null;var s=function(e){n({type:"setGlobalFilters",globalFilters:e})};return h.jsxs(h.Fragment,{children:[h.jsx(xD,{onChange:function(){i("manageGlobalFilters.open"),l(!0)},disabled:function(e){for(var t,n=ed(e);!(t=n()).done;)for(var i,r=ed(t.value.components);!(i=r()).done;){var o=i.value;if(!("isEmpty"in o)||!0!==o.isEmpty)return!1}return!0}(t.display)}),h.jsx(xp,{dataSets:t.dataSets,filters:t.globalFilters,show:o,onUpdate:function(e){var n=xf(t.globalFilters,e);s(n)},source:"global",onDeleteItem:function(e){var n=[].concat(t.globalFilters);n.splice(e,1),s(n)},onClose:function(){i("manageGlobalFilters.close"),l(!1)}})]})},xD=function(e){var t,n=lu(),i=a_().textOverride;return h.jsx("div",{className:""+xO,"data-themeapi":"filters.filterBy",children:h.jsx(py,{testId:"manage-global-filters-open",onClick:null==e?void 0:e.onChange,disabled:null==e?void 0:e.disabled,className:lr("filter-by-button"),themeOverride:null==n||null==(t=n.filters)?void 0:t.filterBy,secondary:!0,children:h.jsxs(uQ,{as:"span",justifyContent:"center",alignItems:"center",gap:"0.25rem",children:[h.jsx("span",{className:"filter-by-button-icon",children:h.jsx(op,{active:!1})}),h.jsx("span",{className:"filter-by-button-text",children:i("dashboard-filters.call-to-action","Add filter")})]})})})},xO=rY({minWidth:"100px",position:"relative"}),xE=aP(function(e){var t=cn().dashboard,n=a_(),i=n.dateFilterOptions,r=n.featureToggles,a=n.cascadeFilterSelection;return h.jsxs(uQ,{gap:"0.5rem","data-component":"filters",className:""+xR(n.scope),wrap:!0,children:[e.globalFilters.length>0&&h.jsx(o.Fragment,{children:[].concat(e.globalFilters).map(function(n,r){return h.jsx(pX,{shouldAlwaysHaveValue:n.requiresValue,dataSets:t.dataSets,dateFilterOptions:i,filter:en({},n,{optionsFilters:function(e,t,n,i){if(i){var r=e.reduce(function(e,i){if(null!==i.value){if(Array.isArray(i.value)&&0===i.value.length)return e;i.appliesToFields.forEach(function(r){var o=r.dataSetId,a=iE(t,o);e[o]||(e[o]=[]),null!==a&&(e[o]=[].concat(e[o],tM(a,i,n)))})}return e},{});return 0===Object.keys(r).length?void 0:r}}(null==e?void 0:e.globalFilters,t.dataSets,i,a)}),filterIndex:r,onChange:function(t){var n=[].concat(e.globalFilters);n[r]=t,e.setGlobalFilters(n)}},r)})}),r.canManageGlobalFilters&&h.jsx(xA,{})]})},"renderGlobalFiltersViewComponent"),xL=function(e){var t=a_();return h.jsx("div",{className:""+xP(t.scope),"data-component":"global-filters",children:h.jsx(xE,en({},e))})},xP=function(e){return rY("read"===e?{"@media (min-width: 768px)":{display:"flex",gridRow:1,gridColumn:2,gap:16,width:"100%"},"@media (max-width: 767px)":{display:"block"}}:{display:"flex",gridRow:1,gridColumn:2,gap:16,width:"100%"})},xR=function(e){return rY("read"===e?{"@media (min-width: 768px)":{flexDirection:"row"},"@media (max-width: 767px)":{flexDirection:"column"}}:{flexDirection:"row"})},xN=p.object({dataSetId:p.string().required(),fieldId:p.string().required()}),xM=p.array().items(xN).required();function xz(e,t,n,i){var r=e.properties.appliesToFields,o=xM.validate(r).error;if(o&&eR("Validation error for appliesToFields: "+o.message+" ",r),t.forEach(function(i,o){xq(i.appliesToFields,r)&&(n=!0,t[o]=en({},i,e.properties))}),!n)throw eR("No matching filters found for the provided appliesToFields when running updateFilter.",i.updateFilter),Error("No matching filters found for the provided appliesToFields.");return n}function xq(e,t){return e.length===t.length&&e.every(function(e){return t.some(function(t){return t.dataSetId===e.dataSetId&&t.fieldId===e.fieldId})})}var xB,xV,xW,xH,xY,xG,xU,xK,xX=function(e){function t(t,n){var i;return(i=e.call(this,"'Issue with Vizzly State "+n+": '"+t+"'")||this).name="StateValidation",i}return ei(t,e),t}(t5),xQ=function(e,t){var n=[];return e.forEach(function(e){var i=tQ(t,!!e.requiresValue).validate(e),r=i.error,o=i.value;if(r)throw eR("Invalid global filter configuration: "+r.message),r;n.push(o)}),n},xJ=function(){var e=cn(),t=e.dashboard,n=e.dispatch,i=a_(),r=i.queryEngineConfig,o=i.featureToggles.showGlobalFilters;return aF(function(e){var i=function(e,t){var n;if(t.addFilter){var i,r,o=xM.validate(t.addFilter.properties.appliesToFields).error;if(o)throw eR("Validation error for appliesToFields: "+o.message,null==(i=t.addFilter)||null==(i=i.properties)?void 0:i.appliesToFields),Error("Validation error for appliesToFields");if(e.some(function(e){var n,i;return xq(e.appliesToFields,null!=(n=null==(i=t.addFilter)||null==(i=i.properties)?void 0:i.appliesToFields)?n:[])}))throw eR("Filter with matching appliesToFields already exists",t.addFilter),Error("Filter with matching appliesToFields already exists.");e.push(null==(r=t.addFilter)?void 0:r.properties)}if(t.updateFilter&&xz(t.updateFilter,e,!1,t),t.updateFilters)return null==t||null==(n=t.updateFilters)||n.forEach(function(n){xz(n,e,!1,t)}),e;if(t.removeFilter){var a=xM.validate(t.removeFilter).error;if(a)throw eR("Validation error for appliesToFields: "+a.message+" ",t.removeFilter),Error("No matching filters found for the provided appliesToFields.");e=e.filter(function(e){return!(t.removeFilter&&xq(e.appliesToFields,t.removeFilter))})}return eO("Updated global filters",e,t),e}(t.globalFilters,e);try{var o=xQ(i,r);n({type:"setGlobalFilters",globalFilters:o})}catch(a){throw new xX(a,"globalFilters")}}),o?h.jsx(xL,{globalFilters:t.globalFilters,setGlobalFilters:function(e){eO("Setting global filters",e),n({type:"setGlobalFilters",globalFilters:e})},setupAsyncOptionLoader:function(){return et($().mark(function e(){return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw"Not implemented.";case 1:case"end":return e.stop()}},e)}))}}):null},xZ=function(e){return h.jsxs("pre",{css:["position:relative;margin-bottom:0.75rem;user-select:none;border-radius:0.5rem;background-color:rgb(0 0 0 / 0.9);padding:0.75rem;--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity));",e.sm&&{fontSize:"0.75rem",lineHeight:"1rem"},"",""],children:[h.jsx(x$,{content:e.content,copyContent:e.copyContent}),e.children||e.content]})},x$=function(e){var t=fx().addToast,n=o.useState(!1),i=n[0],r=n[1];return h.jsx(bz.Button,{onClick:et($().mark(function n(){return $().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.copyContent){n.next=6;break}return n.next=3,e.copyContent();case 3:n.t0=n.sent,n.next=7;break;case 6:n.t0=e.content;case 7:G(n.t0),t(function(){return h.jsx(fh,{message:"Copied to clipboard"})}),r(!0),setTimeout(function(){return r(!1)},2e3);case 12:case"end":return n.stop()}},n)})),iconStyles:{position:"absolute",top:"0.75rem",right:"1.25rem"},copied:i})},x0={name:"1gok8e8",styles:"margin-bottom:0.5rem"},x1={name:"1mipg0r",styles:"margin-top:0.5rem;border-radius:0.375rem;--tw-bg-opacity:1;background-color:rgb(243 245 249 / var(--tw-bg-opacity));padding-left:0.75rem;padding-right:0.75rem;padding-top:0.25rem;padding-bottom:0.25rem"},x2=function(){var e,t=a_(),n=t.overrideDeveloperInfo,i=t.setOverrideDeveloperInfo;return h.jsx(mj,{width:"xl",isOpen:!!n,onClose:function(){return i(null)},children:h.jsxs("div",{onClick:function(e){e.preventDefault(),e.stopPropagation()},children:[h.jsx(mj.Header,{title:"Replace component"}),h.jsxs(mj.Content,{children:[h.jsx("div",{css:x0,children:h.jsx(xZ,{content:"<Vizzly.Dashboard\n// Rest of dashboard props...\n"+(null==n?void 0:n.overrideKey)+"={CustomComponent}\n/>"})}),h.jsxs("p",{children:["Adding the `",null==n?void 0:n.overrideKey,"` React prop of the Vizzly.Dashboard component, will allow you to render your own component."]}),!s.isEmpty(null==n?void 0:n.componentProps)&&h.jsx("div",{css:x1,children:h.jsx(fJ,{showAccordionIcon:!0,title:"View props",children:h.jsx(xZ,{content:JSON.stringify(null==n?void 0:n.componentProps,function(e,t){if("testId"!=e)return"children"==e?" [ React.JSX ] ":s.isFunction(t)?" [ function ] ":t},2)})})})]})]})})},x5=function(e){var t,n=e.currentReports[0],i=n?n.id:c.v4(),r=a_(),o=r.reportScheduleOptions,a=r.onScheduledReportChange,l=r.textOverride,s=[].concat(o).map(function(e){return{label:e.description,value:e.cron}}),u=(t=et($().mark(function t(n){var r,l;return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(i,n);case 2:r=t.sent,l=(o||[]).find(function(e){return e.cron==n}),e.setComponentReports("saved"==r?[{id:i,type:"scheduled",schedule:n,scheduleDescription:l.description}]:[]);case 5:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)});return h.jsxs(mj,{width:"xl",onClose:e.onClose,isOpen:e.isOpen,children:[h.jsx(mj.Header,{title:l("set_report_schedule","Set report schedule")}),h.jsx(mj.Content,{children:h.jsx(d_,{placeholder:l("select_schedule","Select schedule"),selected:n?n.schedule:null,showClearBtn:!0,onChange:u,options:s})}),h.jsx(mj.Footer,{children:h.jsx(py,{onClick:e.onClose,secondary:!0,children:l("close","Close")})})]})},x7=Object.assign(function(){return null},{emptyCell:function(e){return rY({position:"relative",height:"100%",borderRadius:null==e?void 0:e.borderRadius,borderColor:null==e?void 0:e.borderColor,borderWidth:null==e?void 0:e.borderWidth,borderStyle:null==e?void 0:e.borderStyle})}}),x4=function(e){return h.jsxs("div",{style:{position:"relative",cursor:e.onStartEdit?"pointer":"auto"},onClick:function(){return null==e.onStartEdit?void 0:e.onStartEdit()},children:[!!e.onStartEdit&&h.jsx(uM,{display:"inline",position:"absolute",top:2,right:0,children:h.jsx(x6,{})}),h.jsx(dx,{as:"span",children:e.label}),h.jsx("div",{className:lr(""+or.text,null==e?void 0:e.className),children:e.value})]})},x3={name:"6r56vi",styles:"height:1rem;width:1rem"},x6=function(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",css:x3,viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})},x8=function(e){var t,n,i,r,a,l,u=(null==e?void 0:e.component).attributes,d=cn().dispatch,c=a_().textOverride,p=function(){var t,n={};null==e||null==(t=e.component)||null==(t=t.results[0])||t.fields.forEach(function(e){n[e.id]=e.publicName});var i=[];if("dimension"in u&&u.dimension.map(function(e){var t=n[eV(e)];i.push({value:e,label:t})}),"timeDimension"in u&&null!==u.timeDimension){var r=u.timeDimension,o=n[r?eV({field:null==r?void 0:r.field,function:null==r?void 0:r.truncate}):""];i.push({value:r,label:o})}return i.sort(function(e,t){return e.label.localeCompare(t.label,void 0,{sensitivity:"base"})}),i},f=o.useState(!1),m=f[0],v=f[1],g=o.useState((l=[],u&&"protectedFields"in u&&u.protectedFields&&"measure"in u.protectedFields&&u.protectedFields.measure&&(l=u.protectedFields.measure.map(function(e){return u.measure.findIndex(function(t){return t.field===e.field})})),l)),b=g[0],x=g[1],y=o.useState((i=[],r=p().map(function(e){return e.value}),u&&"protectedFields"in u&&u.protectedFields&&"dimension"in u.protectedFields&&u.protectedFields.dimension&&(i=null!=(t=null==(n=u.protectedFields)||null==(n=n.dimension)?void 0:n.map(function(e){return r.findIndex(function(t){return(null==t?void 0:t.field)===e.field})}))?t:[]),i)),w=y[0],C=y[1],j=function(){null==e||e.onClose()};return h.jsxs(mj,{width:"xl","data-testid":"edit-filter",isOpen:null==e?void 0:e.show,onClose:null==e?void 0:e.onClose,hideCloseIcon:!0,children:[h.jsx(mj.Header,{title:c("click_settings","Click Settings"),show:!0}),h.jsxs(mj.Content,{children:[h.jsx(gu,{children:h.jsx(x4,{label:c("view_id","View Id"),value:h.jsx(gf.Panel,{children:h.jsx(bz,{content:u.viewId,textOverride:c})})})}),"basicTable"!==u.type&&h.jsx(gu,{children:h.jsx(x9,{options:p(),selectedDimension:w,setSelectedDimesion:C})}),h.jsx(gu,{children:h.jsx(ye,{attributes:u,results:null==e||null==(a=e.component)?void 0:a.results,selectedMeasure:b,setSelectedMeasure:x,label:c("protected_measure_select","Protected [[type]]",{type:"basicTable"===u.type?"Columns":"Metrics"})})})]}),h.jsx(mj.Footer,{buttons:"end",children:h.jsxs(cM,{children:[h.jsx(cq,{secondary:!0,onClick:function(){m||(j(),null==e||e.onClose())},disabled:m,children:c("cancel","Cancel")}),h.jsx(cq,{onClick:function(){var t,n;return m?void 0:(v(!0),t={},"measure"in u&&s.isArray(b)&&(t.measure=b.map(function(e){return null==u?void 0:u.measure[e]})),void((n=p()).length>0&&s.isArray(w)&&(t.dimension=w.map(function(e){return n[e]}).map(function(e){return e.value})),"protectedFields"in u&&d({type:"setAttributes",attributes:en({},u,{protectedFields:t}),cellIndex:e.cellIndex,rowIndex:e.rowIndex}),v(!1),j()))},disabled:m,primary:!0,children:c("confirm","Confirm")})]})})]})},x9=function(e){var t=a_();return h.jsx(cw,{label:(0,t.textOverride)("protected-grouping-fields","Protected Grouping Fields"),id:"protected-grouping-fields",setSelected:function(t){return e.setSelectedDimesion(t)},selected:e.selectedDimension,options:e.options})},ye=function(e){var t,n,i,r=e.attributes,o=e.results,a=e.setSelectedMeasure;return h.jsx(cw,{label:e.label,id:"protected-measure-fields",setSelected:function(e){return a(e)},selected:e.selectedMeasure,options:(n={},null==(t=o[0])||t.fields.forEach(function(e){n[e.id]=e.publicName}),i=[],"measure"in r&&r.measure.map(function(e){var t=eV(e);i.push({value:e,label:n[t]+("none"!==e.function?" ("+e.function+")":"")})}),i)})},yt=function(e){var t;return h.jsxs("svg",{height:null!=(t=null==e?void 0:e.height)?t:"535",viewBox:"0 0 1541 535",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("rect",{x:"1068",y:"287",width:"11",height:"9",rx:"2",stroke:null==e?void 0:e.color,strokeOpacity:"0.17",strokeWidth:"4"}),h.jsx("rect",{x:"1152",y:"259",width:"8",height:"4",rx:"2",stroke:null==e?void 0:e.color,strokeOpacity:"0.17",strokeWidth:"4"}),h.jsx("rect",{x:"1232",y:"95",width:"8",height:"4",rx:"2",stroke:null==e?void 0:e.color,strokeOpacity:"0.17",strokeWidth:"4"}),h.jsx("rect",{x:"1348",y:"256",width:"8",height:"4",rx:"2",stroke:null==e?void 0:e.color,strokeOpacity:"0.17",strokeWidth:"4"}),h.jsx("rect",{x:"532",y:"312",width:"16",height:"15",rx:"2",stroke:null==e?void 0:e.color,strokeOpacity:"0.24",strokeWidth:"4"}),h.jsx("rect",{x:"326",y:"197",width:"10",height:"9",rx:"2",stroke:null==e?void 0:e.color,strokeOpacity:"0.13",strokeWidth:"4"}),h.jsx("rect",{x:"508.5",y:"56.5",width:"11",height:"3",rx:"1.5",stroke:null==e?void 0:e.color,strokeOpacity:"0.24",strokeWidth:"3"}),h.jsx("rect",{x:"242",y:"236",width:"10",height:"9",rx:"2",stroke:null==e?void 0:e.color,strokeOpacity:"0.13",strokeWidth:"4"}),h.jsx("rect",{x:"249",y:"302",width:"10",height:"9",rx:"2",stroke:null==e?void 0:e.color,strokeOpacity:"0.13",strokeWidth:"4"}),h.jsx("rect",{x:"203.25",y:"139.25",width:"2.5",height:"10.5",rx:"1.25",stroke:null==e?void 0:e.color,strokeOpacity:"0.22",strokeWidth:"2.5"}),h.jsx("rect",{x:"160",y:"88",width:"16",height:"14",rx:"2",stroke:null==e?void 0:e.color,strokeOpacity:"0.3",strokeWidth:"4"}),h.jsx("rect",{x:"1203",y:"266",width:"120",height:"117",rx:"16",fill:"url(#paint0_linear_7_421)",fillOpacity:"0.2"}),h.jsx("rect",{x:"1205.5",y:"268.5",width:"115",height:"112",rx:"13.5",stroke:null==e?void 0:e.color,strokeOpacity:"0.75",strokeWidth:"5"}),h.jsx("path",{d:"M1205 299H1321",stroke:null==e?void 0:e.color,strokeOpacity:"0.75",strokeWidth:"5"}),h.jsx("rect",{x:"377",y:"177",width:"120",height:"117",rx:"16",fill:"url(#paint1_linear_7_421)"}),h.jsx("rect",{x:"379.5",y:"179.5",width:"115",height:"112",rx:"13.5",stroke:null==e?void 0:e.color,strokeOpacity:"0.75",strokeWidth:"5"}),h.jsx("path",{d:"M379 210H495",stroke:null==e?void 0:e.color,strokeOpacity:"0.75",strokeWidth:"5"}),h.jsxs("g",{clipPath:"url(#clip0_7_421)",children:[h.jsx("rect",{x:"572",y:"61",width:"410",height:"322",rx:"24",fill:"#E7EAF1"}),h.jsx("rect",{x:"730",y:"116",width:"337.5",height:"239.708",rx:"8",fill:"#F3F5F9"}),h.jsx("g",{filter:"url(#filter0_d_7_421)",children:h.jsx("rect",{x:"741.926",y:"127.926",width:"78.7103",height:"66.7845",rx:"5.9629",fill:"white"})}),h.jsxs("g",{filter:"url(#filter1_d_7_421)",children:[h.jsx("rect",{x:"828.984",y:"127.926",width:"78.7103",height:"66.7845",rx:"5.9629",fill:"white"}),h.jsx("rect",{x:"829.484",y:"128.426",width:"77.7103",height:"65.7845",rx:"5.4629",stroke:null==e?void 0:e.color})]}),h.jsx("path",{d:"M888.611 160.721C888.611 172.247 879.267 181.591 867.741 181.591C856.214 181.591 846.871 172.247 846.871 160.721C846.871 149.195 856.214 139.851 867.741 139.851C879.267 139.851 888.611 149.195 888.611 160.721ZM855.661 160.721C855.661 167.393 861.069 172.801 867.741 172.801C874.412 172.801 879.821 167.393 879.821 160.721C879.821 154.049 874.412 148.641 867.741 148.641C861.069 148.641 855.661 154.049 855.661 160.721Z",fill:null==e?void 0:e.color}),h.jsx("path",{d:"M867.741 139.851C862.912 139.851 858.233 141.525 854.501 144.588C850.768 147.651 848.214 151.914 847.272 156.65C846.33 161.385 847.059 166.301 849.335 170.559C851.611 174.817 855.293 178.155 859.754 180.003C864.215 181.85 869.179 182.094 873.799 180.693C878.42 179.291 882.411 176.331 885.094 172.316C887.776 168.301 888.984 163.481 888.51 158.675C888.037 153.87 885.912 149.378 882.498 145.964L876.283 152.179C878.259 154.155 879.489 156.756 879.763 159.537C880.037 162.318 879.338 165.109 877.785 167.432C876.232 169.756 873.922 171.47 871.247 172.281C868.573 173.092 865.7 172.951 863.118 171.882C860.536 170.812 858.405 168.88 857.087 166.416C855.77 163.951 855.348 161.105 855.893 158.364C856.438 155.623 857.917 153.156 860.077 151.383C862.238 149.61 864.946 148.641 867.741 148.641L867.741 139.851Z",fill:null==e?void 0:e.color}),h.jsx("path",{d:"M867.741 139.851C864.309 139.851 860.929 140.697 857.903 142.315C854.876 143.933 852.295 146.273 850.388 149.126C848.481 151.98 847.308 155.26 846.971 158.675C846.635 162.091 847.146 165.537 848.459 168.708C849.773 171.879 851.848 174.677 854.501 176.854C857.154 179.031 860.303 180.521 863.669 181.19C867.035 181.86 870.515 181.689 873.799 180.693C877.083 179.696 880.071 177.905 882.498 175.479L876.283 169.263C874.878 170.668 873.148 171.704 871.247 172.281C869.346 172.858 867.332 172.957 865.384 172.569C863.436 172.181 861.613 171.319 860.077 170.059C858.542 168.799 857.34 167.179 856.58 165.344C855.82 163.509 855.524 161.514 855.719 159.537C855.914 157.56 856.593 155.662 857.697 154.01C858.8 152.358 860.294 151.004 862.046 150.067C863.798 149.131 865.754 148.641 867.741 148.641L867.741 139.851Z",fill:"#D9FFE8"}),h.jsx("g",{filter:"url(#filter2_d_7_421)",children:h.jsx("path",{d:"M916.042 133.889C916.042 130.595 918.712 127.926 922.005 127.926H1048.42C1051.71 127.926 1054.38 130.595 1054.38 133.889V262.687C1054.38 265.98 1051.71 268.65 1048.42 268.65H922.005C918.712 268.65 916.042 265.98 916.042 262.687V133.889Z",fill:"white"})}),h.jsx("path",{d:"M945.857 189.636C946.367 187.861 951.979 177.805 956.061 184.312C960.142 190.819 965.244 198.509 968.816 192.593C972.387 186.678 975.958 169.523 980.55 173.664C985.142 177.805 989.223 172.481 992.795 164.791C996.366 157.101 1000.45 158.284 1004.02 167.157C1007.59 176.03 1009.12 181.946 1015.24 181.946C1021.37 181.946 1023.92 189.044 1028.51 186.678C1032.18 184.785 1038.54 162.622 1041.26 151.777",stroke:null==e?void 0:e.color,strokeWidth:"1.19258",strokeLinecap:"round"}),h.jsx("path",{d:"M956.061 184.312C951.979 177.805 946.367 187.861 945.857 189.636V240.028H1041.26V151.777C1038.54 162.622 1032.18 184.785 1028.51 186.678C1023.92 189.044 1021.37 181.946 1015.24 181.946C1009.12 181.946 1007.59 176.03 1004.02 167.157C1000.45 158.284 996.366 157.101 992.795 164.791C989.223 172.481 985.142 177.805 980.55 173.664C975.958 169.523 972.387 186.678 968.816 192.593C965.244 198.509 960.142 190.819 956.061 184.312Z",fill:"url(#paint2_linear_7_421)"}),h.jsx("g",{filter:"url(#filter3_d_7_421)",children:h.jsx("rect",{x:"741.926",y:"203.058",width:"165.769",height:"66.7845",rx:"5.9629",fill:"white"})}),h.jsx("g",{filter:"url(#filter4_d_7_421)",children:h.jsx("rect",{x:"741.926",y:"278.191",width:"165.769",height:"66.7845",rx:"5.9629",fill:"white"})}),h.jsx("path",{d:"M749.081 337.82C775.101 330.469 781.606 307.366 802.422 306.316C823.238 305.266 832.345 323.118 840.151 319.967C847.957 316.817 862.268 279.012 892.191 300.015",stroke:null==e?void 0:e.color,strokeWidth:"1.19258",strokeLinecap:"round"}),h.jsx("path",{d:"M750.274 337.82C755.048 335.681 765.637 329.264 769.804 320.709C775.012 310.014 784.126 300.389 795.844 314.292C807.561 328.195 817.977 339.959 829.695 312.153C841.413 284.347 851.829 292.903 860.943 305.736C870.057 318.57 877.869 338.889 892.191 318.57",stroke:null==e?void 0:e.color,strokeWidth:"1.19258",strokeLinecap:"round"}),h.jsx("g",{filter:"url(#filter5_d_7_421)",children:h.jsx("rect",{x:"916.042",y:"278.191",width:"138.339",height:"66.7845",rx:"5.9629",fill:"white"})}),h.jsx("path",{d:"M764.015 167.45C763.28 167.45 762.601 167.361 761.978 167.183C761.354 167.005 760.798 166.76 760.308 166.448C759.83 166.136 759.429 165.775 759.106 165.363L760.375 163.86C760.62 164.239 760.937 164.567 761.327 164.845C761.716 165.112 762.156 165.324 762.646 165.48C763.135 165.624 763.636 165.697 764.148 165.697C764.827 165.697 765.362 165.585 765.751 165.363C766.141 165.14 766.335 164.812 766.335 164.378C766.335 164.099 766.224 163.86 766.002 163.66C765.79 163.459 765.417 163.298 764.883 163.176L762.545 162.641C761.922 162.497 761.388 162.296 760.943 162.04C760.497 161.784 760.158 161.473 759.924 161.105C759.702 160.727 759.59 160.293 759.59 159.803C759.59 159.157 759.763 158.584 760.108 158.083C760.464 157.582 760.965 157.182 761.61 156.881C762.267 156.581 763.057 156.43 763.981 156.43C764.95 156.43 765.801 156.597 766.536 156.931C767.27 157.265 767.894 157.76 768.406 158.417L767.204 159.803C766.758 159.235 766.263 158.823 765.718 158.567C765.183 158.3 764.555 158.167 763.831 158.167C763.341 158.167 762.941 158.228 762.629 158.35C762.317 158.462 762.084 158.617 761.928 158.818C761.783 159.018 761.711 159.246 761.711 159.502C761.711 159.703 761.755 159.886 761.844 160.053C761.933 160.209 762.1 160.348 762.345 160.471C762.601 160.593 762.963 160.71 763.43 160.821L765.434 161.272C766.48 161.506 767.232 161.851 767.688 162.307C768.155 162.753 768.389 163.348 768.389 164.094C768.389 164.806 768.205 165.413 767.838 165.914C767.471 166.415 766.953 166.799 766.285 167.066C765.629 167.322 764.872 167.45 764.015 167.45ZM763.23 169.002V154.911H764.783V169.002H763.23ZM771.992 167.466V160.487C771.992 160.231 771.992 159.97 771.992 159.703C772.003 159.424 772.014 159.141 772.025 158.851C771.647 159.196 771.224 159.497 770.756 159.753C770.289 160.009 769.81 160.187 769.321 160.287L769.02 158.35C769.276 158.328 769.56 158.256 769.872 158.133C770.194 158 770.517 157.844 770.84 157.666C771.174 157.477 771.474 157.282 771.742 157.081C772.02 156.87 772.231 156.658 772.376 156.447H774.246V167.466H771.992ZM777.502 164.912C777.947 164.912 778.298 165.034 778.554 165.279C778.821 165.524 778.954 165.852 778.954 166.264C778.954 166.687 778.821 167.021 778.554 167.266C778.298 167.5 777.947 167.617 777.502 167.617C777.057 167.617 776.701 167.5 776.433 167.266C776.177 167.021 776.049 166.687 776.049 166.264C776.049 165.852 776.177 165.524 776.433 165.279C776.701 165.034 777.057 164.912 777.502 164.912ZM778.199 156.447H786.931V158.2C786.007 159.124 785.272 160.076 784.727 161.055C784.182 162.035 783.786 163.053 783.541 164.111C783.308 165.168 783.191 166.287 783.191 167.466H780.904C780.904 166.242 781.054 165.068 781.354 163.944C781.666 162.808 782.139 161.729 782.773 160.705C783.419 159.669 784.237 158.679 785.228 157.733L785.695 158.334H778.199V156.447ZM800.402 156.447V167.466H798.315V161.723L798.431 158.501H798.398L795.343 167.466H793.456L790.417 158.501H790.384L790.501 161.723V167.466H788.414V156.447H791.753L793.74 162.458L794.441 164.945H794.474L795.192 162.474L797.163 156.447H800.402Z",fill:"#374151"}),h.jsx("rect",{x:"749.081",y:"210.214",width:"15.5035",height:"5.9629",rx:"2.38516",fill:"#F3F5F9"}),h.jsx("rect",{x:"749.081",y:"285.346",width:"15.5035",height:"5.9629",rx:"2.38516",fill:"#F3F5F9"}),h.jsx("rect",{x:"923.198",y:"135.081",width:"15.5035",height:"5.9629",rx:"2.38516",fill:"#F3F5F9"}),h.jsx("rect",{x:"923.198",y:"285.346",width:"15.5035",height:"5.9629",rx:"2.38516",fill:"#F3F5F9"}),h.jsx("rect",{x:"923.198",y:"150.585",width:"8.34806",height:"3.57774",rx:"1.78887",fill:"#F3F5F9"}),h.jsx("rect",{x:"923.198",y:"168.474",width:"8.34806",height:"3.57774",rx:"1.78887",fill:"#F3F5F9"}),h.jsx("rect",{x:"923.198",y:"186.362",width:"8.34806",height:"3.57774",rx:"1.78887",fill:"#F3F5F9"}),h.jsx("rect",{x:"923.198",y:"204.251",width:"8.34806",height:"3.57774",rx:"1.78887",fill:"#F3F5F9"}),h.jsx("rect",{x:"923.198",y:"222.14",width:"8.34806",height:"3.57774",rx:"1.78887",fill:"#F3F5F9"}),h.jsx("rect",{x:"923.198",y:"240.028",width:"8.34806",height:"3.57774",rx:"1.78887",fill:"#F3F5F9"}),h.jsx("rect",{x:"941.087",y:"254.339",width:"8.34806",height:"3.57774",rx:"1.78887",fill:"#F3F5F9"}),h.jsx("rect",{x:"964.938",y:"254.339",width:"8.34806",height:"3.57774",rx:"1.78887",fill:"#F3F5F9"}),h.jsx("rect",{x:"769.355",y:"210.214",width:"23.8516",height:"5.9629",rx:"2.38516",fill:"#F3F5F9"}),h.jsx("rect",{x:"769.355",y:"285.346",width:"23.8516",height:"5.9629",rx:"2.38516",fill:"#F3F5F9"}),h.jsx("rect",{x:"943.472",y:"135.081",width:"15.5035",height:"5.9629",rx:"2.38516",fill:"#F3F5F9"}),h.jsx("rect",{x:"943.472",y:"285.346",width:"23.8516",height:"5.9629",rx:"2.38516",fill:"#F3F5F9"}),h.jsx("rect",{x:"970.901",y:"285.346",width:"8.34806",height:"5.9629",rx:"2.38516",fill:"#F3F5F9"}),h.jsx("rect",{x:"797.977",y:"210.214",width:"23.8516",height:"5.9629",rx:"2.38516",fill:"#F3F5F9"}),h.jsx("rect",{x:"752.659",y:"234.065",width:"5.9629",height:"27.4293",rx:"2.38516",fill:null==e?void 0:e.color}),h.jsx("rect",{x:"763.392",y:"229.295",width:"5.9629",height:"32.1996",rx:"2.38516",fill:null==e?void 0:e.color}),h.jsx("rect",{x:"774.125",y:"224.525",width:"5.9629",height:"36.97",rx:"2.38516",fill:null==e?void 0:e.color}),h.jsx("rect",{x:"784.859",y:"235.258",width:"5.9629",height:"26.2367",rx:"2.38516",fill:null==e?void 0:e.color}),h.jsx("rect",{x:"795.592",y:"247.184",width:"5.9629",height:"14.311",rx:"2.38516",fill:null==e?void 0:e.color}),h.jsx("rect",{x:"806.325",y:"241.221",width:"5.9629",height:"20.2739",rx:"2.38516",fill:null==e?void 0:e.color}),h.jsx("rect",{x:"817.058",y:"238.836",width:"5.9629",height:"22.659",rx:"2.38516",fill:null==e?void 0:e.color}),h.jsx("rect",{x:"827.792",y:"244.799",width:"5.9629",height:"16.6961",rx:"2.38516",fill:null==e?void 0:e.color}),h.jsx("rect",{x:"838.525",y:"238.836",width:"5.9629",height:"22.659",rx:"2.38516",fill:null==e?void 0:e.color}),h.jsx("rect",{x:"849.258",y:"229.295",width:"5.9629",height:"32.1996",rx:"2.38516",fill:null==e?void 0:e.color}),h.jsx("rect",{x:"859.991",y:"238.836",width:"5.9629",height:"22.659",rx:"2.38516",fill:null==e?void 0:e.color}),h.jsx("rect",{x:"870.724",y:"231.68",width:"5.9629",height:"29.8145",rx:"2.38516",fill:null==e?void 0:e.color}),h.jsx("rect",{x:"881.458",y:"224.525",width:"5.9629",height:"36.97",rx:"2.38516",fill:null==e?void 0:e.color}),h.jsx("rect",{x:"892.191",y:"224.525",width:"5.9629",height:"36.97",rx:"2.38516",fill:null==e?void 0:e.color}),h.jsx("rect",{x:"923.198",y:"298.465",width:"82.288",height:"3.57774",rx:"1.78887",fill:"#D9FFE8"}),h.jsx("rect",{x:"923.198",y:"313.968",width:"26.2367",height:"3.57774",rx:"1.78887",fill:"#D9FFE8"}),h.jsx("rect",{x:"923.198",y:"329.472",width:"52.4735",height:"3.57774",rx:"1.78887",fill:"#D9FFE8"}),h.jsx("rect",{x:"923.198",y:"304.427",width:"118.065",height:"3.57774",rx:"1.78887",fill:null==e?void 0:e.color}),h.jsx("rect",{x:"923.198",y:"319.931",width:"85.8657",height:"3.57774",rx:"1.78887",fill:null==e?void 0:e.color}),h.jsx("rect",{x:"923.198",y:"335.435",width:"70.3622",height:"3.57774",rx:"1.78887",fill:null==e?void 0:e.color}),h.jsxs("g",{filter:"url(#filter6_d_7_421)",children:[h.jsx("rect",{x:"594",y:"81",width:"155",height:"172",rx:"8",fill:"white"}),h.jsx("rect",{x:"594.5",y:"81.5",width:"154",height:"171",rx:"7.5",stroke:null==e?void 0:e.color})]}),h.jsx("rect",{x:"614",y:"223",width:"116",height:"17",rx:"3",fill:"#F3F5F9"}),h.jsx("rect",{x:"614",y:"103",width:"28",height:"3",rx:"1.5",fill:"#6A788E"}),h.jsx("rect",{x:"614",y:"209",width:"28",height:"3",rx:"1.5",fill:"#6A788E"}),h.jsx("rect",{x:"614",y:"122",width:"115",height:"3",rx:"1.5",fill:"#D9FFE8"}),h.jsx("rect",{x:"614",y:"122",width:"58",height:"3",rx:"1.5",fill:"#151515"}),h.jsx("circle",{cx:"673",cy:"123",r:"6",fill:"#151515"}),h.jsx("rect",{x:"614",y:"153",width:"28",height:"3",rx:"1.5",fill:"#6A788E"}),h.jsx("rect",{x:"614",y:"167",width:"16",height:"16",fill:"#151515"}),h.jsx("rect",{x:"714",y:"167",width:"16",height:"16",fill:"#F3F5F9"}),h.jsx("rect",{x:"639",y:"167",width:"16",height:"16",fill:"#374151"}),h.jsx("rect",{x:"661.5",y:"164.5",width:"21",height:"21",fill:null==e?void 0:e.color,stroke:"#151515"}),h.jsx("rect",{x:"689",y:"167",width:"16",height:"16",fill:"#D9FFE8"}),h.jsx("path",{d:"M674.157 178.471L674.157 178.471L674.159 178.477L689.023 218.322L689.024 218.322C689.212 218.826 689.552 219.258 689.997 219.558C690.443 219.859 690.971 220.013 691.508 219.999C692.045 219.985 692.564 219.803 692.993 219.479C693.422 219.155 693.738 218.706 693.9 218.193L693.902 218.186L697.67 205.899L710.895 218.839C710.896 218.84 710.898 218.841 710.899 218.842C711.381 219.322 712.034 219.591 712.715 219.591C713.397 219.591 714.051 219.32 714.534 218.839L714.537 218.837L718.249 215.115L718.251 215.113C718.731 214.629 719 213.974 719 213.293C719 212.611 718.731 211.956 718.251 211.472L718.245 211.466L718.24 211.461L705.081 198.603L717.11 194.872L717.126 194.867L717.142 194.861C717.649 194.685 718.089 194.355 718.399 193.918C718.71 193.48 718.877 192.957 718.877 192.42C718.877 191.884 718.71 191.36 718.399 190.922C718.091 190.488 717.656 190.16 717.154 189.983L677.486 175.165C677.485 175.164 677.485 175.164 677.485 175.164C677.022 174.991 676.52 174.954 676.038 175.058C675.555 175.162 675.112 175.402 674.762 175.751C674.412 176.099 674.169 176.54 674.062 177.022C673.955 177.504 673.988 178.007 674.157 178.471Z",fill:"black",stroke:"#E7EAF1",strokeWidth:"2"})]}),h.jsx("rect",{x:"217",y:"77",width:"96",height:"99",rx:"16",fill:"url(#paint3_linear_7_421)",fillOpacity:"0.2"}),h.jsx("rect",{x:"219.5",y:"79.5",width:"91",height:"94",rx:"13.5",stroke:null==e?void 0:e.color,strokeOpacity:"0.75",strokeWidth:"5"}),h.jsx("path",{d:"M218.5 104.5H311",stroke:null==e?void 0:e.color,strokeOpacity:"0.75",strokeWidth:"5"}),h.jsx("rect",{x:"1064",y:"69",width:"105",height:"99",rx:"16",fill:"url(#paint4_linear_7_421)",fillOpacity:"0.2"}),h.jsx("rect",{x:"1066.5",y:"71.5",width:"100",height:"94",rx:"13.5",stroke:null==e?void 0:e.color,strokeOpacity:"0.75",strokeWidth:"5"}),h.jsx("rect",{x:"1011",y:"218",width:"15",height:"9",rx:"2",stroke:null==e?void 0:e.color,strokeOpacity:"0.21",strokeWidth:"4"}),h.jsx("rect",{x:"1442",y:"227",width:"19",height:"16",rx:"2",stroke:null==e?void 0:e.color,strokeOpacity:"0.21",strokeWidth:"4"}),h.jsx("rect",{x:"1269",y:"130",width:"15",height:"9",rx:"2",stroke:null==e?void 0:e.color,strokeOpacity:"0.21",strokeWidth:"4"}),h.jsx("rect",{x:"420",y:"111",width:"18",height:"16",rx:"2",stroke:null==e?void 0:e.color,strokeOpacity:"0.28",strokeWidth:"4"}),h.jsx("path",{d:"M1066 97H1167",stroke:null==e?void 0:e.color,strokeOpacity:"0.75",strokeWidth:"5"}),h.jsx("rect",{x:"69",y:"193",width:"73",height:"72",rx:"16",fill:"url(#paint5_linear_7_421)",fillOpacity:"0.2"}),h.jsx("rect",{x:"71.5",y:"195.5",width:"68",height:"67",rx:"13.5",stroke:null==e?void 0:e.color,strokeOpacity:"0.75",strokeWidth:"5"}),h.jsx("path",{d:"M70 213H141",stroke:null==e?void 0:e.color,strokeOpacity:"0.75",strokeWidth:"5"}),h.jsx("rect",{x:"1399",y:"116",width:"73",height:"72",rx:"16",fill:"url(#paint6_linear_7_421)"}),h.jsx("rect",{x:"1401.5",y:"118.5",width:"68",height:"67",rx:"13.5",stroke:null==e?void 0:e.color,strokeOpacity:"0.75",strokeWidth:"5"}),h.jsx("path",{d:"M1400 136H1471",stroke:null==e?void 0:e.color,strokeOpacity:"0.75",strokeWidth:"5"}),h.jsxs("defs",{children:[h.jsxs("filter",{id:"filter0_d_7_421",x:"737.155",y:"123.155",width:"88.2509",height:"76.3251",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[h.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),h.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),h.jsx("feOffset",{}),h.jsx("feGaussianBlur",{stdDeviation:"2.38516"}),h.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),h.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05 0"}),h.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_7_421"}),h.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_7_421",result:"shape"})]}),h.jsxs("filter",{id:"filter1_d_7_421",x:"824.214",y:"123.155",width:"88.2509",height:"76.3251",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[h.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),h.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),h.jsx("feOffset",{}),h.jsx("feGaussianBlur",{stdDeviation:"2.38516"}),h.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),h.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05 0"}),h.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_7_421"}),h.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_7_421",result:"shape"})]}),h.jsxs("filter",{id:"filter2_d_7_421",x:"911.272",y:"123.155",width:"147.88",height:"150.265",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[h.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),h.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),h.jsx("feOffset",{}),h.jsx("feGaussianBlur",{stdDeviation:"2.38516"}),h.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),h.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05 0"}),h.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_7_421"}),h.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_7_421",result:"shape"})]}),h.jsxs("filter",{id:"filter3_d_7_421",x:"737.155",y:"198.288",width:"175.309",height:"76.3251",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[h.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),h.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),h.jsx("feOffset",{}),h.jsx("feGaussianBlur",{stdDeviation:"2.38516"}),h.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),h.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05 0"}),h.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_7_421"}),h.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_7_421",result:"shape"})]}),h.jsxs("filter",{id:"filter4_d_7_421",x:"737.155",y:"273.42",width:"175.309",height:"76.3251",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[h.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),h.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),h.jsx("feOffset",{}),h.jsx("feGaussianBlur",{stdDeviation:"2.38516"}),h.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),h.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05 0"}),h.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_7_421"}),h.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_7_421",result:"shape"})]}),h.jsxs("filter",{id:"filter5_d_7_421",x:"911.272",y:"273.42",width:"147.88",height:"76.3251",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[h.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),h.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),h.jsx("feOffset",{}),h.jsx("feGaussianBlur",{stdDeviation:"2.38516"}),h.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),h.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05 0"}),h.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_7_421"}),h.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_7_421",result:"shape"})]}),h.jsxs("filter",{id:"filter6_d_7_421",x:"580",y:"67",width:"183",height:"200",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[h.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),h.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),h.jsx("feOffset",{}),h.jsx("feGaussianBlur",{stdDeviation:"7"}),h.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),h.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.07 0"}),h.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_7_421"}),h.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_7_421",result:"shape"})]}),h.jsxs("linearGradient",{id:"paint0_linear_7_421",x1:"1206.5",y1:"324",x2:"1319.5",y2:"324",gradientUnits:"userSpaceOnUse",children:[h.jsx("stop",{stopColor:null==e?void 0:e.color,stopOpacity:"0.5"}),h.jsx("stop",{offset:"1",stopColor:null==e?void 0:e.color,stopOpacity:"0"})]}),h.jsxs("linearGradient",{id:"paint1_linear_7_421",x1:"492",y1:"231.5",x2:"380.5",y2:"230.5",gradientUnits:"userSpaceOnUse",children:[h.jsx("stop",{stopColor:null==e?void 0:e.color,stopOpacity:"0.2"}),h.jsx("stop",{offset:"1",stopColor:null==e?void 0:e.color,stopOpacity:"0"})]}),h.jsxs("linearGradient",{id:"paint2_linear_7_421",x1:"993.56",y1:"151.777",x2:"993.56",y2:"240.028",gradientUnits:"userSpaceOnUse",children:[h.jsx("stop",{stopColor:null==e?void 0:e.color,stopOpacity:"0.72"}),h.jsx("stop",{offset:"1",stopColor:null==e?void 0:e.color,stopOpacity:"0"})]}),h.jsxs("linearGradient",{id:"paint3_linear_7_421",x1:"310.5",y1:"126",x2:"219.5",y2:"126",gradientUnits:"userSpaceOnUse",children:[h.jsx("stop",{stopColor:null==e?void 0:e.color,stopOpacity:"0.5"}),h.jsx("stop",{offset:"1",stopColor:null==e?void 0:e.color,stopOpacity:"0"})]}),h.jsxs("linearGradient",{id:"paint4_linear_7_421",x1:"1066.5",y1:"117",x2:"1164",y2:"118",gradientUnits:"userSpaceOnUse",children:[h.jsx("stop",{stopColor:null==e?void 0:e.color,stopOpacity:"0.5"}),h.jsx("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})]}),h.jsxs("linearGradient",{id:"paint5_linear_7_421",x1:"138",y1:"229",x2:"74",y2:"229",gradientUnits:"userSpaceOnUse",children:[h.jsx("stop",{stopColor:null==e?void 0:e.color,stopOpacity:"0.5"}),h.jsx("stop",{offset:"1",stopColor:null==e?void 0:e.color,stopOpacity:"0"})]}),h.jsxs("linearGradient",{id:"paint6_linear_7_421",x1:"1404",y1:"152",x2:"1467.5",y2:"152",gradientUnits:"userSpaceOnUse",children:[h.jsx("stop",{stopColor:null==e?void 0:e.color,stopOpacity:"0.19"}),h.jsx("stop",{offset:"1",stopColor:null==e?void 0:e.color,stopOpacity:"0"})]}),h.jsx("clipPath",{id:"clip0_7_421",children:h.jsx("rect",{x:"572",y:"61",width:"410",height:"322",rx:"24",fill:"white"})})]})]})},yn=function(e){var t;return h.jsxs(uQ,{justifyContent:"center",direction:"column",alignItems:"center",height:"100%","data-component":"empty-state",children:[h.jsx(yt,{height:null!=(t=e.height)?t:160,color:null==e?void 0:e.illustrationColor}),h.jsxs(uQ,{direction:"column",gap:"1rem",alignItems:"center",children:[h.jsx(uM,{className:""+yi,children:null==e?void 0:e.title}),(null==e?void 0:e.children)&&h.jsx(uM,{children:null==e?void 0:e.children})]})]})},yi=rY({fontSize:16,fontWeight:500}),yr=function(e){return h.jsx("div",{className:or.height100+" "+yo,"data-component":"cell-contents","data-vizzlycomponentloaded":e.showComponent?"true":"false",children:e.children})},yo="vizzly-component",ya=function(){return Array.from(document.querySelectorAll('[class*="'+yo+'"]')).map(function(e){return{element:e,isLoaded:"true"===e.getAttribute("data-vizzlycomponentloaded")}})},yl=(xB=et($().mark(function e(t){var n;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:void 0===t&&(t=500),n=function(){return ya().every(function(e){return e.isLoaded})};case 2:if(n()){e.next=7;break}return e.next=5,new Promise(function(e){return setTimeout(e,t)});case 5:e.next=2;break;case 7:return e.abrupt("return",ya());case 8:case"end":return e.stop()}},e)})),function(e){return xB.apply(this,arguments)}),ys=function(e){var t=a_().textOverride,n=fx().addToast;return h.jsxs(mj,{width:"4xl",isOpen:null==e?void 0:e.show,onClose:function(){return null==e?void 0:e.onClose(!1)},children:[h.jsx(mj.Header,{title:t("json_results","Data in raw JSON format"),show:!0}),h.jsx(mj.Content,{children:h.jsx(uM,{maxHeight:"400px",overflowY:"scroll",children:h.jsx("pre",{"data-testid":"raw-results-"+e.rowIndex+"-"+e.cellIndex,children:JSON.stringify(e.results,null,2)})})}),h.jsx(mj.Footer,{buttons:"end",children:h.jsxs(cM,{children:[h.jsx(cq,{secondary:!0,testId:"modal-close-btn",onClick:function(){return null==e?void 0:e.onClose(!1)},children:t("close","Close")}),h.jsx(cq,{primary:!0,testId:"modal-copy-json-results-btn",onClick:function(){var t=G(JSON.stringify(e.results));n(t?function(){return h.jsx(fh,{message:"Copied results"})}:function(){return h.jsx(ff,{message:"Failed to copy results"})})},children:t("copy","Copy")})]})})]})},yu=function(e){var t=a_().textOverride,n=fx().addToast,i=o.useState(!1),r=i[0],a=i[1],l=o.useState(JSON.stringify(e.attributes,null,2)),s=l[0],u=l[1];return h.jsxs(mj,{width:"4xl",isOpen:null==e?void 0:e.show,onClose:function(){return null==e?void 0:e.onClose()},children:[h.jsx(mj.Header,{title:t("json_attributes","Attributes in raw JSON format"),show:!0}),h.jsx(uM,{position:"absolute",top:20,right:20,children:h.jsx("a",{target:"_blank",href:"https://docs.vizzly.co/services/views/"+e.attributes.type,children:h.jsx(w.QuestionMarkCircleIcon,{color:"#000",width:20,height:20})})}),h.jsx(mj.Content,{children:h.jsxs(uM,{maxHeight:"400px",overflowY:"scroll",children:[!r&&h.jsx("pre",{"data-testid":"raw-attributes-"+e.rowIndex+"-"+e.cellIndex,children:JSON.stringify(e.attributes,null,2)}),r&&h.jsx("textarea",{onChange:function(e){return u(e.target.value)},style:{width:"100%",maxWidth:"100%",minHeight:"400px"},children:JSON.stringify(e.attributes,null,2)})]})}),h.jsx(mj.Footer,{buttons:"end",children:h.jsxs(cM,{children:[h.jsx(cq,{secondary:!0,testId:"modal-close-btn",onClick:function(){return null==e?void 0:e.onClose()},children:t("close","Close")}),h.jsx(cq,{secondary:!0,testId:"modal-edit-attributes-btn",onClick:function(){return a(!r)},children:r?"View original":"Edit"}),!r&&h.jsx(cq,{primary:!0,testId:"modal-copy-json-attributes-btn",onClick:function(){var t=G(JSON.stringify(e.attributes));n(t?function(){return h.jsx(fh,{message:"Copied attributes"})}:function(){return h.jsx(ff,{message:"Failed to copy attributes"})})},children:t("copy","Copy")}),r&&h.jsx(cq,{primary:!0,testId:"modal-update-attributes-btn",onClick:function(){try{e.updateComponentAttributes(JSON.parse(s)),n(function(){return h.jsx(fh,{message:"Updated attributes"})}),e.onClose()}catch(t){eR(t),n(function(){return h.jsx(ff,{message:"Failed to update attributes"})})}},children:"Update"})]})})]})},yd=(xV=et($().mark(function e(t,n){var i,r,o,a,l,s,u,d,c;return $().wrap(function(e){for(var p,f,m;;)switch(e.prev=e.next){case 0:if(d=t()){e.next=3;break}throw Error("Target element not found");case 3:return c=en({useCORS:null==(i=null==n||null==(r=n.canvas)?void 0:r.useCORS)||i,logging:null!=(o=null==n||null==(a=n.canvas)?void 0:a.logging)&&o,scale:null!=(l=null==n?void 0:n.resolution)?l:window.devicePixelRatio||1},null==n||null==(s=n.overrides)?void 0:s.canvas),e.next=6,U(d,c);case 6:p=null!=(u=null==n?void 0:n.filename)?u:"download.png",m=void 0,f=e.sent.toDataURL("image/png").replace("image/png","image/octet-stream"),(m=document.createElement("a")).href=f,m.download=p,document.body.appendChild(m),m.click(),document.body.removeChild(m);case 8:case"end":return e.stop()}},e)})),function(e,t){return xV.apply(this,arguments)}),yc=function(e){var t=a_().textOverride;return h.jsxs(mj,{width:"sm",isOpen:null==e?void 0:e.show,onClose:function(){return null==e?void 0:e.onClose(!1)},children:[h.jsx(mj.Header,{title:t("are_you_sure","Are you sure?"),show:!0}),h.jsx(mj.Content,{children:h.jsx(uM,{paddingY:8,children:t("add_view_to_the_library","You are adding a View to the Template Library.")})}),h.jsx(mj.Footer,{buttons:"end",children:h.jsxs(cM,{children:[h.jsx(cq,{testId:"modal-cancel-btn",onClick:function(){return null==e?void 0:e.onClose(!1)},children:t("cancel","Cancel")}),h.jsx(cq,{testId:"modal-confirm-btn",primary:!0,onClick:function(){return null==e?void 0:e.onClose(!0)},children:t("confirm","Confirm")})]})})]})},yp={name:"1g6uwz7",styles:"display:grid;height:100%;width:100%;place-content:center"},yf={name:"1g6uwz7",styles:"display:grid;height:100%;width:100%;place-content:center"},ym={name:"1q8mru7",styles:"margin-left:0.25rem;display:inline-block"},yh=function(e){var t=lu(),n=a_(),i=n.featureToggles,r=n.textOverride,a=i.canUseComponentLibrary,l=i.canCreateStandaloneComponents;return 0===(null==e?void 0:e.rowIndex)&&0===(null==e?void 0:e.cellIndex)&&i.canSeeEmptyState?h.jsx(vq,{vizzlyPrefix:u8("populated-cell"),children:h.jsxs("div",{css:yp,children:[!e.generatingPDF&&h.jsx(v$,{chartLabel:"Row "+((null==e?void 0:e.rowIndex)+1)+" Cell "+((null==e?void 0:e.cellIndex)+1),onRemoveCell:null==e?void 0:e.onRemoveCell}),h.jsx(yn,{title:h.jsx(o.Fragment,{children:r("empty_state_call_to_action","Build a dashboard with your data and delight your customer.")}),illustrationColor:"#43BA73",children:l&&h.jsx(mo,{onChange:e.onCreateNew,size:"small","data-component":"add-adhoc-view",testId:"add-adhoc-view",children:r("add_view_call_to_action","+ Add View")})})]})}):h.jsx("div",{className:lr(u8("empty-cell"),""+x7.emptyCell(null==t?void 0:t.dashboard)),"data-themeapi":"dashboard","data-chipposition":"top.left",children:h.jsxs("div",{css:yf,children:[!e.generatingPDF&&h.jsx(v$,{chartLabel:"Row "+((null==e?void 0:e.rowIndex)+1)+" Cell "+((null==e?void 0:e.cellIndex)+1),onRemoveCell:null==e?void 0:e.onRemoveCell}),h.jsxs(uQ,{gap:"0.5rem",wrap:!0,justifyContent:"center",children:[a&&h.jsx(mo,{onChange:e.onPickFromLibrary,size:"small","data-component":"select-template",testId:"add-view-from-library",className:u8("select-template-button"),children:h.jsxs(uQ,{alignItems:"center",as:"span",children:[h.jsx(aQ,{}),h.jsx("span",{css:ym,children:r("select_template","Select Template")})]})}),l&&h.jsx(mo,{onChange:e.onCreateNew,size:"small","data-component":"add-adhoc-view",testId:"add-adhoc-view",className:u8("add-view-button"),children:r("add_view_call_to_action","+ Add View")})]})]})})},yv=function(e){var t,n,i,r=o.useState(!1),l=r[0],u=r[1],d=o.useState(!1),c=d[0],p=d[1],f=o.useState(!1),m=f[0],v=f[1],g=o.useState(!1),b=g[0],x=g[1],y=o.useState(!1),w=y[0],C=y[1],j=o.useState(!1),S=j[0],F=j[1],T=cn().dispatch,_=a_(),I=_.featureToggles,A=_.developerTools,D=_.reportScheduleOptions,O=_.scope,E=_.textOverride,L=_.mode,P=I.canDownloadComponentData,R=I.canEditComponentsOnDashboard,N=I.canRemoveComponentsFromDashboard,M=!0===A||"object"==typeof A&&A.viewRawResults,z=!0===A||"object"==typeof A&&A.viewRawAttributes,q=a.useState(!1),B=q[0],V=q[1],W=o.useState(!1),H=W[0],G=W[1],U=a.useState(!1),K=U[0],X=U[1],Q=e.generatingPDF||window.disableViewCheck||K,J=!s.isEmpty(D)&&e.hasWebhookSetup,Z=(n=e.rowIndex,i=e.cellIndex,k.useDrag(function(){return{type:"vizzlyMoveComponentPositionDragHandle",item:{rowIndex:n,cellIndex:i},collect:function(e){var t=e.isDragging();return{adjust:e.getDifferenceFromInitialOffset(),isDragging:t}}}})),ee=Z[1],en=Z[2],ei=function(t){T({type:"setLocalFilters",localFilters:t,cellIndex:e.cellIndex,rowIndex:e.rowIndex})},er=function(t){T({type:"setParameterBasedUpdate",payload:t,cellIndex:e.cellIndex,rowIndex:e.rowIndex})},eo=o.useState(!1),ea=eo[0],el=eo[1],es=(t=et($().mark(function t(n){return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("view-as-png"!==n){t.next=5;break}return t.next=3,yd(function(){return document.getElementById(e.id)},{method:"save",filename:"dashboard-"+e.id+".png",page:{}});case 3:t.next=6;break;case 5:e.onDownload(n);case 6:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)});return h.jsxs(h.Fragment,{children:[h.jsx(Y,{active:!K||I.unloadOffScreenViews,partialVisibility:!0,onChange:X,children:h.jsxs(vq,{vizzlyPrefix:u8("populated-cell"),"data-testid":e.testId,ref:en,onHover:el,children:[h.jsx(f3,{dragSource:ee,active:"read_write"===O&&ea,enabled:"read_write"===O,top:yg(e.component.attributes).top,height:yg(e.component.attributes).height}),!e.generatingPDF&&h.jsx(vZ,{canDownloadComponentData:P&&e.componentValidWithDataSet,canEditComponentsOnDashboard:R&&e.componentValidWithDataSet,canRemoveComponentsFromDashboard:N,onEdit:e.onEdit,onRemove:function(){return u(!0)},onDownload:es,canSetupReportSchedule:J,onManageReport:function(){return V(!0)},onClickSettings:function(){return G(!0)},onAddToLibrary:function(){return C(!0)},chartLabel:"Row "+((null==e?void 0:e.rowIndex)+1)+" Cell "+((null==e?void 0:e.cellIndex)+1),component:e.component,onAddFilter:function(){return p(!0)},onSetParameters:function(){return F(!0)},onViewRawJSONResults:function(){return v(!0)},onViewRawAttributes:function(){return x(!0)},canViewRawJSONResults:M,canViewRawViewAttributes:z}),h.jsxs(yr,{showComponent:Q,children:[Q&&h.jsx(xr,{id:e.id,setLocalFilters:ei,setParameterUpdate:er,isBeingSizeAdjusted:e.isBeingSizeAdjusted,runQueriesCallback:e.runQueriesCallback,component:e.component,setResults:e.setResults,updateComponentAttributes:e.updateComponentAttributes,height:e.height}),!Q&&h.jsx(dr,{})]})]})}),J&&h.jsx(x5,{setComponentReports:e.setComponentReports,currentReports:e.component.reports||[],isOpen:B,onClose:function(){return V(!1)}}),H&&h.jsx(x8,{show:H,component:null==e?void 0:e.component,onClose:function(){return G(!1)},cellIndex:e.cellIndex,rowIndex:e.rowIndex}),h.jsx(gL,{message:E("delete_view_from_dashboard_message","This view will be deleted from your dashboard."),onClose:function(t){t&&(null==e||e.onRemove()),u(!1)},show:l}),h.jsx(xh,{component:e.component,onClose:function(){return p(!1)},show:c,setLocalFilters:ei}),h.jsx(bl,{cellIndex:e.cellIndex,setParameterUpdate:er,rowIndex:e.rowIndex,show:S,component:e.component,onClose:function(){return F(!1)}}),h.jsx(ys,{cellIndex:e.cellIndex,rowIndex:e.rowIndex,show:m,results:e.component.results,onClose:function(){return v(!1)}}),h.jsx(yu,{cellIndex:e.cellIndex,rowIndex:e.rowIndex,show:b,attributes:e.component.attributes,onClose:function(){return x(!1)},updateComponentAttributes:function(t){return e.updateComponentAttributes(t)}}),h.jsx(yc,{show:w,onClose:function(t){t&&T({type:"addComponentToLibrary",component:e.component,protectedComponent:"admin"===L}),C(!1)}})]})},yg=function(e){var t=e.displayTitle,n=e.displaySubject,i=t?15:8,r=28;return t&&(r+=13),n&&(r+=13),n&&t&&(r+=4),n&&!t&&(i=14),{top:i,height:r}},yb=function(e,t){if(e){var n=[[].concat(e.fields).map(function(t,n){if(!e.groupTitles)return t.publicName;var i,r=null==(i=e.groupTitles.unconsolidated)||null==(i=i[n])?void 0:i.content;return(r?"["+r+"] ":"")+t.publicName})].concat(e.content),i="";n.forEach(function(e){i+=e.map(function(e){var t,n="object"==typeof e&&"value"in e?null!=(t=e.displayValue)?t:e.value:e;return"number"==typeof n?n:'"'+n+'"'}).join(",")+"\r\n"}),t(i)}else t("Download failed")},yx=function(e){var t=new Blob([e],{type:"text/csv;charset=utf-8"});K.saveAs(t,"download.csv")},yy=(xW=et($().mark(function e(t,n,i,r,o,a,l,u,d,c,p){var f,m,h,v,g,b,x;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===c&&(c=yx),f=s.cloneDeep(o),e.prev=2,"limit"in f&&(f.limit=r),m=new AbortController,h="view-download-type"==t?f:[iW(n,r,"filter"in f?f.filter:[])],e.next=8,cr(h,i,m.signal,d);case 8:rx(g=null==(v=e.sent)?void 0:v[0])||ry(g)||rb(g)||(x=bK((b=s.isArray(h)?h[0]:h).type,g,"exportNames"in f?f.exportNames:void 0,"prefixes"in f&&Array.isArray(f.prefixes)?f.prefixes:void 0,"dateTimeFormat"in f?f.dateTimeFormat:void 0,a,"numberFormat"in f?f.numberFormat:void 0,l,u.supportedAggregates,u.supportedTimeTruncFunctions,p,"",b.measure,b.xMeasure,b.yMeasure,null==b?void 0:b.dimension),yb(x,c)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),eR(e.t0);case 16:case"end":return e.stop()}},e,null,[[2,13]])})),function(e,t,n,i,r,o,a,l,s,u,d){return xW.apply(this,arguments)}),yw=function(e){if(!e.show)return null;var t=e.onClose,n=e.component,i=a.useState(n.displayTitle),r=i[0],o=i[1],l=cn().dispatch,s=a_().textOverride;return h.jsxs(mj,{width:"sm",isOpen:null==e?void 0:e.show,onClose:function(){return t()},children:[h.jsx(mj.Header,{title:s("update_header","Update Header"),show:!0}),h.jsx(mj.Content,{children:h.jsx(gu,{children:h.jsx(dS,{id:"header-title",label:s("header_title","Title"),labelHidden:!0,value:r,onChange:function(e){return o(e.target.value)}})})}),h.jsx(mj.Footer,{buttons:"end",children:h.jsxs(cM,{children:[h.jsx(py,{onClick:function(){return t()},secondary:!0,children:s("cancel","Cancel")}),h.jsx(py,{onClick:function(){var i;return i=en({},n,{displayTitle:r}),l({type:"setHeaderComponent",component:i,cellIndex:e.cellIndex,rowIndex:e.rowIndex}),void t()},children:s("update","Update")})]})})]})},yC=function(e){var t,n,i,r=lu();return h.jsxs(uQ,{justifyContent:"space-between",alignItems:"center",margin:null!=(t=null==e?void 0:e.margin)?t:"0 0 1rem","data-component":"action-section",className:""+yj(null==r?void 0:r.header),"data-themeapi":"header",children:[h.jsx(uM,{children:(null==e?void 0:e.title)&&h.jsxs(uQ,{direction:"column",gap:"0.5rem",children:[h.jsx(uM,{as:null!=(n=e.titleLevel)?n:null==r||null==(i=r.header)||null==(i=i.title)?void 0:i.htmlElement,className:""+yS(null==r?void 0:r.header),"data-themeapi":"header.title",children:null==e?void 0:e.title}),(null==e?void 0:e.subTitle)&&h.jsx("p",{className:""+yF,children:null==e?void 0:e.subTitle})]})}),(null==e?void 0:e.extra)&&h.jsx(uM,{children:null==e?void 0:e.extra})]})},yj=function(e){var t;return rY({borderBottom:null==e?void 0:e.borderBottom,borderTop:null==e?void 0:e.borderTop,background:null==e?void 0:e.background,padding:null!=(t=null==e?void 0:e.padding)?t:"0.5rem 0",textAlign:null==e?void 0:e.textAlign})},yS=function(e){var t,n,i,r,o,a;return rY({lineHeight:null==e||null==(t=e.title)?void 0:t.lineHeight,color:null==e||null==(n=e.title)?void 0:n.color,fontFamily:null==e||null==(i=e.title)?void 0:i.fontFamily,fontSize:null==e||null==(r=e.title)?void 0:r.fontSize,fontWeight:null==e||null==(o=e.title)?void 0:o.fontWeight,margin:null==e||null==(a=e.title)?void 0:a.margin})},yF=rY({margin:0,fontSize:14}),yk=function(e){var t=[],n=a.useState(!1),i=n[0],r=n[1],o=a_(),l=o.featureToggles,s=o.scope;return t.push({purpose:"editComponentsOnDashboard",renderIcon:function(){return h.jsx(v1,{})},onClick:function(){return r(!0)},testId:"edit"}),l.canRemoveComponentsFromDashboard&&t.push({purpose:"removeComponentFromDashboard",renderIcon:function(){return h.jsx(v0,{})},onClick:function(){return e.onRemove()},testId:"remove"}),h.jsxs(uM,{position:"relative",height:"100%",margin:"0 0.1rem 0.5rem 0.1rem",children:[h.jsx(yC,{title:e.component.displayTitle,margin:0}),!e.generatingPDF&&"read_write"===s&&h.jsx(vJ,{cellOptions:t,chartLabel:"Row "+((null==e?void 0:e.rowIndex)+1)+" Cell "+((null==e?void 0:e.cellIndex)+1)}),h.jsx(yw,{show:i,component:e.component,onClose:function(){return r(!1)},rowIndex:e.rowIndex,cellIndex:e.cellIndex})]})},yT=function(e){var t,n,i,r,o,a=e.customView,l=e.component,s=cn().dashboard,u=a_().dateFilterOptions,d=function(){var e=a.Component({attributes:l.attributes,dashboardFilters:t1(s.dataSets,s.globalFilters,u)});return"string"==typeof e?h.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:bd}):e};if(null!=(t=a.options)&&t.raw)return d();var c=null!=(n=null==(i=a.attributes)?void 0:i.displayTitle)?n:"";return h.jsx(vq,{vizzlyPrefix:u8("populated-cell"),children:h.jsxs(fr,{queriesAreChanging:!1,children:[h.jsx(uM,{marginBottom:c&&c.length>0?"0.4rem":void 0,children:h.jsx(fi,{displayTitle:c,paddingBottom:0,displaySubject:null!=(r=null==(o=a.attributes)?void 0:o.displaySubject)?r:"",localFilters:[],viewId:a.id,setLocalFilters:function(){},componentType:"custom",library:!1})}),d()]})})},y_=function(e){var t,n,i,r,o=e.onCreateNew,a=e.onPickFromLibrary,l=e.onRemoveCell,s=e.rowIndex,u=e.cellIndex,d=e.trackEvent,c=a_(),p=c.queryEngineConfig,f=c.dateTimeFormatOptions,m=c.numberFormatOptions,v=c.labelFormat,g=c.customViews,b=cn(),x=b.dispatch,y=b.dashboard,w=b.runQueriesCallback,C=y.display[s].components[u],j=au(C)?"empty":an(C)?"header":"populated",S=null!=y.webhookId,F=k.useDrop(function(){return{accept:an(C)?"_no_junk_please_":"vizzlyMoveComponentPositionDragHandle",drop:function(t,n){eO("dropCell",t),x({type:"swapComponents",positionA:{rowIndex:t.rowIndex,cellIndex:t.cellIndex},positionB:{rowIndex:e.rowIndex,cellIndex:e.cellIndex}})},collect:function(e){return{isOver:e.isOver()}}}}),T=F[0],_=F[1],I=g.find(function(t){return po(t)&&t.rowIndex===e.rowIndex&&t.cellIndex===e.cellIndex});return h.jsxs("div",{ref:_,css:["height:100%;padding:0.5rem;",T.isOver&&{opacity:"0.2"},"",""],children:["populated"==j&&!au(C)&&!an(C)&&!I&&h.jsx(yv,{rowIndex:s,cellIndex:u,id:(t=y.id).slice(-15)+"_"+s+"_"+u,hasWebhookSetup:S,componentValidWithDataSet:!0,generatingPDF:e.generatingPDF,setComponentReports:function(e){x({type:"setComponentReports",rowIndex:s,cellIndex:u,reports:e})},testId:"populated_cell_"+s+"_cell_"+u,isBeingSizeAdjusted:e.isBeingSizeAdjusted,component:C,runQueriesCallback:w,updateComponentAttributes:function(e){x({type:"updateDisplayComponentAttributes",rowIndex:s,cellIndex:u,attributes:e})},height:e.height,setResults:function(e){x({type:"setResultsForComponentInDisplay",rowIndex:s,cellIndex:u,results:e})},onEdit:function(){d("component.startEditing"),x({type:"startEditingComponent",displayTarget:{rowIndex:s,cellIndex:u},libraryIndex:null,component:C})},onRemove:function(){d("component.removeFromDisplay"),x({type:"clearCell",rowIndex:s,cellIndex:u})},onDownload:(r=et($().mark(function t(n){var i,r;return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=iE(y.dataSets,C.attributes.dataSetId),r={globalFilters:y.globalFilters,localFilters:C.localFilters},i&&yy(n,i,w,e.maxCSVDownloadLimit,C.attributes,f,m,p,r,void 0,v);case 3:case"end":return t.stop()}},t)})),function(e){return r.apply(this,arguments)})}),I&&po(I)&&h.jsx(yT,{customView:I,component:C}),!I&&"empty"==j&&h.jsx(yh,{onCreateNew:function(){return o(s,u)},onPickFromLibrary:function(){return a(s,u)},onRemoveCell:function(){return l(s,u)},cellIndex:u,rowIndex:s,generatingPDF:e.generatingPDF}),"header"==j&&an(C)&&h.jsx(yk,{component:C,onRemove:function(){return l(s,u)},rowIndex:s,cellIndex:u,generatingPDF:e.generatingPDF})]},"row_"+s+"_cell_"+u)},yI=rY(en({width:"100%",cursor:"ns-resize",opacity:0,paddingTop:"0.75rem",paddingBottom:"0.75rem"},rW,{"&:hover":en({},rW,{opacity:100})})),yA=rY({position:"relative",height:"0.25rem",marginLeft:"40%",width:"20%"}),yD=Object.assign(function(){return null},{dragHandle:function(e){return rY({borderRadius:"0.75rem",background:null==e?void 0:e.borderColor})},cellDragHandle:rY(en({cursor:"ew-resize",position:"absolute",right:"-0.75rem",height:"25%",width:"0.25rem",top:"40%"},rW,{"&:hover":en({},rW,{opacity:80}),variants:{highlighted:((xU={}).true={opacity:100},xU.false={opacity:0},xU)}})),rowDragHandle:yA,rowDragHandleContainer:yI}),yO=Object.assign(function(){return null},{tooltip:rY({height:"100%",width:"100%",justifyContent:"center",alignItems:"center",display:"flex"})}),yE=function(e){return null!=e&&e.narrow?h.jsx(cf,{placement:"right-start",tooltipContent:function(){return h.jsx(cf.Content,{children:null==e?void 0:e.tooltipLabel})},className:""+yO.tooltip,classNameTrigger:""+yO.tooltip,children:h.jsx(yL,en({},e))}):h.jsx(yL,en({},e))},yL=function(e){var t;return h.jsxs(mo,{onChange:null==e?void 0:e.onChange,size:"large","data-compenent":null!=(t=null==e?void 0:e["data-component"])?t:"add-cell-button",className:e.className,children:["+ ",h.jsx("span",{style:null!=e&&e.narrow?{display:"none"}:{},children:null==e?void 0:e.label})]})},yP=function(e){var t=lu(),n=k.useDrag(function(){return{type:"rowHeightDragHandle",item:{rowIndex:e.rowIndex,displayRow:e.displayRow},collect:function(e){return{isDragging:e.isDragging()}},end:function(t,n){var i=n.getDifferenceFromInitialOffset();i&&e.onNewHeight(t.rowIndex,t.displayRow.height+i.y)}}},[e.displayRow,e.rowIndex]),i=n[0],r=n[1],a=n[2];return o.useEffect(function(){a((xK||((xK=new Image).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),xK),{captureDraggingState:!1})},[]),i.isDragging?null:h.jsx("div",{ref:r,className:""+yD.rowDragHandleContainer,children:h.jsx("div",{className:" "+yD.dragHandle(null==t?void 0:t.dashboard)+" "+yD.rowDragHandle,"data-themeapi":"dashboard"})})},yR=function(e){var t=lu(),n=k.useDrag(function(){return{type:"componentWidthDragHandle",item:{displayRow:e.displayRow,cellIndex:e.cellIndex,rowIndex:e.rowIndex},collect:function(e){return{isDragging:e.isDragging()}}}},[JSON.stringify(e.displayRow),JSON.stringify(e.rowIndex)]);return n[0].isDragging?null:h.jsx("div",{ref:n[1],className:yD.dragHandle(null==t?void 0:t.dashboard)+" "+yD.cellDragHandle({highlighted:null!=e&&e.rowHighlighted?"true":"false"})})},yN={name:"b7hthc",styles:"position:absolute;top:-0.25rem;display:flex;height:100%;width:100%;transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms"},yM={name:"1vjyfqt",styles:"position:absolute;top:0px;height:0.5rem;width:0.5rem;border-radius:9999px;background-color:rgb(0 0 0 / 0.8)"},yz={name:"ve8olc",styles:"position:absolute;top:0px;height:0.5rem;width:0.5rem;border-radius:9999px;background-color:rgb(0 0 0 / 0.1)"},yq=function(e){var t=k.useDrop(function(){return{accept:"componentWidthDragHandle",drop:function(t,n){var i=n.getDifferenceFromInitialOffset();i&&e.onDrop(t.cellIndex,i.x,t.displayRow)},collect:function(e){return{isOver:e.isOver()}}}}),n=t[0],i=t[1],r=e.dropIndex*e.colWidth+e.colWidth/2+32+"px",o=[0,10,11,12].includes(e.dropIndex);return h.jsx("div",{ref:i,style:{position:"absolute",left:r,width:e.colWidth+"px"},css:yN,children:n.isOver?h.jsx("div",{style:{display:o?"none":"block",left:"calc(50% - 10px)"},css:yM}):h.jsx(h.Fragment,{children:e.active&&h.jsx("div",{style:{display:o?"none":"block",left:"calc(50% - 10px)"},css:yz})})})},yB={name:"1kzq5ms",styles:"height:100%;width:100%"},yV={name:"cvkgqy",styles:"display:inline-block;overflow-y:hidden"},yW={name:"1wv4onu",styles:"position:relative;height:100%"},yH=function(e){var t,n=e.generatingPDF,i=o.useState(!1),r=i[0],a=i[1],l=yU(),u=l[0],d=l[1],c=a_(),p=c.scope,f=c.textOverride,m=c.featureToggles,v=c.customViews,g=cn().dispatch,b=lu(),x=parseFloat(((d-1)/12).toFixed(2)),y=k.useDragLayer(function(t){var n=t.getItem(),i=t.getItemType(),r=t.getDifferenceFromInitialOffset(),o=[].concat(rl(12)).map(function(){return 0}),a=0;if(null!=r){if("rowHeightDragHandle"==i&&e.rowIndex==n.rowIndex)a=r.y;else if("componentWidthDragHandle"==i&&n&&e.rowIndex==n.rowIndex){var l=(n.displayRow.components[n.cellIndex+1].colSpan-2)*x,u=s.max([-(n.displayRow.components[n.cellIndex].colSpan-2)*x,r.x]);u=s.min([l,u]),o[n.cellIndex]=u,o[n.cellIndex+1]=-u}}return{rowHeightAdjustment:a,moveType:i,adjustRowIndex:e.rowIndex,widthAdjustments:o,activeCell:n?n.cellIndex:null,activeRow:n?n.rowIndex:null,isDraggingComponentWidth:"componentWidthDragHandle"==i}}),w=y.rowHeightAdjustment,C=y.widthAdjustments,j=y.activeCell,S=y.activeRow,F=y.moveType,T=y.isDraggingComponentWidth,_=o.useRef(null),I=o.useState(),A=I[0],D=I[1];o.useEffect(function(){_.current&&D(_.current.offsetWidth)},[]);var O=e.displayRow.components.some(function(e){return an(e)}),E=w+(O?52:e.displayRow.height),L=v.find(function(e){var t;return po(e)&&(null==(t=e.options)?void 0:t.disableAddCell)});return h.jsx("div",{ref:_,onMouseOver:function(){return a(!0)},onMouseLeave:function(){return a(!1)},onFocus:function(){return a(!0)},onBlur:function(){return a(!1)},className:u5({position:"relative"}),children:h.jsxs(la,{columns:e.columns,"data-component":"panel-row",marginBottom:O?void 0:26,children:[!e.hideAddCellColumn&&h.jsxs(uQ,{alignItems:"stretch",paddingBottom:10,paddingTop:8,"data-component":"add-cell",direction:"column",gap:"0.5rem",children:[!e.canAddNewCells&&h.jsx("div",{"data-testid":"add-cell-max-reached","data-totalcells":null==b?void 0:b.cellLimit}),!O&&r&&e.canAddNewCells&&!L&&h.jsxs(o.Fragment,{children:[!e.hideAddNewHeaderRow&&h.jsx(uM,{minHeight:32,width:32,children:h.jsx(yE,{onChange:e.onAddHeaderRow,narrow:!0,tooltipLabel:f("add_header_tooltip","Add Header Row"),label:f("add_header","Add Header"),"data-component":"add-header-row",className:u8("add-header-row")})}),h.jsx(yE,{onChange:e.onAppendCell,narrow:!0,tooltipLabel:f("add_cell_tooltip","Add Cell to Row"),label:f("add_cell","Add Cell"),"data-component":"add-cell-button",className:u8("add-cell-button")})]})]}),h.jsxs("div",{className:""+yG(E,p,e.displayRow.components.length,m.forceMobile),"data-component":"rowContainer",children:[T&&!O&&h.jsx(h.Fragment,{children:rl(12).map(function(t,n){return h.jsx(yq,{onDrop:function(t,i,r){var o=s.cloneDeep(r),a=n+1-s.sumBy([].concat(o.components).splice(0,t),function(e){return e.colSpan}),l=a-[].concat(o.components)[t].colSpan,u=[].concat(o.components).map(function(e){return e.colSpan});u[t]=a,u[t+1]=u[t+1]-l,e.onColSpanChange(u.map(function(e){return{colSpan:e}}))},dropIndex:n,colWidth:x,active:null!=j},n)})}),h.jsx("div",{css:yB,ref:u,children:[].concat(e.displayRow.components).map(function(t,i){var o=i==e.displayRow.components.length-1,a="componentWidthDragHandle"==F&&null!=j&&e.rowIndex==S&&(j==i||j+1==i),l="rowHeightDragHandle"==F&&e.rowIndex==S;return h.jsx("div",{css:yV,className:""+yY(E,x*t.colSpan+(C[i]||0),p,A,m.forceMobile),"data-component":"cell-container",children:h.jsxs("div",{css:yW,style:m.forceMobile&&!m.canRemoveComponentsFromDashboard?{width:"100%"}:{width:"calc(100% - 20px)"},children:[h.jsx(y_,{generatingPDF:n,maxCSVDownloadLimit:e.maxCSVDownloadLimit,isBeingSizeAdjusted:a||l,onCreateNew:e.onCreateNew,onPickFromLibrary:e.onPickFromLibrary,onRemoveCell:e.onRemoveCell,rowIndex:e.rowIndex,cellIndex:i,trackEvent:e.trackEvent,height:E}),!o&&"read_write"===p&&!m.forceMobile&&!O&&h.jsx(yR,{displayRow:e.displayRow,rowIndex:e.rowIndex,cellIndex:i,rowHighlighted:r})]})},"row_"+e.rowIndex+"_cell_"+i)})}),"read_write"===p&&!m.forceMobile&&h.jsx(yP,{onNewHeight:function(e,t){g({type:"setRowHeight",rowIndex:e,height:t})},displayRow:e.displayRow,rowIndex:e.rowIndex})]},"actual_resizable_row_"+e.rowIndex)]})})},yY=function(e,t,n,i,r){var o,a={width:null!=i?i:"100%",height:e};return rY(r?a:"read"===n?((o={})["@media (min-width: 768px)"]={width:t,height:"100%"},o["@media (max-width: 767px)"]=a,o):{width:t,height:"100%"})},yG=function(e,t,n,i){var r,o={height:e*n};return rY(i?o:"read"===t?((r={})["@media (min-width: 768px)"]={height:e},r["@media (max-width: 767px)"]=o,r):{height:e})},yU=function(){var e=o.useRef(null),t=o.useState(0),n=t[0],i=t[1];return o.useEffect(function(){i(e.current?e.current.clientWidth:0);var t=function(){i(e.current?e.current.offsetWidth:0)};return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[e,n]},yK=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="FailedToLoadQueryEngineConfig",n}return ei(t,e),t}(ea(Error)),yX=function(e){function t(t){var n;return(n=e.call(this,"The queryEngineEndpoint value '"+t+"' is not valid.")||this).invalidEndpoint=void 0,n.name="InvalidQueryEngineEndpoint",n.invalidEndpoint=t,n}return ei(t,e),t}(ea(Error)),yQ=function(e){function t(){var t;return(t=e.call(this,"The queryEngineEndpoint value is not of the correct type. It must be a string or a function.")||this).name="InvalidQueryEngineEndpointType",t}return ei(t,e),t}(ea(Error)),yJ=function e(t){return t.startsWith("/")?e(t.slice(1)):t.endsWith("/")?e(t.slice(0,-1)):t},yZ=function(e,t){var n,i=yJ(e),r=yJ(t),o=e.startsWith("https://")||e.startsWith("http://")||e.startsWith(".")?"":"/";return""==i&&""==r?"/":""==r?""+o+i:""!=i&&""!=r?""+o+i+"/"+r:""+o+r},y$=function(e){var t;return t=et($().mark(function t(n,i,r){var o,a,l,s;return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o={},i&&(o.auth="Bearer "+i),a="",r&&(a="filter="+r.join(",")),t.next=6,e({path:"/api/v2/auth/project/"+n+"/access_token?"+a,method:"get",headers:o});case 6:if(s=(l=t.sent).body,200!=l.status){t.next=11;break}return t.abrupt("return",s.token.token);case 11:return t.abrupt("return",void 0);case 12:case"end":return t.stop()}},t)})),function(e,n,i){return t.apply(this,arguments)}},y0=(xH=et($().mark(function e(t,n){var i;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.dashboardAccessToken){e.next=3;break}return eO("Using dashboard access token for auth header"),e.abrupt("return",{auth:"Bearer "+t.dashboardAccessToken});case 3:if(!t.projectAccessToken){e.next=6;break}return eO("Using project access token for auth header"),e.abrupt("return",{auth:"Bearer "+t.projectAccessToken});case 6:if(!t.apiKey){e.next=11;break}return eO("Using API Key for auth header"),e.abrupt("return",{auth:"Api-Key "+t.apiKey});case 11:if(!n.preFetchProjectAccessTokens||!t.useCookieAuth&&!t.appSessionAuthToken){e.next=24;break}return eO("Fetching project access token from the Vizzly API",n.preFetchProjectAccessTokens.projectId,"Filtering by",n.preFetchProjectAccessTokens.resourceFilters),e.next=15,y$(y1(t))(n.preFetchProjectAccessTokens.projectId,t.appSessionAuthToken,n.preFetchProjectAccessTokens.resourceFilters);case 15:if(!(i=e.sent)){e.next=21;break}return eO("Project access token received."),e.abrupt("return",{auth:"Bearer "+i});case 21:eO("Failed to receive project access token.");case 22:e.next=25;break;case 24:eO("Not pre-fetching project access token.");case 25:return e.abrupt("return",{});case 26:case"end":return e.stop()}},e)})),function(e,t){return xH.apply(this,arguments)}),y1=function(e){var t;return t=et($().mark(function t(n){var i,r,o,a,l,s;return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y0(e,n);case 3:return i=t.sent,r=n.headers||{},o=yZ(e.host,n.path),t.next=8,H(o,{method:n.method,headers:en({"Content-Type":"application/json",Accept:"application/json"},i,r),redirect:"follow",referrerPolicy:"no-referrer",body:n.body?JSON.stringify(n.body):null,signal:n.abortSignal,mode:n.mode||void 0});case 8:return a=t.sent,t.next=11,a.json();case 11:return l=t.sent,eO("HTTP Client Response",{host:e.host,path:n.path,status:a.status,responseId:a.headers.get("X-Request-Id")}),t.abrupt("return",{body:l,status:a.status,headers:a.headers});case 16:if(t.prev=16,t.t0=t.catch(0),null==(s=n.abortSignal)||!s.aborted){t.next=21;break}return console.log("Aborted a request."),t.abrupt("return",{status:500,body:{reason:"Aborted"},headers:null});case 21:throw t.t0;case 22:case"end":return t.stop()}},t,null,[[0,16]])})),function(e){return t.apply(this,arguments)}},y2=function(e){var t;return t=et($().mark(function t(n){var i,r;return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:var o;return i={host:y3(e)},r=en({},n,{headers:en({},n.headers,"string"==typeof e?{}:e.customHeaders?e.customHeaders():{})}),t.abrupt("return",y1(i)(r));case 3:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}},y5=(xY=et($().mark(function e(t){var n,i;return $().wrap(function(e){for(var r;;)switch(e.prev=e.next){case 0:return n=y2(t),e.next=3,n({method:"post",mode:"cors",path:"/api/v1/support",body:{}});case 3:if(200!=(i=e.sent).status){e.next=6;break}return e.abrupt("return","supportedFeatures"in(r=i.body)?r:en({},r,{supportedFeatures:["subquery"]}));case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}},e)})),function(e){return xY.apply(this,arguments)}),y7=function(e){var t="string"==typeof e?e:e.endpoint;return!!t.startsWith("http://")||!!t.startsWith("https://")||!!t.startsWith("/")},y4=(xG=et($().mark(function e(t,n){var i,r;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"in-browser"!==t){e.next=5;break}return e.abrupt("return",av);case 5:if("function"!=typeof t){e.next=14;break}return e.next=8,t();case 8:if(i=e.sent){e.next=11;break}throw new yK("Failed to load query engine config.");case 11:return e.abrupt("return",en({},i));case 14:if(!n){e.next=20;break}if(y7(t)){e.next=17;break}throw new yX(t);case 17:return e.abrupt("return",av);case 20:if(!("string"==typeof t||"object"==typeof t&&"endpoint"in t)){e.next=31;break}if(y7(t)){e.next=23;break}throw new yX(t);case 23:return e.next=25,y5(t);case 25:if(r=e.sent){e.next=28;break}throw new yK("Failed to load query engine config.");case 28:return e.abrupt("return",r);case 31:throw new yQ;case 32:e.next=42;break;case 34:if(e.prev=34,e.t0=e.catch(0),eR(e.t0),!(e.t0 instanceof yX)){e.next=39;break}throw e.t0;case 39:if(!(e.t0 instanceof yQ)){e.next=41;break}throw e.t0;case 41:throw new yK("Failed to load query engine config.");case 42:case"end":return e.stop()}},e,null,[[0,34]])})),function(e,t){return xG.apply(this,arguments)}),y3=function(e){return"string"==typeof e?e:e.endpoint},y6=function(e){var t,n;return h.jsx(uM,{padding:null==e?void 0:e.padding,marginTop:"0.50rem","data-component":null==e?void 0:e["data-component"],marginBottom:"1rem",className:"vizzly-toolbar",children:h.jsxs(uQ,{className:""+y8,children:[h.jsx("span",{className:""+or.srOnly,children:"Vizzly"}),h.jsx("a",{href:e.logo.href,className:""+we,target:null!=(t=null==e||null==(n=e.logo)?void 0:n.target)?t:void 0,children:h.jsx(oB,{})}),(null==e?void 0:e.logo.text)&&h.jsx(uM,{as:"span",paddingTop:2,children:e.logo.text}),h.jsx("span",{className:""+y9,children:"Vizzly Admin Toolbar"}),null==e?void 0:e.children]})})},y8=rY({background:"#E7EAF1",color:"#151515",padding:"0 0.75rem",borderRadius:12,position:"relative",minHeight:40}),y9=rY({display:"flex",color:"rgba(0,0,0,0.8)",gap:"0.5rem",alignItems:"center",fontSize:15,fontFamily:"system-ui, -apple-system",width:"300px",fontWeight:500,paddingLeft:"10px"}),we=rY({display:"flex",gap:"0.5rem",alignItems:"center",fontSize:12,fontWeight:600}),wt=rY({height:30,background:rQ.colors.brand[20],width:1}),wn={background:"transparent",color:rG(0),border:"1px solid transparent",padding:"0.30rem 0.25rem",borderRadius:8,fontFamily:"system-ui, -apple-system","&:hover":{background:"rgba(48, 116, 217, 0.1)",border:"1px solid transparent",color:rQ.colors.brand.base},"&:focus":{background:"rgba(48, 116, 217, 0.1)",border:"1px solid transparent",color:rQ.colors.brand.base},"&:disabled":{background:"transparent",opacity:.5},"&:hover:disabled":{background:"transparent",opacity:.5},fontSize:12,fontWeight:600},wi={name:"1gok8e8",styles:"margin-bottom:0.5rem"},wr={name:"1gok8e8",styles:"margin-bottom:0.5rem"},wo=function(e){var t,n=o.useState("small"),i=n[0],r=n[1],a=cn().dashboard,l=o.useState(!1),s=l[0],u=l[1],d=a_(),c=d.featureToggles,p=d.scope,f=d.mode,m=d.onSave,v=d.queryEngineConfig,g=d.onOpenConfigManagerUi,b=d.disableToolbar,x=dq(a),y=o3(v,"configManagerUi")&&g;o.useEffect(function(){var e,t=new AbortController;return(e=et($().mark(function e(){return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c.disableAutoSave||"endUser"!=f?eO("Auto-save is disabled, so the dashboard will not be saved."):w(t.signal);case 1:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})(),function(){return t.abort("Save unmounted")}},[x&&JSON.stringify({changes:JSON.stringify({display:x.display,componentLibrary:x.componentLibrary,globalFilters:x.globalFilters,customFields:x.customFields})})]);var w=function(e){"read_write"==p&&m(a,e)};if(aF(function(e){e.save&&(eO("Received from VizzlyState, `save()`"),w())}),b)return null;var C=function(){u(!1)};return h.jsxs(h.Fragment,{children:[("admin"==f||y)&&"hidden"!==i&&h.jsx(y6,{"data-component":"admin-tools",logo:{href:"https://docs.vizzly.co/",target:"_blank"},children:h.jsx(uQ,{justifyContent:"end",alignItems:"center",padding:"0.1rem 0",children:h.jsxs(cM,{buttons:"end",children:[y&&h.jsx(py,{testId:"manage-data-sets",secondary:!0,onClick:function(){g()},internal:!0,themeOverride:wn,children:"Config Manager"}),"admin"==f&&h.jsx(py,{secondary:!0,testId:"save-dashboard",onClick:function(){u(!0)},internal:!0,themeOverride:wn,disabled:e.isProgrammaticParent,children:"Save"}),h.jsx("div",{className:""+wt}),h.jsxs(py,{secondary:!0,onClick:function(){return r("hidden")},internal:!0,themeOverride:wn,children:[h.jsx("span",{className:""+or.srOnly,children:"Hide Tools"}),h.jsx(om,{})]})]})})}),h.jsxs(mj,{width:"sm",isOpen:s,onClose:function(){return C()},children:[h.jsx(mj.Header,{title:"Confirm changes?"}),h.jsxs(mj.Content,{children:[h.jsx("p",{css:wi,children:"Are you sure you want to save this dashboard?"}),h.jsx("p",{css:wr,children:"This will save the dashboard that new users will see, and the verified views in the library for new and existing users."})]}),h.jsx(mj.Footer,{buttons:"end",children:h.jsxs(cM,{children:[h.jsx(py,{secondary:!0,onClick:function(){return C()},children:"Cancel"}),h.jsx(py,{testId:"confirm-save",onClick:function(){w(),C()},children:"Save"})]})})]})]})},wa=function(e){var t=cn(),n=t.dashboard,i=t.dispatch,r=a_().dashboardFilters,a=o.useState(0===n.globalFilters.length),l=a[0],u=a[1];return o.useEffect(function(){var e,t,o,a,l,d=(e=n,t=r,o=t(e.dataSets,[]).map(function(e){return en({},e,{managedByConfiguration:!0})}),a=[].concat(e.globalFilters).filter(function(e){return!e.managedByConfiguration}),l=[].concat(t(e.dataSets,a)).filter(function(e){return!tV(o,e)}),e.globalFilters.length==l.length?s.cloneDeep(l):(eP("dashboardFilters function did not return the same number of user-added dashboard filters, so changes made to user-added dashboard filters will be ignored."),s.cloneDeep(e.globalFilters)));i({type:"setGlobalFilters",globalFilters:d}),u(!0)},[]),l?h.jsx(h.Fragment,{children:e.children}):null},wl=o.createContext(void 0),ws=function(){return o.useContext(wl)},wu=Object.assign(function(){return null},{container:rY({position:"relative"}),overlay:rY({position:"absolute",inset:0,zIndex:2}),content:rY({opacity:.5})}),wd=function(e){return null!=e&&e.enabled?h.jsxs("div",{className:""+wu.container,"aria-disabled":"true",children:[h.jsx("div",{className:""+wu.overlay,children:(null==e?void 0:e.message)&&h.jsx(uQ,{justifyContent:"center",alignItems:"center",height:"100%",className:""+wu.overlay,children:h.jsx(uM,{marginX:"3.5rem",children:h.jsx("div",{style:{textAlign:"center"},children:null==e?void 0:e.message})})})}),h.jsx("div",{className:""+wu.content,children:null==e?void 0:e.children})]}):h.jsx(o.Fragment,{children:null==e?void 0:e.children})},wc=["How could I improve this visualisation?","Show me a line chart."],wp=o.createContext({}),wf=function(e){var t,n=o.useState(void 0),i=n[0],r=n[1],a=o.useState(!1),l=a[0],s=a[1],u=(t=et($().mark(function t(){return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s(!0),l||i){t.next=15;break}return t.prev=2,t.next=5,e.fetchSuggestions();case 5:r(t.sent),s(!1),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(2),eR(t.t0),r(wc),s(!1);case 15:case"end":return t.stop()}},t,null,[[2,10]])})),function(){return t.apply(this,arguments)});return h.jsx(wp.Provider,{value:{onAsk:e.onAsk,onAction:e.onAction,suggestions:i,fetchSuggestions:u},children:e.children})},wm=function(){return o.useContext(wp)},wh={name:"firlg",styles:"grid-column:span 2 / span 2"},wv=function(e){return h.jsx("div",{css:wh,children:e.children})},wg=function(e){return h.jsx(gf,{title:e.section.title,tooltip:e.section.description,children:h.jsx(uQ,{gap:"0.75rem",direction:"column",children:e.section.subSection.map(function(t,n){return h.jsxs(wv,{children:[h.jsx(p0,{children:t.title}),h.jsx(gr,en({componentType:e.attributes.type},e,{allowsMultiple:t.allowsMultiple,propKey:t.propKey,setPartialAttributes:e.setAttributes,supportedAggregates:e.queryEngineConfig.supportedAggregates}))]},n)})})})},wb=function(e){var t=e.dataSets.filter(function(e){return!e.hide});return t.length<2&&!e.dataSet.preAggregated?null:h.jsx(gf,{title:e.section.title,tooltip:e.section.description,"data-component":"dataset-section",children:h.jsx(v3,en({},e,{dataSets:t,setPartialAttributes:e.setAttributes}))})},wx=function(e){var t=a_();return 0==gV(t.featureToggles,e.attributes.type,null==e?void 0:e.queryEngineConfig,t.textOverride).length||e.dataSet.preAggregated?null:h.jsx(h.Fragment,{children:e.featureToggles.canEditCustomMetrics&&h.jsx(gf,{title:e.section.title,tooltip:e.section.description,"data-component":"custom-metric-section",children:h.jsx(gZ,{queryEngineConfig:e.queryEngineConfig,setDataSets:e.setDataSets,dataSetId:e.attributes.dataSetId,dataSets:e.dataSets,componentType:e.attributes.type})})})},wy=function(e){if(e.dataSet.preAggregated||!("order"in e.attributes))return null;var t=e.attributes,n=[],i=[];if("comboChart"===t.type){if(!("barDimension"in t&&"lineDimension"in t&&"barMeasure"in t&&"lineMeasure"in t))return null;var r,o,a,l=(o=[].concat(t.barDimension,t.lineDimension),a=[].concat(t.barMeasure,t.lineMeasure),{dimension:o.filter(function(e,t,n){return n.findIndex(function(t){return JSON.stringify(t)===JSON.stringify(e)})===t}),measure:a.filter(function(e,t,n){return n.findIndex(function(t){return JSON.stringify(t)===JSON.stringify(e)})===t})});n=l.dimension,i=l.measure}else{if(!("dimension"in t)||!("measure"in t))return null;n=t.dimension,i=t.measure}return h.jsx(gf,{title:e.section.title,tooltip:e.section.description,"data-component":"sort-section",children:h.jsx(gl,en({},e,{attributes:t,timeDimension:"timeDimension"in t&&t.timeDimension||null,dimension:n,measure:i,setPartialAttributes:e.setAttributes}))})},ww=function(e){var t,n,i,r,a,l=a_(),s=l.textOverride,u=l.queryEngineConfig,d=g2(e.dataSet,{onlyDimensions:!0,forComponent:"barChart"},!0,e.dimension),c=(t=[],d.length>0&&(t=null==d?void 0:d.map(function(t){return{value:t.value,label:e.dataSet.name+" \xb7 "+t.title,icon:t.icon}})),t),p=o.useState((i=e.drilldownOptions,r=[],a=new Set(null==i?void 0:i.map(function(e){return e.field})),c.forEach(function(e,t){a.has(e.value.id)&&r.push(t)}),r)),f=p[0],m=p[1];return h.jsxs(mj,{width:"2xl",isOpen:e.show,onClose:function(){return e.onClose()},children:[h.jsx(mj.Header,{title:s("drilldown_fields","Drilldown Fields")}),h.jsx(mj.Content,{children:h.jsx(la,{columns:["1fr"],gap:"1rem",children:h.jsx(gu,{children:h.jsx(cw,{label:s("fields","Fields"),options:c,selected:f,setSelected:m,textOverride:s,id:"drilldown-fields",placeholder:"Drilldown field"})})})}),h.jsx(mj.Footer,{buttons:"end",children:h.jsxs(cM,{children:[h.jsx(py,{onClick:function(){return null==e?void 0:e.onClose()},secondary:!0,children:s("cancel","Cancel")}),h.jsx(py,{onClick:function(){var t,n,i,r,o,a;e.onClose((r=[],f.length>0&&f.map(function(e){return c[e].value}).forEach(function(e){r.push(g1("grouping",e,u))}),r))},primary:!0,children:s("save","Save")})]})})]})},wC=function(e){var t,n=a_(),i=n.mode,r=n.textOverride,a=o.useState(!1),l=a[0],s=a[1],u=void 0===e.drilldownOptions||0===e.drilldownOptions.length;return h.jsxs(h.Fragment,{children:[h.jsx(mu,{mode:i,onDeleteItem:function(){return e.onSetDrilldown([])},newItemBtn:u?{callToAction:r("add_drilldown","Add drilldown"),onClick:function(){s(!0)}}:void 0,items:u?[]:[{title:"Fields selected: "+(null==(t=e.drilldownOptions)?void 0:t.length),onClick:function(){s(!0)}}]}),l&&h.jsx(ww,{show:l,onClose:function(t){t&&e.onSetDrilldown(t),s(!1)},dimension:null==e?void 0:e.dimensions,dataSet:e.dataSet,drilldownOptions:e.drilldownOptions})]})},wj=function(e){var t=o.useState([]),n=t[0],i=t[1],r=a_(),a=r.mode,l=r.queryEngineConfig,s=r.textOverride,u=g5(n,null==e?void 0:e.dataSet,"grouping",l,i),d=g2(null==e?void 0:e.dataSet,{onlyDimensions:!0},!0,[].concat(n,null==e?void 0:e.dimension)),c=g0(n,"grouping",l,i);return h.jsxs(mj,{width:"2xl",isOpen:e.show,onClose:function(){return e.onClose()},children:[h.jsx(mj.Header,{title:s("add_drilldown","Add Drilldown")}),h.jsx(mj.Content,{children:h.jsx(la,{columns:["1fr"],gap:"1rem",children:h.jsxs(gu,{children:[h.jsx(dx,{as:"p",children:s("drilldown_field","Drilldown field")}),h.jsx(mu,{mode:a,onDeleteItem:function(){return i([])},items:u,newItem:{callToAction:s("add_drilldown_field","Add drilldown field"),onNew:c,initValues:d,hide:n.length>0}})]})})}),h.jsx(mj.Footer,{buttons:"end",children:h.jsxs(cM,{children:[h.jsx(py,{onClick:function(){return null==e?void 0:e.onClose()},secondary:!0,children:s("cancel","Cancel")}),h.jsx(py,{onClick:function(){var t;0===n.length||e.onClose({subsetDimension:eV({field:n[0].field,function:null==(t=n[0])?void 0:t.function})})},primary:!0,disabled:0===n.length,children:s("update","Update")})]})})]})},wS=function(e){var t=a_(),n=t.mode,i=t.queryEngineConfig,r=t.textOverride,a=o.useState(!1),l=a[0],u=a[1];o.useEffect(function(){null!=e&&e.drilldown&&(null==e?void 0:e.drilldown.length)>0&&(0!==e.dimensions.length||s.isEmpty(e.drilldown)||e.onSetDrilldown([]))},[e.dimensions]);var d=function(t){if(!(null==e||null==(t=e.drilldown)?void 0:t[0]))return[];var n=eW(null==e?void 0:e.drilldown[0].subsetDimension,i),o=iP(e.dataSet,n.field);return[{title:ga(o.publicName,n.function&&"none"!=n.function&&em(n.function,r))}]}();return h.jsxs(h.Fragment,{children:[h.jsx(mu,{mode:n,newItemBtn:s.isEmpty(null==e?void 0:e.drilldown)?{callToAction:r("add_drilldown","Add drilldown"),onClick:function(){u(!0)}}:void 0,onDeleteItem:function(){return e.onSetDrilldown([])},items:d}),l&&h.jsx(wj,{show:l,onClose:function(t){t&&e.onSetDrilldown([t]),u(!1)},dimension:null==e?void 0:e.dimensions,dataSet:e.dataSet})]})},wF=function(e){return"drilldownOptions"in e.attributes?h.jsx(gf,{title:e.section.title,tooltip:e.section.description,children:h.jsx(wC,{dataSet:e.dataSet,dimensions:e.attributes.dimension,drilldownOptions:null==e?void 0:e.attributes.drilldownOptions,onSetDrilldown:function(t){return e.setAttributes({drilldownOptions:t})}})}):"tableDrilldown"in e.attributes?h.jsx(gf,{title:e.section.title,tooltip:e.section.description,children:h.jsx(wS,{dataSet:e.dataSet,dimensions:e.attributes.dimension,drilldown:null==e?void 0:e.attributes.tableDrilldown,onSetDrilldown:function(t){return e.setAttributes({tableDrilldown:t})}})}):null},wk=function(e){var t=a_();return"filter"in e.attributes?e.dataSet.preAggregated?null:h.jsx(gf,{title:e.section.title,tooltip:e.section.description,children:h.jsx(g8,en({},e,{attributes:e.attributes,setPartialAttributes:e.setAttributes,textOverride:t.textOverride}))}):null},wT=function(e){var t=a_();return"limit"in e.attributes?e.dataSet.preAggregated?null:h.jsx(gf,{title:e.section.title,tooltip:e.section.description,children:h.jsx(be,{label:(0,t.textOverride)("limit","Limit"),labelHidden:!0,id:"limit",currentValue:e.attributes.limit,setNumber:function(t){return e.setAttributes({limit:t||0})}})}):null},w_=function(e){var t=a_().textOverride;if(!("limit"in e.attributes))return null;var n=e.section.options.map(function(e){return{value:e,label:e}});return h.jsx(gf,{title:e.section.title,tooltip:e.section.description,children:h.jsx(dI,{children:h.jsx(d_,{label:t("rows_per_page","Rows per page"),id:"pagination-limit-input",testId:"pagination-limit-input",onChange:function(t){e.setAttributes({limit:t||0,offset:0})},options:n,selected:e.attributes.limit,textOverride:t,onClick:function(){return gK("bottom","editor-panel")}})})})},wI=function(e){var t=a_().textOverride;return"comboChart"!=e.attributes.type?null:h.jsx(gf,{title:e.section.title,tooltip:e.section.description,children:h.jsxs(uQ,{gap:"0.75rem",direction:"column","data-component":"combo-chart-compare",children:[h.jsxs(uM,{children:[h.jsx(p0,{children:t("combo_chart.data_panel.dimension.line","Line")}),h.jsx(gn,en({propKey:"lineDimension"},e,{attributes:e.attributes,setPartialAttributes:e.setAttributes,supportedTransformationFunctions:e.queryEngineConfig.supportedTransformationFunctions}))]}),h.jsxs(uM,{children:[h.jsx(p0,{children:t("combo_chart.data_panel.dimension.bar","Bar")}),h.jsx(gn,en({propKey:"barDimension"},e,{attributes:e.attributes,setPartialAttributes:e.setAttributes,supportedTransformationFunctions:e.queryEngineConfig.supportedTransformationFunctions}))]}),h.jsxs(uM,{children:[h.jsx(p0,{children:t("combo_chart.data_panel.dimension.time","Time")}),h.jsx(gi,en({},e,{attributes:{timeDimensions:e.attributes.timeDimension?[e.attributes.timeDimension]:[]},allow:1,supportedTimeDimensions:e.queryEngineConfig.supportedTimeTruncFunctions,setPartialAttributes:function(t){var n;t.timeDimensions&&(null==e||e.setAttributes({timeDimension:null!=(n=t.timeDimensions[0])?n:null}))}}))]})]})})},wA=function(e){return"measure"in e.attributes?h.jsx(gf,{title:e.section.title,tooltip:e.section.description,children:h.jsx(go,en({},e,{attributes:e.attributes,setPartialAttributes:e.setAttributes}))}):null},wD=function(e){return h.jsx(gf,{title:e.section.title,tooltip:e.section.description,"data-component":"views-section",children:h.jsx(pl,en({},e,{setPartialAttributes:e.setAttributes}))})},wO=function(e){return h.jsx(gf,{title:e.section.title,tooltip:e.section.description,children:h.jsx(g$,en({},e,e.section,{setPartialAttributes:e.setAttributes}))})},wE=function(e){return h.jsx(la,{gap:"1.5rem",children:null==e?void 0:e.children})},wL=function(e){var t=Object.keys(e.queryEngineConfig.supportedTimeTruncFunctions),n=iD(e.dataSet.fields,{onlyFieldTypes:["date_time"]}),i=a_(),r=i.mode,o=i.textOverride;if(0===n.length)return null;var a,l=[];e.deltaTimeDimension&&l.push({title:iP(e.dataSet,e.deltaTimeDimension.field).publicName,subtext:e.queryEngineConfig.supportedTimeTruncFunctions[null==(a=e.deltaTimeDimension)?void 0:a.truncate].publicName+" window",select:{onChange:function(t){e.deltaTimeDimension&&e.setDeltaTimeDimension(en({},e.deltaTimeDimension,{truncate:t}))},selected:e.deltaTimeDimension?e.deltaTimeDimension.truncate:t[0],options:[].concat(t).map(function(t){return{label:e.queryEngineConfig.supportedTimeTruncFunctions[t].publicName,value:t}})}});var s=[].concat(n).map(function(e){return{title:""+e.publicName,subtext:"",value:e.id}});return h.jsx(mu,{mode:r,onDeleteItem:function(){e.setDeltaTimeDimension(null)},items:l,newItem:{callToAction:o("add_percentage_and_absolute_change","Add percentage and absolute change"),hide:null!=e.deltaTimeDimension,initValues:s,onNew:function(n){e.setDeltaTimeDimension({truncate:t[0],field:n,bucketFill:!1})}}})},wP=function(e){var t,n=a_().queryEngineConfig,i=null==e?void 0:e.attributes;return t=iD((null==e?void 0:e.dataSet).fields,{onlyFieldTypes:["date_time"]}),l(t)?null:h.jsx(gf,{title:"Comparison",children:h.jsx(wL,{dataSet:null==e?void 0:e.dataSet,deltaTimeDimension:i.deltaTimeDimension,setDeltaTimeDimension:function(t){e.setAttributes({deltaTimeDimension:t})},queryEngineConfig:n})})},wR=function(e){return h.jsx(gu,{children:h.jsx("div",{className:""+wN,children:h.jsx(dS,{label:e.label,id:null==e?void 0:e.id,style:{padding:0,flexGrow:1,marginBottom:0},type:"color",onChange:function(t){e.setColor(t.target.value)},value:e.currentValue||void 0})})})},wN=rY({width:"100%",flexDirection:"column",flexGrow:1,height:"100%",display:"flex"}),wM=function(e){return h.jsxs(uQ,{alignItems:"top"===(null==e?void 0:e.checkboxPosition)?"flex-start":"center",children:[h.jsx(cd,{onChange:function(t){e.setChecked(t.target.checked)},defaultChecked:e.currentValue||void 0,id:null==e?void 0:e.id,checked:!!e.currentValue}),h.jsxs(dx,{htmlFor:null==e?void 0:e.id,margin:0,fontWeight:"inherit",classNameOverride:e.classNameLabel,children:[e.tooltip&&h.jsxs(uQ,{className:""+gc.wrapper,alignItems:"center",gap:"0.25rem",children:[h.jsx("span",{children:e.label}),h.jsx(uM,{width:"18px",as:"span",children:h.jsx(cf,{tooltipContent:function(){return h.jsx(cf.Content,{children:null==e?void 0:e.tooltip})},children:h.jsx(w.QuestionMarkCircleIcon,{"aria-label":"Help",className:"help-icon "+gc.fadeIn(rG(15))+" "+or.cursor("pointer"),onClick:e.tooltipOnClick})})})]}),!e.tooltip&&e.label]})]})},wz=function(e){return h.jsx("div",{children:h.jsx(dS,{id:null==e?void 0:e.id,label:null==e?void 0:e.label,maxLength:e.maxLength,onChange:function(t){e.setText(t.target.value)},defaultValue:e.currentValue||void 0})})},wq=function(e){var t=a_();return h.jsx(dI,{children:h.jsx(d_,{labelHidden:null==e?void 0:e.labelHidden,label:e.label,id:null==e?void 0:e.id,onChange:e.onSelect,options:e.options,selected:e.currentValue,dynamicWidth:!0,textOverride:t.textOverride})})},wB=function(e){var t,n,i=o.useState((null==(t=e.progressMetric)?void 0:t.measure)||null),r=i[0],a=i[1],l=o.useState((null==(n=e.progressMetric)?void 0:n.goal)||null),s=l[0],u=l[1],d=a_(),c=d.queryEngineConfig,p=d.textOverride;return h.jsxs(mj,{width:"2xl",isOpen:e.show,onClose:function(){return e.onClose()},children:[h.jsx(mj.Header,{title:p("add_progress_metric","Add Progress Metric")}),h.jsxs(mj.Content,{children:[h.jsxs(gu,{children:[h.jsx(dx,{children:p("metric","Metric")}),h.jsx(gr,{componentType:"progress",maxAllowed:1,allowsMultiple:!0,setPartialAttributes:function(e){a(e.measure[0])},supportedAggregates:c.supportedAggregates,attributes:{measure:r?[r]:[]},dataSet:e.dataSet,fieldFilterOptions:{onlyFieldTypes:["number","string","boolean"],onlyMeasures:!0,forComponent:"progress",removePercentage:!1,removeSimpleMaths:!1,removeRuleGrouping:!1,removeAggregateMaths:!1},disableRemove:!0})]}),h.jsx(gu,{children:h.jsx(be,{label:p("goal","Goal"),currentValue:s,setNumber:function(e){return u(e)},id:"progress-goal"})})]}),h.jsx(mj.Footer,{buttons:"end",children:h.jsxs(cM,{children:[h.jsx(py,{onClick:function(){return null==e?void 0:e.onClose()},secondary:!0,children:p("cancel","Cancel")}),h.jsx(py,{onClick:function(){r&&s&&e.onClose({measure:r,goal:s})},primary:!0,disabled:null===s||null===r,children:e.progressMetric?p("update","Update"):p("add","Add")})]})})]})},wV=function(e){var t=e.attributes,n=e.dataSet,i=e.setAttributes,r=t.measure,a=a_(),l=a.mode,s=a.queryEngineConfig,u=a.textOverride,d=o.useState(!1),c=d[0],p=d[1],f=[].concat(r).map(function(e){var i,r,o,a=iP(n,e.field),l=null!=(i=null==(r=t.goals.find(function(t){return t.field===eV(e)}))?void 0:r.value)?i:"-";return{title:h.jsxs(uQ,{gap:"0.25rem",direction:"column",children:[h.jsx("div",{children:rA(a.publicName,null==(o=s.supportedAggregates[e.function])?void 0:o.publicName)}),h.jsxs("div",{children:[u("goal_set_to","Goal set to"),": ",h.jsx("span",{className:""+or.bold,children:l})]})]}),icon:a.dataType,onClick:function(){return p({measure:e,goal:l})}}});return h.jsxs(gf,{title:e.section.title,tooltip:e.section.description,children:[c&&h.jsx(wB,{show:!!c,onClose:function(e){if(p(!1),e){var n,o,a,l,s,u,d,c,f,m,h,v,g,b,x=eV(e.measure);i({measure:(n=r,o=x,a=e,l=[].concat(n),s=l.findIndex(function(e){return eV(e)===o}),-1!==s?l[s]=a.measure:l.push(a.measure),l),goals:(u=t.goals,d=x,c=e,f=u.findIndex(function(e){return e.field===d}),m=[].concat(u),-1!==f?m[f]={field:d,value:c.goal}:m.push({field:d,value:c.goal}),m),progressType:(h=t.progressType,v=x,g=h.findIndex(function(e){return e.field===v}),b=[].concat(h),-1!==g?b[g]={field:v,value:b6(h)}:b.push({field:v,value:b6(h)}),b)})}},dataSet:n,progressMetric:"boolean"!=typeof c?c:void 0}),h.jsx(gf.Container,{"data-component":"progress-input",children:h.jsx(mu,{mode:l,onOrderChange:function(e,t){var n=v8([].concat(r),e,t);i({measure:n})},newItemBtn:{callToAction:u("add_metric","Add metric"),onClick:function(){p(!0)}},onDeleteItem:function(e){var n=eV(r[e]);i({measure:rs(r,e),goals:t.goals.filter(function(e){return e.field!==n}),progressType:t.progressType.filter(function(e){return e.field!==n})})},items:f})})]})},wW=function(e){var t=a_().textOverride,n=e.dataPanelConfig.some(function(e){return"function"!=typeof e&&("filter"===e.type||"customMetrics"==e.type||"limit"==e.type)})&&!e.dataSet.preAggregated;return h.jsxs(wE,{children:[e.dataPanelConfig.map(function(t,n){return"function"==typeof t?h.jsx(a.Fragment,{children:t({dataSet:e.dataSet,attributes:e.attributes,dataSets:e.dataSets,featureToggles:e.featureToggles,setDataSet:e.setDataSet,setAttributes:e.setAttributes,setDataSets:e.setDataSets,queryEngineConfig:e.queryEngineConfig})},""+n):h.jsxs(a.Fragment,{children:["fieldCollector"==t.type&&h.jsx(wO,en({},e,{section:t})),"drilldown"==t.type&&h.jsx(wF,en({},e,{section:t})),"labelledMetrics"==t.type&&h.jsx(wg,en({},e,{section:t})),"fields"==t.type&&h.jsx(wA,en({},e,{section:t})),"progressGoals"===t.type&&h.jsx(wV,en({},e,{section:t})),"dataSet"==t.type&&h.jsx(wb,en({},e,{section:t})),"views"==t.type&&h.jsx(wD,en({},e,{section:t})),"sort"==t.type&&h.jsx(wy,en({},e,{section:t})),"pagination"==t.type&&h.jsx(w_,en({},e,{section:t})),"comboChartDimension"==t.type&&h.jsx(wI,en({},e,{section:t})),"comparison"==t.type&&h.jsx(wP,en({},e,{section:t}))]},t.type+"_"+n)}),n&&h.jsx(fZ,{title:t("advanced_options","Advanced Options"),defaultOpen:!1,showAccordionIcon:!0,onOpened:function(){gK("bottom","editor-panel")},children:h.jsx(wE,{children:e.dataPanelConfig.map(function(t,n){return"function"!=typeof t?h.jsxs(o.Fragment,{children:["filter"==t.type&&h.jsx(wk,en({},e,{section:t})),"customMetrics"==t.type&&h.jsx(wx,en({},e,{section:t})),"limit"==t.type&&h.jsx(wT,en({},e,{section:t}))]},n):null})})})]})},wH=function(){var e=c0(),t=a_();if(!e)return h.jsx(dr,{});var n=e.dataSet,i=e.queryEngineConfig,r=e.dataPanel,o=e.dashboard,a=e.setPartialAttributes,l=e.component.attributes;if(!n)throw"Data set required to show data props editor.";var s=iA(l.type,{queryEngineConfig:i,textOverride:e.textOverride});return h.jsx(ec,{renderOnError:function(e){return h.jsx(fH,{onManualRetry:e})},onError:t.onError,children:h.jsx(wW,{setDataSets:e.setDataSets,setAttributes:a,setDataSet:e.setDataSet,dataSets:o.dataSets,dataSet:n,featureToggles:e.featureToggles,attributes:l,queryEngineConfig:i,dataPanelConfig:r(s.dataPanelConfig(),{type:l.type})})})},wY=function(e){var t,n=e.section,i=e.setAttributes,r=e.attributes;return h.jsx(gf,{title:n.title,tooltip:null==n?void 0:n.description,children:h.jsx(gf.Grid,{children:null==n||null==(t=n.subSection)?void 0:t.map(function(e,t){return h.jsxs(o.Fragment,{children:["title"===e.type&&h.jsx("div",{children:h.jsx(dS,{label:null==e?void 0:e.title,"data-testid":"display-title-input",id:"display-title-input",type:"text",onChange:function(e){return i({displayTitle:e.target.value})},defaultValue:r.displayTitle})}),"subject"===e.type&&h.jsx("div",{children:h.jsx(dS,{label:null==e?void 0:e.title,"data-testid":"display-subject-input",id:"display-subject-input",type:"text",onChange:function(e){i({displaySubject:e.target.value})},defaultValue:r.displaySubject})})]},t)})})})},wG=function(e){var t,n=a_(),i=n.numberFormatOptions,r=n.textOverride,o=Object.keys(i).map(function(e){return{value:e,label:i[e].description}});return h.jsx(dI,{children:h.jsx(d_,{id:null==e?void 0:e.id,showClearBtn:!0,selected:null==e?void 0:e.currentValue,label:null!=(t=null==e?void 0:e.label)?t:r("format","Format"),onChange:function(t){return null==e?void 0:e.onChange(t)},options:o,textOverride:r})})},wU=function(e){var t=e.section,n=e.attributes,i=e.setAttributes,r=a_().textOverride,a=t.subSection.some(function(e){return"legend"===e.type||"numberFormat"===e.type}),l=t.subSection.some(function(e){return"stacked"===e.type||"curve"===e.type});return h.jsx(gf,{title:t.title,tooltip:null==t?void 0:t.description,children:h.jsxs(la,{gap:"1rem",children:[l&&h.jsx(gf.Grid,{columns:2,"data-component":"layout",children:null==t?void 0:t.subSection.map(function(e,t){return h.jsxs(o.Fragment,{children:["stacked"===e.type&&h.jsx(wq,{id:"format-layout-stacked",label:e.title,currentValue:void 0!==n.stacked&&n.stacked,onSelect:function(e){return i({stacked:e})},options:[{label:r("grouped","Grouped"),value:!1},{label:r("stacked","Stacked"),value:!0},{label:r("stacked_100prc","Stacked (100%)"),value:"100%"}]}),"curve"===e.type&&h.jsx(wq,{label:e.title,id:"format-layout-curve",currentValue:n.lineCurve,onSelect:function(e){return i({lineCurve:e})},options:[{value:"natural",label:r("natural","Natural")},{value:"straight",label:r("straight","Straight")},{value:"step",label:r("step","Step")}]})]},t)})}),a&&h.jsx(gf.Grid,{"data-component":"settings",children:null==t?void 0:t.subSection.map(function(e,t){return h.jsxs(o.Fragment,{children:["legend"===e.type&&h.jsx(wM,{label:e.title,setChecked:function(e){return i({legend:e})},currentValue:n.legend,id:"show-legend-input"}),"numberFormat"===e.type&&h.jsx(wG,{label:e.title,onChange:function(e){return i({labelFormat:e})},id:"format-number",currentValue:n.labelFormat,testId:"format-number"})]},t)})})]})})},wK=function(e){var t,n,i,r,o,a,l,s,u,d,c,p,f,m,v,g,b=a_(),x=b.textOverride,y=b.dateTimeFormatOptions,w=[{label:x("auto","Auto"),value:"auto"},{label:x("minimal","Minimal"),value:2},{label:x("None","None"),value:0}],C=Object.keys(y).map(function(e){return{label:y[e].description,value:e}}),j="horizontalBarChart"==e.attributes.type,S=(null==(t=e.attributes)||null==(t=t.dimension)?void 0:t.length)>0&&"number"===iP(e.dataSet,null==(n=e.attributes)||null==(n=n.dimension[0])?void 0:n.field).dataType&&!(null!=(i=e.attributes)&&i.timeDimension),F=!(null==(r=e.attributes)||!r.timeDimension),k=j?{x:"y",y:"x"}:{x:"x",y:"y"},T=k.x,_=k.y;return h.jsx(gf,{title:null==(o=e.section)?void 0:o.title,tooltip:null==(a=e.section)?void 0:a.description,"data-component":"axis-preference-section",children:h.jsxs(gf.Container,{"data-component":"single-stats-labels",children:[h.jsxs(gf.Panel,{title:null==(l=e.section[_])?void 0:l.title,children:[h.jsxs(gf.Grid,{columns:2,children:[h.jsx(wz,{label:e.section[_].prefix.title,setText:function(t){return e.setAttributes({yAxisPrefix:t})},currentValue:e.attributes.yAxisPrefix,maxLength:4,id:"axis-"+_+"-prefix"}),h.jsx(wz,{label:e.section[_].postfix.title,setText:function(t){return e.setAttributes({yAxisPostfix:t})},currentValue:e.attributes.yAxisPostfix,maxLength:4,id:"axis-"+_+"-postfix"})]}),h.jsxs(gf.Grid,{columns:2,children:[h.jsx(wG,{label:null==(s=e.section[_].format)?void 0:s.title,id:"axis-"+_+"-format",onChange:function(t){return e.setAttributes({yAxisFormat:t})},currentValue:e.attributes.yAxisFormat,testId:"axis-"+_+"-format"}),h.jsx(wq,{id:"axis-"+_+"-label-count",label:e.section.y.count.title,currentValue:e.attributes.approxYAxisLabelCount,onSelect:function(t){return e.setAttributes({approxYAxisLabelCount:t})},options:w})]}),h.jsx(gf.Grid,{children:h.jsx(wz,{label:null!=(u=null==(d=e.section[_].axisTitle)?void 0:d.title)?u:"",setText:function(t){var n;return e.setAttributes({axisTitles:((n={})[_]=t,n)})},currentValue:null==(c=e.attributes.axisTitles)?void 0:c[_],id:"axis-"+[_]+"-axisTitle"})})]}),h.jsxs(gf.Panel,{title:e.section[T].title,children:[h.jsxs(gf.Grid,{columns:2,children:[h.jsx(wz,{label:e.section[T].prefix.title,setText:function(t){return e.setAttributes({xAxisPrefix:t})},currentValue:e.attributes.xAxisPrefix,maxLength:4,id:"axis-"+T+"-prefix"}),h.jsx(wz,{label:e.section[T].postfix.title,setText:function(t){return e.setAttributes({xAxisPostfix:t})},currentValue:e.attributes.xAxisPostfix,maxLength:4,id:"axis-"+T+"-postfix"})]}),h.jsx(gf.Grid,{columns:S||F?2:1,children:h.jsxs(h.Fragment,{children:[S&&h.jsx(wG,{label:null==(p=e.section[T].format)?void 0:p.title,id:"axis-"+T+"-format",onChange:function(t){e.setAttributes({xAxisFormat:t})},currentValue:e.attributes.xAxisFormat,testId:"axis-"+_+"-format"}),F?h.jsxs(h.Fragment,{children:[h.jsx(wq,{id:"axis-"+T+"-label-date-format",label:(null==(f=e.section.x)||null==(f=f.format)?void 0:f.title)||"Format",currentValue:e.attributes.xAxisFormat,onSelect:function(t){return e.setAttributes({xAxisFormat:t})},options:C}),h.jsx(wq,{id:"axis-"+T+"-label-count",label:e.section.x.count.title,currentValue:e.attributes.approxXAxisLabelCount,onSelect:function(t){return e.setAttributes({approxXAxisLabelCount:t})},options:w})]}):h.jsx(xl,{label:x("hide_labels","Hide Labels"),onChange:function(t){return e.setAttributes({approxXAxisLabelCount:t?0:"auto"})},id:"hide-labels",currentValue:0===e.attributes.approxXAxisLabelCount})]})}),h.jsx(gf.Grid,{children:h.jsx(wz,{label:null!=(m=null==(v=e.section[T].axisTitle)?void 0:v.title)?m:"",setText:function(t){var n;return e.setAttributes({axisTitles:((n={})[T]=t,n)})},currentValue:null==(g=e.attributes.axisTitles)?void 0:g[T],id:"axis-"+[T]+"-axisTitle"})})]})]})})},wX={filters:[[]],ruleValue:"#1FF985",ruleValueEnd:void 0,ruleType:"backgroundColor"},wQ=function(e){return null!=e&&e.show?h.jsx(wJ,en({},e)):null},wJ=function(e){var t,n,i,r,a,l,s,u,d,c,p,f,m,v,g,b,x,y,w,C,j,S,F,k,T,_,I,A,D,O,E,L=o.useState(!1),P=L[0],R=L[1],N=o.useState(null!=(E=e.conditionalFormatting)&&E.ruleValueEnd?"gradient":"single"),M=N[0],z=N[1],q=a_(),B=q.queryEngineConfig,V=q.textOverride,W="basicTable"!=e.componentType,H=(t=e.dataSet,n=e.dimension,i=e.measures,l=B.supportedAggregates,[].concat([].concat(n).flatMap(function(e){var n=iP(t,e.field);return"date_time"==n.dataType?[]:[{label:n.publicName,value:n,icon:h.jsx(u7,{icon:n.dataType,paddingTop:0}),function:e.function}]}),i.map(function(e){var n=iP(t,e.field);return{label:n.publicName+(t4(e)?" ("+em(e.function,V)+")":""),value:pT(n,e.function,l,W),icon:h.jsx(u7,{icon:W?"number":n.dataType,paddingTop:0}),function:e.function}}))),Y=(v=null==e?void 0:e.conditionalFormatting,g=e.onSave,b=e.ruleType,x=e.dataSet,void 0===(y=W)&&(y=!1),w=a_().queryEngineConfig,j=(C=o.useState(null!=v?v:en({},wX,{ruleType:b})))[0],S=C[1],k=(F=pA(j.filters,x,w.supportedAggregates,{startWithEmptyField:!0,maxFilters:1,enableChangeToNumber:y})).completedFilters,T=F.wipFilters,_=F.deleteWipFilter,I=F.updateWipFilter,o.useEffect(function(){S(v||wX)},[JSON.stringify(v)]),A=function(e){S(en({},j,e))},o.useEffect(function(){return A({filters:k})},[JSON.stringify(k)]),en({},j,{completedFilters:k,wipFilters:T,handleUpsert:function(){g(en({},j,{ruleType:b}))},deleteWipFilter:_,updateWipFilter:I,onChange:A,disabled:(D=en({},j,{ruleType:b}),!!nt(w).validate(D).error)})),G=Y.onChange,U=Y.ruleValue,K=Y.ruleValueEnd,X=Y.disabled,Q=Y.handleUpsert,J=Y.completedFilters,Z=Y.wipFilters,$=Y.deleteWipFilter,ee=Y.updateWipFilter,et=iA(e.componentType);return o.useEffect(function(){var e,t,n,i;void 0===(null==(e=Z[0][0])?void 0:e.field)&&(R(!1),z("single")),"none"!==(null==(t=Z[0][0])?void 0:t.function)&&void 0!==(null==(n=Z[0][0])?void 0:n.function)||"number"===(null==(i=Z[0][0])||null==(i=i.field)?void 0:i.dataType)?R(!0):(R(!1),z("single"))},[Z]),h.jsxs(mj,{isOpen:!0,onClose:e.onClose,width:"4xl",children:[h.jsx(mj.Header,{title:V("add_conditional_formatting","Add Conditional Formatting"),hiddenUnlessEnabledInCss:!1}),h.jsx(mj.Content,{children:h.jsxs(la,{gap:"1rem",children:[h.jsx(gf.Panel,{children:h.jsx(pk,{fieldHeadingOverride:V("field","Field"),queryEngineConfig:B,dataSet:e.dataSet,completedFilters:J,wipFilters:Z,updateWipFilter:ee,deleteWipFilter:$,overrideFieldOptions:H,maxOrFilters:1,textOverride:V,supportedQueryOperators:e.numberConditionalFormattingOnly?pO(B,["<=",">="]):void 0})}),h.jsx(gf.Panel,{children:h.jsxs(uQ,{gap:"1rem",direction:"column",children:[P&&et.supportedFeatures.colorGradient&&h.jsx(vW,{options:[{label:V("color_format.single","Single"),value:"single"},{label:V("color_format.gradient","Gradient"),value:"gradient"}],name:"gradient-check",label:V("select_percentage_type","Select Percentage Type"),selected:M,labelHidden:!0,onChange:function(e){z(e),G({ruleValueEnd:"gradient"===e?"#16A257":void 0})}}),h.jsxs(uQ,{gap:"0.5rem",children:[h.jsx(uM,{flex:1,children:h.jsx(wR,{id:"color-formatting",label:"gradient"===M?V("start_color","Start Color"):V("color","Color"),currentValue:U,setColor:function(e){return G({ruleValue:e})}})}),h.jsx(uM,{flex:1,children:"gradient"===M&&P&&et.supportedFeatures.colorGradient&&h.jsx(wR,{id:"color-formatting-end",label:V("end_color","End Color"),currentValue:null!=K?K:"#16A257",setColor:function(e){return G({ruleValueEnd:e})}})})]})]})})]})}),h.jsx(mj.Footer,{buttons:"end",children:h.jsxs(cM,{children:[h.jsx(py,{secondary:!0,onClick:e.onClose,children:V("cancel","Cancel")}),h.jsx(py,{onClick:function(){return Q()},disabled:X,children:V("save","Save")})]})})]})};function wZ(e,t,n){var i;if("object"==typeof e&&null!==e){var r=u.findIndex(t,function(t){return u.isEqual(t,e)});-1!==r?(i=[].concat(t))[r]=n:i=[].concat(null!=t?t:[],[n])}else i=[].concat(null!=t?t:[],[n]);return i}var w$=Object.assign(function(){},{Swatch:function(e){return h.jsx("span",{className:""+w0(e.color)})}}),w0=function(e){return rY({backgroundColor:e,width:"1rem",height:"1rem",borderRadius:"0.125rem",display:"inline-block"})},w1=function(e){var t,n,i=a_(),r=i.textOverride,o=i.valueAlias,a=null==(t=e.rule.filters)?void 0:t[0][0],l=a.field,s=a.function,u=a.value,d=a.op,c=iP(e.dataSet,l),p=null!=(n=rO(u,o,{fieldId:l}))?n:u;return h.jsxs(uQ,{alignItems:"center",as:"span",direction:"row",children:[h.jsx("span",{className:""+or.text,dangerouslySetInnerHTML:{__html:r("display_conditional_format_configuration","If <strong>[[fieldName]] [[fieldFunction]]</strong> is <strong>[[operator]]</strong> <strong>[[value]]</strong> then color is",{fieldName:c.publicName,fieldFunction:s&&"none"!=s?"("+s+")":"",operator:d,value:p})}}),h.jsxs(uM,{as:"span",marginLeft:"0.5rem",height:"1rem",children:[h.jsx(w$.Swatch,{color:e.rule.ruleValue}),e.rule.ruleValueEnd&&h.jsx(w$.Swatch,{color:e.rule.ruleValueEnd})]})]})},w2=function(e){var t,n,i,r,a,l=o.useState(!1),u=l[0],d=l[1],c=a_(),p=c.textOverride;return h.jsxs(h.Fragment,{children:[h.jsx(mu,{mode:c.mode,onOrderChange:function(t,n){var i=v8([].concat(e.conditionalFormattingRules),t,n);e.onSetConditionalFormattingRules(i)},items:(t=e.queryEngineConfig,n=e.conditionalFormattingRules,i=e.dataSet,r=p,a=d,(null!=n?n:[]).map(function(e){if(s.isArray(e.filters)&&s.isArray(e.filters),0===e.filters[0].length)return{title:r("error","Error"),subtext:r("invalid_rule","Invalid or broken rule")};var n,o=eW(null==(n=e.filters)?void 0:n[0][0].field,t);try{return{title:iP(i,o.field).publicName,subtext:h.jsx(w1,{dataSet:i,rule:e,queryEngineConfig:t}),onClick:function(){return a(e)}}}catch(l){return{title:r("error","Error"),subtext:r("invalid_rule","Invalid or broken rule")}}})),newItemBtn:{callToAction:p("add_condition","Add Condition"),onClick:function(){return d(!0)}},onDeleteItem:function(t){var n,i=[].concat(null!=(n=e.conditionalFormattingRules)?n:[]);i.splice(t,1),e.onSetConditionalFormattingRules(i)}}),h.jsx(wQ,{ruleType:e.ruleType,dataSet:e.dataSet,conditionalFormatting:"boolean"!=typeof u?u:void 0,show:!!u,onClose:function(){return d(!1)},measures:e.measure,dimension:e.dimension||[],onSave:function(t){var n=wZ(u,e.conditionalFormattingRules,t);e.onSetConditionalFormattingRules(n),d(!1)},componentType:e.componentType,numberConditionalFormattingOnly:e.numberConditionalFormattingOnly})]})},w5=function(e){var t,n=e.section,i=e.attributes;return h.jsx(gf,{title:n.title,tooltip:null==n?void 0:n.description,children:h.jsx(uQ,{gap:"0.75rem",direction:"column",children:n.subSection?null==(t=n.subSection)?void 0:t.map(function(t,r){var o,a,l="bar"===t.propKey?i.barMeasure:"line"===t.propKey?i.lineMeasure:[];return h.jsxs("div",{children:[h.jsx(p0,{children:t.title}),h.jsx(w2,{dimension:"bar"===t.propKey?i.barDimension:[],ruleType:null==n?void 0:n.ruleType,onSetConditionalFormattingRules:function(n){var i;return e.setAttributes({conditionalFormattingRules:((i={})[t.propKey]=n,i)})},measure:l,dataSet:e.dataSet,conditionalFormattingRules:null!=(o=null==i||null==(a=i.conditionalFormattingRules)?void 0:a[t.propKey])?o:void 0,queryEngineConfig:e.queryEngineConfig,componentType:e.attributes.type,numberConditionalFormattingOnly:"line"===t.propKey})]},r)}):h.jsx(w2,{dimension:"lineColor"===(null==n?void 0:n.ruleType)||"areaColor"===(null==n?void 0:n.ruleType)?[]:i.dimension,ruleType:null==n?void 0:n.ruleType,onSetConditionalFormattingRules:function(t){return e.setAttributes({conditionalFormattingRules:t})},measure:i.measure,dataSet:e.dataSet,conditionalFormattingRules:i.conditionalFormattingRules,queryEngineConfig:e.queryEngineConfig,componentType:e.attributes.type,numberConditionalFormattingOnly:"lineColor"===(null==n?void 0:n.ruleType)||"areaColor"===(null==n?void 0:n.ruleType)})})})},w7=function(e){var t,n,i=a_(),r=i.dateTimeFormatOptions,a=i.textOverride;return h.jsx(gf,{title:null==e?void 0:e.section.title,tooltip:null==e||null==(t=e.section)?void 0:t.description,children:null==e||null==(n=e.section)||null==(n=n.subSection)?void 0:n.map(function(t,n){return h.jsxs(o.Fragment,{children:["time"===t.type&&h.jsx("div",{children:h.jsx(d_,{label:t.title,onChange:function(t){e.setAttributes({dateTimeFormat:t})},options:Object.keys(r).map(function(e){return{label:r[e].description,value:e}}),selected:e.attributes.dateTimeFormat,textOverride:a})}),"fontSize"===t.type&&h.jsx(wz,{label:null==t?void 0:t.title,currentValue:e.attributes.fontSize,setText:function(t){return e.setAttributes({fontSize:t})}})]},n)})})};function w4(e){var t,n,i=e.dataSet,r=e.isOpen,a=e.onClose,l=e.measures,s=e.onSave,u=o.useState(void 0),d=u[0],c=u[1],p=o.useState(void 0),f=p[0],m=p[1],v=a_().textOverride;return h.jsxs(mj,{isOpen:r,onClose:a,width:"sm",children:[h.jsx(mj.Header,{title:v("choose_a_prefix","Choose a prefix")}),h.jsxs(mj.Content,{children:[h.jsxs(gu,{children:[h.jsx(p0,{children:v("field","Field")}),h.jsx(d_,{options:l.map(function(e){return{label:iP(i,e.field).publicName,value:eV(e)}}),selected:d,onChange:function(e){return c(e)},textOverride:v})]}),h.jsx(wz,{label:v("prefix","Prefix"),currentValue:f,setText:m})]}),h.jsx(mj.Footer,{buttons:"end",children:h.jsxs(cM,{children:[h.jsx(py,{secondary:!0,onClick:a,children:v("cancel","Cancel")}),h.jsx(py,{onClick:function(){d&&f&&(s({field:d,prefix:f}),a())},children:v("save","Save")})]})})]})}var w3=function(e){var t,n,i=o.useState(!1),r=i[0],a=i[1],l=a_(),s=l.textOverride;return h.jsxs(gf,{title:null==e?void 0:e.section.title,tooltip:null==e||null==(t=e.section)?void 0:t.description,children:[h.jsx(mu,{mode:l.mode,items:(null!=(n=e.attributes.prefixes)?n:[]).map(function(t){var n=eH(t.field,e.queryEngineConfig),i=n.function;return{title:iP(e.dataSet,n.fieldId).publicName+("none"!=i?" ("+e.queryEngineConfig.supportedAggregates[i].publicName+")":""),subtext:t.prefix}}),newItemBtn:{callToAction:s("add_prefix","Add Prefix"),onClick:function(){return a(!0)}},onDeleteItem:function(t){var n,i=[].concat(null!=(n=e.attributes.prefixes)?n:[]);i.splice(t,1),e.setAttributes({prefixes:i})}}),h.jsx(w4,{dataSet:e.dataSet,isOpen:r,onClose:function(){return a(!1)},measures:e.attributes.measure,onSave:function(t){var n;return e.setAttributes({prefixes:[].concat(null!=(n=e.attributes.prefixes)?n:[],[t])})}})]})},w6=function(e){var t,n=a_().textOverride;if("mercatorMap"!=e.attributes.type)return null;var i=e.attributes,r=i.backgroundColor,o=i.noDataColor,a=i.maxValueColor,l=i.minValueColor,u=s.debounce(e.setAttributes,200);return h.jsx(gf,{title:null==e?void 0:e.section.title,tooltip:null==e||null==(t=e.section)?void 0:t.description,children:h.jsxs(gf.Grid,{columns:2,children:[h.jsx("div",{children:h.jsx(wR,{id:"map-background-color",label:n("background","Background"),currentValue:r,setColor:function(e){return u({backgroundColor:e})}})}),h.jsx("div",{children:h.jsx(wR,{id:"map-no-data-color",label:n("no_data","No data"),currentValue:o,setColor:function(e){return u({noDataColor:e})}})}),h.jsx("div",{children:h.jsx(wR,{id:"map-min-value-color",label:n("min_value","Min value"),currentValue:l,setColor:function(e){return u({minValueColor:e})}})}),h.jsx("div",{children:h.jsx(wR,{id:"map-max-value-color",label:n("max_value","Max value"),currentValue:a,setColor:function(e){return u({maxValueColor:e})}})})]})})},w8={name:"135831l",styles:"font-size:0.75rem;line-height:1rem;opacity:0.8"},w9=function(e){var t,n,i=a_(),r=i.numberFormatOptions,o=i.textOverride,a=i.labelFormat,l=Object.keys(r).map(function(e){return{value:e,label:r[e].description}});return h.jsxs(gf,{title:null==e||null==(t=e.section)?void 0:t.title,tooltip:null==e||null==(n=e.section)?void 0:n.description,children:[0==e.attributes.measure.length&&h.jsx("p",{css:w8,children:o("stats_label_warning","Please select a metric on the data panel.")}),h.jsx(gf.Container,{"data-component":"single-stats-labels",children:[].concat(e.attributes.measure).map(function(t,n){var i,r,o,s,u,d=rA(iP(e.dataSet,t.field).publicName,null==(i=e.queryEngineConfig.supportedAggregates[t.function])?void 0:i.publicName),c=a({fieldId:t.field,func:t.function,type:e.attributes.type,defaultLabel:d,viewId:e.attributes.viewId});return h.jsxs(gf.Panel,{title:null!=c?c:d,children:[h.jsxs(gf.Grid,{columns:2,children:[h.jsx(wz,{id:"prefix_"+n,label:null==e||null==(r=e.section)?void 0:r.prefix.title,currentValue:e.attributes.prefixes?e.attributes.prefixes[eV(t)]:void 0,setText:function(n){var i,r=en({},e.attributes.prefixes,((i={})[eV(t)]=n,i));e.setAttributes({prefixes:r})}}),h.jsx(wz,{id:"postfix_"+n,label:null==e||null==(o=e.section)?void 0:o.postfix.title,currentValue:e.attributes.postfixes?e.attributes.postfixes[eV(t)]:void 0,setText:function(n){var i,r=en({},e.attributes.postfixes,((i={})[eV(t)]=n,i));e.setAttributes({postfixes:r})}})]}),h.jsx(gf.Grid,{children:h.jsx(wq,{id:"format_"+n,options:l,currentValue:e.attributes.formatter&&e.attributes.formatter[eV(t)]||"_vizzly_number",onSelect:function(n){var i,r=en({},e.attributes.formatter,((i={})[eV(t)]=n,i));e.setAttributes({formatter:r})},label:null!=(s=null==e||null==(u=e.section)||null==(u=u.format)?void 0:u.title)?s:"Format"})})]},n)})})]})},Ce={value:void 0,strokeStyle:"dashed",strokeWidth:2,color:rG(0),label:void 0},Ct=function(e){return null!=e&&e.show?h.jsx(Cn,en({},e)):null},Cn=function(e){var t,n,i,r,a,l,s=a_().textOverride,u=(t=null==e?void 0:e.goalLine,n=null==e?void 0:e.onSave,r=(i=o.useState(null!=t?t:Ce))[0],a=i[1],o.useEffect(function(){a(t||Ce)},[JSON.stringify(t)]),en({},r,{handleUpsert:function(){n(r)},onChange:function(e){a(en({},r,e))},disabled:!!tA().validate(r).error})),d=u.value,c=u.onChange,p=u.color,f=u.disabled,m=u.handleUpsert;return h.jsxs(mj,{isOpen:!0,onClose:null==e?void 0:e.onClose,width:"xl",children:[h.jsx(mj.Header,{title:s("add_goal_line","Add Goal Line")}),h.jsx(mj.Content,{children:h.jsxs(la,{columns:["1fr","1fr"],gap:"1rem",children:[h.jsx(gu,{children:h.jsx(be,{id:"goal-line-value",label:s("value","Value"),currentValue:d,setNumber:function(e){return c({value:e})}})}),h.jsx(wR,{id:"color-formatting",label:s("color","Color"),currentValue:p,setColor:function(e){return c({color:e})}})]})}),h.jsx(mj.Footer,{buttons:"end",children:h.jsxs(cM,{children:[h.jsx(py,{secondary:!0,onClick:null==e?void 0:e.onClose,children:s("cancel","Cancel")}),h.jsx(py,{onClick:function(){return m()},disabled:f,children:s("save","Save")})]})})]})},Ci=function(e){var t,n=o.useState(!1),i=n[0],r=n[1],a=a_(),l=a.textOverride;return h.jsxs(h.Fragment,{children:[h.jsx(mu,{mode:a.mode,onOrderChange:function(t,n){var i=v8([].concat(e.goalLines),t,n);e.onSetGoalLineRules(i)},items:(null!=(t=e.goalLines)?t:[]).map(function(e){return{title:h.jsxs(uQ,{alignItems:"center",gap:"0.25rem",children:[h.jsx(w$.Swatch,{color:e.color}),h.jsx("span",{dangerouslySetInnerHTML:{__html:l("goal_line_configuration","Set to <strong>[[ruleValue]]</strong>",{ruleValue:e.value})}})]}),onClick:function(){return r(e)}}}),newItemBtn:{callToAction:l("add_goal_line","Add Goal Line"),onClick:function(){return r(!0)}},onDeleteItem:function(t){var n,i=[].concat(null!=(n=e.goalLines)?n:[]);i.splice(t,1),e.onSetGoalLineRules(i)}}),h.jsx(Ct,{show:!!i,goalLine:"boolean"!=typeof i?i:void 0,onClose:function(){return r(!1)},onSave:function(t){r(!1);var n=wZ(i,e.goalLines,t);e.onSetGoalLineRules(n)}})]})},Cr=function(e){var t;return h.jsx(gf,{title:null==e?void 0:e.section.title,tooltip:null==e||null==(t=e.section)?void 0:t.description,children:h.jsx(Ci,{onSetGoalLineRules:function(t){return e.setAttributes({goalLines:t})},goalLines:e.attributes.goalLines})})},Co=function(e){var t=a_().textOverride;return h.jsx(gf,{title:t("type","Type"),children:h.jsxs(gf.Grid,{children:[0===e.attributes.goals.length&&h.jsx(h4,{type:"info",title:t("progress.goals_need to be set","Goals need to be set")}),h.jsx(wd,{enabled:0===e.attributes.goals.length,children:h.jsx(wq,{options:[{value:iu.Linear,label:t("linear","Linear")},{value:iu.Circular,label:t("circular","Circular")}],currentValue:b6(e.attributes.progressType),onSelect:function(t){var n=e.attributes.progressType.map(function(e){return en({},e,{value:t})});e.setAttributes({progressType:n})},label:t("type","Type"),labelHidden:!0})})]})})},Ca=function(e){var t,n,i,r=a_().textOverride;if(e.dataSet.preAggregated||!hW(e.attributes.order,e.attributes.timeDimension))return null;var o=[{label:r("none","None"),value:null},{label:r("current","Current"),value:"current"}];return h.jsx(gf,{title:null==e?void 0:e.section.title,tooltip:null==e||null==(t=e.section)?void 0:t.description,children:h.jsx(d_,{id:"headline-options",label:r("options","Options"),labelHidden:!0,onChange:function(t){e.setAttributes({headline:{func:t}})},options:o,selected:null!=(n=null==(i=e.attributes.headline)?void 0:i.func)?n:null,textOverride:r,onClick:function(){gK("bottom","editor-panel")}})})},Cl=function(e){return h.jsx(wE,{children:null==e?void 0:e.formatPanelConfig.map(function(t,n){return"function"==typeof t?h.jsx(a.Fragment,{children:t({dataSet:e.dataSet,attributes:e.attributes,dataSets:e.dataSets,featureToggles:e.featureToggles,setDataSet:e.setDataSet,setAttributes:e.setAttributes,setDataSets:e.setDataSets,queryEngineConfig:e.queryEngineConfig})},""+n):h.jsxs(o.Fragment,{children:["heading"===t.type&&h.jsx(wY,en({},e,{section:t})),"progressType"===t.type&&h.jsx(Co,en({},e,{section:t})),"format"===t.type&&h.jsx(w7,en({},e,{section:t})),"prefixes"===t.type&&h.jsx(w3,en({},e,{section:t})),"axisLabels"===t.type&&h.jsx(wK,en({},e,{section:t})),"mapColors"===t.type&&h.jsx(w6,en({},e,{section:t})),"conditionalFormatting"===t.type&&h.jsx(w5,en({},e,{section:t})),"goalLine"===t.type&&h.jsx(Cr,en({},e,{section:t})),"chartStyles"===t.type&&h.jsx(wU,en({},e,{section:t})),"headline"===t.type&&h.jsx(Ca,en({},e,{section:t})),"statsLabels"===t.type&&h.jsx(w9,en({},e,{section:t}))]},n)})})},Cs=function(){var e=c0(),t=a_();if(!e)return h.jsx(dr,{});var n=iA(e.component.attributes.type,{queryEngineConfig:e.queryEngineConfig,textOverride:e.textOverride});return h.jsx(ec,{renderOnError:function(e){return h.jsx(fH,{onManualRetry:e})},onError:t.onError,children:h.jsx(Cl,{setDataSets:e.setDataSets,setAttributes:e.setPartialAttributes,setDataSet:e.setDataSet,dataSets:e.dashboard.dataSets,dataSet:null==e?void 0:e.dataSet,featureToggles:e.featureToggles,attributes:e.component.attributes,queryEngineConfig:e.queryEngineConfig,formatPanelConfig:e.formatPanel(n.formatPanelConfig(),{type:e.component.attributes.type})})})};function Cu(e){var t=a_().textOverride;return h.jsxs(cU.Group,{defaultIndex:e.defaultTabOpen||0,children:[h.jsxs(cU.List,{columns:"1fr 1fr",children:[h.jsx(cU.Button,{"data-component":"tab-data",children:t("editor.tab.heading.data","Data")}),h.jsx(cU.Button,{"data-component":"tab-format",children:t("editor.tab.heading.format","Format")})]}),h.jsxs(cU.Panels,{children:[h.jsx(cU.Panel,{children:h.jsx(wH,{})}),h.jsx(cU.Panel,{children:h.jsx(Cs,{})})]})]})}var Cd,Cc,Cp,Cf,Cm,Ch,Cv,Cg=function(e){return nf(null==e?void 0:e.component.attributes)?null:h.jsx(uM,{paddingX:24,paddingTop:16,children:h.jsx(h4,{title:"Feedback",type:"info",children:np(null==e?void 0:e.component.attributes)})})},Cb=Object.assign(function(){return null},{panel:function(e,t){return rY(en({height:"100%",overflow:"overlay",padding:2===e?0:"0 8px",marginLeft:2===e?"-0.5rem":void 0},uY,t))},view:function(e){return rY(en({height:"100%",overflow:"overlay"},uY,e))}}),Cx=o.forwardRef(function(e,t){var n,i,r,a=lu(),l=o.useRef(null),s=function(){var e=l.current;e&&(e.style.height="auto",e.style.height=e.scrollHeight+"px")};o.useImperativeHandle(t,function(){return{focus:function(){var e;null==(e=l.current)||e.focus()}}}),o.useEffect(function(){l.current&&e.enableFocus&&l.current.focus()},[]),o.useEffect(function(){s()},[e.value]);var u=!e.submitDisabled&&"\n"!==e.value&&"\n\n"!==e.value;return h.jsxs(o.Fragment,{children:[(null==e?void 0:e.label)&&h.jsx(dx,{htmlFor:null==e?void 0:e.id,labelHidden:null==e?void 0:e.labelHidden,children:null==e?void 0:e.label}),h.jsxs(uQ,{className:""+dy(null!=(n=null==e?void 0:e.inputTheme)?n:null==a||null==(i=a.forms)?void 0:i.input,null==e?void 0:e.error),alignItems:"flex-start",maxHeight:200,children:[h.jsx("textarea",{id:null==e?void 0:e.id,ref:l,className:""+Cy({isDisabled:null!=e&&e.disabled?"true":"false"}),"data-themeapi":"forms.input","data-chipposition":"above.right",onKeyDown:function(t){"Enter"===t.key&&!t.shiftKey&&u&&(t.preventDefault(),e.handleSubmit())},disabled:null==e?void 0:e.disabled,value:null==e?void 0:e.value,placeholder:null==e?void 0:e.placeholder,onChange:null==e?void 0:e.onChange,rows:1,onInput:s,onFocus:null==e?void 0:e.onFocus,onBlur:null==e?void 0:e.onBlur}),h.jsx("button",{"aria-label":null==e?void 0:e.submit.label,onClick:null==e?void 0:e.handleSubmit,className:""+Cw(null==a?void 0:a.icons),children:h.jsx("span",{children:null!=(r=e.submit.icon)?r:null==e?void 0:e.submit.label})})]})]})}),Cy=rY(en({flex:1,border:"none",background:"transparent",marginRight:6,resize:"none",lineHeight:"1.5",maxHeight:180,"&:focus":{outline:"none"},fontStyle:"inherit",fontSize:"inherit",fontFamily:"inherit"},uY,{variants:{isDisabled:{true:{opacity:.5}}}})),Cw=function(e){var t;return rY({border:"none",background:"transparent",cursor:"pointer",padding:0,paddingBottom:2,alignSelf:"flex-end","&:focus":{outline:"none"},"&[disabled]":{cursor:"initial"},"& svg":{fill:null==e?void 0:e.color,"&:hover":{fill:null==e||null==(t=e["&:hover"])?void 0:t.color}}})},CC=function(e){var t=a_().textOverride;return h.jsxs(uQ,{children:[e.onReload&&h.jsx(Cj,{label:t("refetch_response","Refetch response"),icon:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18",height:"18",children:h.jsx("path",{"fill-rule":"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z",clipRule:"evenodd"})}),onChange:e.onReload,"data-id":e["data-id"]+"-reload"}),e.onThumbsUp&&h.jsx(Cj,{label:t("ai.good_response","Good response"),icon:h.jsx(e.thumbsUp?a7:a5,{}),onChange:e.onThumbsUp,"data-id":e["data-id"]+"-thumbs-up","data-selected":e.thumbsUp?"true":"false"}),e.onThumbsDown&&h.jsx(Cj,{label:t("ai.bad_response","Bad response"),icon:h.jsx(e.thumbsDown?a3:a4,{}),onChange:e.onThumbsDown,"data-id":e["data-id"]+"-thumbs-down","data-selected":e.thumbsUp?"true":"false"}),e.onSelect&&h.jsx(Cj,{label:t("show_this_change","Show this change"),onChange:e.onSelect,icon:h.jsx(a6,{}),"data-id":e["data-id"]+"-select"})]})},Cj=function(e){var t=lu();return h.jsx(uM,{children:h.jsx(cf,{tooltipContent:function(){return e.label},children:h.jsx("button",{onClick:function(){return e.onChange()},"aria-label":e.label,className:""+CS(null==t?void 0:t.icons),"data-testid":e["data-id"],"data-select":e["data-selected"],children:e.icon})})})},CS=function(e){var t;return rY(en({border:"none",background:"transparent",cursor:"pointer",padding:0,width:30,height:30,borderRadius:"50%",stroke:null==e?void 0:e.color},rW,{"&:hover":en({},rW,{stroke:null==e||null==(t=e["&:hover"])?void 0:t.color})}))},CF=((Cd={}).User="user",Cd.AI="ai",Cd),Ck=((Cc={}).WaitingForMessage="waitingForMessage",Cc.Thinking="thinking",Cc),CT=((Cp={}).ThumbsUp="thumbs_up",Cp.ThumbsDown="thumbs_down",Cp),C_=((Cf={}).Warning="warning",Cf.Critical="critical",Cf.Info="info",Cf),CI=function(e){var t=a_();return h.jsx(CA,en({},e,{label:(0,t.textOverride)("ai.you","You"),icon:h.jsx(a0,{width:16,height:16})}))},CA=function(e){var t=lu();return h.jsxs(la,{columnGap:"0.5rem",as:"li",areas:'"icon title"\n    "empty content"',columns:["max-content","1fr"],children:[h.jsx(uM,{width:30,area:"icon",children:h.jsx("div",{className:""+CD(null==t?void 0:t.ai),"data-conversationid":e.id,children:e.icon})}),h.jsx(uM,{area:"title",alignSelf:"end",children:h.jsx(dx,{as:"p",children:e.label})}),h.jsxs(uM,{area:"content",children:[e.loading&&h.jsx(uM,{width:40,paddingY:8,children:h.jsx(dl,{color:"#3074d9"})}),!e.loading&&e.message&&h.jsxs(uQ,{gap:"0.5rem",direction:"column",children:[h.jsx(uM,{children:e.message}),e.options&&h.jsx(CC,en({},e.options))]})]})]})},CD=function(e){var t,n,i;return rY({border:null==e||null==(t=e.avatar)?void 0:t.border,width:30,height:30,borderRadius:"50%",backgroundColor:null==e||null==(n=e.avatar)?void 0:n.background,display:"flex",alignItems:"center",justifyContent:"center","& svg":{fill:null==e||null==(i=e.avatar)?void 0:i.color}})},CO=Object.assign({},{Replies:function(e){return e.sender_type===CF.AI?h.jsx(CA,{message:e.content,label:"Vizzly AI",icon:h.jsx(a1,{}),onTypingEnd:e.onTypingEnd,options:e.options,id:e.id}):h.jsx(CI,{message:e.content,id:e.id})},Loading:function(){return h.jsx(CA,{label:"Vizzly AI",icon:h.jsx(oB,{width:20,height:20}),loading:!0,id:"loading"})},Reply:CA,You:CI}),CE=function(e){function t(n){var i;return void 0===n&&(n="AI usage limit reached"),(i=e.call(this,n)||this).name="AIUsageLimitReached",Object.setPrototypeOf(es(i),t.prototype),i}return ei(t,e),t}(ea(Error)),CL=function(e){function t(){var n;return(n=e.call(this,"Something went wrong while fetching data from the AI.")||this).name="AIFailedToFetch",Object.setPrototypeOf(es(n),t.prototype),n}return ei(t,e),t}(ea(Error)),CP=function(e){function t(){var n;return(n=e.call(this,"There has been an error with the AI. Please try again.")||this).name="AIContainsErrors",Object.setPrototypeOf(es(n),t.prototype),n}return ei(t,e),t}(ea(Error)),CR=function(e){function t(){var n;return(n=e.call(this,"User aborted AI request.")||this).name="AIAborted",Object.setPrototypeOf(es(n),t.prototype),n}return ei(t,e),t}(ea(Error)),CN=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="LoadingAborted",n}return ei(t,e),t}(ea(Error)),CM={conversationId:void 0,message:"",messageState:Ck.WaitingForMessage,messageHistory:[]},Cz=function(e){var t=wm().suggestions,n=a_().textOverride,i=lu();return h.jsxs(uM,{as:"li",children:[h.jsx(uM,{as:"p",paddingBottom:"0.25rem",children:n("ai.ask_a_question_or_pick_a_suggestion","Ask a question or pick a suggestion:")}),h.jsxs(uQ,{as:"ul",padding:0,margin:0,gap:"0.75rem",direction:"column",children:[!t&&h.jsx(uM,{as:"li",width:40,paddingY:8,children:h.jsx(dl,{color:"#3074d9"})}),null==t?void 0:t.map(function(t,n){return h.jsx(uM,{as:"li",listStyle:"none",children:h.jsx("button",{className:""+Cq(null==i?void 0:i.ai),onClick:function(){return e.onChange(t)},children:t})},n)})]})]})},Cq=function(e){var t,n,i,r,o,a,l,s;return rY({border:null==e||null==(t=e.suggestions)?void 0:t.border,background:null==e||null==(n=e.suggestions)?void 0:n.background,color:null==e||null==(i=e.suggestions)?void 0:i.color,padding:null==e||null==(r=e.suggestions)?void 0:r.padding,borderRadius:null==e||null==(o=e.suggestions)?void 0:o.borderRadius,cursor:"pointer",minHeight:40,textAlign:"left",width:"100%","&:focus":{outline:"none"},"&:hover":{background:null==e||null==(a=e.suggestions)||null==(a=a["&:hover"])?void 0:a.background,color:null==e||null==(l=e.suggestions)||null==(l=l["&:hover"])?void 0:l.color,border:null==e||null==(s=e.suggestions)||null==(s=s["&:hover"])?void 0:s.border}})},CB=function(e){var t,n,i,r,l,s,u,d,c,p,f,m,v,g,b,x,y,w,C,j,S,F,k,T,_,I,A,D,O,E=a_().textOverride,L=a.useState(!1),P=L[0],R=L[1],N=o.useRef(null),M=(T=o.useRef(k=e.attributes),o.useEffect(function(){T.current=k},[]),T.current),z=wm(),q=z.onAction,B=(t=e.attributes,n=z.onAsk,i=e.queryEngineConfig,r=e.setAttributes,s=o.useRef(null),d=(u=o.useState(CM))[0],c=u[1],f=(p=o.useState(void 0))[0],m=p[1],v=o.useCallback(function(e){c(function(t){return en({},t,{message:e})}),m(void 0)},[]),g=o.useCallback((l=et($().mark(function e(o){var a,l,u,p,f,h,v,g;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m(void 0),s.current&&s.current.abort(),s.current=new AbortController,void 0!==o&&void 0!==o.message&&(a=o.message,c(function(e){return en({},e,{message:a})})),e.prev=4,!n||d.messageState===Ck.Thinking){e.next=16;break}return c(function(e){return en({},e,{messageState:Ck.Thinking})}),e.next=9,n(null!=(l=null==o?void 0:o.message)?l:d.message,d.conversationId,t,s.current.signal);case 9:return f=(u=e.sent).conversationId,h=u.messageHistory,g=iA((p=u.attributes).type,{queryEngineConfig:i}).init(p.dataSetId,p),c(en({},d,{conversationId:f,messageHistory:h,message:""})),r(g),e.abrupt("return",{status:"success"});case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(4),e.t0 instanceof CR?m({error:C_.Info,message:"We stopped your question from being sent."}):e.t0 instanceof CE?m({error:C_.Warning,message:e.t0.message}):e.t0 instanceof CL||e.t0 instanceof CP?m({error:C_.Critical,message:e.t0.message}):eR(e.t0),c(function(e){return en({},e,{messageState:Ck.WaitingForMessage})});case 22:return e.abrupt("return",{status:"failed"});case 23:case"end":return e.stop()}},e,null,[[4,18]])})),function(e){return l.apply(this,arguments)}),[n,d.message,d.messageState,t]),en({send:g,setMessage:v},d,{feedback:f,reset:function(){c(CM),m(void 0)}})),V=(x=B.conversationId,C=(w=o.useState({reactions:[]}))[0],j=w[1],S=o.useCallback((y=et($().mark(function e(t,n){return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!q||!x){e.next=6;break}return e.next=4,q(x,t,{reaction:n});case 4:e.sent.success&&j(function(e){return en({},e,{reactions:[].concat(e.reactions||[],[{messageId:t,reaction:n}])})});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error sending AI reaction",e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e,t){return y.apply(this,arguments)}),[q,x,C]),en({sendReaction:S},C)),W=B.messageState,H=B.messageHistory,Y=B.message,G=B.feedback,U=(_=o.useRef(null),A=(I=o.useState(0))[0],D=I[1],o.useEffect(function(){var e=function(){D(_.current?_.current.clientHeight:0)};return e(),window.addEventListener("resize",function(){return e}),function(){window.removeEventListener("resize",e)}},[Y]),[_,A]),K=U[0],X=U[1],Q=(F=o.useRef(null),o.useEffect(function(){F.current&&(F.current.scrollTop=F.current.scrollHeight)}),F);return o.useEffect(function(){var e;W!==Ck.Thinking&&(null==(e=N.current)||e.focus())},[W]),e.closed?null:h.jsxs(uQ,{direction:"column",height:"100%",gap:"1.5rem",children:[e.closeAI&&h.jsxs(cM,{buttons:"space-between",children:[h.jsx(cq,{onClick:function(){return e.closeAI&&e.closeAI()},suppressed:!0,icon:{Icon:function(){return h.jsx(a8,{})}},children:E("back_to_editor","Back to Editor")}),h.jsx(cq,{onClick:function(){return R(!0)},children:E("new_chat","New Chat")})]}),h.jsxs(uM,{position:"relative",height:"100%",children:[h.jsx(uM,{height:0,children:h.jsx(gL,{onClose:(O=et($().mark(function t(n){return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n&&(B.reset(),e.setAttributes(M)),R(!1),t.abrupt("return",!0);case 3:case"end":return t.stop()}},t)})),function(e){return O.apply(this,arguments)}),message:E("ai.new_chat_modal_message","Are you sure you want to start a new chat? This will delete all your current changes."),show:P,deleteButtonLabel:E("ai.new_chat_modal_cta","Start new chat")})}),h.jsx("div",{className:""+CW(X),ref:Q,children:h.jsx(uQ,{gap:"2rem",direction:"column",overflow:"overlay",children:h.jsxs(uQ,{gap:"1.25rem",direction:"column",as:"ul",padding:0,margin:0,children:[W!==Ck.Thinking&&(!H||0===(null==H?void 0:H.length))&&h.jsx(Cz,{onChange:function(e){return B.send({message:e})}}),W===Ck.Thinking&&(!H||0===(null==H?void 0:H.length))&&h.jsxs(o.Fragment,{children:[h.jsx(CO.You,{message:Y,id:"thinking"}),void 0===G&&h.jsx(CO.Loading,{})]}),H.length>0&&h.jsxs(o.Fragment,{children:[null==H?void 0:H.map(function(e,t){var n,i=null==(n=V.reactions)?void 0:n.filter(function(t){return t.messageId===e.id}),r=void 0;return console.log("ai",B),e.sender_type===CF.AI&&void 0===G&&(r={onThumbsUp:B.conversationId?function(){return V.sendReaction(e.id,CT.ThumbsUp)}:void 0,onThumbsDown:B.conversationId?function(){return V.sendReaction(e.id,CT.ThumbsDown)}:void 0,thumbsUp:null==i?void 0:i.some(function(e){return e.reaction===CT.ThumbsUp}),thumbsDown:null==i?void 0:i.some(function(e){return e.reaction===CT.ThumbsDown}),"data-id":e.id}),h.jsx(o.Fragment,{children:h.jsx(CO.Replies,en({},e,{content:e.content,options:r}))},t+"_"+e.id)}),W===Ck.Thinking&&h.jsxs(o.Fragment,{children:[h.jsx(CO.You,{message:Y,id:"thinking"}),void 0===G&&h.jsx(CO.Loading,{})]})]})]})})}),h.jsx("div",{className:""+CV,ref:K,children:h.jsxs(uQ,{gap:"1rem",direction:"column",children:[G&&h.jsx(h4,{title:G.message,type:G.error}),h.jsxs(uQ,{gap:"0.5rem",direction:"column",children:[h.jsx(Cx,{ref:N,id:"input",label:"Message Vizzly",placeholder:E("ai.ask_me_a_question","Ask me a question..."),value:Y,onChange:function(e){return B.setMessage(e.currentTarget.value)},labelHidden:!0,handleSubmit:et($().mark(function e(){return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.send();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),submitDisabled:!Y||W===Ck.Thinking,enableFocus:!0,disabled:W===Ck.Thinking,submit:W===Ck.Thinking?{label:E("stop_question","Stop Question"),icon:h.jsx(a$,{})}:{label:E("submit_question","Submit Question"),icon:h.jsx(aZ,{})}}),h.jsx(uM,{as:"p",className:or.textSize("xs")+" "+or.color(rG(50)),margin:0,padding:0,paddingLeft:"0.5rem",children:E("ai.ai_may_hallucinate","Responses may be inaccurate; verify details in the Editor.")})]})]})})]})]})},CV=rY({position:"absolute",left:0,right:0,bottom:0}),CW=function(e){return rY(en({position:"absolute",left:0,top:0,right:0,overflowY:"scroll",bottom:e,paddingBottom:"1.5rem"},uY))},CH=function(e){return h.jsx(CB,en({},e))},CY=function(e){var t,n,i,r,o,a=lu(),l=e.editor,s=l.setAttributes,u=l.setResults,d=l.runQueriesCallback,c=l.component,p=l.dataSet,f=l.queryEngineConfig;return h.jsx(uM,{height:"40rem",width:"100%",children:h.jsxs(la,{columns:["24rem","1fr"],height:"100%",gap:e.standalone?null!=(t=null==a||null==(n=a.editor)?void 0:n.gap)?t:"1.5rem":void 0,children:[!e.ai&&h.jsx("div",{id:"editor-panel",className:""+Cb.panel(null==a?void 0:a.version,null==a||null==(i=a.editor)?void 0:i.settings),children:h.jsx(Cu,{})}),(null==(r=e.usingBeta)?void 0:r.active)&&h.jsx(CH,{closeAI:function(){return e.openAI(!1)},dataSet:p,attributes:c.attributes,setAttributes:s,queryEngineConfig:f,closed:!e.ai}),h.jsxs(la,{rows:["1fr","100px"],className:""+Cb.view(null==a||null==(o=a.editor)?void 0:o.component),children:[h.jsx(uM,{paddingX:24,paddingTop:16,position:"relative",overflowY:"auto",width:"100%",children:h.jsx(xr,{id:"editor_"+Math.floor(1e11*Math.random()),isBeingSizeAdjusted:!1,setLocalFilters:e.editor.setLocalFilters,setParameterUpdate:e.editor.setParameterUpdate,runQueriesCallback:d,setResults:u,component:c,updateComponentAttributes:s,editor:!0})}),h.jsx(Cg,{component:c})]})]})})},CG=function(e){var t,n,i=c0(),r=a.useState(!1),o=r[0],l=r[1],u=ws(),d=wm().fetchSuggestions,c=a_().textOverride,p=lu();if(!i)return h.jsx(dr,{});var f,m,v,g,b=i.dashboard,x=i.mode,y=i.origin,w=i.componentEditor,C=i.dispatch,j=i.trackEvent,S=null==u?void 0:u.active,F="boolean"==typeof(null==p||null==(t=p.modals)||null==(t=t.options)||null==(t=t.showTitle)?void 0:t.editor)&&!(null!=p&&null!=(n=p.modals)&&null!=(n=n.options)&&null!=(n=n.showTitle)&&n.editor),k=(null==w?void 0:w.target.displayTarget)||s.isNumber(null==w?void 0:w.target.libraryIndex);return h.jsxs("div",{"data-testid":"editor",children:[h.jsx(mf,{title:c("editor","Editor"),"data-component":"editor-header",hide:F}),h.jsx(mh,{"data-component":"editor-content",children:h.jsx(CY,{editor:i,openAI:l,ai:o,usingBeta:u})}),h.jsxs(mm,{buttons:S?"space-between":"end","data-component":"editor-footer",children:[S&&h.jsx(cM,{children:h.jsx(wd,{enabled:o,children:h.jsx(py,{secondary:!0,onClick:function(){return l(!0)},icon:{Icon:function(){return h.jsx(a2,{})}},onMouseEnter:function(){d&&d()},children:c("ask_ai","Ask AI")})})}),h.jsxs(cM,{buttons:"end",children:[h.jsx(py,{secondary:!0,onClick:function(){j("editor.changesCancelled"),e.onClose?e.onClose():C({type:"clearModal"}),l(!1)},children:k?c("editor_modal.cancel","Cancel"):c("editor_modal.close","Close")}),k&&h.jsx(py,{onClick:function(){j("editor.changesConfirmed"),C({type:"saveComponent",protectedComponent:"library"===y&&"admin"===x}),l(!1)},children:(f=x,m=c,v=y,g=(null==w?void 0:w.target.libraryIndex)!==b.componentLibrary.length,"library"===v&&g?m("editor_modal.save","Save"):"library"===v?m("editor_modal.add_to_library","Add to Library"):"endUser"===f?m("editor_modal.save","Save"):m("editor_modal.confirm","Confirm"))})]})]})]})},CU=function(e){var t=lu();return h.jsxs("button",{onClick:e.onChange,disabled:null==e?void 0:e.disabled,className:lr(""+CK(null==t?void 0:t.icons),e.className),children:[h.jsx("span",{className:""+oi,children:e.label}),e.children]})},CK=function(e){var t,n;return rY(en({},oo.button,{color:null==e?void 0:e.color,borderRadius:null==e?void 0:e.borderRadius,padding:null==e?void 0:e.padding,width:null==e?void 0:e.width,height:null==e?void 0:e.height,"&:hover":{background:null==e||null==(t=e["&:hover"])?void 0:t.background,color:null==e||null==(n=e["&:hover"])?void 0:n.color},"&:disabled":{opacity:.7,background:"transparent"},"&:hover:disabled":{opacity:.7,background:"transparent"}}))},CX=function(e){var t,n=cn().dispatch,i=a_(),r=i.onReset,a=i.textOverride,l=o.useState(!1),s=l[0],u=l[1],d=(t=et($().mark(function t(){var i;return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u(!0),t.next=3,r();case 3:(i=t.sent)&&n({type:"setDashboard",dashboard:i}),u(!1),null==e||e.onClose();case 7:case"end":return t.stop()}},t)})),function(){return t.apply(this,arguments)}),c=o.useState(!1),p=c[0],f=c[1];return o.useEffect(function(){e.show||(f(!1),u(!1))},[e.show]),h.jsxs(mj,{width:"sm",isOpen:null==e?void 0:e.show,onClose:function(){return null==e?void 0:e.onClose()},children:[h.jsx(mj.Header,{title:a("confirm_reset","Confirm Reset"),show:!0}),h.jsx(mj.Content,{children:h.jsx(wM,{label:a("delete_all_dashboard_content","Any change you have made will be lost and the default dashboard will be restored."),setChecked:function(e){return f(e)},currentValue:p,id:"reset-dashboard",checkboxPosition:"top"})}),h.jsx(mj.Footer,{buttons:"end",children:h.jsxs(cM,{children:[h.jsx(cq,{secondary:!0,onClick:function(){return null==e?void 0:e.onClose()},disabled:s,children:a("cancel","Cancel")}),h.jsx(cq,{onClick:function(){p&&d()},disabled:!p||s,primary:!0,children:a("reset_dashboard","Reset Dashboard")})]})})]})},CQ=function(e){var t=a_(),n=t.textOverride;return!1===t.featureToggles.showResetButton?null:h.jsx(cf,{tooltipContent:function(){return n("reset_dashboard_to_default","Reset dashboard to default")},children:h.jsx(CU,{label:n("reset","Reset"),onChange:e.onChange,className:"vizzly_reset-button",disabled:null==e?void 0:e.disabled,children:h.jsx(ln,{})})})},CJ=((Cm={})[Cm.LOW=1]="LOW",Cm[Cm.NORMAL=2]="NORMAL",Cm[Cm.MEDIUM=3]="MEDIUM",Cm[Cm.HIGH=7]="HIGH",Cm[Cm.EXTREME=12]="EXTREME",Cm),CZ=((Ch={})[Ch.NONE=0]="NONE",Ch[Ch.SMALL=5]="SMALL",Ch[Ch.MEDIUM=10]="MEDIUM",Ch[Ch.LARGE=25]="LARGE",Ch),C$={orientation:"portrait",format:"A4",margin:CZ.NONE},C0=function(e){var t=o.useState(!1),n=t[0],i=t[1],r=a_().textOverride,a=o.useState(C$),l=a[0],s=a[1];return h.jsxs(mj,{width:"sm",isOpen:null==e?void 0:e.show,onClose:function(){return null==e?void 0:e.onClose()},children:[h.jsx(mj.Header,{title:r("download_dashboard_to_pdf","Download dashboard to PDF"),show:!0}),h.jsxs(mj.Content,{children:[h.jsx("p",{children:r("pdf_download.description","Download the dashboard you see in this view.")}),h.jsx(vW,{options:[{label:r("pdf_download.page.orientation.portrait","Portrait"),value:"portrait"},{label:r("pdf_download.page.orientation.landscape","Landscape"),value:"landscape"}],name:"page-orientation",label:r("pdf_download.page.orientation","Orientation"),selected:l.orientation,labelHidden:!0,onChange:function(e){return s(en({},l,{orientation:e}))}})]}),h.jsx(mj.Footer,{buttons:"end",children:h.jsxs(cM,{children:[h.jsx(py,{onClick:function(){return null==e?void 0:e.onClose()},secondary:!0,children:r("cancel","Cancel")}),h.jsx(py,{primary:!0,onClick:function(){i(!0),yl().then(function(){i(!1),null==e||e.onClose(l)})},disabled:n,children:r("download","Download")})]})})]})},C1=function(e){var t=a_().textOverride;return h.jsxs(o.Fragment,{children:[e.showLabel&&h.jsx(py,{secondary:!0,onClick:e.onChange,disabled:e.disabled,children:h.jsxs(uQ,{gap:"0.25rem",children:[h.jsx(aK,{})," ",t("download_dashboard_to_pdf.button","Download to PDF")]})}),!e.showLabel&&h.jsx(cf,{tooltipContent:function(){return t("download_dashboard_to_pdf","Download dashboard to PDF")},children:h.jsx(CU,{onChange:e.onChange,disabled:e.disabled,label:t("download_dashboard_to_pdf.button","Download to PDF"),className:""+or.pt(6),children:h.jsx(aK,{})})})]})},C2={method:"save",resolution:CJ.MEDIUM,page:{margin:CZ.NONE,format:"A4",orientation:"portrait"},canvas:{mimeType:"image/jpeg",qualityRatio:1,useCORS:!0,logging:!1},overrides:{}},C5=function(){function e(e,t){var n,i,r,o,a;this.pdf=void 0,this.canvas=void 0,this.options=void 0,this.canvas=e,this.options=t,this.pdf=new X(en({format:null!=(n=null==(i=this.options)||null==(i=i.page)?void 0:i.format)?n:C2.page.format,orientation:null!=(r=null==(o=this.options)||null==(o=o.page)?void 0:o.orientation)?r:C2.page.orientation},null==(a=this.options.overrides)?void 0:a.pdf,{unit:"mm"}))}var t=e.prototype;return t.getMarginTopMM=function(){var e,t,n,i,r;return Number("object"==typeof(null==(e=this.options)||null==(e=e.page)?void 0:e.margin)?null!=(t=null==(n=this.options)||null==(n=n.page)?void 0:n.margin.top)?t:C2.page.margin:null!=(i=null==(r=this.options)||null==(r=r.page)?void 0:r.margin)?i:C2.page.margin)},t.getMarginLeftMM=function(){var e,t,n,i,r;return Number("object"==typeof(null==(e=this.options)||null==(e=e.page)?void 0:e.margin)?null!=(t=null==(n=this.options)||null==(n=n.page)?void 0:n.margin.top)?t:C2.page.margin:null!=(i=null==(r=this.options)||null==(r=r.page)?void 0:r.margin)?i:C2.page.margin)},t.getMarginRightMM=function(){var e,t,n,i,r;return Number("object"==typeof(null==(e=this.options)||null==(e=e.page)?void 0:e.margin)?null!=(t=null==(n=this.options)||null==(n=n.page)?void 0:n.margin.top)?t:C2.page.margin:null!=(i=null==(r=this.options)||null==(r=r.page)?void 0:r.margin)?i:C2.page.margin)},t.getMarginBottomMM=function(){var e,t,n,i,r;return Number("object"==typeof(null==(e=this.options)||null==(e=e.page)?void 0:e.margin)?null!=(t=null==(n=this.options)||null==(n=n.page)?void 0:n.margin.top)?t:C2.page.margin:null!=(i=null==(r=this.options)||null==(r=r.page)?void 0:r.margin)?i:C2.page.margin)},t.getMarginTop=function(){return 3.77952755906*this.getMarginTopMM()},t.getMarginBottom=function(){return 3.77952755906*this.getMarginBottomMM()},t.getMarginLeft=function(){return 3.77952755906*this.getMarginLeftMM()},t.getMarginRight=function(){return 3.77952755906*this.getMarginRightMM()},t.getScale=function(){var e;return null!=(e=this.options.resolution)?e:C2.resolution},t.getPageHeight=function(){return 3.77952755906*this.getPageHeightMM()},t.getPageHeightMM=function(){return this.pdf.internal.pageSize.height},t.getPageWidthMM=function(){return this.pdf.internal.pageSize.width},t.getPageWidth=function(){return 3.77952755906*this.getPageWidthMM()},t.getOriginalCanvasWidth=function(){return this.canvas.width/this.getScale()},t.getOriginalCanvasHeight=function(){return this.canvas.height/this.getScale()},t.getCanvasPageAvailableHeight=function(){return this.getPageAvailableHeight()*this.getScale()*this.getHorizontalFitFactor()},t.getPageAvailableWidth=function(){return this.getPageWidth()-(this.getMarginLeft()+this.getMarginRight())},t.getPageAvailableHeight=function(){return this.getPageHeight()-(this.getMarginTop()+this.getMarginBottom())},t.getPageAvailableWidthMM=function(){return this.getPageAvailableWidth()/3.77952755906},t.getPageAvailableHeightMM=function(){return this.getPageAvailableHeight()/3.77952755906},t.getNumberPages=function(){return Math.ceil(this.canvas.height/this.getCanvasPageAvailableHeight())},t.getHorizontalFitFactor=function(){return this.getPageAvailableWidth()<this.getOriginalCanvasWidth()?this.getOriginalCanvasWidth()/this.getPageAvailableWidth():1},t.getCanvasOffsetY=function(e){return this.getCanvasPageAvailableHeight()*(e-1)},t.getCanvasHeightLeft=function(e){return this.canvas.height-this.getCanvasOffsetY(e)},t.getCanvasPageHeight=function(e){if(this.canvas.height<this.getCanvasPageAvailableHeight())return this.canvas.height;var t=this.getCanvasHeightLeft(e);return t<this.getCanvasPageAvailableHeight()?t:this.getCanvasPageAvailableHeight()},t.getCanvasPageWidth=function(){return this.canvas.width},t.createCanvasPage=function(e){var t=this.getCanvasPageWidth(),n=this.getCanvasPageHeight(e),i=document.createElement("canvas");i.setAttribute("width",String(t)),i.setAttribute("height",String(n));var r=i.getContext("2d");return r&&r.drawImage(this.canvas,0,this.getCanvasOffsetY(e),this.canvas.width,n,0,0,this.canvas.width,n),i},t.convert=function(){for(var e=1,t=this.getNumberPages();e<=t;){e>1&&this.pdf.addPage(null!=(a=null==(l=this.options)||null==(l=l.page)?void 0:l.format)?a:C2.page.format,null!=(s=null==(u=this.options)||null==(u=u.page)?void 0:u.orientation)?s:C2.page.orientation);var n,i,r,o,a,l,s,u,d=this.createCanvasPage(e),c=d.toDataURL(null!=(n=null==(i=this.options.canvas)?void 0:i.mimeType)?n:C2.canvas.mimeType,null!=(r=null==(o=this.options.canvas)?void 0:o.qualityRatio)?r:C2.canvas.qualityRatio);this.pdf.setPage(e),this.pdf.addImage({imageData:c,width:d.width/(3.77952755906*this.getScale()*this.getHorizontalFitFactor()),height:d.height/(3.77952755906*this.getScale()*this.getHorizontalFitFactor()),x:this.getMarginLeftMM(),y:this.getMarginTopMM()}),e+=1}return this.pdf},e}(),C7=function(e){return e()},C4=(Cv=et($().mark(function e(t,n){var i,r,o,a,l,s,u,d,c,p,f;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:var d;if(r=n?en({},C2,n,{canvas:en({},C2.canvas,n.canvas),page:en({},C2.page,n.page)}):C2,o=C7(t)){e.next=4;break}throw Error("Target element not found");case 4:return a=en({useCORS:r.canvas.useCORS,logging:r.canvas.logging,scale:r.resolution},r.overrides.canvas),e.next=7,U(o,a);case 7:if(l=e.sent,null==n||!n.header||!(u=C7(null==n?void 0:n.header))){e.next=15;break}return e.next=13,U(u,a);case 13:s=C3(s,e.sent,l);case 15:c=new C5(null!=(i=s)?i:l,r).convert(),e.t0=r.method,e.next="build"===e.t0?20:"open"===e.t0?21:23;break;case 20:case 26:return e.abrupt("return",c);case 21:return window.open(c.output("bloburl"),"_blank"),e.abrupt("return",c);case 23:return f=null!=(p=r.filename)?p:(new Date).getTime()+".pdf",e.next=26,c.save(f,{returnPromise:!0});case 27:case"end":return e.stop()}},e)})),function(e,t){return Cv.apply(this,arguments)});function C3(e,t,n){e=document.createElement("canvas");var i=(t?t.height:0)+n.height,r=Math.max(t?t.width:0,n.width);e.width=r,e.height=i;var o=e.getContext("2d");return o&&(o.clearRect(0,0,r,i),t&&o.drawImage(t,0,0),o.drawImage(n,0,t?t.height:0)),e}var C6=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,C8=/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi,C9=/on[a-z]+\s*=\s*["'][^"']*["']/gi,je=/javascript:[^\s"']+/gi;function jt(e){return et($().mark(function t(){return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C4(function(){return document.getElementById("vizzly_dashboard_content")},{method:"save",filename:"dashboard.pdf",page:null==e?void 0:e.page,header:function(){return document.getElementById("vizzly_dashboard_header")}});case 2:case"end":return t.stop()}},t)}))}var jn=function(e){var t,n,i,r=e.pdfSettings,o=null==(t=document.getElementById("vizzly_dashboard_content"))?void 0:t.offsetWidth;if(null!=r&&r.header&&(n=null==r?void 0:r.header,C6.test(n)||C8.test(n)||C9.test(n)||je.test(n)))throw Error("Invalid content: potentially malicious elements detected.");return null!=r&&r.header?h.jsx("div",{dangerouslySetInnerHTML:{__html:(null==r?void 0:r.header)||""},id:"vizzly_dashboard_header",style:{position:"absolute",left:-9999,width:o}}):null},ji=function(e){return JSON.stringify(e)},jr=aL(function(e){var t=e.saving,n=o.useState(!1),i=n[0],r=n[1];return o.useEffect(function(){if(t)r(!0);else if(i){var e=setTimeout(function(){r(!1)},2e3);return function(){return clearTimeout(e)}}},[t]),i?h.jsx(uQ,{children:h.jsx(jo,{text:t?"Saving...":"Saved",standard:!0,children:h.jsx(w.CloudIcon,{width:16,fill:rG(15)})})}):h.jsx("div",{})},"renderSavingComponent",function(e){return en({},e)}),jo=function(e){return h.jsxs(uQ,{direction:"row",gap:"0.25rem",alignItems:"center",justifyContent:"end",children:[h.jsx(o.Fragment,{children:e.children}),h.jsx("span",{className:u5({fontSize:14,color:rG(15)}),children:null==e?void 0:e.text})]})},ja=function(){var e,t,n,i,r,a,l,u,d=o.useState(!1),c=d[0],p=d[1],f=o.useState(!1),m=f[0],v=f[1],g=cn(),b=g.dashboard,x=g.dispatch,y=g.componentEditor,w=g.pickFromComponentLibrary,C=g.trackEvent,j=g.updatingDashboard,S=a_(),F=S.maxCSVDownloadLimit,k=S.featureToggles,T=S.scope,_=S.isProgrammaticParent,I=S.textOverride,A=S.pdfSettings,D=S.componentOverrides,O=S.developerTools,E=lu(),L=o.useState(!1),P=L[0],R=L[1];e={dashboard:b},t=a_().mode,i=(n=o.useState(!1))[0],r=n[1],l=(a=o.useState(null))[0],u=a[1],o.useEffect(function(){if(e.dashboard){var t,n=en({},t=e.dashboard,{display:t.display.map(function(e){return en({},e,{components:e.components.map(function(e){return"results"in e?en({},e,{results:[]}):e})})})});null!==l&&ji(n)!==ji(l)&&r(!0)}},[e]),o.useEffect(function(){u(e.dashboard)},[]),o.useEffect(function(){var e=function(e){"admin"===t&&i&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}},[i,t]),o.useEffect(function(){var e,n=(e=et($().mark(function e(){return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"admin"===t&&i&&navigator.sendBeacon("/log","Tab closed");case 1:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)});return window.addEventListener("unload",n),function(){return window.removeEventListener("unload",n)}},[]);var N=function(e){R(!0),setTimeout(function(){return R(!1)},null!=e?e:100)};aF(function(e){var t,n;e.resizing&&(eO("Received from vizzlyState, `resizing()`"),"object"==typeof e.resizing&&(t=null!=(n=e.resizing.timeout)?n:100),N(t))});var M=document.cookie.includes("disableViewCheck=true");o.useEffect(function(){if(!M){var e=function(){return N()};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}},[]);var z=function(e,t){C("library.open"),x({type:"startPickingComponentFromLibraryForDisplay",rowIndex:e,cellIndex:t})},q=function(e,t){C("manageDisplay.removeCell"),x({type:"removeCell",rowIndex:e,cellIndex:t})},B=function(e,t){x({type:"startEditingComponent",displayTarget:{rowIndex:e,cellIndex:t},libraryIndex:null,component:null})},V="neither",W=void 0;null!=y?(V="editor",W="modal-editor"):null!=w&&(V="library",W="modal-library");var H,Y,G,U,K=k.showGlobalFilters,X=function e(t){return s.isArray(t)?s.every(t,e):!t.requiresValue||!(!t.requiresValue||!t.value)}(b.globalFilters);X||eO("Required dashboard filters do not have values, so the display of the dashboard will not render.",b.globalFilters);var Q,J,Z,ee=k.canDownloadPDF,ei="read"===T||k.forceMobile,er={hideAddCellColumn:!1===k.canAddNewCells||!!ei,hideActionBar:!(null==A||!A.generatingPDF)||!(!ei||k.showResetButton)||!(k.showGlobalFilters||ee||k.showResetButton),hideAddRow:!1===k.canAddNewRows||!!ei},eo=er.hideAddCellColumn,ea=er.hideActionBar,el=er.hideAddRow,es=eo?["auto"]:["32px","auto"],eu=null!=A&&A.generatingPDF?function(e,t){var n=0,i=1390-t,r={},o=!0;if(e.forEach(function(e,t){var a=e.height;(n+=a)>i&&(r[t-1]=i-(n-a),n=a,o&&(o=!1,i=1390))}),n<=i){var a=e.length-1;r[a]&&delete r[a]}return r}(b.display,(Q=0,(J=document.querySelector(".dashboard-pdf-generator-header"))&&(Q=J?J.offsetHeight:0),Q)):void 0;return h.jsxs(aA,{developerTools:O,children:[h.jsxs(mc,{id:"vizzly_dashboard_provider",children:[h.jsxs(mj,{width:"7xl",isOpen:null!=y||null!=w,onClose:function(){C("library.close"),x({type:"clearModal"})},transparentBackground:"modal-library"==W,namespace:W,options:{disableModalScrolling:"library"==V},children:["library"==V&&h.jsx(xT,{}),"editor"==V&&h.jsx(CG,{})]}),h.jsx(C0,{show:!0===c,onClose:(Z=et($().mark(function e(t){var n;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=jt({page:t}),!t){e.next=4;break}return e.next=4,n();case 4:p(null!=t&&t);case 5:case"end":return e.stop()}},e)})),function(e){return Z.apply(this,arguments)})}),h.jsx(x2,{}),h.jsx(CX,{show:m,onClose:function(){return v(!1)}}),!(null!=A&&A.generatingPDF)&&h.jsx(wo,{isProgrammaticParent:_}),h.jsx(uM,{padding:"0.25rem","data-component":"dashboard",overflow:"hidden",className:"vizzly-studio",children:h.jsx(wa,{children:h.jsxs(uM,{position:"relative",children:[P&&h.jsx(dr,{override:D.renderLoadingComponent}),!P&&h.jsxs(la,{rows:ea?["auto"]:jl(!el,!ea),columns:es,gap:8,className:u8("dashboard"),"data-component":"dashboard-grid",children:[!ea&&h.jsxs(uQ,{gridRow:1,gap:"16px","data-component":"action-bar",className:""+js(T),justifyContent:"space-between",gridArea:!0===eo?"1 / 1 / 2 / 2":void 0,direction:k.forceMobile?"column":"row",children:[h.jsx(uM,{flexGrow:1,paddingLeft:!0===eo?"0.5rem":void 0,"data-component":"action-bar-filters",children:K&&h.jsx(xJ,{})}),!(ei&&!ee)&&h.jsxs(uQ,{gap:"0.25rem",width:"auto",paddingTop:4,"data-component":"action-bar-tools",children:[k.showSavingIndicator&&h.jsx(jr,{saving:j}),ee&&h.jsx(C1,{onChange:function(){return p(!0)},disabled:!0===c,showLabel:"read"===T&&(!1===K||0===b.globalFilters.length)}),"read_write"===T&&h.jsx(CQ,{onChange:function(){return v(!0)}})]})]}),X&&h.jsxs(h.Fragment,{children:[h.jsx("div",{style:eo?{gridColumn:"span 1/span 2",gridRow:2}:{gridColumn:"span 2/span 2",gridRow:2},"data-component":"panels",id:"vizzly_dashboard_content",children:b.display.map(function(e,t){var n,i,r,o;return h.jsx(yH,{maxCSVDownloadLimit:F,onCreateNew:B,onPickFromLibrary:z,onRemoveCell:q,rowIndex:t,trackEvent:C,displayRow:b.display[t],generatingPDF:null!=(n=null==A?void 0:A.generatingPDF)?n:!0===c,onColSpanChange:function(e){x({type:"setColSpans",colSpans:e,rowIndex:t})},canAddNewCells:k.canAddNewCells&&e.components.length<(null!=(i=null==E?void 0:E.cellLimit)?i:4),hideAddCellColumn:eo,columns:es,onAppendCell:function(){var e;C("manageDisplay.appendCell"),x({type:"appendCell",rowIndex:t})},onAddHeaderRow:function(){var e;x({type:"addHeaderRow",rowIndex:t,initialTitle:I("header.new_header","New Header")})},hideAddNewHeaderRow:(r=b.display,!(t<=0||t>=r.length)&&r[t-1].components.some(function(e){return an(e)})),marginBottom:eu?eu[t]:void 0},"dashboard_"+b.id+"_row_"+t)})}),b.display.length<b.theme.rowLimit&&!el&&h.jsx(uQ,{alignItems:"stretch",gridRow:3,gridColumn:eo?1:2,paddingRight:28,paddingLeft:eo?"0.5rem":void 0,"data-component":"add-row",height:72,children:h.jsx(yE,{label:I("add_row","Add Row"),onChange:function(){var e;e=b.display.length,C("manageDisplay.newRow"),x({type:"insertRow",rowIndex:e}),gK(350)},className:u8("add-row")})})]})]})]})})})]}),c&&h.jsx(jn,{pdfSettings:A})]},JSON.stringify(O))},jl=function(e,t){var n=[];return t&&n.push("minmax(28px, 1fr)"),n.push("auto"),e&&n.push("72px"),n},js=function(e){return rY("read"===e?{"@media (min-width: 767px)":{paddingRight:24,gridColumn:1},"@media (max-width: 768px)":{paddingRight:28,gridColumn:"span 2/span 2"}}:{paddingRight:29,gridColumn:2})},ju=a.createContext(null),jd=function(e){return h.jsx(ju.Provider,{value:{globalLibraries:e.globalLibraries},children:e.children})},jc=function(e){var t,n,i,r=a.useState(0),l=r[0],s=r[1],u=(t=et($().mark(function t(){var n;return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onReset();case 2:if(!(n=t.sent)){t.next=6;break}return s(l+1),t.abrupt("return",n);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}},t)})),function(){return t.apply(this,arguments)});return h.jsx(aT,{isProgrammaticParent:e.dashboardBehaviour.isProgrammaticParent,mode:e.dashboardBehaviour.mode,includeComponentTypes:e.includeComponents,excludeComponentTypes:e.excludeComponents,dashboardBehaviour:e.dashboardBehaviour,onError:e.onError,onViewClick:e.onViewClick,renderTableCell:e.renderTableCell,onReset:u,disableToolbar:e.dashboardBehaviour.disableToolbar,cascadeFilterSelection:e.dashboardBehaviour.cascadeFilterSelection,textOverride:e.dashboardBehaviour.textOverride,labelFormat:null!=(n=e.dashboardBehaviour.labelFormat)?n:function(){},filterLibrary:null==e?void 0:e.dashboardBehaviour.filterLibrary,pdfSettings:e.dashboardBehaviour.pdfSettings,id:e.dashboardBehaviour.id,valueAlias:e.dashboardBehaviour.valueAlias,componentOverrides:null!=(i=e.dashboardBehaviour.componentOverrides)?i:{},children:h.jsx(ct,{theme:e.theme,trackEvent:e.trackEvent,dashboard:e.dashboard,componentEditor:e.componentEditor,onDashboardUpdate:e.onDashboardUpdate,updatingDashboard:e.updatingDashboard,runQueriesCallback:function(t,n){var i;return e.runQueriesCallback(t,en({},n,{dataAccessToken:null==(i=e.identityConfig.dataAccess)?void 0:i.signature}))},children:h.jsx(wf,en({},e.ai,{children:h.jsx("div",{className:"vizzly_dashboard_provider",children:h.jsxs(fb,{children:[e.editor&&h.jsx(jd,en({},e.editor,{children:e.children})),!e.editor&&h.jsx(o.Fragment,{children:e.children})]})},"_vizzly_dashboard_"+e.dashboard.id+"_"+l)}))})})};function jp(e,t){var n;return(null==(n=e.find(function(e){return"read_write"===e.scope&&t[0].id===e.globalLibraryId}))?void 0:n.token)||""}function jf(e,t,n){var i=jh(e);if(!i)throw Error("No matching library found.");return i.library.views&&i.library.customFields||jv(i),function(e,t){if(!e)throw Error("View array needs initialised");var n=e.findIndex(function(e){return e.attributes.viewId===(null==t?void 0:t.attributes.viewId)});-1!==n?e[n]=t:e.push(t)}(i.library.views,t),function(e,t){if(!e)throw Error("View object needs initialised");for(var n in e){var i;e.hasOwnProperty(n)&&null!=(i=t.library.customFields)&&i.hasOwnProperty(n)&&(t.library.customFields[n]=e[n])}}(n,i),i}var jm=function(e,t){var n=jh(e);if(!n)throw Error("No matching library found.");return n.library.views=n.library.views?n.library.views.filter(function(e){return e.attributes.viewId!==t.attributes.viewId}):[],n};function jh(e){var t=e.find(function(t){return e.some(function(e){return e.id===t.parentGlobalLibraryId})})||e.find(function(e){return null===e.parentGlobalLibraryId});if(!t)throw Error("No matching library found.");return t}var jv=function(e){e.library.views=[],e.library.customFields={}};function jg(e){return jb.apply(this,arguments)}function jb(){return(jb=et($().mark(function e(t){return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t||"function"==typeof t){e.next=2;break}throw Error("The view prop must be a function returning a Promise<Component | null>.");case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var jx,jy,jw=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="FailedToLoadIdentity",n}return ei(t,e),t}(ea(Error)),jC=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="InvalidIdentityReturn",n}return ei(t,e),t}(ea(Error)),jj=function(e){var t,n;return en({},(n=null==(t=e.split("."))?void 0:t[1],JSON.parse(("object"==typeof window&&window&&window.atob?window.atob(n):i.from(n,"base64").toString()).toString())),{signature:e})},jS=function(e,t,n,i){var r=jj(e);"scope"in r||(r.scope="read_write");var o={dashboardAccess:r,dataAccess:t?jj(t):void 0,queryEngineAccessConfig:n?jj(n):void 0,dashboardAdminOverride:i?jj(i):void 0};return jF(o),o},jF=function(e){var t=new Date,n=new Date(e.dashboardAccess.expires),i=!!e.dataAccess&&new Date(e.dataAccess.expires);!1!==i&&i<t&&console.warn("Vizzly data access token expired at;",i),n<t&&console.warn("Vizzly dashboard access token expired at;",n)},jk=function(e){if(!e)throw new jC("Failed to load identity.");var t=p.object({dashboardAccessToken:p.string().required(),dataAccessToken:p.string(),queryEngineAccessToken:p.string(),projectAccessToken:p.string().optional()}).validate(e).error;if(t)throw new jC(t.message);return e},jT=(jx=et($().mark(function e(t){var n,i,r;return $().wrap(function(e){for(var o;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(n=jk(n=e.sent)){e.next=6;break}throw new jw("Failed to fetch identity config.");case 6:return i=j_()&&((o=window.location.href).split("#vizzly_")[1]||new URLSearchParams(new URL(o).search).get("_vizzlyDashboardAdmin"))||null,r=jS(n.dashboardAccessToken,n.dataAccessToken,n.queryEngineAccessToken,i),e.abrupt("return",{identityConfig:r,tokens:n});case 9:case"end":return e.stop()}},e)})),function(e){return jx.apply(this,arguments)}),j_=function(){return"undefined"!=typeof window},jI=[{namespace:"config.supported_operator",constants:ep},{namespace:"config.supported_aggregate",constants:ew},{namespace:"config.supported_time",constants:eQ}],jA=function(e,t,n){var i={};return Object.entries(e).forEach(function(e){var r=e[0],o=e[1];i[r]=en({},o,{publicName:t(n+"."+r,o.publicName)})}),i},jD=function(e){function t(){var t;return(t=e.call(this,"Identity prop type is invalid.")||this).name="InvalidIdentityPropType",t}return ei(t,e),t}(ea(Error)),jO=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="FailedToResolveDataSets",n}return ei(t,e),t}(ea(Error)),jE=function(e){function t(){var t;return(t=e.call(this,"dataSets property is not valid")||this).name="InvalidDataSetsPropType",t}return ei(t,e),t}(ea(Error)),jL=(jy=et($().mark(function e(t,n,i){var r,o;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=y2(t),e.next=3,r({method:"post",body:{dynamicConfig:"object"==typeof t?t.dynamicConfig:void 0,integritySignature:n},mode:"cors",path:"/api/v1/resolve-data-sets",abortSignal:i});case 3:if(200!=(o=e.sent).status){e.next=6;break}return e.abrupt("return",o.body.dataSets);case 6:throw new jO("Failed to resolve data sets from "+JSON.stringify(t)+". Received status "+o.status);case 7:case"end":return e.stop()}},e)})),function(e,t,n){return jy.apply(this,arguments)}),jP=function(e,t){var n;if(e)return e;if("function"==typeof t){if(!e)throw"dataSets function is required when loading a custom query engine config.";return e}if(t)return n=et($().mark(function e(n){var i;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jL(t,null==(i=n.dataAccess)?void 0:i.signature);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)};throw new jE},jR=function(e,t){var n;return n=et($().mark(function n(i,r){var o,a;return $().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,"function"==typeof(o=jP(e,t))){n.next=4;break}throw new jE;case 4:return n.next=6,o(i,r);case 6:if(a=n.sent){n.next=9;break}throw new jO("Failed to fetch data sets from the query engine endpoint");case 9:return n.abrupt("return",a.map(function(e){return iM(e,r)}));case 12:if(n.prev=12,n.t0=n.catch(0),eR(n.t0),!(n.t0 instanceof jE)){n.next=17;break}throw n.t0;case 17:if(!(n.t0 instanceof Q.Errors.FailedToResolveDataSets)){n.next=19;break}throw new jO(n.t0.message);case 19:throw new jO("Failed to fetch data sets.");case 20:case"end":return n.stop()}},n,null,[[0,12]])})),function(e,t){return n.apply(this,arguments)}},jN={apiHost:"https://api.vizzly.co"},jM=function(){function e(e,t,n,i){void 0===i&&(i=jN),this.queryEngineConfig=void 0,this.dataSets=void 0,this.queryEngine=void 0,this.loadAccessTokens=void 0,this.loadDataSetsCallback=void 0,this.options=void 0,this.queryEngine=e||"in-browser",this.loadAccessTokens=t,this.loadDataSetsCallback=n,this.options=en({},jN,i)}var t,n,i,r,o=e.prototype;return o.getQueryEngineConfig=(t=et($().mark(function e(){var t=this;return $().wrap(function(e){for(var n,i;;)switch(e.prev=e.next){case 0:if(!this.queryEngineConfig){e.next=2;break}return e.abrupt("return",this.queryEngineConfig);case 2:return e.next=4,y4(this.queryEngine,this.loadDataSetsCallback);case 4:return this.queryEngineConfig=e.sent,this.queryEngineConfig=(n=function(e,n,i){return iS(e,n,i,t.options.textOverrides,t.options.developerMode)},i=void 0,(i=en({},this.queryEngineConfig)).supportedAggregates&&(i.supportedAggregates=jA(i.supportedAggregates,n,jI[1].namespace)),i.supportedTimeTruncFunctions&&(i.supportedTimeTruncFunctions=jA(i.supportedTimeTruncFunctions,n,jI[2].namespace)),i.supportedOperators&&(i.supportedOperators=jA(i.supportedOperators,n,jI[0].namespace)),i),e.abrupt("return",this.queryEngineConfig);case 8:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)}),o.getIdentity=(n=et($().mark(function e(){var t;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("function"==typeof this.loadAccessTokens){e.next=2;break}throw new jD;case 2:return e.next=4,jT(this.loadAccessTokens);case 4:return e.abrupt("return",{accessTokens:(t=e.sent).tokens,identityConfig:t.identityConfig});case 8:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)}),o.getDataSets=(i=et($().mark(function e(){var t,n,i;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdentity();case 2:return t=e.sent.identityConfig,e.next=6,this.getQueryEngineConfig();case 6:return n=e.sent,i=jR(this.loadDataSetsCallback,this.queryEngine),e.next=10,i(t,n);case 10:return this.dataSets=e.sent,e.abrupt("return",this.dataSets);case 12:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)}),o.load=(r=et($().mark(function e(){var t,n,i,r,o;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.getIdentity(),this.getQueryEngineConfig(),this.getDataSets()]);case 2:return n=(t=e.sent)[0].identityConfig,r=t[2],o=this.getDashboardStorageStrategy(i=t[1]),e.abrupt("return",{queryEngineConfig:i,dataSets:r,identityConfig:n,dashboardStorageStrategy:o});case 8:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)}),o.getDashboardStorageStrategy=function(e){return"function"==typeof this.queryEngine?{strategy:"vizzlyApi"}:e.supportedFeatures.includes("encryptedDashboards")&&"in-browser"!==this.queryEngine?{strategy:"queryEngine",endpoint:this.queryEngine}:{strategy:"vizzlyApi"}},e}();function jz(e,t){if(!t)throw Error("Query engine config is required to validate filters");return xQ(e,t)}var jq=function(e){function t(){return e.apply(this,arguments)||this}return ei(t,e),t}(ea(Error)),jB=function(e){function t(t,n){var i;return(i=e.call(this,"'Issue with Services in "+n+": '"+t+"'")||this).name="ServicesValidation",i}return ei(t,e),t}(t5),jV=function(){function e(e){if(this.component=void 0,this.colSpan=void 0,this.localFilters=void 0,this.isEmpty=void 0,null!=e&&e.component){var t;this.component=null==e?void 0:e.component,this.colSpan=null!=(t=null==e?void 0:e.colSpan)?t:12}else{var n,i=ar(null!=(n=null==e?void 0:e.colSpan)?n:12);this.colSpan=i.colSpan,this.isEmpty=i.isEmpty}null!=e&&e.localFilters&&(this.localFilters=jz(e.localFilters,S5.use().getViewConfiguration().queryEngineConfig))}var t=e.prototype;return t.set=function(e){var t;this.component=e.component,this.colSpan=null!=(t=e.colSpan)?t:12,this.isEmpty=!e.component||void 0,null!=e&&e.localFilters&&(this.localFilters=jz(e.localFilters,S5.use().getViewConfiguration().queryEngineConfig))},t.setColSpan=function(e){try{(function(e){var t=dO.validate(e).error;if(t)throw new jq(t.message)})(e),this.colSpan=e}catch(t){throw new jB(t,"Cell.setColSpan")}},t.setComponent=function(e){this.component=e,this.isEmpty=void 0},t.emptyCell=function(e){var t=ar(null!=e?e:12);this.colSpan=t.colSpan,this.isEmpty=t.isEmpty,this.component=void 0},e}(),jW=function(){function e(e,t){this.components=[],this.height=350,this.components=null!=e?e:[],this.height=null!=t?t:350,this.validateTotalColSpan()}var t=e.prototype;return t.addCell=function(e,t){void 0===t?this.components.push(e):this.components.splice(t,0,e),this.validateTotalColSpan()},t.setHeight=function(e){this.height=e},t.setRow=function(e){this.components=e,this.validateTotalColSpan()},t.set=function(e,t){this.components=e,this.height=null!=t?t:350,this.validateTotalColSpan()},t.validateTotalColSpan=function(){if(this.components.reduce(function(e,t){return e+t.colSpan},0)>12)throw Error("Total column span of cells exceeds the allowed limit of 12.")},e}(),jH=function(){function e(e){this.component=void 0;var t=at("New Header");e&&(t=en({},t,{displayTitle:e}));var n=as([t],52);this.component=[n]}return e.prototype.setTitle=function(e){if(!this.component)throw Error("Header is undefined");an(this.component[0].components[0])&&(this.component[0].components[0].displayTitle=e)},e}(),jY=function(){function e(e,t){this.dashboard=void 0;var n={id:e};null!=t&&t.display&&(n=en({},n,{display:jG(null==t?void 0:t.display)})),null!=t&&t.customFields&&(n=en({},n,{customFields:t.customFields})),null!=t&&t.library&&(n=en({},n,{componentLibrary:jU(null==t?void 0:t.library)})),this.dashboard=dV(n)}var t=e.prototype;return t.setDisplay=function(e){var t=jG(e);if(!this.dashboard)throw Error("Dashboard is undefined");this.dashboard.display=t},t.setCustomFields=function(e){if(!this.dashboard)throw Error("Dashboard is undefined");this.dashboard.customFields=e},t.setLibrary=function(e){if(!this.dashboard)throw Error("Dashboard is undefined");this.dashboard.componentLibrary=jU(e)},t.build=function(){var e,t;if(!this.dashboard)throw Error("Dashboard is undefined");return en({},this.dashboard,{display:null==(e=this.dashboard)?void 0:e.display,componentLibrary:null==(t=this.dashboard)?void 0:t.componentLibrary})},e}();function jG(e){var t=[];return e.forEach(function(e){if(e instanceof jW){var n,i,r=null==e?void 0:e.components.map(function(e){var t;return e.component&&!e.isEmpty?{attributes:e.component.attributes,localFilters:null!=(t=e.localFilters)?t:[],updatesFromParameters:{},results:[],colSpan:e.colSpan,reports:[]}:{colSpan:e.colSpan,isEmpty:!0}});t.push({height:null!=(i=e.height)?i:350,components:r})}e instanceof jH&&(null==(n=e.component)||n.forEach(function(e){t.push({height:e.height,components:e.components})}))}),t}var jU=function(e){var t,n=[],i=new Set;return null==e||null==(t=e.library)||t.forEach(function(e){if(e.component&&e.component.attributes){var t,r=e.component.attributes.viewId;if(i.has(null!=r?r:""))throw Error("Duplicate viewId found: "+r);i.add(null!=r?r:""),n.push({attributes:e.component.attributes,localFilters:null!=(t=e.localFilters)?t:[],updatesFromParameters:{},results:[],colSpan:1,reports:[]})}}),n};function jK(e){var t=p.object({component:p.object().required(),uniqueViewId:p.string().min(1).required().messages({"string.base":"\"uniqueViewId\" should be a type of 'text'","string.empty":'"uniqueViewId" cannot be an empty field',"string.min":'"uniqueViewId" should have a minimum length of {#limit}',"any.required":'"uniqueViewId" maybe undefined or null'})}).validate(e).error;if(t)throw new jq(t.message)}var jX,jQ=function(){function e(e){this.library=void 0,this.library=[],null!=e&&e.components&&this.addComponents(null==e?void 0:e.components)}var t=e.prototype;return t.addComponent=function(e,t,n){try{jK({component:e,uniqueViewId:t});var i,r,o=new jV({component:jJ(e,t),colSpan:1,localFilters:null==n?void 0:n.localFilters});void 0===(null==n?void 0:n.position)?null==(i=this.library)||i.push(o):null==(r=this.library)||r.splice(n.position,0,o)}catch(a){throw new jB(a,"Library.addComponent")}},t.addComponents=function(e){var t=this;try{if(void 0===e)throw new jB("Components are undefined","Library.addComponents");e.forEach(function(e){jK(e);var n,i=new jV({component:jJ(e.component,e.uniqueViewId),colSpan:1});null==(n=t.library)||n.push(i)})}catch(n){throw new jB(n,"Library.addComponents")}},e}(),jJ=function(e,t){return en({},e,{attributes:en({},e.attributes,{viewId:t})})},jZ=function(){function e(e){this.editor=void 0,null!=e&&e.component&&(this.editor=e.component)}var t=e.prototype;return t.setComponent=function(e){if(!this.editor)throw Error("Editor is undefined");this.editor=e},t.build=function(){if(!this.editor)throw Error("Editor is undefined");return am({attributes:this.editor.attributes})},e}(),j$=function(){function e(e){this.attributes=void 0,this.vizzly=void 0,this.vizzly=S5.use();var t=iA(e.type,{queryEngineConfig:this.vizzly.getViewConfiguration().queryEngineConfig});this.attributes=(0,t.init)(null==e?void 0:e.dataSetId,e)}return e.prototype.updateAttributes=function(e){var t=iA(this.attributes.type,{queryEngineConfig:this.vizzly.getViewConfiguration().queryEngineConfig}).setAttributes;if(!this.attributes)throw Error("Attributes have not been initialized yet");this.attributes=t(this.attributes,e)},e}(),j0=function(e){function t(t){return e.call(this,en({},t,{type:"areaChart"}))||this}return ei(t,e),t.type=function(){return"areaChart"},t}(j$),j1=function(e){function t(t){return e.call(this,en({},t,{type:"lineChart"}))||this}return ei(t,e),t.type=function(){return"lineChart"},t}(j$),j2=function(e){function t(t){return e.call(this,en({},t,{type:"barChart"}))||this}return ei(t,e),t.type=function(){return"barChart"},t}(j$),j5=function(e){function t(t){return e.call(this,en({},t,{type:"pieChart"}))||this}return ei(t,e),t.type=function(){return"pieChart"},t}(j$),j7=function(e){function t(t){return e.call(this,en({},t,{type:"scatterChart"}))||this}return ei(t,e),t.type=function(){return"scatterChart"},t}(j$),j4=function(e){function t(t){return e.call(this,en({},t,{type:"comboChart"}))||this}return ei(t,e),t.type=function(){return"comboChart"},t}(j$),j3=function(e){function t(t){return e.call(this,en({},t,{type:"dataTable"}))||this}return ei(t,e),t.type=function(){return"dataTable"},t}(j$),j6=function(e){function t(t){return e.call(this,en({},t,{type:"basicTable"}))||this}return ei(t,e),t.type=function(){return"basicTable"},t}(j$),j8=function(e){function t(t){return e.call(this,en({},t,{type:"horizontalBarChart"}))||this}return ei(t,e),t.type=function(){return"horizontalBarChart"},t}(j$),j9=function(e){function t(t){return e.call(this,en({},t,{type:"mercatorMap"}))||this}return ei(t,e),t.type=function(){return"mercatorMap"},t}(j$),Se=function(e){function t(t){return e.call(this,en({},t,{type:"singleStat"}))||this}return ei(t,e),t.type=function(){return"singleStat"},t}(j$),St=function(e){function t(t){return e.call(this,en({},t,{type:"progress"}))||this}return ei(t,e),t.type=function(){return"progress"},t}(j$),Sn=function(e){function t(t){var n;return(n=e.call(this,"Vizzly has not yet been loaded. Please see the instantiation docs;\nhttps://docs.vizzly.co/services/initializing\n\nThis might be expected behavior if you have set it up correctly. If so, you will need\nto handle this error and retry once Vizzly has finished loading.\n\nInstance Id; "+t)||this).name="VizzlyInstanceNotLoaded",n}return ei(t,e),t}(ea(Error)),Si=function(e){function t(t,n){var i;return(i=e.call(this,"Timeout waiting for Vizzly to load. Please see the instantiation docs;\nhttps://docs.vizzly.co/services/initializing\n\nThis might be expected behavior if you have set it up correctly. If so, you will need\nto bump the timeout which was set to "+n+"ms.\n\nInstance Id; "+t)||this).name="TimeoutWaitingForVizzlyInstance",i}return ei(t,e),t}(ea(Error)),Sr={convert:!1,stripUnknown:!1,allowUnknown:!0},So=function(e,t){var n=p.array().items(Sl(t)).validate(e,Sr);if(n.error)throw new jq(n.error.message)},Sa=function(e){var t;return p.array().items(p.alternatives().try(p.object({field:p.string().required().description("The ID of the field from the data set to reference."),op:(t=p.string()).valid.apply(t,Object.keys(e.supportedOperators)).required(),value:p.any().required()}).description("A filter object to apply to the data set."),p.array()))},Sl=function(e){return p.object(en({},tS(e,{}),{filter:Sa(e),timeDimension:p.alternatives(tg(e.supportedTimeTruncFunctions),p.valid(null))}))},Ss={convert:!1,stripUnknown:!1,allowUnknown:!0},Su=function(e,t){var n=p.object({definition:t?dL(t):p.object().required(),parentDashboardId:p.string().required(),metadata:p.object()}).validate(e,Ss);if(n.error)throw new jq(n.error.message)},Sd=function(e,t){var n=p.object({dashboardId:p.string().required(),definition:t?dL(t):p.object().required(),metadata:p.object().optional(),deleted:p.boolean().optional()}).validate(e,Ss);if(n.error)throw new jq(n.error.message)},Sc=((jX={}).SAVING="saving",jX.SAVED="saved",jX.DELETED="deleted",jX),Sp=function(e,t){return e.map(function(e){return e.map(function(e){var t=e.field;return{id:eV({field:t.id,function:e.functionId}),publicName:t.publicName,dataType:t.dataType}})})},Sf=function(e,t,n){var i=t.map(function(t){var i=iE(e,t.dataSetId);if(!i)throw"Data set not found for query attributes query";return tf(i,t.measure,t.order,t.filter,t.dimension,t.timeDimension,t.limit,t.offset,n)});return{queries:i.map(function(e){return e.query}),resultFields:Sp([].concat(i).map(function(e){return e.measureDescription}))}};function Sm(e,t){var n=e.optionsFilters?e.optionsFilters[t.dataSetId]:[];return null==n?void 0:n.filter(function(e){return e.field!==t.fieldId})}var Sh,Sv,Sg,Sb,Sx,Sy,Sw,SC,Sj,SS=function(e,t,n,i){var r=tf(t,e.measure,e.order,tu(e.filter,n),e.dimension,e.timeDimension||null,e.limit,e.offset,i);return{queries:[r.query],resultFields:Sp([r.measureDescription])}},SF=function(e,t,n){var i=[],r=[];if(Array.isArray(e)&&"type"in e[0]&&"preparedQuery"==e[0].type&&"preAggregated"==e[0].preparedQueryType){var o,a=iE(n.dataSets,e[0].dataSetId);if(!a)throw"Data set not found for pre aggregated query";var l,s,u=a.preAggregated[0],d={query:l=e[0],resultFields:a.fields.map(function(e){return{id:e.id,publicName:e.publicName,dataType:e.dataType}})},c=d.query,p=d.resultFields,f=iE(n.dataSets,u),m=tq(n.filterConfig,f,n.timeRangeOptions),h=td([m],t,f);i=[en({},c,{filter:((o={})[f.id]=h,o)})],r=[p]}else if(Array.isArray(e)&&"type"in e[0]&&"preparedQuery"==e[0].type&&"uniqueArrayValues"==e[0].preparedQueryType){i=[e[0]];var v=iE(n.dataSets,e[0].dataSetId);if(!v)throw"Data set not found for view attributes query";var g=iP(v,e[0].fieldId),b=tZ(e[0].dataSetId,g);i=[b.query],r=[b.resultFields]}else if(Array.isArray(e)){var x=[].concat(e).map(function(e){var t=iE(n.dataSets,e.dataSetId);if(!t)throw"Data set not found for query-attributes query";var i=tq(n.filterConfig,t,n.timeRangeOptions);return en({},e,{filter:tu(e.filter,i)})}),y=Sf(n.dataSets,x,t);i=y.queries,r=y.resultFields}else if("type"in e&&("order"in e||"measure"in e)){var w=iE(n.dataSets,e.dataSetId);if(!w)throw"Data set not found for view attributes query";var C=function(e,t,n,i){var r,o,a,l,s,u,d,c,p,f,m,h,v,g,b,x,y,w,C,j,S,F,k,T,_,I,A,D,O,E,L,P,R,N,M,z,q,B,V,W,H,Y,G,U;switch(e.type){case"areaChart":case"barChart":case"horizontalBarChart":case"lineChart":case"pieChart":case"dataTable":case"basicTable":return SS(e,t,n,i);case"comboChart":return p=tf(t,e.lineMeasure,e.order,tu(e.filter,n),e.lineDimension,e.timeDimension,e.limit,e.offset,i),m=(f={bar:tf(t,e.barMeasure,e.order,tu(e.filter,n),e.barDimension,e.timeDimension,e.limit,e.offset,i),line:p}).line,h=f.bar,{queries:[m.query,h.query],resultFields:Sp([m.measureDescription,h.measureDescription])};case"singleStat":case"progress":return I=(_=tf(t,e.measure,[],tu(e.filter,n),[],null,1,e.offset,i)).query,A=_.measureDescription,I.measure=[{type:"number",value:0}].concat(I.measure),D={query:I,measureDescription:A=[{field:{id:"single-stat-bumper-field",canBeDimension:!1,canBeMeasure:!1,publicName:"",dataType:"number",allowedOperators:[]},functionId:"none"}].concat(A)},O=null,"deltaTimeDimension"in e&&(O=e.deltaTimeDimension?tf(t,e.measure,[{field:e.deltaTimeDimension.field,direction:"asc",function:e.deltaTimeDimension.truncate}],tu(e.filter,n),[],e.deltaTimeDimension,e.limit,e.offset,i):null),{queries:(N={queries:O?[D.query,O.query]:[D.query],measureDescription:O?[D.measureDescription,O.measureDescription]:[D.measureDescription]}).queries,resultFields:Sp(N.measureDescription)};case"scatterChart":return V=[],e.xMeasure&&V.push(e.xMeasure),e.yMeasure&&V.push(e.yMeasure),{queries:[(W=tf(t,V,e.order,tu(e.filter,n),e.dimension,e.timeDimension,e.limit,e.offset,i)).query],resultFields:Sp([W.measureDescription])};case"mercatorMap":return Sf([t],[{measure:e.measure,dataSetId:t.id,dimension:e.dimension,limit:e.limit,filter:tu(e.filter,n),order:[],timeDimension:null}],i);default:throw"Unsupported."}}(e,w,tq(n.filterConfig,w,n.timeRangeOptions),t);i=C.queries,r=C.resultFields}else if("custom"!=e.type){var j,S,F,k,T=(S=n.dataSets,{queries:(k=[].concat(e.appliesToFields).map(function(n){var i=iE(S,n.dataSetId);if(!i)throw"Data set not found for additional filter query";var r=iP(i,n.fieldId);if("string[]"==r.dataType){var o=td([Sm(e,n)],t,i),a=tZ(n.dataSetId,r,o);return{queries:[a.query],resultFields:[a.resultFields]}}var l=t$(i,n.fieldId,Sm(e,n));return Sf(S,[l],t)})).flatMap(function(e){return e.queries}),resultFields:k.flatMap(function(e){return e.resultFields})});i=T.queries,r=T.resultFields}return{queries:i,resultFields:r}},Sk={},ST=function(e,t,n){var i=JSON.stringify(e),r=new Date;r.setSeconds(r.getSeconds()+n),eO("Browser cache new object set.",i),Sk[i]={item:t,expires:r}},S_=function(e){var t=JSON.stringify(e),n=Sk[t];if(!n)return eO("Browser cache miss.",e),null;eO("Browser cache hit.",e);var i=n.item,r=n.expires;return new Date<r?i:(delete Sk[t],null)},SI=function e(t){return Array.isArray(t)?0==t.length:"object"==typeof t&&e(Object.keys(t))},SA=(Sh=et($().mark(function e(t,n,i,r){var o,a,l,s;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o={},t.forEach(function(e,t){var n=S_(r(e));n&&(eO("Query result received from the cache."),o[t]=n)}),t.forEach(function(e,t){n(e)||(eO("Query is not runnable."),o[t]=null)}),a=t.filter(function(e,t){return n(e)&&void 0===o[t]}),l=[],SI(a)){e.next=9;break}return e.next=8,i(a);case 8:l=e.sent;case 9:if(null!==l){e.next=11;break}return e.abrupt("return",null);case 11:if(!SI(l)||!SI(o)){e.next=13;break}return e.abrupt("return",null);case 13:return s=[].concat(t).map(function(e,t){var i,a=o[t];if(n(e)&&null==a&&(a=(null==(i=l)?void 0:i.shift())||null,ST(r(e),a,20)),void 0===a)throw"A result went missing...";return a}),e.abrupt("return",s);case 15:case"end":return e.stop()}},e)})),function(e,t,n,i){return Sh.apply(this,arguments)}),SD=(Sv=et($().mark(function e(t,n,i,r){var o,a,l;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=y2(n),e.next=3,o({path:"/api/v1/create-results",method:"post",mode:"cors",body:{queries:t,virtualFields:{},dynamicConfig:"object"==typeof n?n.dynamicConfig:void 0,identityConfigIntegritySignature:i},abortSignal:r});case 3:return l=(a=e.sent).body,e.abrupt("return",200==a.status?l:null);case 7:case"end":return e.stop()}},e)})),function(e,t,n,i){return Sv.apply(this,arguments)}),SO=(Sg=et($().mark(function e(t,n,i){var r,o,a,l,s;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=(r=SF(n,t.queryEngineConfig,i)).queries,a=r.resultFields,e.next=3,SA(o,function(e){return!0},function(){var e=et($().mark(function e(n){return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,SD(n,t.queryEngineEndpoint,t.dataAccessToken,i.abortSignal);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),function(e){return{query:e,cacheKeyNamespace:t.cacheKeyNamespace}});case 3:return l=e.sent,s=[].concat(o).map(function(e,t){if(null===l)return null;var n=l[t];return void 0===n?null:{content:n,fields:a[t]}}),e.abrupt("return",s);case 6:case"end":return e.stop()}},e)})),function(e,t,n){return Sg.apply(this,arguments)}),SE={},SL=[],SP={},SR=(Sb=et($().mark(function e(t,n,i){var r,o;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(SP[t.id]||(SP[t.id]=J(n,5e3,{leading:!0})),r=SP[t.id],eO("Fetching data for in-browser query engine. DataSet;",t.id,"CacheKey;",i),!SE[i]){e.next=8;break}return eO("Returning data for in-browser query engine from the cache."),e.abrupt("return",SE[i]);case 8:return e.next=10,r(t);case 10:return(o=e.sent)||SL.includes(t.id)||(SL.push(t.id),console.error("Failed to download data for data set "+t.id)),o&&r.cancel(),SE[i]=o,e.abrupt("return",o);case 15:case"end":return e.stop()}},e)})),function(e,t,n){return Sb.apply(this,arguments)}),SN=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="MissingVizzlyInMemoryDb",n}return ei(t,e),t}(ea(Error)),SM=function(){var e=window.VizzlyInMemoryDb;if(!e)throw new SN("VizzlyInMemoryDb missing! This means that 'window.VizzlyInMemoryDb' was not set. This is required for the in-browser vizzly setup.\n\nPlease ensure you have added the script tag to load the in-browser query engine.\n\nFor example, this should be added within the <head> tag;\n<script src=\"https://static.app.vizzly.co/query-engine/0.8.16/vizzly-in-memory-db.umd.js\"></script>\n\nNote, you can change the version of the in-memory database by changing '0.8.3' to the version you require.\n");return e},Sz=function(e,t){var n={type:"orWhere",value:[].concat([].concat(e).filter(function(e){return!s.isEmpty(e)})).map(function(e){return{type:"andWhere",value:e.map(function(e){return{type:"where",left:Sq(e.field,t),op:e.op,right:{type:s.isArray(e.value)?"list":s.isNumber(e.value)?"number":"unsafeString",value:s.isArray(e.value)?e.value.map(function(e){return{type:"unsafeString",value:e}}):e.value}}})}})},i={type:"andWhere",value:[]};return s.isEmpty(n.value)||(i.value=[].concat(i.value,[n])),i},Sq=function e(t,n){if("subquery"==t.type)return{type:"subquery",value:{select:[e(t.value.measure[0],n)],where:Sz(t.value.filter,n),join:[]}};if("maths"==t.type)return{type:"maths",left:e(t.left,n),right:e(t.right,n),op:t.op};if("date_maths"==t.type)return{type:"date_maths",left:e(t.left,n),right:e(t.right,n),op:t.op};if("number"==t.type||"null"==t.type)return t;if("string"==t.type)return{type:"unsafeString",value:t.value};if("function"==t.type)return{type:"function",function:t.function,value:e(t.value,n)};if("switchField"==t.type)return{type:"case",value:{cases:t.value.cases.map(function(t){return{result:e(t.returns,n),where:Sz(t.filter,n)}})}};if("field"==t.type&&"none"!=t.function){var i=iP(n,t.value);return{type:"function",function:t.function,value:{type:"field",value:{nativeDataType:i.dataType,address:["_",n.id,i.id]}}}}if("field"===t.type){var r=iP(n,t.value);return{type:"field",value:{nativeDataType:r.dataType,address:["_",n.id,r.id]}}}throw"Unsupported measure in JS query engine "+JSON.stringify(t)},SB=(Sx=et($().mark(function e(t,n){var i,r,o,a,l,s,u;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("query"!==t.type){e.next=10;break}if(0!==(null==t||null==(i=t.measure)?void 0:i.length)){e.next=3;break}return e.abrupt("return",[[]]);case 3:return o={select:t.measure.map(function(e){return Sq(e,n)}),where:Sz(t.filter,n),order:t.order,group:t.group,join:[],limit:t.limit||5e3,offset:t.offset||0,from:["_",t.dataSetId]},e.next=6,SM().query(o);case 6:return e.abrupt("return",(null==(a=e.sent)||null==(r=a[0])?void 0:r.values)||[]);case 10:if("preparedQuery"!==t.type||"uniqueArrayValues"!==t.preparedQueryType){e.next=16;break}return s={type:"uniqueArrayValues",field:{type:"field",value:{address:["_",t.dataSetId,t.fieldId],nativeDataType:"JSON"}},where:Sz(t.filter,n),join:[]},e.next=14,SM().query(s);case 14:return e.abrupt("return",(null==(u=e.sent)||null==(l=u[0])?void 0:l.values)||[]);case 16:throw"Unsupported query";case 17:case"end":return e.stop()}},e)})),function(e,t){return Sx.apply(this,arguments)}),SV=function(e,t){return e+"::"+t},SW=(Sy=et($().mark(function e(t,n,i){var r;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[].concat(t).map(function(){var e=et($().mark(function e(t){var r,o,a;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=iN(n,t.dataSetId)[0],!SE[SV(i,t.dataSetId)]||!o){e.next=10;break}return e.next=6,SB(t,o);case 6:return e.abrupt("return",e.sent);case 10:return console.warn("Returning an empty result."),e.abrupt("return",[]);case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),function(e,t,n){return Sy.apply(this,arguments)}),SH=(Sw=et($().mark(function e(t,n,i,r){return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,SM().init(n.map(function(e){return{id:null==e?void 0:e.id,fields:null==e?void 0:e.fields.map(function(e){return{id:e.id,dataType:e.dataType}})}}));case 2:return e.next=4,Promise.all([].concat(t).flatMap(function(){var e=et($().mark(function e(t){var o,a,l,s;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=iN(n,t.dataSetId)[0])){e.next=8;break}return e.next=4,SR(a,i,SV(r,t.dataSetId));case 4:return l=e.sent,s={id:null==a?void 0:a.id,fields:null==a?void 0:a.fields.map(function(e){return{id:e.id,dataType:e.dataType}})},e.next=8,SM().ingest(s,l||[]);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 4:return e.next=6,SW(t,n,r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)})),function(e,t,n,i){return Sw.apply(this,arguments)}),SY=(SC=et($().mark(function e(t,n,i){var r,o,a,l,s;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=(r=SF(n,av,i)).queries,a=r.resultFields,e.next=3,SA(o,function(e){return!0},function(){var e=et($().mark(function e(n){return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,SH(n,i.dataSets,t.loadData,t.cacheKeyNamespace);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),function(e){return{query:e,cacheKeyNamespace:t.cacheKeyNamespace}});case 3:return null===(l=e.sent)&&(l=o.map(function(){return null})),s=[].concat(o).map(function(e,t){if(null===l)return null;var n=l[t];return void 0===n?null:{content:n,fields:a[t]}}),e.abrupt("return",s);case 7:case"end":return e.stop()}},e)})),function(e,t,n){return SC.apply(this,arguments)}),SG=(Sj=et($().mark(function e(t,n,i){var r,o,a,l;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=(r=SF(n,t.queryEngineConfig,i)).queries,a=r.resultFields,e.next=3,SA(o,function(e){return"preparedQuery"==e.type&&eP("Custom query engine does not support prepared queries."),"query"==e.type},function(){var e=et($().mark(function e(n){var r;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.runQueries(n,en({},i,{dataAccessToken:t.dataAccessToken}));case 2:if(null!=(r=e.sent)){e.next=5;break}return e.abrupt("return",n.map(function(){return null}));case 5:return e.abrupt("return",r.map(function(e,t){return Array.isArray(e)?{fields:a[t],content:e}:e}));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),function(e){return{query:e,cacheKeyNamespace:t.cacheKeyNamespace}});case 3:if(null!==(l=e.sent)){e.next=6;break}return e.abrupt("return",o.map(function(){return null}));case 6:return e.abrupt("return",l);case 7:case"end":return e.stop()}},e)})),function(e,t,n){return Sj.apply(this,arguments)});function SU(e,t,n){return SK.apply(this,arguments)}function SK(){return(SK=et($().mark(function e(t,n,i){return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("vizzlyQueryEngine"!=t.type){e.next=4;break}return e.next=3,SO(t,n,i);case 3:case 7:case 11:return e.abrupt("return",e.sent);case 4:if("vizzlyJsQueryEngine"!=t.type){e.next=8;break}return e.next=7,SY(t,n,i);case 8:if("custom"!=t.type){e.next=12;break}return e.next=11,SG(t,n,i);case 12:return e.abrupt("return",[]);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}var SX=function(e,t,n,i,r,o){var a,l,s,u,d,c=(d=e.dashboardAccess,["accessType","dashboardId","projectId","userReference","scope"].map(function(e){return e+":"+d[e]}).join(":::"));if(i)return a=et($().mark(function r(o,a){var l;return $().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,SU({type:"custom",queryEngineConfig:t,runQueries:i,dataAccessToken:null==(l=e.dataAccess)?void 0:l.signature,cacheKeyNamespace:c},o,{abortSignal:a.abortSignal,dataSets:a.dataSets,filterConfig:a.filterConfig||{},timeRangeOptions:n});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},r)})),function(e,t){return a.apply(this,arguments)};if(r)return l=et($().mark(function e(t,i){return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,SU({type:"vizzlyJsQueryEngine",loadData:r,cacheKeyNamespace:c},t,{abortSignal:i.abortSignal,dataSets:i.dataSets,filterConfig:i.filterConfig||{},timeRangeOptions:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e,t){return l.apply(this,arguments)};if(o&&null!=(u=e.dataAccess)&&u.signature)return s=et($().mark(function i(r,a){var l;return $().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,SU({type:"vizzlyQueryEngine",queryEngineConfig:t,dataAccessToken:null==(l=e.dataAccess)?void 0:l.signature,queryEngineEndpoint:o,cacheKeyNamespace:c},r,{abortSignal:a.abortSignal,dataSets:a.dataSets,filterConfig:a.filterConfig||{},timeRangeOptions:n});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},i)})),function(e,t){return s.apply(this,arguments)};throw"Missing required props."};Q.VizzlyApiClientLogger.UserAgentProduct="Services";var SQ=en({},{apiHost:"https://api.vizzly.co"}),SJ=function(){function e(e,t,n,i,r,o){var a,l,s,u,d,c,p,f,m,h,v;this.queryEngineConfig=void 0,this.dataSets=void 0,this.identityConfig=void 0,this.vizzlyAPIClient=void 0,this.programmaticDashboard=void 0,this.globalLibraryPermissions=void 0,this.programmaticDashboard=r,this.dataSets=n,this.queryEngineConfig=t,this.identityConfig=e,this.vizzlyAPIClient=(p=new Q.Authentication({dashboardAccessToken:null==e?void 0:e.dashboardAccess.signature,dataAccessToken:null==e||null==(u=e.dataAccess)?void 0:u.signature,projectAdminOverrideToken:null==e||null==(d=e.dashboardAdminOverride)?void 0:d.signature,queryEngineAccessToken:null==e||null==(c=e.queryEngineAccessConfig)?void 0:c.signature}),f=function(){return{}},"queryEngine"===i.strategy&&"string"!=typeof i.endpoint&&(f=i.endpoint.customHeaders||f),m="queryEngine"===i.strategy?new Q.VizzlyQueryEngineApi(p,"string"==typeof i.endpoint?i.endpoint:i.endpoint.endpoint,f):void 0,h=new Q.VizzlyApi(p,o.host),v=new Q.VizzlyAppApi(p,"https://app.vizzly.co"),new Q.Vizzly({vizzlyApi:h,vizzlyAppApi:v,vizzlyQueryEngineApi:m},"queryEngine"===i.strategy?new Q.PersistViaQueryEngine:new Q.PersistDirectToVizzlyApi))}e.load=(t=et($().mark(function e(t,n){var i,r,o,a,l;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=SQ),eO("Starting load process for the services package."),r=t.programmaticDashboard,o=new jM(i=t.queryEngine,t.identity,t.dataSets,n),e.next=6,o.load();case 6:return l=new S5((a=e.sent).identityConfig,a.queryEngineConfig,a.dataSets,a.dashboardStorageStrategy,r,{host:n.apiHost}),S5._instanceStore.default=l,S5.queryEngine=i,eO("Loaded services package and added it to the instance store."),e.abrupt("return",l);case 16:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)}),e.use=function(e){void 0===e&&(e="default");var t=S5._instanceStore[e];if(!t)throw new Sn(e);return t},e.waitToUse=(n=et($().mark(function t(n,i){var r,o;return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n="default"),void 0===i&&(i=1e4),r=e._instanceStore,o=n,t.abrupt("return",new Promise(function(e,t){if(r.hasOwnProperty(o))e(r[o]);else var a=setTimeout(function(){clearTimeout(a),t(new Si(n,i))},i),l=setInterval(function(){r.hasOwnProperty(o)&&(clearTimeout(a),clearInterval(l),e(r[o]))},10)}));case 5:case"end":return t.stop()}},t)})),function(e,t){return n.apply(this,arguments)}),e.clearInstances=function(){S5._instanceStore={}};var t,n,i,r,o,a,l,u,d,c=e.prototype;return c.createDashboard=(i=et($().mark(function e(t){var n,i,r,o,a;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Su(t,this.queryEngineConfig),i=this.vizzlyAPIClient.getDashboardManager(),e.next=5,i.create({metadata:t.metadata||t.meta,definition:t.definition,parentDashboardId:t.parentDashboardId,permissions:[{scope:"read_write"}]});case 5:return o=dR(r=e.sent.dashboard,this.queryEngineConfig),a=dB(o,this.dataSets,(null==(n=r.definition)?void 0:n.customFields)||{}),e.abrupt("return",a);case 10:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)}),c.updateDashboard=(r=et($().mark(function e(t){var n,i,r,o,a;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Sd(t,this.queryEngineConfig),i=this.vizzlyAPIClient.getDashboardManager(),e.next=5,i.update({dashboardId:t.dashboardId,metadata:t.metadata||t.meta,definition:t.definition,deleted:t.deleted,abortSignal:t.abortSignal});case 5:return o=dR(r=e.sent,this.queryEngineConfig),a=dB(o,this.dataSets,(null==(n=r.definition)?void 0:n.customFields)||{}),e.abrupt("return",a);case 9:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)}),c.getDashboards=(o=et($().mark(function t(n){var i,r,o=this;return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.vizzlyAPIClient.getDashboardManager(),t.next=4,i.getDashboards(null!=n&&n.abortController?{abortSignal:null==n?void 0:n.abortController.signal}:{});case 4:if(r=t.sent.flatMap(function(t){return e.upcastDashboard(t,o.dataSets,o.queryEngineConfig)}),!this.programmaticDashboard){t.next=18;break}return t.t0=d1,t.t1=r,t.t2=d1,t.next=12,this.programmaticDashboard(this.dataSets);case 12:return t.t3=t.sent,t.t4=this.dataSets,t.t5=t.t2.buildProgrammaticDashboard.call(t.t2,t.t3,t.t4),t.abrupt("return",t.t0.updateWithProgrammaticDashboard.call(t.t0,t.t1,t.t5));case 18:return t.abrupt("return",r);case 19:case"end":return t.stop()}},t,this)})),function(e){return o.apply(this,arguments)}),c.getGlobalLibraries=(a=et($().mark(function e(t){var n,i,r;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.vizzlyAPIClient;case 2:return n=e.sent.getGlobalLibraryManager(),e.next=6,n.getGlobalLibraries(null!=t&&t.abortController?{abortSignal:null==t?void 0:t.abortController.signal}:{});case 6:return this.globalLibraryPermissions=(i=e.sent).permissions,r=i.global_libraries.map(function(e){return{id:e.id,name:e.name,library:e.library,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at),parentGlobalLibraryId:e.parent_global_library_id}}),e.abrupt("return",r);case 10:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)}),c.getViewConfiguration=function(){return{queryEngineConfig:this.queryEngineConfig}},c.getIdentityConfig=function(){return this.identityConfig},c.query=(l=et($().mark(function t(n,i){var r,o,a,l,s,u,d=this;return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return eO("[Services] Querying data with queries:",n),r="default",null!=i&&i.instanceId&&(r=i.instanceId),o=e._instanceStore[r],a=t2(n,null==i?void 0:i.dashboardFilters),So(a,o.queryEngineConfig),l=function(){if(null!=i&&i.queryEngineEndpoint)return i.queryEngineEndpoint;if(S5.queryEngine){if("string"==typeof S5.queryEngine)return S5.queryEngine;if("string"!=typeof S5.queryEngine&&"endpoint"in S5.queryEngine)return S5.queryEngine.endpoint}}(),s=SX(o.identityConfig,o.queryEngineConfig,aw(ij,null==i?void 0:i.dateFilterOptions),null==i?void 0:i.runQueries,null==i?void 0:i.data,l),u=function(){var e=et($().mark(function e(){var t;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s(a,{abortSignal:null==i||null==(t=i.abortController)?void 0:t.signal,dataSets:d.dataSets});case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),eR("[Services] Error fetching data on query:",e.t0),e.abrupt("return",null);case 10:case"end":return e.stop()}},e,null,[[0,6]])}));return function(){return e.apply(this,arguments)}}(),t.next=11,u();case 11:return t.t0=t.sent,t.abrupt("return",{results:t.t0});case 13:case"end":return t.stop()}},t)})),function(e,t){return l.apply(this,arguments)}),e.upcastDashboard=function(e,t,n){try{var i,r=dR(e,n);return[dB(r,t,(null==(i=e.definition)?void 0:i.customFields)||{})]}catch(o){return eR("Failed to upcast dashboard "+e.id+". This dashboard will not be available for use.",o),[]}},e.filterDashboards=function(e,t){var n=s.cloneDeep(e);return t.onlyParentDashboards&&(n=n.filter(function(e){return null===e.parentDashboardId})),t.onlyChildDashboards&&(n=n.filter(function(e){return null!==e.parentDashboardId})),t.onlyChildDashboardsForParent&&(n=n.filter(function(e){return e.parentDashboardId===t.onlyChildDashboardsForParent})),t.onlyAllowScope&&(n=n.filter(function(e){var n;return(null==(n=e.permission)?void 0:n.scope)===t.onlyAllowScope})),t.onlyDashboardsIncludingMetadata&&(n=n.filter(function(e){var n=Object.keys(t.onlyDashboardsIncludingMetadata||{});return s.every(n,function(n){var i;return e.metadata[n]===(null==t||null==(i=t.onlyDashboardsIncludingMetadata)?void 0:i[n])})})),n},e.validateDashboard=function(e){},c.updateGlobalLibrary=(u=et($().mark(function e(t){var n;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=this.vizzlyAPIClient.getGlobalLibraryManager(),e.next=5,n.update(t);case 5:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),eR("Error updating global library:",e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])})),function(e){return u.apply(this,arguments)}),e.eventBusController=(d=et($().mark(function t(n,i){var r,o,a,l,s,u,d;return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=e.use(),"addComponentToLibrary"!==n.action&&"deleteComponentFromLibrary"!==n.action||!r.globalLibraryPermissions){t.next=23;break}return S5.publish({data:{action:"updateToGlobalLibraryStatus",state:Sc.SAVING}}),t.t0=Promise,t.next=7,r.getGlobalLibraries({abortController:null==i?void 0:i.abortController});case 7:return t.t1=t.sent,t.t2=[t.t1],t.next=11,t.t0.all.call(t.t0,t.t2);case 11:return l=jh(a=t.sent[0]),"addComponentToLibrary"===n.action&&(l=jf(a,n.component,n.customFields)),"deleteComponentFromLibrary"===n.action&&(l=jm(a,n.component)),s=jp(r.globalLibraryPermissions,[l]),eE("library and tokens for update",{libraryForUpdate:l,tokenForLibrary:s}),u={globalLibraryId:l.id,library:l.library,abortSignal:null==i||null==(o=i.abortController)?void 0:o.signal,globalLibrarySessionToken:s},t.next=21,r.updateGlobalLibrary(u);case 21:t.sent&&(d=Sc.SAVED,"deleteComponentFromLibrary"===n.action&&(d=Sc.DELETED),S5.publish({data:{action:"newViewsInGlobalLibrary"}}),S5.publish({data:{action:"updateToGlobalLibraryStatus",state:d}}));case 23:t.next=28;break;case 25:t.prev=25,t.t3=t.catch(0),eR("Error handling event:",t.t3);case 28:case"end":return t.stop()}},t,null,[[0,25]])})),function(e,t){return d.apply(this,arguments)}),e.publish=function(e){S5.eventBus.map(function(t){t(e)}),S5.eventBusController(e.data).catch(function(e){eR("Failed to handle event:",e)})},e.subscription=function(e){return S5.eventBus.push(e),function(){S5.eventBus=S5.eventBus.filter(function(t){return t!==e})}},e}();SJ.queryEngine=void 0,SJ._instanceStore={},SJ.DEFAULT_INSTANCE_ID="default",SJ.eventBus=[],SJ.Row=jW,SJ.Cell=jV,SJ.Dashboard=jY,SJ.Editor=jZ,SJ.Header=jH,SJ.Library=jQ,SJ.AreaChart=j0,SJ.LineChart=j1,SJ.BarChart=j2,SJ.PieChart=j5,SJ.ScatterChart=j7,SJ.ComboChart=j4,SJ.PivotTable=j3,SJ.BasicTable=j6,SJ.HorizontalBarChart=j8,SJ.MercatorMap=j9,SJ.SingleStat=Se,SJ.Progress=St,"undefined"==typeof window||window.Vizzly||(window.Vizzly=SJ);var SZ,S$,S0,S1,S2,S5="undefined"!=typeof window&&window.Vizzly||SJ,S7=function(e){var t,n,i,r=e.deleteProps,a=e.view,l=e.addTagsProps,s=uV(),u=s.ref,d=s.open,c=s.position,p=s.show,f=s.close,m=a_(),v=m.textOverride,g=o.useState(!1),b=g[0],x=g[1],y=o.useState(!1),w=y[0],C=y[1],j={delete:i="read_write"===m.scope,addTags:n=m.featureToggles.canAddTags,more:i&&n},S=(t=[],j.delete&&t.push({purpose:"removeComponentFromGlobalLibrary",renderIcon:function(){return h.jsx(uQ,{width:20,justifyContent:"center",as:"span",children:h.jsx(aH,{purpose:"removeComponentFromLibrary"})})},onClick:function(){return x(!0)},testId:"delete-view"}),j.addTags&&t.push({purpose:"addTags",renderIcon:function(){return h.jsx(uQ,{width:20,justifyContent:"center",as:"span",children:h.jsx(a9,{})})},onClick:function(){return C(!0)},testId:"add-tag"}),t);return h.jsxs(o.Fragment,{children:[h.jsx(gL,{show:b,onClose:function(e){r.onDelete(e)&&x(!1)},message:v("editor.delete_modal","You are deleting [[title]] from the Global Library",{title:a.attributes.displayTitle||0!==a.attributes.displayTitle.length?a.attributes.displayTitle:"Untitled View"})}),h.jsx(xv,{component:a,onClose:function(){return C(!1)},show:w,setTags:l.onChange}),j.delete&&!j.more&&h.jsx(py,{secondary:!0,onClick:function(){return x(!0)},disabled:r.disabled,children:v("editor.delete","Delete")}),j.more&&h.jsxs("div",{className:u5({position:"relative"}),ref:u,children:[h.jsx(py,{secondary:!0,onClick:function(){d()},children:v("editor.more","More")}),p&&h.jsx(uq,{onClose:function(){return f()},position:c,children:h.jsx(vX,{onClose:function(){return d()},cellOptions:S})})]}),j.addTags&&!j.more&&h.jsx(py,{secondary:!0,onClick:function(){return C(!0)},children:v("editor.add_tags","Add Tags")})]})},S4=function(e){var t,n=cn(),i=n.dashboard,r=n.dispatch,a=n.componentEditor,l=a_(),s=l.onlyViewTypes,u=l.queryEngineConfig,d=l.onEditorUpdate,c=o.useState(null),p=c[0],f=c[1],m=o.useState(!0),v=m[0],g=m[1],b=(t=et($().mark(function e(){return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cZ(0,s(null==i?void 0:i.dataSets[0])[0],null==i?void 0:i.dataSets[0],u,d));case 1:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});return o.useEffect(function(){var t,n=!0;return(t=et($().mark(function t(){var r,o;return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=null,o=!1,t.prev=2,t.next=5,jg(e.view);case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(2),eR(t.t0),t.abrupt("return");case 11:if(!e.view){t.next=16;break}return t.next=14,e.view(null==i?void 0:i.dataSets);case 14:o=null!==(r=t.sent);case 16:if(r){t.next=20;break}return t.next=19,b();case 19:r=t.sent;case 20:n&&(f(r),g(!o));case 21:case"end":return t.stop()}},t,null,[[2,7]])})),function(){return t.apply(this,arguments)})(),function(){n=!1}},[e.view]),o.useEffect(function(){p&&r({type:"startEditor",libraryIndex:null,component:p})},[JSON.stringify(p)]),null===a&&null===p?h.jsx(dr,{}):h.jsx(o.Fragment,{children:null!=a&&null!==p&&h.jsx(S3,en({},e,{getInitialComponent:b,currentView:p,initialComponentUndefined:v}))},JSON.stringify(p))},S3=function(e){var t=c0();return t?h.jsx("div",{"data-testid":"editor-app",children:h.jsx(mc,{id:"vizzly_editor-app_provider",children:h.jsx(S6,en({},e,{editor:t}))})}):h.jsx(dr,{})},S6=function(e){var t=e.editor,n=e.currentView,i=o.useState(!1),r=i[0],l=i[1],s=a.useContext(ju),u=cn(),d=u.dashboard,c=u.dispatch,p=a_().mode,f=o.useState(!1),m=f[0],v=f[1],g=ws();return o.useEffect(function(){if(n&&null!=s&&s.globalLibraries){var e,i=null==(e=function(e,t){if(!e)throw Error("No global libraries found.");return e.find(function(e){return e.library.views?e.library.views.find(function(e){return e.attributes.viewId===t}):null})}(null==s?void 0:s.globalLibraries,n.attributes.viewId))?void 0:e.library.customFields,r=d.dataSets.map(iq);i&&(function(e,t){[].concat(e).forEach(function(e){t[e.id]&&t[e.id].forEach(function(t){e.fields=[].concat(e.fields,[t])})})}(r,i),t.setDataSets(r))}},[JSON.stringify(n),JSON.stringify(null==s?void 0:s.globalLibraries)]),o.useEffect(function(){var t,n=S5.subscription((t=et($().mark(function t(n){return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("updateToGlobalLibraryStatus"===n.data.action&&n.data.state===Sc.SAVING&&l(!0),"updateToGlobalLibraryStatus"===n.data.action&&n.data.state===Sc.SAVED&&l(!1),"updateToGlobalLibraryStatus"!==n.data.action||n.data.state!==Sc.DELETED){t.next=10;break}return t.t0=c,t.next=6,e.getInitialComponent();case 6:t.t1=t.sent,t.t2={type:"startEditor",libraryIndex:null,component:t.t1},(0,t.t0)(t.t2),l(!1);case 10:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}));return function(){return n()}},[]),h.jsx(o.Fragment,{children:h.jsxs(la,{gap:"1rem",children:[h.jsx(uQ,{justifyContent:"flex-end",children:h.jsx("div",{children:h.jsxs(cM,{children:[h.jsx(S7,{deleteProps:{disabled:e.initialComponentUndefined||r,onDelete:function(e){return e&&n&&S5.publish({data:{action:"deleteComponentFromLibrary",component:n}}),!0}},addTagsProps:{onChange:function(e){t.component.attributes.tags=e}},view:n}),h.jsx(py,{primary:!0,onClick:function(){var n,i=t.dataSet.fields.filter(te),r=am(t.component,"admin"===p);e.onSave&&e.onSave(r),S5.publish({data:{action:"addComponentToLibrary",component:r,customFields:((n={})[r.attributes.dataSetId]=i,n)}})},disabled:null===t.component||r,children:"Save to Library"})]})})}),h.jsx(uM,{children:h.jsx(CY,{editor:t,ai:m,openAI:v,usingBeta:g,standalone:!0})})]})})},S8=o.createContext(void 0);(S0=SZ||(SZ={})).Admin="admin",S0.EndUser="endUser",(S1=S$||(S$={})).Read="read",S1.ReadWrite="read_write";var S9=(S2=et($().mark(function e(t,n){var i,r,o,a,l,s,u;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("exact"!=t.type){e.next=9;break}if((i=n.dashboards.find(function(e){return e.id===t.dashboardId})).permission){e.next=4;break}throw"";case 4:return eO("A specific dashboard has been requested. This will be rendered with",r=i.permission.scope,"scope.",t.dashboardId),e.abrupt("return",{dashboardId:t.dashboardId,mode:"read_write"===r&&null===i.parentDashboardId?SZ.Admin:SZ.EndUser,scope:r});case 9:if("instantCopyOf"!=t.type){e.next=29;break}if("read_write"!==(null==(o=(a=n.dashboards.find(function(e){return e.id===t.parentDashboardId})).permission)?void 0:o.scope)){e.next=15;break}return eO("Write access to the parent dashboard has been found, so this dashboard will be shown with admin access.",t.parentDashboardId),e.abrupt("return",{dashboardId:t.parentDashboardId,mode:SZ.Admin,scope:S$.ReadWrite});case 15:if(l=dY(t.parentDashboardId,n.dashboards),!(s=dX(l))){e.next=20;break}return eO("An existing child dashboard exists of the parent dashboard. As no specific dashboardId was provided, we will render the most recently updated child dashboard",s.id),e.abrupt("return",{dashboardId:s.id,mode:SZ.EndUser,scope:s.permission.scope});case 20:return eO("No previous child dashboard has been created on behalf of the current user for the parent dashboard",a.id,". Creating a child copy of the parent."),e.next=23,n.createDashboard({parentDashboardId:a.id,definition:dq(a),metadata:{}});case 23:if(u=e.sent){e.next=26;break}throw"Failed to create first child dashboard for the user.";case 26:return e.abrupt("return",{dashboardId:u.id,scope:S$.ReadWrite,mode:SZ.EndUser});case 29:throw"Unsupported strategy";case 30:case"end":return e.stop()}},e)})),function(e,t){return S2.apply(this,arguments)}),Fe=function(e){function t(){var t;return(t=e.call(this,"At least one data set must be built for the Vizzly dashboard to render.")||this).name="NoDataSetResolved",t}return ei(t,e),t}(ea(Error)),Ft=function(e,t){var n,i,r=o.useState({loading:!0,error:void 0,dashboards:[],globalLibraries:[]}),a=r[0],l=r[1],s=o.useRef(),u=s.current;o.useEffect(function(){var n,i=new AbortController;return(n=et($().mark(function n(){var r;return $().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,S5.load(e,{apiHost:(null==t?void 0:t.apiHost)||"https://api.vizzly.co"});case 3:return s.current=n.sent,n.next=6,Promise.all([s.current.getGlobalLibraries({abortController:i}),s.current.getDashboards({abortController:i})]);case 6:l({loading:!1,error:void 0,dashboards:(r=n.sent)[1],globalLibraries:r[0]}),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(0),eR("Error loading Vizzly",n.t0),l({loading:!1,error:n.t0,dashboards:[].concat(a.dashboards),globalLibraries:[].concat(a.globalLibraries)});case 16:case"end":return n.stop()}},n,null,[[0,12]])})),function(){return n.apply(this,arguments)})(),function(){return i.abort(new CN("We stopped loading Vizzly because of an abort signal triggered by an unmount"))}},[]);var d,c=(n=et($().mark(function n(){var i;return $().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=new AbortController,(function(){var n=et($().mark(function n(){var r;return $().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,S5.load(e,{apiHost:(null==t?void 0:t.apiHost)||"https://api.vizzly.co"});case 3:return s.current=n.sent,n.next=6,Promise.all([s.current.getGlobalLibraries({abortController:i}),s.current.getDashboards({abortController:i})]);case 6:l({loading:!1,error:void 0,dashboards:(r=n.sent)[1],globalLibraries:r[0]}),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(0),eR("Error loading Vizzly",n.t0),l({loading:!1,error:n.t0,dashboards:[].concat(a.dashboards),globalLibraries:[].concat(a.globalLibraries)});case 16:case"end":return n.stop()}},n,null,[[0,12]])}));return function(){return n.apply(this,arguments)}})()(),n.abrupt("return",function(){return i.abort(new CN("We stopped loading Vizzly because of an abort signal triggered by an unmount"))});case 4:case"end":return n.stop()}},n)})),function(){return n.apply(this,arguments)}),p=(i=et($().mark(function e(t){var n;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=15;break}return e.prev=1,e.next=4,u.createDashboard({definition:t.definition,parentDashboardId:t.parentDashboardId,metadata:t.metadata||t.meta,abortSignal:t.abortSignal});case 4:return l(en({},a,{dashboards:[].concat(a.dashboards,[n=e.sent])})),e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(1),eR(e.t0),e.abrupt("return",null);case 13:e.next=16;break;case 15:throw"Unable to create a dashboard when vizzly has not been loaded.";case 16:case"end":return e.stop()}},e,null,[[1,9]])})),function(e){return i.apply(this,arguments)});o.useEffect(function(){var n,i=new AbortController,r=(n=et($().mark(function n(){return $().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,S5.load(e,{apiHost:(null==t?void 0:t.apiHost)||"https://api.vizzly.co"});case 3:return s.current=n.sent,n.next=6,Promise.all([s.current.getGlobalLibraries({abortController:i})]);case 6:l(en({},a,{globalLibraries:n.sent[0]})),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),eR("Error loading Vizzly",n.t0),l({loading:!1,error:n.t0,dashboards:[].concat(a.dashboards),globalLibraries:[].concat(a.globalLibraries)});case 15:case"end":return n.stop()}},n,null,[[0,11]])})),function(){return n.apply(this,arguments)});if(u){var o=S5.subscription(function(e){"newViewsInGlobalLibrary"===e.data.action&&r()});return function(){return o()}}return function(){return i.abort(new CN("We stopped loading Vizzly because of an abort signal triggered by an unmount"))}},[u]);var f=(d=et($().mark(function e(t){var n;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=25;break}return l(en({},a,{updatingDashboard:!0})),e.prev=2,e.next=5,u.updateDashboard({dashboardId:t.dashboardId,definition:t.definition,deleted:t.deleted,metadata:t.metadata||t.meta,abortSignal:t.abortSignal});case 5:return n=e.sent,e.t0=l,e.t1=en,e.t2={},e.t3=a,e.next=12,u.getDashboards();case 12:return e.t4=e.sent,e.t5={dashboards:e.t4,updatingDashboard:!1},e.t6=(0,e.t1)(e.t2,e.t3,e.t5),(0,e.t0)(e.t6),e.abrupt("return",n);case 19:return e.prev=19,e.t7=e.catch(2),eR("Error updating dashboard",e.t7),e.abrupt("return",null);case 23:e.next=26;break;case 25:throw"Unable to update a dashboard when vizzly has not been loaded.";case 26:case"end":return e.stop()}},e,null,[[2,19]])})),function(e){return d.apply(this,arguments)});if(eO("useVizzly state.",a),!u||a.error||a.loading)return en({},a,{loading:!0,createDashboard:null,identityConfig:null,updateDashboard:null,queryEngineConfig:null,accessType:null,refetch:null});var m=u.getIdentityConfig();return en({},a,{loading:!1,identityConfig:m,createDashboard:p,updateDashboard:f,queryEngineConfig:u.getViewConfiguration().queryEngineConfig,accessType:m.dashboardAdminOverride?"admin":m.dashboardAccess.accessType,filterDashboards:S5.filterDashboards,refetch:c})},Fn=function(e){var t;return t=et($().mark(function t(n){return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({path:"/api/scheduled-report",method:"post",body:{cronSchedule:n.cronSchedule,dashboardAccessToken:n.dashboardAccessToken,scheduledReportId:n.scheduledReportId}});case 2:return t.abrupt("return",200==t.sent.status);case 5:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}},Fi=function(e){return e.map(function(e){return{name:e.name,description:e.description||"",fields:e.fields.map(function(e){var t=[],n=["none"];return"date_time"==e.dataType?n=[].concat(n,e.allowedGranularities||[]):t=[].concat(t,e.supportedAggregateOptions||[]),{name:e.publicName,description:e.description||"",canBeDimension:e.canBeDimension,canBeMeasure:e.canBeMeasure,availableFunctionsInSelect:t,availableFunctionsInGrouping:n}})}})},Fr=function(e,t){var n=s.cloneDeep(t);if("custom"===n.type)throw"Custom views are not supported by Vizzly AI.";var i,r,o,a=[],l=[],u=[],d={orWhereClauses:[]},c=[],p=[],f=n.displayTitle,m=n.displaySubject,h=n.limit;return"goalLines"in n&&(c=null==(i=n.goalLines)?void 0:i.map(function(e){return{value:e.value,color:e.color,strokeStyle:e.strokeStyle,strokeWidth:e.strokeWidth}})),"conditionalFormattingRules"in n&&Array.isArray(n.conditionalFormattingRules)&&(p=null==(r=n.conditionalFormattingRules)?void 0:r.map(function(e){return{color:e.ruleValue,field:e.filters[0][0].field,function:e.filters[0][0].function,op:e.filters[0][0].op,value:e.filters[0][0].value}})),"measure"in n&&(a=n.measure.map(function(t){return{field:iP(e,t.field).publicName,function:t.function}})),"dimension"in n&&(l=n.dimension.map(function(t){return{field:iP(e,t.field).publicName,function:t.function}})),"order"in n&&(u=n.order.map(function(t){return{field:iP(e,t.field).publicName,function:t.function,direction:t.direction}})),"filter"in n&&(d={orWhereClauses:null==(o=n.filter||[])?void 0:o.map(function(t){return{andWhereClauses:t.map(function(t){return{field:iP(e,t.field).publicName,function:t.function,op:t.op,value:t.value}})}})}),{title:f,subtitle:m,type:n.type,dataSetName:e.name,select:a,group:l,order:u,goalLines:c,conditionalFormatting:p,filter:d,limit:h}},Fo=function(e,t,n,i){var r,o,a,l,u,d,c,p,f,m=s.cloneDeep(t),h=iL(e,n.dataSetName);if(!h)throw"Failed to find data set by name";return"title"in n&&(m.displayTitle=n.title||m.displayTitle),"limit"in m&&"limit"in n&&(m.limit=n.limit),"filter"in m&&"filter"in n&&(m.filter=null==(d=(null==(c=n.filter)?void 0:c.orWhereClauses)||[])?void 0:d.map(function(e){return e.andWhereClauses.map(function(e){return{field:iR(h,e.field).id,function:e.function,op:e.op,value:e.value}})})),"subtitle"in n&&(m.displaySubject=n.subtitle||m.displaySubject),"measure"in m&&"select"in n&&(m.measure=(n.select||[]).map(function(e){return{field:iR(h,e.field).id,function:e.function}})),"dimension"in m&&"group"in n&&(m.dimension=(n.group||[]).map(function(e){return{field:iR(h,e.field).id,function:e.function}})),"goalLines"in m&&"goalLines"in n&&(m.goalLines=null==(p=n.goalLines)?void 0:p.map(function(e){return{strokeStyle:e.strokeStyle,strokeWidth:e.strokeWidth,color:e.color,value:e.value}})),"order"in m&&"order"in n&&(m.order=(n.order||[]).map(function(e){return{field:iR(h,e.field).id,function:e.function,direction:e.direction}})),"conditionalFormattingRules"in m&&"conditionalFormatting"in n&&(m.conditionalFormattingRules=null==(f=n.conditionalFormatting)?void 0:f.map(function(e){var t=iR(h,e.field);return{ruleType:"backgroundColor",ruleValue:e.color,filters:[[{field:t.id,function:e.function,op:e.op,value:e.value}]]}})),n.type&&t.type!=n.type&&(m=iA(n.type,{queryEngineConfig:i}).init(h.id,en({},m,{type:n.type}))),l=(a=iA((r=m).type,{queryEngineConfig:i}).schema.validate(r,{stripUnknown:{arrays:!0,objects:!0},allowUnknown:!1,abortEarly:!1})).error,u=a.value,l&&eP("AI attribute errors",l),u},Fa=function(e,t,n,i){if(!iL(i,e.ai_view.dataSetName))throw eP("The AI returned an invalid data set ID. This is likely due to a bug in the AI. Please contact support."),new CP;return{conversationId:e.conversation_id,attributes:Fo(i,t,e.ai_view,n),messageHistory:e.conversation_content.messages.map(function(e){return{id:e.id,content:e.content,reaction:e.reaction,sender_type:e.sender_type,sent_at:new Date(e.sent_at),status:e.status}})}};function Fl(e,t){if(200!=e){if(422==e||429==e)throw eO("askAi","AI usage limit reached",t),new CE(t.quota+" queries per hour allowed.");if(500===e&&t&&"reason"in t&&"Aborted"===t.reason)throw new CR;throw new CL}}var Fs,Fu,Fd=function(e){var t;return t=et($().mark(function t(n,i,r,o,a,l,s){var u,d,c,p;return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u=Fr(iE(a,i.dataSetId),i),t.next=3,e({path:"/api/ai",method:"post",body:{question:r,conversationId:n,currentAttributes:u,dataSets:Fi(a),dashboardAccessToken:o},abortSignal:s});case 3:return Fl((d=t.sent).status,c=d.body),p=Fa(c,i,l,a),t.abrupt("return",p);case 9:case"end":return t.stop()}},t)})),function(e,n,i,r,o,a,l){return t.apply(this,arguments)}},Fc=function(e){function t(t){var n;return(n=e.call(this,"Failed to save Vizzly config. Received status code "+t+".")||this).name="FailedToSaveVizzlyConfigVersion",n}return ei(t,e),t}(ea(Error)),Fp=((Fs={}).ConfigStore="cnf_",Fs.Project="prj_",Fs.KeyPair="kyp_",Fs.Dashboard="dsh_",Fs.ProjectApiKey="vizzly_project_api_key_",Fs),Ff=function(e){var t;return t=et($().mark(function t(n,i){var r;return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({path:"/api/v3/project/"+n+"/config",method:"post",body:{projectId:n,encryptedConfig:i},preFetchProjectAccessTokens:n?{projectId:n,resourceFilters:[Fp.Project,Fp.ConfigStore]}:void 0});case 2:if(200==(r=t.sent.status)){t.next=6;break}throw new Fc(r);case 6:return t.abrupt("return",200==r);case 7:case"end":return t.stop()}},t)})),function(e,n){return t.apply(this,arguments)}},Fm=function(e){var t;return t=et($().mark(function t(n){return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({path:"/api/v3/project/"+n+"/api-key",method:"post",body:{},preFetchProjectAccessTokens:{projectId:n,resourceFilters:[Fp.Project]}});case 2:return t.abrupt("return",t.sent.body.api_key);case 5:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}},Fh=function(e){var t;return t=et($().mark(function t(n,i,r){return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({path:"/api/v3/project/"+n+"/api-key/"+i,method:"put",body:en({},r),preFetchProjectAccessTokens:{projectId:n,resourceFilters:[Fp.Project,Fp.ProjectApiKey]}});case 2:return t.abrupt("return",t.sent.body.api_key);case 5:case"end":return t.stop()}},t)})),function(e,n,i){return t.apply(this,arguments)}},Fv=function(e){var t;return t=et($().mark(function t(n,i){var r,o,a;return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({path:"/api/ai/question-suggestions",method:"post",body:{dataSets:Fi(i),dashboardAccessToken:n}});case 2:if(Fl(a=(r=t.sent).status,o=r.body),200!=a){t.next=8;break}return t.abrupt("return",{suggestions:o.suggestions});case 8:throw"Failed to fetch question suggestions from AI.";case 9:case"end":return t.stop()}},t)})),function(e,n){return t.apply(this,arguments)}},Fg=function(e){var t;return t=et($().mark(function t(n){var i,r,o;return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i={},n&&(i={auth:"Bearer "+n}),t.next=4,e({path:"/api/v2/project/self-hosted-query-engine",method:"post",body:{},headers:i});case 4:return o=(r=t.sent).body,t.abrupt("return",200==r.status?o.project:void 0);case 8:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}},Fb=function(e){var t;return t=et($().mark(function t(n){var i,r,o;return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i={},n&&(i={auth:"Bearer "+n}),t.next=4,e({path:"/api/v2/project/self-hosted-dynamic-query-engine",method:"post",body:{},headers:i});case 4:return o=(r=t.sent).body,t.abrupt("return",200==r.status?o.project:void 0);case 8:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}},Fx=function(e){var t;return t=et($().mark(function t(n){var i,r,o;return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i={},n&&(i={auth:"Bearer "+n}),t.next=4,e({path:"/api/v2/project/self-hosted-in-browser",method:"post",body:{},headers:i});case 4:return o=(r=t.sent).body,t.abrupt("return",200==r.status?o.project:void 0);case 8:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}},Fy=function(e){var t;return t=et($().mark(function t(n,i,r){var o,a,l;return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o={},r&&(o={auth:"Bearer "+r}),t.next=4,e({path:"/api/v2/project/managed-query-engine/"+n+"/key-pairs/"+i,method:"get",headers:o});case 4:if(l=(a=t.sent).body,200!=a.status){t.next=9;break}return t.abrupt("return",{privateKey:l.keys.private_key,publicKey:l.keys.public_key});case 9:return t.abrupt("return",void 0);case 10:case"end":return t.stop()}},t)})),function(e,n,i){return t.apply(this,arguments)}},Fw=function(e){var t;return t=et($().mark(function t(n,i,r,o){return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({path:"/api/ai/conversation/"+n+"/message/"+i,method:"post",body:{reaction:o.reaction,dashboardAccessToken:r}});case 2:return t.abrupt("return",FC(t.sent));case 4:case"end":return t.stop()}},t)})),function(e,n,i,r){return t.apply(this,arguments)}},FC=function(e){if(200===e.status)return{success:!0};throw Error("AI Action failed")},Fj={name:"1gqeage",styles:"margin-right:0.75rem"},FS=function(e){return h.jsx("div",{children:h.jsxs("span",{children:[h.jsxs("span",{css:Fj,children:[!0===e.status&&h.jsx(F_,{}),!1===e.status&&h.jsx(FA,{}),null===e.status&&h.jsx(FO,{})]}),!0===e.status&&e.successMessage,!1===e.status&&e.errorMessage,null===e.status&&e.unknownMessage]})})},FF={name:"5edt7z",styles:"display:grid;grid-template-columns:repeat(1, minmax(0, 1fr));> :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse));}"},Fk=function(e){var t=e.statusReport.configs.flatMap(function(e){return e.connections});return h.jsxs("div",{css:FF,children:[h.jsx(FS,{status:s.every(e.statusReport.configs,function(e){return null===e.validationErrorDetails}),successMessage:"All configs are valid",errorMessage:"Not all configs are valid",unknownMessage:"We did not run any config validation checks"}),h.jsx(FS,{status:t.length>0?s.every(t,function(e){return!!e.pingResult}):null,successMessage:"All connection checks passed",errorMessage:"Not all connection checks passed",unknownMessage:"We did not run a connection check"}),h.jsx(FS,{status:!!e.statusReport.projectId||null,successMessage:"Valid project ID",errorMessage:"Failed to find your project ID. Please ensure the VIZZLY_PROJECT_ID environment variable has been set",unknownMessage:"Failed to find your project ID. Please ensure the VIZZLY_PROJECT_ID environment variable has been set"}),h.jsx(FS,{status:!0,successMessage:"Using configs from "+eC(e.statusReport.configs.flatMap(function(e){return 0===e.connections.length&&0===e.dataSets.length&&0===e.publicKeys.length&&0===e.sqlViews.length?[]:[e.source.name]}))+".",errorMessage:"Failed to load configs",unknownMessage:"Failed to load configs"})]})},FT={name:"opr68x",styles:"display:inline-block;height:1.5rem;width:1.5rem"},F_=function(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",css:FT,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},FI={name:"opr68x",styles:"display:inline-block;height:1.5rem;width:1.5rem"},FA=function(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",css:FI,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})})},FD={name:"opr68x",styles:"display:inline-block;height:1.5rem;width:1.5rem"},FO=function(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",css:FD,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},FE=(Fu=et($().mark(function e(t,n){var i,r,o;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=y2(t),e.next=3,i({path:"/api/v2/status",method:"post",mode:"cors",abortSignal:n,body:{}});case 3:return o=(r=e.sent).body,e.abrupt("return",200==r.status?o:null);case 7:case"end":return e.stop()}},e)})),function(e,t){return Fu.apply(this,arguments)}),FL=function(e){var t=h.jsx("code",{style:{background:"rgba(0, 0, 0, 0.05)",borderRadius:"5px",padding:"2px 5px"},children:e.children});return e.href?h.jsx("a",{target:"_blank",href:e.href,children:t}):t},FP={name:"n4q3vn",styles:"margin-bottom:1.5rem;margin-top:1.5rem;border-radius:0.5rem;--tw-bg-opacity:1;background-color:rgb(243 245 249 / var(--tw-bg-opacity));padding:0.75rem"},FR={name:"1flj9lk",styles:"text-align:left"},FN={name:"1u8s3xj",styles:"margin-bottom:0.75rem;font-weight:700"},FM={name:"1gok8e8",styles:"margin-bottom:0.5rem"},Fz={name:"1f0dvzm",styles:"margin-top:1.5rem;text-align:right"},Fq={name:"y5vlkk",styles:"margin-top:0.75rem;width:100%;border-radius:0.5rem;--tw-bg-opacity:1;background-color:rgb(243 245 249 / var(--tw-bg-opacity));padding:0.75rem;text-align:left"},FB={name:"1u8s3xj",styles:"margin-bottom:0.75rem;font-weight:700"},FV={name:"12q5llh",styles:"margin-top:0.5rem;text-align:right"},FW={name:"fevti5",styles:"margin-bottom:0.75rem;margin-top:0.75rem;font-weight:700"},FH=function(e){var t=o.useState(void 0),n=t[0],i=t[1];return o.useEffect(function(){var t,r=new AbortController;return"query-engine"==e.implementationMeta.type&&e.implementationMeta.queryEngineEndpoint&&(t=et($().mark(function e(t){var o,a;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=setTimeout(function(){r.signal.aborted||void 0!==n||(r.abort(),i(null))},2e3),e.prev=1,e.next=4,FE(t,r.signal);case 4:a=e.sent,clearTimeout(o),i(a||null),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),i(null);case 12:case"end":return e.stop()}},e,null,[[1,9]])})),function(e){return t.apply(this,arguments)})(e.implementationMeta.queryEngineEndpoint),function(){r.abort("Setup notice unmounted")}},[]),h.jsx(fk,{title:"Vizzly set up",renderExtra:function(){return h.jsxs("div",{style:{width:"650px"},children:[e.helpSections.map(function(e,t){return h.jsxs("div",{css:FP,children:[h.jsxs("div",{css:FR,children:[h.jsx("h2",{css:FN,className:""+or.text,children:e.title}),e.text.map(function(e,t){return h.jsx("p",{css:FM,className:""+or.text,children:e},t)})]}),e.callToAction&&h.jsx("div",{css:Fz,children:h.jsx("a",{target:"_blank",href:e.callToAction.link,children:h.jsx(py,{children:e.callToAction.text})})})]},t)}),void 0!==n&&h.jsxs("div",{css:Fq,children:[null===n&&h.jsxs(h.Fragment,{children:[h.jsx("h2",{css:FB,className:""+or.text,children:"Vizzly Query Engine not found"}),h.jsxs("p",{className:""+or.text,children:["If you have deployed the Vizzly Query Engine, then please set the ",h.jsx(FL,{children:"queryEngineEndpoint"})," ","property to the URL where it is deployed too."]}),h.jsx("div",{css:FV,children:h.jsx("a",{target:"_blank",href:"https://docs.vizzly.co/query-engines/self-hosted-query-engine",children:h.jsx(py,{children:"Deploy the Query Engine"})})})]}),n&&h.jsxs(h.Fragment,{children:[h.jsx("h2",{css:FW,className:""+or.text,children:"Query engine status"}),h.jsx(Fk,{statusReport:n})]})]})]})}})},FY=function(e){return h.jsx(FH,{implementationMeta:e.implementationMeta,helpSections:[{title:"Identity",callToAction:{link:"https://docs.vizzly.co/dashboard/properties/identity",text:"Set up identity"},text:[h.jsxs(h.Fragment,{children:["We need to replace the current placeholder ",h.jsx(FL,{children:"identity"})," function with your own identity logic."]}),"Typically, this is an HTTPS call to your servers to retrieve the Vizzly identity tokens."]}]})},FG=function(e){return h.jsx(FH,{implementationMeta:e.implementationMeta,helpSections:[{title:"Identity",callToAction:{link:"https://docs.vizzly.co/dashboard/properties/identity",text:"See the docs"},text:["The async identity function must return the Vizzly access tokens in the correct format."]}]})},FU=function(e){var t=[];switch(e.implementationMeta.type){case"custom":case"in-browser":t=[h.jsxs(h.Fragment,{children:["The ",h.jsx(FL,{href:"https://docs.vizzly.co/dashboard/properties/dataSets",children:"dataSets"}),"function must provide at least one data set"]})];break;case"query-engine":t=[h.jsx(h.Fragment,{children:"To start using the Vizzly dashboard, you must add a data set to the Vizzly Query Engine."}),h.jsx(h.Fragment,{children:"If you have already done this, check the `dataSets` value in your identity token to make sure it allows at least one data set to be returned."})]}return h.jsx(FH,{implementationMeta:e.implementationMeta,helpSections:[{title:"At least one data set must be provided",callToAction:{link:"https://docs.vizzly.co/dashboard/properties/dataSets",text:"See the docs"},text:t}]})},FK=function(e){return h.jsx(FH,{implementationMeta:e.implementationMeta,helpSections:[{title:"We did not fetch your data sets.",callToAction:{link:"https://docs.vizzly.co/dashboard/properties/dataSets",text:"See the docs"},text:[h.jsxs(h.Fragment,{children:["If you are using the Vizzly Query Engine, then you will need to set the"," ",h.jsx(FL,{href:"https://docs.vizzly.co/dashboard/properties/queryEngineEndpoint",children:"queryEngineEndpoint"})," ","property on the dashboard."]}),h.jsxs(h.Fragment,{children:["Alternatively, if you are not using the Vizzly Query Engine, then the"," ",h.jsx(FL,{href:"https://docs.vizzly.co/dashboard/properties/dataSets",children:"dataSets"})," property is required, and it must be an async function."]})]}]})},FX={name:"185o5ba",styles:"text-decoration-line:underline"},FQ=function(e){return h.jsx(FH,{implementationMeta:e.implementationMeta,helpSections:[{title:"Query Engine Endpoint",callToAction:{link:"https://docs.vizzly.co/dashboard/properties/queryEngineEndpoint",text:"See the docs"},text:[h.jsxs(h.Fragment,{children:["Incorrect ",h.jsx(FL,{children:"queryEngineEndpoint"})," value",e.invalidEndpoint?" ("+JSON.stringify(e.invalidEndpoint)+")":"",". Please deploy the"," ",h.jsx("a",{css:FX,href:"https://docs.vizzly.co/query-engines/self-hosted",children:"Vizzly Query Engine"}),", and then provide the URL to it as a string, or as an object with a string host value."]})]}]})},FJ=function(e){return h.jsx(FH,{implementationMeta:e.implementationMeta,helpSections:[{title:"Identity",callToAction:{link:"https://docs.vizzly.co/dashboard/properties/identity",text:"See the docs"},text:[h.jsxs(h.Fragment,{children:[h.jsx(FL,{children:"identity"})," must be an async function that returns your Vizzly identity tokens."]})]}]})},FZ=function(e){eR(e.error);var t=h.jsx("p",{children:"Unknown error"});return e.error instanceof Fe&&(t=h.jsx(FU,{implementationMeta:e.implementationMeta})),e.error instanceof jE&&(t=h.jsx(FK,{implementationMeta:e.implementationMeta})),e.error instanceof yQ&&(t=h.jsx(FQ,{implementationMeta:e.implementationMeta,invalidType:!0})),e.error instanceof yX&&(t=h.jsx(FQ,{implementationMeta:e.implementationMeta,invalidEndpoint:e.error.invalidEndpoint})),e.error instanceof jD&&(t=h.jsx(FJ,{implementationMeta:e.implementationMeta})),e.error instanceof jw&&(t=h.jsx(fL,{})),e.error instanceof jC&&(t=h.jsx(FG,{implementationMeta:e.implementationMeta})),e.error instanceof yK&&(t=h.jsx(fA,{})),e.error instanceof jO&&(t=h.jsx(fD,{})),e.error instanceof i0&&(t=h.jsx(FY,{implementationMeta:e.implementationMeta})),e.error instanceof CN&&(t=h.jsx(dr,{override:e.renderLoadingComponent})),h.jsxs(lg,{children:[h.jsx(iZ,{}),t]})},F$=function(e){var t=o.useState(0),n=t[0],i=t[1];return aF(function(e){e.reload&&(eO("Received from vizzlyState, `reload()`"),i(function(e){return e+1}))},e.id),m.createElement(F0,en({},e,{key:e.parentDashboardId+"_"+e.dashboardId+"_"+n}))},F0=function(e){var t,n,r,a,l,s,u,d,c,p="runQueries"in e?{type:"custom",queryEngineEndpoint:e.queryEngineEndpoint}:"data"in e?{type:"in-browser",queryEngineEndpoint:e.queryEngineEndpoint}:{type:"query-engine",queryEngineEndpoint:e.queryEngineEndpoint},f=e.vizzlyApiHost?{host:e.vizzlyApiHost}:{host:"https://api.vizzly.co"},m=(s=y1(f),{config:f,getParentDashboards:et($().mark(function e(){var t,n;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({path:"/api/v2/parent-dashboards",method:"get"});case 2:if(n=(t=e.sent).body,200!=t.status){e.next=7;break}return e.abrupt("return",n.dashboards.map(function(e){return{id:e.id,created_at:e.created_at,updated_at:e.updated_at,webhook_id:e.webhook_id}}));case 7:return e.abrupt("return",void 0);case 8:case"end":return e.stop()}},e)})),saveScheduledReport:Fn(s),askAi:Fd(s),aiActions:Fw(s),askAiForQuestionSuggestions:Fv(s),createVizzlyConfigVersion:Ff(s),createProjectApiKey:Fm(s),updateProjectApiKey:Fh(s),getProjectAccessToken:y$(s),createSelfHostedQueryEngineProject:Fg(s),createSelfHostedDynamicQueryEngineProject:Fb(s),createSelfHostedInBrowserQueryEngineProject:Fx(s),getManagedQueryEngineKeyPair:Fy(s)}),v=function(t,n,i){var r;return iS(t,n,i,e.textOverrides,"object"==typeof e.developerTools&&!0===(null==(r=e.developerTools)?void 0:r.translationKeys))},g=function(e){var t,n=Ft({queryEngine:e.queryEngine,identity:e.identityCallback,dataSets:e.loadDataSetsCallback,programmaticDashboard:e.programmaticDashboard},{apiHost:e.apiConfig.host}),i=function(e,t,n){var i=o.useState(),r=i[0],a=i[1];if(o.useEffect(function(){var n;(n=et($().mark(function n(){var i,o,l,s;return $().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("dashboards"in t){n.next=2;break}return n.abrupt("return");case 2:if(e){n.next=4;break}return n.abrupt("return");case 4:if(!t.loading){n.next=6;break}return n.abrupt("return");case 6:return n.next=8,S9(e,t);case 8:o=(i=n.sent).mode,s=i.scope,(l=i.dashboardId)!=(null==r?void 0:r.dashboardId)&&a({mode:o,dashboardId:l,scope:s});case 13:case"end":return n.stop()}},n)})),function(){return n.apply(this,arguments)})()},[JSON.stringify({strategy:e,loading:t.loading})]),!("dashboards"in t)||!r||t.loading)return null;var l=t.dashboards.find(function(e){return e.id==r.dashboardId})||null;return{mode:r.mode,dashboard:l,scope:r.scope,isProgrammaticParent:!!n}}(function(e,t,n,i){if("dashboards"in e&&!(e.loading||e.error||i&&0===e.dashboards.length)){var r,o,a=function(e,t,n){if(e){var i=dQ(n,e);if(null!=i&&i.parentDashboardId)throw"[Vizzly] `parentDashboardId` value must specify an ID for a parent dashboard.";return e}var r=dG(n);return d0(r)||t||dU(r).id}(t,e.identityConfig.dashboardAccess.dashboardId,e.dashboards);if("admin"==e.accessType){eO("Admin access found, so we will show the parent dashboard.",a);var l=a;if(n){var s=e.dashboards.find(function(e){return e.id==n});null!=s&&s.parentDashboardId&&(eO("A child dashboard was provided whilst in admin mode. Therefore the parent of the given child will be shown to administer.",s.parentDashboardId),l=s.parentDashboardId)}return{type:"exact",dashboardId:l}}return n?(eO("Strategy will be to show dashboard",n),{type:"exact",dashboardId:n}):1===e.dashboards.filter(function(e){return null!=e.parentDashboardId}).length&&"read"==e.identityConfig.dashboardAccess.scope?(eO("Strategy will be to show read-only view of the only child dashboard. If you wish to render a read-only view of the parent dashboard, please make sure the `dashboardId` property matches the `parentDashboardId` property.",a),{type:"exact",dashboardId:e.dashboards.find(function(e){return null!=e.parentDashboardId}).id}):"read"==e.identityConfig.dashboardAccess.scope&&a?(eO("Strategy will be to return read-only view of the parent dashboard.",a),{type:"exact",dashboardId:a}):e.identityConfig.dashboardAccess.dashboardId?(eO("Strategy will be to show a child of the parent dashboard determined by the identity config",null==(r=e.identityConfig.dashboardAccess)?void 0:r.dashboardId),{type:"instantCopyOf",parentDashboardId:null==(o=e.identityConfig.dashboardAccess)?void 0:o.dashboardId}):(eO("Strategy will be to show a child of the parent dashboard",a),{type:"instantCopyOf",parentDashboardId:a})}}(n,e.parentDashboardId,e.dashboardId,e.isEditor),n,e.programmaticDashboard);if(!n)return null;if("error"in n&&n.error)return{error:n.error};if("loading"in n&&n.loading||!("dashboards"in n))return null;var r=n.identityConfig,a=n.queryEngineConfig;return i?0===((null==i||null==(t=i.dashboard)?void 0:t.dataSets)||[]).length?{error:new Fe}:{vizzly:n,scope:i.scope,queryEngineConfig:a,dashboard:i.dashboard,identityConfig:r,mode:i.mode,vizzlyApiConfig:e.apiConfig,isProgrammaticParent:i.isProgrammaticParent,globalLibraries:n.globalLibraries}:null}({dashboardId:e.dashboardId,parentDashboardId:e.parentDashboardId,queryEngine:e.queryEngineConfig||e.queryEngineEndpoint,identityCallback:e.identity,loadDataSetsCallback:e.dataSets,apiConfig:f,implementationMeta:p,programmaticDashboard:e.parentDashboard,textOverride:v,isEditor:e.isEditor});if(d=e.onDashboardLoad,o.useEffect(function(){var e;g&&"dashboard"in g&&null!=g&&null!=(e=g.dashboard)&&e.id&&(null==d||d({id:g.dashboard.id,metadata:g.dashboard.metadata,scope:g.scope,dataSets:g.dashboard.dataSets}))},[JSON.stringify({loaded:!!g,dashboardId:g&&"dashboard"in g&&(null==g||null==(c=g.dashboard)?void 0:c.id)})]),null===g)return h.jsx(dr,{override:e.renderLoadingComponent});if("error"in g)return h.jsx(FZ,{renderLoadingComponent:e.renderLoadingComponent,implementationMeta:p,error:g.error});if(!g.dashboard)return h.jsx(dr,{override:e.renderLoadingComponent});var b,x,y,w,C,j,S,F=(b=et($().mark(function e(t,n){return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("Schedule reports coming soon.");case 1:case"end":return e.stop()}},e)})),function(e,t){return b.apply(this,arguments)}),k=(x=et($().mark(function e(t,n){return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"read_write"==g.scope&&g.vizzly.updateDashboard({dashboardId:t.id,definition:dq(t),abortSignal:n});case 1:case"end":return e.stop()}},e)})),function(e,t){return x.apply(this,arguments)}),T=(y=et($().mark(function e(){var t;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===g||!("dashboard"in g)||null===g.dashboard){e.next=4;break}return t=dZ(g.dashboard,g.vizzly.dashboards,g.dashboard.parentDashboardId),k(t),e.abrupt("return",t);case 4:return e.abrupt("return",null);case 5:case"end":return e.stop()}},e)})),function(){return y.apply(this,arguments)}),_=(null==(r=g.identityConfig)||null==(r=r.queryEngineAccessConfig)?void 0:r.allowDatabaseSchemaAccess)&&"query-engine"==p.type,I=null!=(a=e.dateFilterOptions)?a:e.dateTimeFilterOptions,A=SX(g.identityConfig,g.queryEngineConfig,aw(v,I),e.runQueries,e.data,e.queryEngineEndpoint),D=(w=et($().mark(function e(t,n,i){return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g.dashboard||!g.dashboard.permission){e.next=4;break}return e.next=3,m.aiActions(t,n,g.dashboard.permission.token,i);case 3:return e.abrupt("return",e.sent);case 4:throw"Dashboard has not yet been loaded.";case 5:case"end":return e.stop()}},e)})),function(e,t,n){return w.apply(this,arguments)}),O=(C=et($().mark(function e(t,n,i,r){return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g.dashboard||!g.dashboard.permission){e.next=4;break}return e.next=3,m.askAi(n,i,t,g.dashboard.permission.token,g.dashboard.dataSets,g.queryEngineConfig,r);case 3:return e.abrupt("return",e.sent);case 4:throw"Dashboard has not yet been loaded.";case 5:case"end":return e.stop()}},e)})),function(e,t,n,i){return C.apply(this,arguments)}),E=(j=et($().mark(function e(){return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g.dashboard||!g.dashboard.permission){e.next=6;break}return e.next=3,m.askAiForQuestionSuggestions(g.dashboard.permission.token,g.dashboard.dataSets);case 3:return e.abrupt("return",e.sent.suggestions);case 6:throw"Dashboard has not yet been loaded.";case 7:case"end":return e.stop()}},e)})),function(){return j.apply(this,arguments)});return h.jsx(S8.Provider,{value:en({},e,{onSave:k}),children:h.jsx(jc,{trackEvent:e.trackEvent,dashboardBehaviour:{id:e.id,isProgrammaticParent:g.isProgrammaticParent,mode:g.mode,scope:g.scope,dateFilterOptions:I,numberFormatOptions:null==e?void 0:e.numberFormatOptions,dateTimeFormatOptions:null==e?void 0:e.dateTimeFormatOptions,onEditorUpdate:null==e?void 0:e.onEditorUpdate,onScheduledReportChange:F,reportScheduleOptions:e.reportScheduleOptions,dataPanel:e.dataPanel,formatPanel:e.formatPanel,maxCSVDownloadLimit:e.maxCSVDownloadLimit,textOverrides:e.textOverrides,developerTools:e.developerTools,dashboardFilters:e.dashboardFilters,onDashboardFilterChange:e.onDashboardFilterChange,onSave:k,onOpenConfigManagerUi:_?function(){var e,t,n,r,o;_&&"query-engine"===p.type&&p.queryEngineEndpoint&&(window.location.href=(t=p.queryEngineEndpoint,(n=null==(e=g.identityConfig.queryEngineAccessConfig)?void 0:e.signature)?(r=JSON.stringify({queryEngineAccessToken:n,projectAccessToken:void 0}),o="object"==typeof window&&window&&window.btoa?window.btoa(r):i.from(r).toString("base64"),yZ(y3(t),"/sign-in#"+o)):""))}:void 0,organizationName:e.organizationName,featureToggles:e.featureToggles,customViews:e.customViews,componentOverrides:{renderCloseIcon:e.renderCloseIcon||null,renderDeleteIcon:e.renderDeleteIcon||null,renderFilterIcon:e.renderFilterIcon||null,renderParametersIcon:e.renderParametersIcon||null,renderLoadingComponent:e.renderLoadingComponent||null,renderDownloadIcon:e.renderDownloadIcon||null,renderEditIcon:e.renderEditIcon||null,renderComponentOptionsMenuIcon:e.renderComponentOptionsMenuIcon||null,renderLockedIcon:e.renderLockedIcon||null,renderLibraryIcon:e.renderLibraryIcon||null,renderAccordionIcon:e.renderAccordionIcon||null,renderButtonComponent:e.renderButtonComponent||null,renderSelectComponent:e.renderSelectComponent||null,renderDateTimeRangeInput:e.renderDateTimeRangeInput||null,renderDateTimeInput:e.renderDateTimeInput||null,renderReportIcon:e.renderReportIcon||null,renderSendIcon:e.renderSendIcon||null,renderUserIcon:e.renderUserIcon||null,renderAIChatIcon:e.renderAIChatIcon||null,renderAIIcon:e.renderAIIcon||null,renderThumbsUpUnselectedIcon:e.renderThumbsUpUnselectedIcon||null,renderThumbsUpSelectedIcon:e.renderThumbsUpSelectedIcon||null,renderThumbsDownUnselectedIcon:e.renderThumbsDownUnselectedIcon||null,renderThumbsDownSelectedIcon:e.renderThumbsDownSelectedIcon||null,renderSelectIcon:e.renderSelectIcon||null,renderBackButtonArrowIcon:e.renderBackButtonArrowIcon||null,renderStopIcon:e.renderStopIcon||null,renderTagIcon:e.renderTagIcon||null,renderSwitchIcon:e.renderSwitchIcon||null,renderCheckIcon:e.renderCheckIcon||null,renderResetIcon:e.renderResetIcon||null,renderSavingComponent:e.renderSavingComponent||null,renderDrilldownIcon:e.renderDrilldownIcon||null},queryEngineConfig:g.queryEngineConfig,disableToolbar:null==e?void 0:e.disableToolbar,cascadeFilterSelection:null==e?void 0:e.cascadeFilterSelection,textOverride:v,pdfSettings:null==e?void 0:e.pdfSettings,labelFormat:null==e?void 0:e.labelFormat,filterLibrary:null==e?void 0:e.filterLibrary,nullValueAlias:null==e?void 0:e.nullValueAlias,valueAlias:null==e?void 0:e.valueAlias},ai:{onAction:D,onAsk:O,fetchSuggestions:E},onDashboardUpdate:null==e?void 0:e.onDashboardUpdate,dashboard:g.dashboard,runQueriesCallback:A,implementationMeta:p,identityConfig:g.identityConfig,includeComponents:null==e?void 0:e.includeComponents,excludeComponents:null==e?void 0:e.excludeComponents,onReset:T,onError:null==e?void 0:e.onError,theme:e.theme,vizzlyApiConfig:f,onViewClick:null==e?void 0:e.onViewClick,renderTableCell:null==e?void 0:e.renderTableCell,editor:e.isEditor?{globalLibraries:g.globalLibraries}:void 0,updatingDashboard:null!=(l=g.vizzly.updatingDashboard)&&l,children:null==e?void 0:e.children})})},F1=["view"],F2=function(e){return h.jsxs(ec,{renderOnError:function(){return h.jsx("p",{children:"Unexpected error."})},onError:function(t,n){return(null==e?void 0:e.onError)&&(null==e?void 0:e.onError(t,n))},children:[h.jsx(iZ,{}),h.jsx(F$,en({},e,{children:h.jsx(ja,{})}))]})},F5=function(e){var t=el(e,F1);return h.jsxs(ec,{renderOnError:function(){return h.jsx("p",{children:"Unexpected error."})},onError:function(t,n){return(null==e?void 0:e.onError)&&(null==e?void 0:e.onError(t,n))},children:[h.jsx(iZ,{}),h.jsx(F$,en({},t,{featureToggles:en({},t.featureToggles,{disableAutoSave:!0}),parentDashboard:et($().mark(function e(){var t;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new S5.Dashboard("vizzly_editor",{display:[new S5.Header("Editor")],customFields:{}}),e.abrupt("return",[t.build()]);case 2:case"end":return e.stop()}},e)})),isEditor:!0,children:h.jsx(S4,en({},e))}))]})};t.ZP={Dashboard:F2,Editor:F5,NewVizzlyImplementation:i0,displayPositions:{FIRST_ROW:0,SECOND_ROW:1,THIRD_ROW:2,FOURTH_ROW:3,FIFTH_ROW:4,FIRST_CELL:0,SECOND_CELL:1,THIRD_CELL:2,FOURTH_CELL:3,FIFTH_CELL:4},DataSetField:{__proto__:null,number:iU,string:iG,boolean:iK,dateTime:iX,InBrowser:{string:function(e,t,n){return void 0===n&&(n={}),iG(d.QueryEngineConfig.getQueryEngineConfig("js"),e,t,n)},number:function(e,t,n){return void 0===n&&(n={}),iU(d.QueryEngineConfig.getQueryEngineConfig("js"),e,t,n)},boolean:function(e,t,n){return void 0===n&&(n={}),iK(d.QueryEngineConfig.getQueryEngineConfig("js"),e,t,n)},stringArray:function(e,t,n){var i,r,o,a;return void 0===n&&(n={}),i=d.QueryEngineConfig.getQueryEngineConfig("js"),void 0===(a=n)&&(a={}),iY(i,"string[]",e,t,a)},dateTime:function(e,t,n){return void 0===n&&(n={}),iX(d.QueryEngineConfig.getQueryEngineConfig("js"),e,t,n)}}}}}}]);